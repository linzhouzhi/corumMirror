/*
 * GoJS v1.7.7 JavaScript Library for HTML Diagrams
 * Northwoods Software, https://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2017 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: https://gojs.net/1.7.7/doc/license.html.
 */
(function (window) {
    var g, da = {};
    if (!window.document || void 0 === window.document.createElement("canvas").getContext)throw window.console && window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."), Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");
    if (!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
    Function.prototype.bind || (Function.prototype.bind = function (a) {
        function b() {
            return f.apply(a, e.concat(d.call(arguments)))
        }

        function c() {
        }

        var d = Array.prototype.slice, e = d.call(arguments, 1), f = this;
        c.prototype = this.prototype;
        b.prototype = new c;
        return b
    });
    (function () {
        for (var a = 0, b = ["ms", "moz", "webkit", "o"], c = 0; c < b.length && !window.requestAnimationFrame; ++c)window.requestAnimationFrame = window[b[c] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[b[c] + "CancelAnimationFrame"] || window[b[c] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function (b) {
            var c = (new Date).getTime(), f = Math.max(8, 16 - (c - a)), h = window.setTimeout(function () {
                b(c + f)
            }, f);
            a = c + f;
            return h
        });
        window.cancelAnimationFrame || (window.cancelAnimationFrame =
            function (a) {
                window.clearTimeout(a)
            })
    })();
    da.Debug = null;
    var w = {
        jd: 1,
        Qc: 2,
        Zc: 4,
        Yc: 8,
        Dn: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("534.30") && 0 < window.navigator.userAgent.indexOf("Android"),
        qI: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 9.0"),
        gF: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 10.0"),
        hF: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Trident/7"),
        UK: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Edge/"),
        Ek: void 0 !== window.navigator && void 0 !==
        window.navigator.platform && 0 <= window.navigator.platform.toUpperCase().indexOf("MAC"),
        iF: void 0 !== window.navigator && void 0 !== window.navigator.platform && null !== window.navigator.platform.match(/(iPhone|iPod|iPad)/i),
        tE: function (a, b, c) {
            var d = -1;
            return function () {
                var e = this, f = arguments;
                -1 !== d && w.clearTimeout(d);
                d = w.setTimeout(function () {
                    d = -1;
                    c || a.apply(e, f)
                }, b);
                c && !d && a.apply(e, f)
            }
        },
        setTimeout: function (a, b) {
            return window.setTimeout(a, b)
        },
        clearTimeout: function (a) {
            window.clearTimeout(a)
        },
        createElement: function (a) {
            return window.document.createElement(a)
        },
        k: function (a) {
            throw Error(a);
        },
        la: function (a, b) {
            var c = "The object is frozen, so its properties cannot be set: " + a.toString();
            void 0 !== b && (c += "  to value: " + b);
            w.k(c)
        },
        G: function (a, b, c, d) {
            a instanceof b || (c = w.getTypeName(c), void 0 !== d && (c += "." + d), w.wd(a, b, c))
        },
        j: function (a, b, c, d) {
            typeof a !== b && (c = w.getTypeName(c), void 0 !== d && (c += "." + d), w.wd(a, b, c))
        },
        Ed: function (a, b, c) {
            "number" === typeof a && isFinite(a) || (b = w.getTypeName(b), void 0 !== c && (b += "." + c), w.k(b + " must be a real number type, and not NaN or Infinity: " +
                a))
        },
        mb: function (a, b, c, d) {
            a instanceof ea && a.De === b || (c = w.getTypeName(c), void 0 !== d && (c += "." + d), w.wd(a, "a constant of class " + w.hf(b), c))
        },
        tK: function (a, b) {
            "string" === typeof a ? fa(a) || w.k('Color "' + a + '" is not a valid color string for ' + b) : a instanceof ga || w.k("Value for " + b + " must be a color string or a Brush, not " + a)
        },
        wd: function (a, b, c, d) {
            b = w.getTypeName(b);
            c = w.getTypeName(c);
            void 0 !== d && (c += "." + d);
            "string" === typeof a ? w.k(c + " value is not an instance of " + b + ': "' + a + '"') : w.k(c + " value is not an instance of " +
                b + ": " + a)
        },
        Ea: function (a, b, c, d) {
            c = w.getTypeName(c);
            void 0 !== d && (c += "." + d);
            w.k(c + " is not in the range " + b + ": " + a)
        },
        hd: function (a) {
            w.k(w.hf(a) + " constructor cannot take any arguments.")
        },
        Na: function (a) {
            w.k("Collection was modified during iteration: " + a.toString() + "\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")
        },
        Ej: function (a, b) {
            w.k("No property to set for this enum value: " + b + " on " + a.toString())
        },
        trace: function (a) {
            window.console && window.console.log(a)
        },
        $w: {},
        Gt: function (a, b) {
            !0 !== w.$w[a] && (w.$w[a] = !0, window.console && window.console.log(a + " is deprecated in " + b + ", see the GoJS change log for more information."))
        },
        Qa: function (a) {
            return "object" === typeof a && null !== a
        },
        isArray: function (a) {
            return Array.isArray(a) || a instanceof NodeList || a instanceof HTMLCollection
        },
        rI: function (a) {
            return Array.isArray(a)
        },
        Qz: function (a, b, c) {
            w.isArray(a) || w.wd(a, "Array or NodeList or HTMLCollection", b, c)
        },
        Ya: function (a) {
            return a.length
        },
        Hl: function (a) {
            return Array.prototype.slice.call(a)
        },
        Da: function (a, b) {
            Array.isArray(a);
            return a[b]
        },
        jE: function (a, b, c) {
            Array.isArray(a) ? a[b] = c : w.k("Cannot replace an object in an HTMLCollection or NodeList at " + b)
        },
        El: function (a, b) {
            if (Array.isArray(a))return a.indexOf(b);
            for (var c = a.length, d = 0; d < c; d++)if (a[d] === b)return d;
            return -1
        },
        qh: function (a, b, c) {
            Array.isArray(a) ? b >= a.length ? a.push(c) : a.splice(b, 0, c) : w.k("Cannot insert an object into an HTMLCollection or NodeList: " + c + " at " + b)
        },
        Fg: function (a,
                      b) {
            Array.isArray(a) ? b >= a.length ? a.pop() : a.splice(b, 1) : w.k("Cannot remove an object from an HTMLCollection or NodeList at " + b)
        },
        ty: [],
        K: function () {
            var a = w.ty.pop();
            return void 0 === a ? new z : a
        },
        xb: function (a, b) {
            var c = w.ty.pop();
            if (void 0 === c)return new z(a, b);
            c.x = a;
            c.y = b;
            return c
        },
        v: function (a) {
            w.ty.push(a)
        },
        FB: [],
        im: function () {
            var a = w.FB.pop();
            return void 0 === a ? new ha : a
        },
        zk: function (a) {
            w.FB.push(a)
        },
        uy: [],
        Df: function () {
            var a = w.uy.pop();
            return void 0 === a ? new A : a
        },
        Vg: function (a, b, c, d) {
            var e = w.uy.pop();
            if (void 0 === e)return new A(a, b, c, d);
            e.x = a;
            e.y = b;
            e.width = c;
            e.height = d;
            return e
        },
        Gb: function (a) {
            w.uy.push(a)
        },
        GB: [],
        Ef: function () {
            var a = w.GB.pop();
            return void 0 === a ? new ia : a
        },
        ue: function (a) {
            w.GB.push(a)
        },
        vy: null,
        s: function () {
            var a = w.vy;
            return null !== a ? (w.vy = null, a) : new ja
        },
        q: function (a) {
            a.reset();
            w.vy = a
        },
        EB: [],
        lb: function () {
            var a = w.EB.pop();
            return void 0 === a ? [] : a
        },
        va: function (a) {
            a.length = 0;
            w.EB.push(a)
        },
        fo: Object.freeze([]),
        mm: 1,
        lc: function (a) {
            a.__gohashid = w.mm++
        },
        Yp: function (a) {
            var b = a.__gohashid;
            void 0 === b && (b = w.mm++, a.__gohashid = b);
            return b
        },
        Jd: function (a) {
            return a.__gohashid
        },
        fa: function (a, b) {
            b.Ey = a;
            da[a] = b
        },
        La: function (a, b) {
            function c() {
            }

            c.prototype = b.prototype;
            a.prototype = new c;
            a.prototype.constructor = a
        },
        ji: function (a) {
            a.PG = !0
        },
        defineProperty: function (a, b, c, d, e) {
            w.j(a, "function", "Util.defineProperty:classfunc");
            w.j(b, "object", "Util.defineProperty:propobj");
            w.j(c, "function", "Util.defineProperty:getter");
            w.j(d, "function", "Util.defineProperty:setter");
            for (var f in b) {
                b = b[f];
                c = {
                    get: c, set: d,
                    enumerable: !0
                };
                if (void 0 !== e)for (var h in e)c[h] = e[h];
                Object.defineProperty(a.prototype, f, c);
                e = Object.getOwnPropertyDescriptor(a.prototype, f);
                b && e && Object.defineProperty(a.prototype, b, e);
                break
            }
        },
        TJ: !1,
        u: function (a, b, c, d) {
            w.j(a, "function", "Util.defineReadOnlyProperty:classfunc");
            w.j(b, "object", "Util.defineReadOnlyProperty:propobj");
            w.j(c, "function", "Util.defineReadOnlyProperty:getter");
            for (var e in b) {
                var f = b[e];
                b = {
                    get: c, set: function (a) {
                        w.k('The property "' + f + '" is read-only and cannot be set to ' +
                            a)
                    }, enumerable: !0
                };
                if (void 0 !== d)for (var h in d)b[h] = d[h];
                Object.defineProperty(a.prototype, e, b);
                d = Object.getOwnPropertyDescriptor(a.prototype, e);
                f && d && Object.defineProperty(a.prototype, f, d);
                break
            }
        },
        $d: function (a, b) {
            for (var c in b)b[c] = !0;
            a.prototype.LG = b
        },
        getTypeName: function (a) {
            return void 0 === a ? "" : "string" === typeof a ? a : "function" === typeof a ? w.hf(a) : null === a ? "*" : ""
        },
        hf: function (a) {
            if ("function" === typeof a) {
                if (a.Ey)return a.Ey;
                if (a.name)return a.name;
                //var b = a.toString(), c = b.indexOf("("), b = b.substring(9, c).trim(); lzz
                var b = a.toString(), c = b.indexOf("("), b = b.substring(9, c);
                if ("" !== b)return a.Ey = b
            } else if ("object" === typeof a && a.constructor)return w.hf(a.constructor);
            return typeof a
        },
        p: function (a, b, c) {
            w.j(a, "function", "Util.defineEnumValue:classfunc");
            w.j(b, "string", "Util.defineEnumValue:name");
            w.j(c, "number", "Util.defineEnumValue:num");
            c = new ea(a, b, c);
            Object.freeze(c);
            a[b] = c;
            var d = a.Ru;
            d instanceof ka || (d = new ka("string", ea), a.Ru = d);
            d.add(b, c);
            return c
        },
        rb: function (a, b) {
            if (!a || !b)return null;
            var c = void 0;
            try {
                "function" === typeof b ? c = b(a) : "function" === typeof a.getAttribute ?
                    (c = a.getAttribute(b), null === c && (c = void 0)) : c = a[b]
            } catch (d) {
            }
            return c
        },
        Ma: function (a, b, c) {
            if (a && b)try {
                "function" === typeof b ? b(a, c) : "function" === typeof a.setAttribute ? a.setAttribute(b, c) : a[b] = c
            } catch (d) {
            }
        },
        Fu: function (a, b) {
            w.j(a, "object", "Setting properties requires Objects as arguments");
            w.j(b, "object", "Setting properties requires Objects as arguments");
            var c = a instanceof C, d = a instanceof D, e;
            for (e in b) {
                "" === e && w.k("Setting properties requires non-empty property names");
                var f = a, h = e;
                if (c || d) {
                    var k =
                        e.indexOf(".");
                    if (0 < k) {
                        var l = e.substring(0, k);
                        if (c)f = a.sd(l); else if (f = a[l], void 0 === f || null === f)f = a.ab[l];
                        w.Qa(f) ? h = e.substr(k + 1) : w.k("Unable to find object named: " + l + " in " + a.toString() + " when trying to set property: " + e)
                    }
                }
                if ("_" !== h[0] && !w.YE(f, h))if (d && "ModelChanged" === h) {
                    a.aH(b[h]);
                    continue
                } else if (d && "Changed" === h) {
                    a.fn(b[h]);
                    continue
                } else if (d && w.YE(a.ab, h))f = a.ab; else if (d && oa(a, h)) {
                    a.Lz(h, b[h]);
                    continue
                } else if (a instanceof F && "Changed" === h) {
                    a.fn(b[h]);
                    continue
                } else w.k('Trying to set undefined property "' +
                    h + '" on object: ' + f.toString());
                f[h] = b[e];
                "_" === h[0] && f instanceof G && f.YG(h)
            }
        },
        YE: function (a, b) {
            if (a.hasOwnProperty(b))return !0;
            for (var c = Object.getPrototypeOf(a); c && c !== Function;) {
                if (c.hasOwnProperty(b))return !0;
                var d = c.LG;
                if (d && d[b])return !0;
                c = Object.getPrototypeOf(c)
            }
            return !1
        },
        dJ: function (a) {
            for (var b = [], c = 0; 256 > c; c++)b[c] = c;
            for (var d = 0, e = 0, c = 0; 256 > c; c++)d = (d + b[c] + 119) % 256, e = b[c], b[c] = b[d], b[d] = e;
            for (var d = c = 0, f = "", h = 0; h < a.length; h++)c = (c + 1) % 256, d = (d + b[c]) % 256, e = b[c], b[c] = b[d], b[d] = e, f += String.fromCharCode(a.charCodeAt(h) ^
                b[(b[c] + b[d]) % 256]);
            return f
        },
        eI: function (a) {
            for (var b = {}, c = 0; 256 > c; c++)b["0123456789abcdef".charAt(c >> 4) + "0123456789abcdef".charAt(c & 15)] = String.fromCharCode(c);
            a.length % 2 && (a = "0" + a);
            for (var d = [], e = 0, c = 0; c < a.length; c += 2)d[e++] = b[a.substr(c, 2)];
            a = d.join("");
            return "" === a ? "0" : a
        },
        Gg: function (a) {
            return w.dJ(w.eI(a))
        },
        km: null,
        adym: "7da71ca0ad381e90",
        vfo: "2be641fdb4",
        nH: "@COLOR1",
        oH: "@COLOR2",
        uE: !1,
        Dt: null,
        Et: null
    };
    w.km = function () {
        var a = window.document.createElement("canvas"), b = a.getContext("2d");
        b[w.Gg("7ca11abfd022028846")] = w.Gg("398c3597c01238");
        for (var c = ["5da73c80a3330d854f9e5e671d6633", "32ab5ff3b26f42dc0ed90f22422913b54ae6247590da4bb21c324ba3a84e385776", "54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387", "74bf19bce72555874c86"], d = 1; 5 > d; d++)b[w.Gg("7ca11abfd7330390")](w.Gg(c[d - 1]), 10, 15 * d + 0);
        b[w.Gg("7ca11abfd022028846")] = w.Gg("39f046ebb36e4b");
        for (d = 1; 5 > d; d++)b[w.Gg("7ca11abfd7330390")](w.Gg(c[d -
        1]), 10, 15 * d + 0);
        if (4 !== c.length || "5" !== c[0][0] || "7" !== c[3][0])w.p = function (a, b) {
            var c = new ea(a, b, 2);
            Object.freeze(c);
            a[b] = c;
            var d = a.Ru;
            d instanceof ka || (d = new ka("string", ea), a.Ru = d);
            d.add(b, c);
            return c
        };
        return a
    }();
    function ea(a, b, c) {
        w.lc(this);
        this.TB = a;
        this.Qb = b;
        this.TG = c
    }

    w.fa("EnumValue", ea);
    ea.prototype.toString = function () {
        return w.hf(this.TB) + "." + this.Qb
    };
    w.u(ea, {De: "classType"}, function () {
        return this.TB
    });
    w.u(ea, {name: "name"}, function () {
        return this.Qb
    });
    w.u(ea, {value: "value"}, function () {
        return this.TG
    });
    var pa;
    ea.findName = pa = function (a, b) {
        if (void 0 === b || null === b || "" === b)return null;
        w.j(a, "function", "findName:classfunc");
        w.j(b, "string", "EnumValue.findName:name");
        var c = a.Ru;
        return c instanceof ka ? c.ka(b) : null
    };
    function ra() {
        this.RB = []
    }

    ra.prototype.toString = function () {
        return this.RB.join("")
    };
    ra.prototype.add = function (a) {
        //"" !== a && this.RB.push(a) lzz
        this.RB.push(a)
    };
    function sa() {
    }

    function ta(a) {
        void 0 === a && (a = 42);
        this.seed = a;
        this.oy = 48271;
        this.Qu = 2147483647;
        this.DB = this.Qu / this.oy;
        this.AG = this.Qu % this.oy;
        this.zG = 1 / this.Qu;
        this.random()
    }

    ta.prototype.random = function () {
        var a = this.seed % this.DB * this.oy - this.seed / this.DB * this.AG;
        this.seed = 0 < a ? a : a + this.Qu;
        return this.seed * this.zG
    };
    function ua() {
    }

    w.u(ua, {i: "iterator"}, function () {
        return this
    });
    ua.prototype.reset = ua.prototype.reset = function () {
    };
    ua.prototype.next = ua.prototype.next = function () {
        return !1
    };
    ua.prototype.hasNext = function () {
        return !1
    };
    ua.prototype.first = ua.prototype.first = function () {
        return null
    };
    ua.prototype.any = function () {
        return !1
    };
    ua.prototype.all = function () {
        return !0
    };
    ua.prototype.each = function () {
        return this
    };
    ua.prototype.map = function () {
        return this
    };
    ua.prototype.filter = function () {
        return this
    };
    ua.prototype.concat = function (a) {
        return a.i
    };
    w.u(ua, {count: "count"}, function () {
        return 0
    });
    ua.prototype.Gf = function () {
    };
    ua.prototype.toString = function () {
        return "EmptyIterator"
    };
    var va = new ua;

    function wa(a) {
        this.key = -1;
        this.value = a
    }

    w.$d(wa, {key: !0, value: !0});
    w.u(wa, {i: "iterator"}, function () {
        return this
    });
    wa.prototype.reset = wa.prototype.reset = function () {
        this.key = -1
    };
    wa.prototype.next = wa.prototype.next = function () {
        return -1 === this.key ? (this.key = 0, !0) : !1
    };
    wa.prototype.hasNext = function () {
        return this.next()
    };
    wa.prototype.first = wa.prototype.first = function () {
        this.key = 0;
        return this.value
    };
    wa.prototype.any = function (a) {
        this.key = -1;
        return a(this.value)
    };
    wa.prototype.all = function (a) {
        this.key = -1;
        return a(this.value)
    };
    wa.prototype.each = function (a) {
        this.key = -1;
        a(this.value);
        return this
    };
    wa.prototype.map = function (a) {
        return new wa(a(this.value))
    };
    wa.prototype.filter = function (a) {
        return a(this.value) ? new wa(this.value) : va
    };
    wa.prototype.concat = function (a) {
        return new xa(this, a.i)
    };
    w.u(wa, {count: "count"}, function () {
        return 1
    });
    wa.prototype.Gf = function () {
        this.value = null
    };
    wa.prototype.toString = function () {
        return "SingletonIterator(" + this.value + ")"
    };
    function xa(a, b) {
        this.hl = a;
        this.il = b;
        this.Su = !1
    }

    w.$d(xa, {key: !0, value: !0});
    w.u(xa, {i: "iterator"}, function () {
        return this
    });
    xa.prototype.reset = xa.prototype.reset = function () {
        this.hl.reset();
        this.il.reset();
        this.Su = !1
    };
    xa.prototype.next = xa.prototype.next = function () {
        if (!this.Su) {
            var a = this.hl;
            if (a.next())return this.key = a.key, this.value = a.value, !0;
            this.Su = !0
        }
        return this.Su && (a = this.il, a.next()) ? (this.key = a.key, this.value = a.value, !0) : !1
    };
    xa.prototype.hasNext = function () {
        return this.next()
    };
    xa.prototype.first = xa.prototype.first = function () {
        this.reset();
        return this.next() ? this.value : null
    };
    xa.prototype.any = function (a) {
        return this.hl.any(a) || this.il.any(a) ? !0 : !1
    };
    xa.prototype.all = function (a) {
        return this.hl.all(a) && this.il.all(a) ? !0 : !1
    };
    xa.prototype.each = function (a) {
        this.hl.each(a);
        this.il.each(a);
        return this
    };
    xa.prototype.map = function (a) {
        return new xa(this.hl.map(a), this.il.map(a))
    };
    xa.prototype.filter = function (a) {
        return new xa(this.hl.filter(a), this.il.filter(a))
    };
    xa.prototype.concat = function (a) {
        return new xa(this, a.i)
    };
    w.u(xa, {count: "count"}, function () {
        return this.hl.count + this.il.count
    });
    xa.prototype.Gf = function () {
        this.value = this.key = null
    };
    xa.prototype.toString = function () {
        return "ConcatIterator()"
    };
    function ya(a) {
        this.uc = a;
        this.Wh = null;
        a.Ob = null;
        this.Ta = a.C;
        this.tc = -1
    }

    w.$d(ya, {key: !0, value: !0});
    w.u(ya, {i: "iterator"}, function () {
        return this
    });
    w.defineProperty(ya, {jq: "predicate"}, function () {
        return this.Wh
    }, function (a) {
        this.Wh = a
    });
    ya.prototype.reset = ya.prototype.reset = function () {
        var a = this.uc;
        a.Ob = null;
        this.Ta = a.C;
        this.tc = -1
    };
    ya.prototype.next = ya.prototype.next = function () {
        var a = this.uc;
        if (a.C !== this.Ta) {
            if (0 > this.key)return !1;
            w.Na(a)
        }
        var a = a.n, b = a.length, c = ++this.tc, d = this.Wh;
        if (null !== d)for (; c < b;) {
            var e = a[c];
            if (d(e))return this.key = this.tc = c, this.value = e, !0;
            c++
        } else {
            if (c < b)return this.key = c, this.value = a[c], !0;
            this.Gf()
        }
        return !1
    };
    ya.prototype.hasNext = function () {
        return this.next()
    };
    ya.prototype.first = ya.prototype.first = function () {
        var a = this.uc;
        this.Ta = a.C;
        this.tc = 0;
        var a = a.n, b = a.length, c = this.Wh;
        if (null !== c) {
            for (var d = 0; d < b;) {
                var e = a[d];
                if (c(e))return this.key = this.tc = d, this.value = e;
                d++
            }
            return null
        }
        return 0 < b ? (e = a[0], this.key = 0, this.value = e) : null
    };
    ya.prototype.any = function (a) {
        var b = this.uc;
        b.Ob = null;
        var c = b.C;
        this.tc = -1;
        for (var d = b.n, e = d.length, f = this.Wh, h = 0; h < e; h++) {
            var k = d[h];
            if (null === f || f(k)) {
                if (a(k))return !0;
                b.C !== c && w.Na(b)
            }
        }
        return !1
    };
    ya.prototype.all = function (a) {
        var b = this.uc;
        b.Ob = null;
        var c = b.C;
        this.tc = -1;
        for (var d = b.n, e = d.length, f = this.Wh, h = 0; h < e; h++) {
            var k = d[h];
            if (null === f || f(k)) {
                if (!a(k))return !1;
                b.C !== c && w.Na(b)
            }
        }
        return !0
    };
    ya.prototype.each = function (a) {
        var b = this.uc;
        b.Ob = null;
        var c = b.C;
        this.tc = -1;
        for (var d = b.n, e = d.length, f = this.Wh, h = 0; h < e; h++) {
            var k = d[h];
            if (null === f || f(k))a(k), b.C !== c && w.Na(b)
        }
        return this
    };
    ya.prototype.map = function (a) {
        var b = this.uc;
        b.Ob = null;
        var c = b.C;
        this.tc = -1;
        for (var d = [], e = b.n, f = e.length, h = this.Wh, k = 0; k < f; k++) {
            var l = e[k];
            if (null === h || h(l))d.push(a(l)), b.C !== c && w.Na(b)
        }
        a = new I;
        a.n = d;
        a.Fc();
        return a.i
    };
    ya.prototype.filter = function (a) {
        var b = this.uc;
        b.Ob = null;
        var c = b.C;
        this.tc = -1;
        for (var d = [], e = b.n, f = e.length, h = this.Wh, k = 0; k < f; k++) {
            var l = e[k];
            if (null === h || h(l))a(l) && d.push(l), b.C !== c && w.Na(b)
        }
        a = new I(b.ma);
        a.n = d;
        a.Fc();
        return a.i
    };
    ya.prototype.concat = function (a) {
        this.uc.Ob = null;
        return new xa(this, a.i)
    };
    w.u(ya, {count: "count"}, function () {
        var a = this.Wh;
        if (null !== a) {
            for (var b = 0, c = this.uc.n, d = c.length, e = 0; e < d; e++)a(c[e]) && b++;
            return b
        }
        return this.uc.n.length
    });
    ya.prototype.Gf = function () {
        this.key = -1;
        this.value = null;
        this.Ta = -1;
        this.Wh = null;
        this.uc.Ob = this
    };
    ya.prototype.toString = function () {
        return "ListIterator@" + this.tc + "/" + this.uc.count
    };
    function Aa(a) {
        this.uc = a;
        a.Li = null;
        this.Ta = a.C;
        this.tc = a.n.length
    }

    w.$d(Aa, {key: !0, value: !0});
    w.u(Aa, {i: "iterator"}, function () {
        return this
    });
    Aa.prototype.reset = Aa.prototype.reset = function () {
        var a = this.uc;
        a.Li = null;
        this.Ta = a.C;
        this.tc = a.n.length
    };
    Aa.prototype.next = Aa.prototype.next = function () {
        var a = this.uc;
        if (a.C !== this.Ta) {
            if (0 > this.key)return !1;
            w.Na(a)
        }
        var b = --this.tc;
        if (0 <= b)return this.key = b, this.value = a.n[b], !0;
        this.Gf();
        return !1
    };
    Aa.prototype.hasNext = function () {
        return this.next()
    };
    Aa.prototype.first = Aa.prototype.first = function () {
        var a = this.uc;
        this.Ta = a.C;
        var b = a.n;
        this.tc = a = b.length - 1;
        return 0 <= a ? (b = b[a], this.key = a, this.value = b) : null
    };
    Aa.prototype.any = function (a) {
        var b = this.uc;
        b.Li = null;
        var c = b.C, d = b.n, e = d.length;
        this.tc = e;
        for (e -= 1; 0 <= e; e--) {
            if (a(d[e]))return !0;
            b.C !== c && w.Na(b)
        }
        return !1
    };
    Aa.prototype.all = function (a) {
        var b = this.uc;
        b.Li = null;
        var c = b.C, d = b.n, e = d.length;
        this.tc = e;
        for (e -= 1; 0 <= e; e--) {
            if (!a(d[e]))return !1;
            b.C !== c && w.Na(b)
        }
        return !0
    };
    Aa.prototype.each = function (a) {
        var b = this.uc;
        b.Li = null;
        var c = b.C, d = b.n, e = d.length;
        this.tc = e;
        for (e -= 1; 0 <= e; e--)a(d[e]), b.C !== c && w.Na(b);
        return this
    };
    Aa.prototype.map = function (a) {
        var b = this.uc;
        b.Li = null;
        var c = b.C, d = [], e = b.n, f = e.length;
        this.tc = f;
        for (f -= 1; 0 <= f; f--)d.push(a(e[f])), b.C !== c && w.Na(b);
        a = new I;
        a.n = d;
        a.Fc();
        return a.i
    };
    Aa.prototype.filter = function (a) {
        var b = this.uc;
        b.Li = null;
        var c = b.C, d = [], e = b.n, f = e.length;
        this.tc = f;
        for (f -= 1; 0 <= f; f--) {
            var h = e[f];
            a(h) && d.push(h);
            b.C !== c && w.Na(b)
        }
        a = new I(b.ma);
        a.n = d;
        a.Fc();
        return a.i
    };
    Aa.prototype.concat = function (a) {
        this.uc.Li = null;
        return new xa(this, a.i)
    };
    w.u(Aa, {count: "count"}, function () {
        return this.uc.n.length
    });
    Aa.prototype.Gf = function () {
        this.key = -1;
        this.value = null;
        this.Ta = -1;
        this.uc.Li = this
    };
    Aa.prototype.toString = function () {
        return "ListIteratorBackwards(" + this.tc + "/" + this.uc.count + ")"
    };
    function I(a) {
        w.lc(this);
        this.Q = !1;
        this.n = [];
        this.C = 0;
        this.Li = this.Ob = null;
        void 0 === a || null === a ? this.ma = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a || "boolean" === a || "function" === a ? this.ma = a : w.Ea(a, "the string 'object', 'number', 'string', 'boolean', or 'function'", "List constructor: type") : "function" === typeof a ? this.ma = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a === Boolean ? "boolean" : a === Function ? "function" : a : w.Ea(a, "null, a primitive type name, or a class type",
            "List constructor: type")
    }

    w.fa("List", I);
    I.prototype.Fc = function () {
        var a = this.C;
        a++;
        999999999 < a && (a = 0);
        this.C = a
    };
    I.prototype.freeze = I.prototype.freeze = function () {
        this.Q = !0;
        return this
    };
    I.prototype.thaw = I.prototype.Ra = function () {
        this.Q = !1;
        return this
    };
    I.prototype.toString = function () {
        return "List(" + w.getTypeName(this.ma) + ")#" + w.Jd(this)
    };
    I.prototype.add = I.prototype.add = function (a) {
        null !== a && (this.Q && w.la(this, a), this.n.push(a), this.Fc())
    };
    I.prototype.push = I.prototype.push = function (a) {
        this.add(a)
    };
    I.prototype.addAll = I.prototype.Hc = function (a) {
        if (null === a)return this;
        this.Q && w.la(this);
        var b = this.n;
        if (w.isArray(a))for (var c = w.Ya(a), d = 0; d < c; d++) {
            var e = w.Da(a, d);
            b.push(e)
        } else for (a = a.i; a.next();)e = a.value, b.push(e);
        this.Fc();
        return this
    };
    I.prototype.clear = I.prototype.clear = function () {
        this.Q && w.la(this);
        this.n.length = 0;
        this.Fc()
    };
    I.prototype.contains = I.prototype.contains = function (a) {
        return null === a ? !1 : -1 !== this.n.indexOf(a)
    };
    I.prototype.has = I.prototype.has = function (a) {
        return this.contains(a)
    };
    I.prototype.indexOf = I.prototype.indexOf = function (a) {
        return null === a ? -1 : this.n.indexOf(a)
    };
    I.prototype.elt = I.prototype.da = function (a) {
        var b = this.n;
        (0 > a || a >= b.length) && w.Ea(a, "0 <= i < length", I, "elt:i");
        return b[a]
    };
    I.prototype.get = I.prototype.get = function (a) {
        return this.da(a)
    };
    I.prototype.setElt = I.prototype.fg = function (a, b) {
        var c = this.n;
        (0 > a || a >= c.length) && w.Ea(a, "0 <= i < length", I, "setElt:i");
        this.Q && w.la(this, a);
        c[a] = b
    };
    I.prototype.set = I.prototype.set = function (a, b) {
        this.fg(a, b)
    };
    I.prototype.first = I.prototype.first = function () {
        var a = this.n;
        return 0 === a.length ? null : a[0]
    };
    I.prototype.last = I.prototype.ee = function () {
        var a = this.n, b = a.length;
        return 0 < b ? a[b - 1] : null
    };
    I.prototype.pop = I.prototype.pop = function () {
        this.Q && w.la(this);
        var a = this.n;
        return 0 < a.length ? a.pop() : null
    };
    I.prototype.any = function (a) {
        for (var b = this.n, c = this.C, d = b.length, e = 0; e < d; e++) {
            if (a(b[e]))return !0;
            this.C !== c && w.Na(this)
        }
        return !1
    };
    I.prototype.all = function (a) {
        for (var b = this.n, c = this.C, d = b.length, e = 0; e < d; e++) {
            if (!a(b[e]))return !1;
            this.C !== c && w.Na(this)
        }
        return !0
    };
    I.prototype.each = function (a) {
        for (var b = this.n, c = this.C, d = b.length, e = 0; e < d; e++)a(b[e]), this.C !== c && w.Na(this);
        return this
    };
    I.prototype.map = function (a) {
        for (var b = new I, c = [], d = this.n, e = this.C, f = d.length, h = 0; h < f; h++)c.push(a(d[h])), this.C !== e && w.Na(this);
        b.n = c;
        b.Fc();
        return b
    };
    I.prototype.filter = function (a) {
        for (var b = new I(this.ma), c = [], d = this.n, e = this.C, f = d.length, h = 0; h < f; h++) {
            var k = d[h];
            a(k) && c.push(k);
            this.C !== e && w.Na(this)
        }
        b.n = c;
        b.Fc();
        return b
    };
    I.prototype.concat = function (a) {
        return this.copy().Hc(a)
    };
    I.prototype.insertAt = I.prototype.Ld = function (a, b) {
        0 > a && w.Ea(a, ">= 0", I, "insertAt:i");
        this.Q && w.la(this, a);
        var c = this.n;
        a >= c.length ? c.push(b) : c.splice(a, 0, b);
        this.Fc();
        return !0
    };
    I.prototype.remove = I.prototype.remove = function (a) {
        if (null === a)return !1;
        this.Q && w.la(this, a);
        var b = this.n;
        a = b.indexOf(a);
        if (-1 === a)return !1;
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Fc();
        return !0
    };
    I.prototype["delete"] = I.prototype.delete = function (a) {
        return this.remove(a)
    };
    I.prototype.removeAt = I.prototype.Xc = function (a) {
        var b = this.n;
        (0 > a || a >= b.length) && w.Ea(a, "0 <= i < length", I, "removeAt:i");
        this.Q && w.la(this, a);
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Fc()
    };
    I.prototype.removeRange = I.prototype.removeRange = function (a, b) {
        var c = this.n, d = c.length;
        if (0 > a)a = 0; else if (a >= d)return this;
        if (0 > b)return this;
        b >= d && (b = d - 1);
        if (a > b)return this;
        this.Q && w.la(this);
        for (var e = a, f = b + 1; f < d;)c[e++] = c[f++];
        c.length = d - (b - a + 1);
        this.Fc();
        return this
    };
    I.prototype.copy = function () {
        var a = new I(this.ma), b = this.n;
        0 < b.length && (a.n = Array.prototype.slice.call(b));
        return a
    };
    I.prototype.toArray = I.prototype.dc = function () {
        for (var a = this.n, b = this.count, c = Array(b), d = 0; d < b; d++)c[d] = a[d];
        return c
    };
    I.prototype.toSet = I.prototype.oG = function () {
        for (var a = new J(this.ma), b = this.n, c = this.count, d = 0; d < c; d++)a.add(b[d]);
        return a
    };
    I.prototype.sort = I.prototype.sort = function (a) {
        this.Q && w.la(this);
        this.n.sort(a);
        this.Fc();
        return this
    };
    I.prototype.sortRange = I.prototype.xq = function (a, b, c) {
        var d = this.n, e = d.length;
        void 0 === b && (b = 0);
        void 0 === c && (c = e);
        this.Q && w.la(this);
        var f = c - b;
        if (1 >= f)return this;
        (0 > b || b >= e - 1) && w.Ea(b, "0 <= from < length", I, "sortRange:from");
        if (2 === f)return c = d[b], e = d[b + 1], 0 < a(c, e) && (d[b] = e, d[b + 1] = c, this.Fc()), this;
        if (0 === b)if (c >= e)d.sort(a); else for (f = d.slice(0, c), f.sort(a), a = 0; a < c; a++)d[a] = f[a]; else if (c >= e)for (f = d.slice(b), f.sort(a), a = b; a < e; a++)d[a] = f[a - b]; else for (f = d.slice(b, c), f.sort(a), a = b; a < c; a++)d[a] = f[a -
        b];
        this.Fc();
        return this
    };
    I.prototype.reverse = I.prototype.reverse = function () {
        this.Q && w.la(this);
        this.n.reverse();
        this.Fc();
        return this
    };
    w.u(I, {count: "count"}, function () {
        return this.n.length
    });
    w.u(I, {size: "size"}, function () {
        return this.n.length
    });
    w.u(I, {length: "length"}, function () {
        return this.n.length
    });
    w.u(I, {i: "iterator"}, function () {
        if (0 >= this.n.length)return va;
        var a = this.Ob;
        return null !== a ? (a.reset(), a) : new ya(this)
    });
    w.u(I, {Gn: "iteratorBackwards"}, function () {
        if (0 >= this.n.length)return va;
        var a = this.Li;
        return null !== a ? (a.reset(), a) : new Aa(this)
    });
    function Ba(a) {
        this.Yh = a;
        a.Ob = null;
        this.Ta = a.C;
        this.Va = null
    }

    w.$d(Ba, {key: !0, value: !0});
    w.u(Ba, {i: "iterator"}, function () {
        return this
    });
    Ba.prototype.reset = Ba.prototype.reset = function () {
        var a = this.Yh;
        a.Ob = null;
        this.Ta = a.C;
        this.Va = null
    };
    Ba.prototype.next = Ba.prototype.next = function () {
        var a = this.Yh;
        if (a.C !== this.Ta) {
            if (null === this.key)return !1;
            w.Na(a)
        }
        var b = this.Va, b = null === b ? a.Ca : b.Xa;
        if (null !== b)return this.Va = b, this.value = b.value, this.key = b.key, !0;
        this.Gf();
        return !1
    };
    Ba.prototype.hasNext = function () {
        return this.next()
    };
    Ba.prototype.first = Ba.prototype.first = function () {
        var a = this.Yh;
        this.Ta = a.C;
        a = a.Ca;
        if (null !== a) {
            this.Va = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    Ba.prototype.any = function (a) {
        var b = this.Yh;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (a(d.value))return !0;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !1
    };
    Ba.prototype.all = function (a) {
        var b = this.Yh;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (!a(d.value))return !1;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !0
    };
    Ba.prototype.each = function (a) {
        var b = this.Yh;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;)a(d.value), b.C !== c && w.Na(b), d = d.Xa;
        return this
    };
    Ba.prototype.map = function (a) {
        var b = this.Yh;
        b.Ob = null;
        for (var c = new I, d = b.C, e = b.Ca; null !== e;)c.add(a(e.value)), b.C !== d && w.Na(b), e = e.Xa;
        return c.i
    };
    Ba.prototype.filter = function (a) {
        var b = this.Yh;
        b.Ob = null;
        for (var c = new I(b.ma), d = b.C, e = b.Ca; null !== e;) {
            var f = e.value;
            a(f) && c.add(f);
            b.C !== d && w.Na(b);
            e = e.Xa
        }
        return c.i
    };
    Ba.prototype.concat = function (a) {
        this.Yh.Ob = null;
        return new xa(this, a.i)
    };
    w.u(Ba, {count: "count"}, function () {
        return this.Yh.ld
    });
    Ba.prototype.Gf = function () {
        this.value = this.key = null;
        this.Ta = -1;
        this.Yh.Ob = this
    };
    Ba.prototype.toString = function () {
        return null !== this.Va ? "SetIterator@" + this.Va.value : "SetIterator"
    };
    function J(a) {
        w.lc(this);
        this.Q = !1;
        void 0 === a || null === a ? this.ma = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.ma = a : w.Ea(a, "the string 'object', 'number' or 'string'", "Set constructor: type") : "function" === typeof a ? this.ma = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a : w.Ea(a, "null, a primitive type name, or a class type", "Set constructor: type");
        this.md = {};
        this.ld = 0;
        this.Ob = null;
        this.C = 0;
        this.Rh = this.Ca = null
    }

    w.fa("Set", J);
    J.prototype.Fc = function () {
        var a = this.C;
        a++;
        999999999 < a && (a = 0);
        this.C = a
    };
    J.prototype.freeze = J.prototype.freeze = function () {
        this.Q = !0;
        return this
    };
    J.prototype.thaw = J.prototype.Ra = function () {
        this.Q = !1;
        return this
    };
    J.prototype.toString = function () {
        return "Set(" + w.getTypeName(this.ma) + ")#" + w.Jd(this)
    };
    J.prototype.add = J.prototype.add = function (a) {
        if (null === a)return !1;
        this.Q && w.la(this, a);
        var b = a;
        w.Qa(a) && (b = w.Yp(a));
        return void 0 === this.md[b] ? (this.ld++, a = new Ca(a, a), this.md[b] = a, b = this.Rh, null === b ? this.Ca = a : (a.hp = b, b.Xa = a), this.Rh = a, this.Fc(), !0) : !1
    };
    J.prototype.addAll = J.prototype.Hc = function (a) {
        if (null === a)return this;
        this.Q && w.la(this);
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++)this.add(w.Da(a, c)); else for (a = a.i; a.next();)this.add(a.value);
        return this
    };
    J.prototype.contains = J.prototype.contains = function (a) {
        if (null === a)return !1;
        var b = a;
        return w.Qa(a) && (b = w.Jd(a), void 0 === b) ? !1 : void 0 !== this.md[b]
    };
    J.prototype.has = J.prototype.has = function (a) {
        return this.contains(a)
    };
    J.prototype.containsAll = function (a) {
        if (null === a)return !0;
        for (a = a.i; a.next();)if (!this.contains(a.value))return !1;
        return !0
    };
    J.prototype.containsAny = function (a) {
        if (null === a)return !0;
        for (a = a.i; a.next();)if (this.contains(a.value))return !0;
        return !1
    };
    J.prototype.first = J.prototype.first = function () {
        var a = this.Ca;
        return null === a ? null : a.value
    };
    J.prototype.any = function (a) {
        for (var b = this.C, c = this.Ca; null !== c;) {
            if (a(c.value))return !0;
            this.C !== b && w.Na(this);
            c = c.Xa
        }
        return !1
    };
    J.prototype.all = function (a) {
        for (var b = this.C, c = this.Ca; null !== c;) {
            if (!a(c.value))return !1;
            this.C !== b && w.Na(this);
            c = c.Xa
        }
        return !0
    };
    J.prototype.each = function (a) {
        for (var b = this.C, c = this.Ca; null !== c;)a(c.value), this.C !== b && w.Na(this), c = c.Xa;
        return this
    };
    J.prototype.map = function (a) {
        for (var b = new J, c = this.C, d = this.Ca; null !== d;)b.add(a(d.value)), this.C !== c && w.Na(this), d = d.Xa;
        return b
    };
    J.prototype.filter = function (a) {
        for (var b = new J(this.ma), c = this.C, d = this.Ca; null !== d;) {
            var e = d.value;
            a(e) && b.add(e);
            this.C !== c && w.Na(this);
            d = d.Xa
        }
        return b
    };
    J.prototype.concat = function (a) {
        return this.copy().Hc(a)
    };
    J.prototype.remove = J.prototype.remove = function (a) {
        if (null === a)return !1;
        this.Q && w.la(this, a);
        var b = a;
        if (w.Qa(a) && (b = w.Jd(a), void 0 === b))return !1;
        a = this.md[b];
        if (void 0 === a)return !1;
        var c = a.Xa, d = a.hp;
        null !== c && (c.hp = d);
        null !== d && (d.Xa = c);
        this.Ca === a && (this.Ca = c);
        this.Rh === a && (this.Rh = d);
        delete this.md[b];
        this.ld--;
        this.Fc();
        return !0
    };
    J.prototype["delete"] = J.prototype.delete = function (a) {
        return this.remove(a)
    };
    J.prototype.removeAll = J.prototype.Vx = function (a) {
        if (null === a)return this;
        this.Q && w.la(this);
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++)this.remove(w.Da(a, c)); else for (a = a.i; a.next();)this.remove(a.value);
        return this
    };
    J.prototype.retainAll = function (a) {
        if (null === a || 0 === this.count)return this;
        this.Q && w.la(this);
        var b = new J(this.ma);
        b.Hc(a);
        a = [];
        for (var c = this.i; c.next();) {
            var d = c.value;
            b.contains(d) || a.push(d)
        }
        this.Vx(a);
        return this
    };
    J.prototype.clear = J.prototype.clear = function () {
        this.Q && w.la(this);
        this.md = {};
        this.ld = 0;
        this.Rh = this.Ca = null;
        this.Fc()
    };
    J.prototype.copy = function () {
        var a = new J(this.ma), b = this.md, c;
        for (c in b)a.add(b[c].value);
        return a
    };
    J.prototype.toArray = J.prototype.dc = function () {
        var a = Array(this.ld), b = this.md, c = 0, d;
        for (d in b)a[c] = b[d].value, c++;
        return a
    };
    J.prototype.toList = function () {
        var a = new I(this.ma), b = this.md, c;
        for (c in b)a.add(b[c].value);
        return a
    };
    w.u(J, {count: "count"}, function () {
        return this.ld
    });
    w.u(J, {size: "size"}, function () {
        return this.ld
    });
    w.u(J, {i: "iterator"}, function () {
        if (0 >= this.ld)return va;
        var a = this.Ob;
        return null !== a ? (a.reset(), a) : new Ba(this)
    });
    function Da(a) {
        this.Fa = a;
        this.Ta = a.C;
        this.Va = null
    }

    w.$d(Da, {key: !0, value: !0});
    w.u(Da, {i: "iterator"}, function () {
        return this
    });
    Da.prototype.reset = Da.prototype.reset = function () {
        this.Ta = this.Fa.C;
        this.Va = null
    };
    Da.prototype.next = Da.prototype.next = function () {
        var a = this.Fa;
        if (a.C !== this.Ta) {
            if (null === this.key)return !1;
            w.Na(a)
        }
        var b = this.Va, b = null === b ? a.Ca : b.Xa;
        if (null !== b)return this.Va = b, this.value = this.key = a = b.key, !0;
        this.Gf();
        return !1
    };
    Da.prototype.hasNext = function () {
        return this.next()
    };
    Da.prototype.first = Da.prototype.first = function () {
        var a = this.Fa;
        this.Ta = a.C;
        a = a.Ca;
        return null !== a ? (this.Va = a, this.value = this.key = a = a.key) : null
    };
    Da.prototype.any = function (a) {
        var b = this.Fa, c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (a(d.key))return !0;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !1
    };
    Da.prototype.all = function (a) {
        var b = this.Fa, c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (!a(d.key))return !1;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !0
    };
    Da.prototype.each = function (a) {
        var b = this.Fa, c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;)a(d.key), b.C !== c && w.Na(b), d = d.Xa;
        return this
    };
    Da.prototype.map = function (a) {
        var b = this.Fa, c = b.C;
        this.Va = null;
        for (var d = new I, e = b.Ca; null !== e;)d.add(a(e.key)), b.C !== c && w.Na(b), e = e.Xa;
        return d.i
    };
    Da.prototype.filter = function (a) {
        var b = this.Fa, c = b.C;
        this.Va = null;
        for (var d = new I(b.Qh), e = b.Ca; null !== e;) {
            var f = e.key;
            a(f) && d.add(f);
            b.C !== c && w.Na(b);
            e = e.Xa
        }
        return d.i
    };
    Da.prototype.concat = function (a) {
        return new xa(this, a.i)
    };
    w.u(Da, {count: "count"}, function () {
        return this.Fa.ld
    });
    Da.prototype.Gf = function () {
        this.value = this.key = null;
        this.Ta = -1
    };
    Da.prototype.toString = function () {
        return null !== this.Va ? "MapKeySetIterator@" + this.Va.value : "MapKeySetIterator"
    };
    function Ea(a) {
        w.lc(this);
        this.Q = !0;
        this.Fa = a
    }

    w.La(Ea, J);
    Ea.prototype.freeze = function () {
        return this
    };
    Ea.prototype.Ra = function () {
        return this
    };
    Ea.prototype.toString = function () {
        return "MapKeySet(" + this.Fa.toString() + ")"
    };
    Ea.prototype.add = Ea.prototype.add = function () {
        w.k("This Set is read-only: " + this.toString());
        return !1
    };
    Ea.prototype.set = Ea.prototype.set = function () {
        w.k("This Set is read-only: " + this.toString());
        return !1
    };
    Ea.prototype.contains = Ea.prototype.contains = function (a) {
        return this.Fa.contains(a)
    };
    Ea.prototype.has = Ea.prototype.has = function (a) {
        return this.contains(a)
    };
    Ea.prototype.remove = Ea.prototype.remove = function () {
        w.k("This Set is read-only: " + this.toString());
        return !1
    };
    Ea.prototype["delete"] = Ea.prototype.delete = function () {
        return this.remove()
    };
    Ea.prototype.clear = Ea.prototype.clear = function () {
        w.k("This Set is read-only: " + this.toString())
    };
    Ea.prototype.first = Ea.prototype.first = function () {
        var a = this.Fa.Ca;
        return null !== a ? a.key : null
    };
    Ea.prototype.any = function (a) {
        for (var b = this.Fa.Ca; null !== b;) {
            if (a(b.key))return !0;
            b = b.Xa
        }
        return !1
    };
    Ea.prototype.all = function (a) {
        for (var b = this.Fa.Ca; null !== b;) {
            if (!a(b.key))return !1;
            b = b.Xa
        }
        return !0
    };
    Ea.prototype.each = function (a) {
        for (var b = this.Fa.Ca; null !== b;)a(b.key), b = b.Xa;
        return this
    };
    Ea.prototype.map = function (a) {
        for (var b = new J, c = this.Fa.Ca; null !== c;)b.add(a(c.key)), c = c.Xa;
        return b
    };
    Ea.prototype.filter = function (a) {
        for (var b = new J(this.Fa.Qh), c = this.Fa.Ca; null !== c;) {
            var d = c.key;
            a(d) && b.add(d);
            c = c.Xa
        }
        return b
    };
    Ea.prototype.concat = function (a) {
        return this.oG().Hc(a)
    };
    Ea.prototype.copy = function () {
        return new Ea(this.Fa)
    };
    Ea.prototype.toSet = Ea.prototype.oG = function () {
        var a = new J(this.Fa.Qh), b = this.Fa.md, c;
        for (c in b)a.add(b[c].key);
        return a
    };
    Ea.prototype.toArray = Ea.prototype.dc = function () {
        var a = this.Fa.md, b = Array(this.Fa.ld), c = 0, d;
        for (d in a)b[c] = a[d].key, c++;
        return b
    };
    Ea.prototype.toList = function () {
        var a = new I(this.Fa.Qh), b = this.Fa.md, c;
        for (c in b)a.add(b[c].key);
        return a
    };
    w.u(Ea, {count: "count"}, function () {
        return this.Fa.ld
    });
    w.u(Ea, {size: "size"}, function () {
        return this.Fa.ld
    });
    w.u(Ea, {i: "iterator"}, function () {
        return 0 >= this.Fa.ld ? va : new Da(this.Fa)
    });
    function Fa(a) {
        this.Fa = a;
        a.Mi = null;
        this.Ta = a.C;
        this.Va = null
    }

    w.$d(Fa, {key: !0, value: !0});
    w.u(Fa, {i: "iterator"}, function () {
        return this
    });
    Fa.prototype.reset = Fa.prototype.reset = function () {
        var a = this.Fa;
        a.Mi = null;
        this.Ta = a.C;
        this.Va = null
    };
    Fa.prototype.next = Fa.prototype.next = function () {
        var a = this.Fa;
        if (a.C !== this.Ta) {
            if (null === this.key)return !1;
            w.Na(a)
        }
        var b = this.Va, b = null === b ? a.Ca : b.Xa;
        if (null !== b)return this.Va = b, this.value = b.value, this.key = b.key, !0;
        this.Gf();
        return !1
    };
    Fa.prototype.hasNext = function () {
        return this.next()
    };
    Fa.prototype.first = Fa.prototype.first = function () {
        var a = this.Fa;
        this.Ta = a.C;
        a = a.Ca;
        if (null !== a) {
            this.Va = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    Fa.prototype.any = function (a) {
        var b = this.Fa;
        b.Mi = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (a(d.value))return !0;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !1
    };
    Fa.prototype.all = function (a) {
        var b = this.Fa;
        b.Mi = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (!a(d.value))return !1;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !0
    };
    Fa.prototype.each = function (a) {
        var b = this.Fa;
        b.Mi = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;)a(d.value), b.C !== c && w.Na(b), d = d.Xa;
        return this
    };
    Fa.prototype.map = function (a) {
        var b = this.Fa;
        b.Mi = null;
        var c = b.C;
        this.Va = null;
        for (var d = new I, e = b.Ca; null !== e;)d.add(a(e.value)), b.C !== c && w.Na(b), e = e.Xa;
        return d.i
    };
    Fa.prototype.filter = function (a) {
        var b = this.Fa;
        b.Mi = null;
        var c = b.C;
        this.Va = null;
        for (var d = new I(b.Qh), e = b.Ca; null !== e;) {
            var f = e.value;
            a(f) && d.add(f);
            b.C !== c && w.Na(b);
            e = e.Xa
        }
        return d.i
    };
    Fa.prototype.concat = function (a) {
        this.Fa.Mi = null;
        return new xa(this, a.i)
    };
    w.u(Fa, {count: "count"}, function () {
        return this.Fa.ld
    });
    Fa.prototype.Gf = function () {
        this.value = this.key = null;
        this.Ta = -1;
        this.Fa.Mi = this
    };
    Fa.prototype.toString = function () {
        return null !== this.Va ? "MapValueSetIterator@" + this.Va.value : "MapValueSetIterator"
    };
    function Ca(a, b) {
        this.key = a;
        this.value = b;
        this.hp = this.Xa = null
    }

    w.$d(Ca, {key: !0, value: !0});
    Ca.prototype.toString = function () {
        return "{" + this.key + ":" + this.value + "}"
    };
    function Ga(a) {
        this.Fa = a;
        a.Ob = null;
        this.Ta = a.C;
        this.Va = null
    }

    w.$d(Ga, {key: !0, value: !0});
    w.u(Ga, {i: "iterator"}, function () {
        return this
    });
    Ga.prototype.reset = Ga.prototype.reset = function () {
        var a = this.Fa;
        a.Ob = null;
        this.Ta = a.C;
        this.Va = null
    };
    Ga.prototype.next = Ga.prototype.next = function () {
        var a = this.Fa;
        if (a.C !== this.Ta) {
            if (null === this.key)return !1;
            w.Na(a)
        }
        var b = this.Va, b = null === b ? a.Ca : b.Xa;
        if (null !== b)return this.Va = b, this.key = b.key, this.value = b.value, !0;
        this.Gf();
        return !1
    };
    Ga.prototype.hasNext = function () {
        return this.next()
    };
    Ga.prototype.first = Ga.prototype.first = function () {
        var a = this.Fa;
        this.Ta = a.C;
        a = a.Ca;
        return null !== a ? (this.Va = a, this.key = a.key, this.value = a.value, a) : null
    };
    Ga.prototype.any = function (a) {
        var b = this.Fa;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (a(d))return !0;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !1
    };
    Ga.prototype.all = function (a) {
        var b = this.Fa;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;) {
            if (!a(d))return !1;
            b.C !== c && w.Na(b);
            d = d.Xa
        }
        return !0
    };
    Ga.prototype.each = function (a) {
        var b = this.Fa;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = b.Ca; null !== d;)a(d), b.C !== c && w.Na(b), d = d.Xa;
        return this
    };
    Ga.prototype.map = function (a) {
        var b = this.Fa;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = new I, e = b.Ca; null !== e;)d.add(a(e)), b.C !== c && w.Na(b), e = e.Xa;
        return d.i
    };
    Ga.prototype.filter = function (a) {
        var b = this.Fa;
        b.Ob = null;
        var c = b.C;
        this.Va = null;
        for (var d = new I, e = b.Ca; null !== e;)a(e) && d.add(e), b.C !== c && w.Na(b), e = e.Xa;
        return d.i
    };
    Ga.prototype.concat = function (a) {
        this.Fa.Ob = null;
        return new xa(this, a.i)
    };
    w.u(Ga, {count: "count"}, function () {
        return this.Fa.ld
    });
    Ga.prototype.Gf = function () {
        this.value = this.key = null;
        this.Ta = -1;
        this.Fa.Ob = this
    };
    Ga.prototype.toString = function () {
        return null !== this.Va ? "MapIterator@" + this.Va : "MapIterator"
    };
    function ka(a, b) {
        w.lc(this);
        this.Q = !1;
        void 0 === a || null === a ? this.Qh = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.Qh = a : w.Ea(a, "the string 'object', 'number' or 'string'", "Map constructor: keytype") : "function" === typeof a ? this.Qh = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a : w.Ea(a, "null, a primitive type name, or a class type", "Map constructor: keytype");
        void 0 === b || null === b ? this.qt = null : "string" === typeof b ? "object" === b || "string" === b || "boolean" === b || "number" ===
        b || "function" === b ? this.qt = b : w.Ea(b, "the string 'object', 'number', 'string', 'boolean', or 'function'", "Map constructor: valtype") : "function" === typeof b ? this.qt = b === Object ? "object" : b === String ? "string" : b === Number ? "number" : b === Boolean ? "boolean" : b === Function ? "function" : b : w.Ea(b, "null, a primitive type name, or a class type", "Map constructor: valtype");
        this.md = {};
        this.ld = 0;
        this.Mi = this.Ob = null;
        this.C = 0;
        this.Rh = this.Ca = null
    }

    w.fa("Map", ka);
    ka.prototype.Fc = function () {
        var a = this.C;
        a++;
        999999999 < a && (a = 0);
        this.C = a
    };
    ka.prototype.freeze = ka.prototype.freeze = function () {
        this.Q = !0;
        return this
    };
    ka.prototype.thaw = ka.prototype.Ra = function () {
        this.Q = !1;
        return this
    };
    ka.prototype.toString = function () {
        return "Map(" + w.getTypeName(this.Qh) + "," + w.getTypeName(this.qt) + ")#" + w.Jd(this)
    };
    ka.prototype.add = ka.prototype.add = function (a, b) {
        this.Q && w.la(this, a);
        var c = a;
        w.Qa(a) && (c = w.Yp(a));
        var d = this.md[c];
        if (void 0 === d)return this.ld++, d = new Ca(a, b), this.md[c] = d, c = this.Rh, null === c ? this.Ca = d : (d.hp = c, c.Xa = d), this.Rh = d, this.Fc(), !0;
        d.value = b;
        return !1
    };
    ka.prototype.set = ka.prototype.set = function (a, b) {
        return this.add(a, b)
    };
    ka.prototype.addAll = ka.prototype.Hc = function (a) {
        if (null === a)return this;
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++) {
            var d = w.Da(a, c);
            this.add(d.key, d.value)
        } else for (a = a.i; a.next();)this.add(a.key, a.value);
        return this
    };
    ka.prototype.first = ka.prototype.first = function () {
        return this.Ca
    };
    ka.prototype.any = function (a) {
        for (var b = this.C, c = this.Ca; null !== c;) {
            if (a(c))return !0;
            this.C !== b && w.Na(this);
            c = c.Xa
        }
        return !1
    };
    ka.prototype.all = function (a) {
        for (var b = this.C, c = this.Ca; null !== c;) {
            if (!a(c))return !1;
            this.C !== b && w.Na(this);
            c = c.Xa
        }
        return !0
    };
    ka.prototype.each = function (a) {
        for (var b = this.C, c = this.Ca; null !== c;)a(c), this.C !== b && w.Na(this), c = c.Xa;
        return this
    };
    ka.prototype.map = function (a) {
        for (var b = new ka(this.Qh), c = this.C, d = this.Ca; null !== d;)b.add(d.key, a(d)), this.C !== c && w.Na(this), d = d.Xa;
        return b
    };
    ka.prototype.filter = function (a) {
        for (var b = new ka(this.Qh, this.qt), c = this.C, d = this.Ca; null !== d;)a(d) && b.add(d.key, d.value), this.C !== c && w.Na(this), d = d.Xa;
        return b
    };
    ka.prototype.concat = function (a) {
        return this.copy().Hc(a)
    };
    ka.prototype.contains = ka.prototype.contains = function (a) {
        var b = a;
        return w.Qa(a) && (b = w.Jd(a), void 0 === b) ? !1 : void 0 !== this.md[b]
    };
    ka.prototype.has = ka.prototype.has = function (a) {
        return this.contains(a)
    };
    ka.prototype.getValue = ka.prototype.ka = function (a) {
        var b = a;
        if (w.Qa(a) && (b = w.Jd(a), void 0 === b))return null;
        a = this.md[b];
        return void 0 === a ? null : a.value
    };
    ka.prototype.get = ka.prototype.get = function (a) {
        return this.ka(a)
    };
    ka.prototype.remove = ka.prototype.remove = function (a) {
        if (null === a)return !1;
        this.Q && w.la(this, a);
        var b = a;
        if (w.Qa(a) && (b = w.Jd(a), void 0 === b))return !1;
        a = this.md[b];
        if (void 0 === a)return !1;
        var c = a.Xa, d = a.hp;
        null !== c && (c.hp = d);
        null !== d && (d.Xa = c);
        this.Ca === a && (this.Ca = c);
        this.Rh === a && (this.Rh = d);
        delete this.md[b];
        this.ld--;
        this.Fc();
        return !0
    };
    ka.prototype["delete"] = ka.prototype.delete = function (a) {
        return this.remove(a)
    };
    ka.prototype.clear = ka.prototype.clear = function () {
        this.Q && w.la(this);
        this.md = {};
        this.ld = 0;
        this.Rh = this.Ca = null;
        this.Fc()
    };
    ka.prototype.copy = function () {
        var a = new ka(this.Qh, this.qt), b = this.md, c;
        for (c in b) {
            var d = b[c];
            a.add(d.key, d.value)
        }
        return a
    };
    ka.prototype.toArray = ka.prototype.dc = function () {
        var a = this.md, b = Array(this.ld), c = 0, d;
        for (d in a) {
            var e = a[d];
            b[c] = new Ca(e.key, e.value);
            c++
        }
        return b
    };
    ka.prototype.toKeySet = ka.prototype.Fj = function () {
        return new Ea(this)
    };
    w.u(ka, {count: "count"}, function () {
        return this.ld
    });
    w.u(ka, {size: "size"}, function () {
        return this.ld
    });
    w.u(ka, {i: "iterator"}, function () {
        if (0 >= this.count)return va;
        var a = this.Ob;
        return null !== a ? (a.reset(), a) : new Ga(this)
    });
    w.u(ka, {pF: "iteratorKeys"}, function () {
        return 0 >= this.count ? va : new Da(this)
    });
    w.u(ka, {qF: "iteratorValues"}, function () {
        if (0 >= this.count)return va;
        var a = this.Mi;
        return null !== a ? (a.reset(), a) : new Fa(this)
    });
    function z(a, b) {
        void 0 === a ? this.y = this.x = 0 : (this.x = a, this.y = b)
    }

    w.fa("Point", z);
    w.ji(z);
    w.$d(z, {x: !0, y: !0});
    z.prototype.assign = function (a) {
        this.x = a.x;
        this.y = a.y
    };
    z.prototype.setTo = z.prototype.l = function (a, b) {
        this.x = a;
        this.y = b;
        return this
    };
    z.prototype.set = z.prototype.set = function (a) {
        this.x = a.x;
        this.y = a.y;
        return this
    };
    z.prototype.copy = function () {
        var a = new z;
        a.x = this.x;
        a.y = this.y;
        return a
    };
    z.prototype.Ga = function () {
        Object.freeze(this);
        return this
    };
    z.prototype.S = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    z.prototype.freeze = function () {
        return this
    };
    z.prototype.Ra = function () {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    z.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            return new z(c, e)
        }
        return new z
    };
    z.stringify = function (a) {
        return a.x.toString() + " " + a.y.toString()
    };
    z.prototype.toString = function () {
        return "Point(" + this.x + "," + this.y + ")"
    };
    z.prototype.equals = z.prototype.L = function (a) {
        return a instanceof z ? this.x === a.x && this.y === a.y : !1
    };
    z.prototype.equalTo = z.prototype.ex = function (a, b) {
        return this.x === a && this.y === b
    };
    z.prototype.equalsApprox = z.prototype.Ic = function (a) {
        return K(this.x, a.x) && K(this.y, a.y)
    };
    z.prototype.add = z.prototype.add = function (a) {
        this.x += a.x;
        this.y += a.y;
        return this
    };
    z.prototype.subtract = z.prototype.Yn = function (a) {
        this.x -= a.x;
        this.y -= a.y;
        return this
    };
    z.prototype.offset = z.prototype.offset = function (a, b) {
        this.x += a;
        this.y += b;
        return this
    };
    z.prototype.rotate = z.prototype.rotate = function (a) {
        if (0 === a)return this;
        var b = this.x, c = this.y;
        if (0 === b && 0 === c)return this;
        var d = 0, e = 0;
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (a = a * Math.PI / 180, d = Math.cos(a), e = Math.sin(a));
        this.x = d * b - e * c;
        this.y = e * b + d * c;
        return this
    };
    z.prototype.scale = z.prototype.scale = function (a, b) {
        this.x *= a;
        this.y *= b;
        return this
    };
    z.prototype.distanceSquaredPoint = z.prototype.uf = function (a) {
        var b = a.x - this.x;
        a = a.y - this.y;
        return b * b + a * a
    };
    z.prototype.distanceSquared = z.prototype.Sp = function (a, b) {
        var c = a - this.x, d = b - this.y;
        return c * c + d * d
    };
    z.prototype.normalize = z.prototype.normalize = function () {
        var a = this.x, b = this.y, c = Math.sqrt(a * a + b * b);
        0 < c && (this.x = a / c, this.y = b / c);
        return this
    };
    z.prototype.directionPoint = z.prototype.yc = function (a) {
        return Ha(a.x - this.x, a.y - this.y)
    };
    z.prototype.direction = z.prototype.direction = function (a, b) {
        return Ha(a - this.x, b - this.y)
    };
    function Ha(a, b) {
        if (0 === a)return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b)return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b))return 0;
        var c = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? c = 0 > b ? c + 180 : 180 - c : 0 > b && (c = 360 - c);
        return c
    }

    z.prototype.projectOntoLineSegment = function (a, b, c, d) {
        Ia(a, b, c, d, this.x, this.y, this);
        return this
    };
    z.prototype.projectOntoLineSegmentPoint = function (a, b) {
        Ia(a.x, a.y, b.x, b.y, this.x, this.y, this);
        return this
    };
    z.prototype.snapToGrid = function (a, b, c, d) {
        Ka(this.x, this.y, a, b, c, d, this);
        return this
    };
    z.prototype.snapToGridPoint = function (a, b) {
        Ka(this.x, this.y, a.x, a.y, b.width, b.height, this);
        return this
    };
    z.prototype.setRectSpot = z.prototype.Vn = function (a, b) {
        this.x = a.x + b.x * a.width + b.offsetX;
        this.y = a.y + b.y * a.height + b.offsetY;
        return this
    };
    z.prototype.setSpot = z.prototype.Hu = function (a, b, c, d, e) {
        this.x = a + e.x * c + e.offsetX;
        this.y = b + e.y * d + e.offsetY;
        return this
    };
    z.prototype.transform = function (a) {
        a.nb(this);
        return this
    };
    function La(a, b) {
        b.li(a);
        return a
    }

    var Ma;
    z.distanceLineSegmentSquared = Ma = function (a, b, c, d, e, f) {
        var h = e - c, k = f - d, l = h * h + k * k;
        c -= a;
        d -= b;
        var m = -c * h - d * k;
        if (0 >= m || m >= l)return h = e - a, k = f - b, Math.min(c * c + d * d, h * h + k * k);
        a = h * d - k * c;
        return a * a / l
    };
    var Na;
    z.distanceSquared = Na = function (a, b, c, d) {
        a = c - a;
        b = d - b;
        return a * a + b * b
    };
    var Oa;
    z.direction = Oa = function (a, b, c, d) {
        a = c - a;
        b = d - b;
        if (0 === a)return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b)return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b))return 0;
        d = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? d = 0 > b ? d + 180 : 180 - d : 0 > b && (d = 360 - d);
        return d
    };
    z.prototype.isReal = z.prototype.H = function () {
        return isFinite(this.x) && isFinite(this.y)
    };
    function ha(a, b) {
        void 0 === a ? this.height = this.width = 0 : (this.width = a, this.height = b)
    }

    w.fa("Size", ha);
    w.ji(ha);
    w.$d(ha, {width: !0, height: !0});
    ha.prototype.assign = function (a) {
        this.width = a.width;
        this.height = a.height
    };
    ha.prototype.setTo = ha.prototype.l = function (a, b) {
        this.width = a;
        this.height = b;
        return this
    };
    ha.prototype.set = ha.prototype.set = function (a) {
        this.width = a.width;
        this.height = a.height;
        return this
    };
    ha.prototype.copy = function () {
        var a = new ha;
        a.width = this.width;
        a.height = this.height;
        return a
    };
    ha.prototype.Ga = function () {
        Object.freeze(this);
        return this
    };
    ha.prototype.S = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    ha.prototype.freeze = function () {
        return this
    };
    ha.prototype.Ra = function () {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    ha.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            return new ha(c, e)
        }
        return new ha
    };
    ha.stringify = function (a) {
        return a.width.toString() + " " + a.height.toString()
    };
    ha.prototype.toString = function () {
        return "Size(" + this.width + "," + this.height + ")"
    };
    ha.prototype.equals = ha.prototype.L = function (a) {
        return a instanceof ha ? this.width === a.width && this.height === a.height : !1
    };
    ha.prototype.equalTo = ha.prototype.ex = function (a, b) {
        return this.width === a && this.height === b
    };
    ha.prototype.equalsApprox = ha.prototype.Ic = function (a) {
        return K(this.width, a.width) && K(this.height, a.height)
    };
    ha.prototype.isReal = ha.prototype.H = function () {
        return isFinite(this.width) && isFinite(this.height)
    };
    function A(a, b, c, d) {
        void 0 === a ? this.height = this.width = this.y = this.x = 0 : a instanceof z ? b instanceof z ? (this.x = Math.min(a.x, b.x), this.y = Math.min(a.y, b.y), this.width = Math.abs(a.x - b.x), this.height = Math.abs(a.y - b.y)) : b instanceof ha ? (this.x = a.x, this.y = a.y, this.width = b.width, this.height = b.height) : w.k("Incorrect arguments supplied to Rect constructor") : (this.x = a, this.y = b, this.width = c, this.height = d)
    }

    w.fa("Rect", A);
    w.ji(A);
    w.$d(A, {x: !0, y: !0, width: !0, height: !0});
    A.prototype.assign = function (a) {
        this.x = a.x;
        this.y = a.y;
        this.width = a.width;
        this.height = a.height
    };
    function Pa(a, b, c) {
        a.width = b;
        a.height = c
    }

    A.prototype.setTo = A.prototype.l = function (a, b, c, d) {
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
        return this
    };
    A.prototype.set = A.prototype.set = function (a) {
        this.x = a.x;
        this.y = a.y;
        this.width = a.width;
        this.height = a.height;
        return this
    };
    A.prototype.setPoint = A.prototype.Tg = function (a) {
        this.x = a.x;
        this.y = a.y;
        return this
    };
    A.prototype.setSize = function (a) {
        this.width = a.width;
        this.height = a.height;
        return this
    };
    A.prototype.copy = function () {
        var a = new A;
        a.x = this.x;
        a.y = this.y;
        a.width = this.width;
        a.height = this.height;
        return a
    };
    A.prototype.Ga = function () {
        Object.freeze(this);
        return this
    };
    A.prototype.S = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    A.prototype.freeze = function () {
        return this
    };
    A.prototype.Ra = function () {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    A.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            for (var f = 0; "" === a[b];)b++;
            (d = a[b++]) && (f = parseFloat(d));
            for (var h = 0; "" === a[b];)b++;
            (d = a[b++]) && (h = parseFloat(d));
            return new A(c, e, f, h)
        }
        return new A
    };
    A.stringify = function (a) {
        return a.x.toString() + " " + a.y.toString() + " " + a.width.toString() + " " + a.height.toString()
    };
    A.prototype.toString = function () {
        return "Rect(" + this.x + "," + this.y + "," + this.width + "," + this.height + ")"
    };
    A.prototype.equals = A.prototype.L = function (a) {
        return a instanceof A ? this.x === a.x && this.y === a.y && this.width === a.width && this.height === a.height : !1
    };
    A.prototype.equalTo = A.prototype.ex = function (a, b, c, d) {
        return this.x === a && this.y === b && this.width === c && this.height === d
    };
    A.prototype.equalsApprox = A.prototype.Ic = function (a) {
        return K(this.x, a.x) && K(this.y, a.y) && K(this.width, a.width) && K(this.height, a.height)
    };
    function Qa(a, b) {
        return Xa(a.x, b.x) && Xa(a.y, b.y) && Xa(a.width, b.width) && Xa(a.height, b.height)
    }

    A.prototype.containsPoint = A.prototype.Ha = function (a) {
        return this.x <= a.x && this.x + this.width >= a.x && this.y <= a.y && this.y + this.height >= a.y
    };
    A.prototype.containsRect = A.prototype.vk = function (a) {
        return this.x <= a.x && a.x + a.width <= this.x + this.width && this.y <= a.y && a.y + a.height <= this.y + this.height
    };
    A.prototype.contains = A.prototype.contains = function (a, b, c, d) {
        void 0 === c && (c = 0);
        void 0 === d && (d = 0);
        return this.x <= a && a + c <= this.x + this.width && this.y <= b && b + d <= this.y + this.height
    };
    A.prototype.reset = function () {
        this.height = this.width = this.y = this.x = 0
    };
    A.prototype.offset = A.prototype.offset = function (a, b) {
        this.x += a;
        this.y += b;
        return this
    };
    A.prototype.inflate = A.prototype.Sf = function (a, b) {
        return Za(this, b, a, b, a)
    };
    A.prototype.addMargin = A.prototype.Jw = function (a) {
        return Za(this, a.top, a.right, a.bottom, a.left)
    };
    A.prototype.subtractMargin = A.prototype.EJ = function (a) {
        return Za(this, -a.top, -a.right, -a.bottom, -a.left)
    };
    A.prototype.grow = function (a, b, c, d) {
        return Za(this, a, b, c, d)
    };
    function Za(a, b, c, d, e) {
        var f = a.width;
        c + e <= -f ? (a.x += f / 2, a.width = 0) : (a.x -= e, a.width += c + e);
        c = a.height;
        b + d <= -c ? (a.y += c / 2, a.height = 0) : (a.y -= b, a.height += b + d);
        return a
    }

    A.prototype.intersectRect = function (a) {
        return $a(this, a.x, a.y, a.width, a.height)
    };
    A.prototype.intersect = A.prototype.$E = function (a, b, c, d) {
        return $a(this, a, b, c, d)
    };
    function $a(a, b, c, d, e) {
        var f = Math.max(a.x, b), h = Math.max(a.y, c);
        b = Math.min(a.x + a.width, b + d);
        c = Math.min(a.y + a.height, c + e);
        a.x = f;
        a.y = h;
        a.width = Math.max(0, b - f);
        a.height = Math.max(0, c - h);
        return a
    }

    A.prototype.intersectsRect = A.prototype.Kg = function (a) {
        return this.aF(a.x, a.y, a.width, a.height)
    };
    A.prototype.intersects = A.prototype.aF = function (a, b, c, d) {
        var e = this.width, f = this.x;
        if (Infinity !== e && Infinity !== c && (e += f, c += a, isNaN(c) || isNaN(e) || f > c || a > e))return !1;
        a = this.height;
        c = this.y;
        return Infinity !== a && Infinity !== d && (a += c, d += b, isNaN(d) || isNaN(a) || c > d || b > a) ? !1 : !0
    };
    function ab(a, b) {
        var c = a.width, d = b.width + 10 + 10, e = a.x, f = b.x - 10;
        if (e > d + f || f > c + e)return !1;
        c = a.height;
        d = b.height + 10 + 10;
        e = a.y;
        f = b.y - 10;
        return e > d + f || f > c + e ? !1 : !0
    }

    A.prototype.unionPoint = A.prototype.ri = function (a) {
        return bb(this, a.x, a.y, 0, 0)
    };
    A.prototype.unionRect = A.prototype.Gh = function (a) {
        return bb(this, a.x, a.y, a.width, a.height)
    };
    A.prototype.union = A.prototype.tG = function (a, b, c, d) {
        void 0 === c && (c = 0);
        void 0 === d && (d = 0);
        return bb(this, a, b, c, d)
    };
    function bb(a, b, c, d, e) {
        var f = Math.min(a.x, b), h = Math.min(a.y, c);
        b = Math.max(a.x + a.width, b + d);
        c = Math.max(a.y + a.height, c + e);
        a.x = f;
        a.y = h;
        a.width = b - f;
        a.height = c - h;
        return a
    }

    A.prototype.setSpot = A.prototype.Hu = function (a, b, c) {
        this.x = a - c.offsetX - c.x * this.width;
        this.y = b - c.offsetY - c.y * this.height;
        return this
    };
    var db;
    A.contains = db = function (a, b, c, d, e, f, h, k) {
        void 0 === h && (h = 0);
        void 0 === k && (k = 0);
        return a <= e && e + h <= a + c && b <= f && f + k <= b + d
    };
    A.intersects = function (a, b, c, d, e, f, h, k) {
        c += a;
        h += e;
        if (a > h || e > c)return !1;
        a = d + b;
        k += f;
        return b > k || f > a ? !1 : !0
    };
    w.defineProperty(A, {left: "left"}, function () {
        return this.x
    }, function (a) {
        this.x = a
    });
    w.defineProperty(A, {top: "top"}, function () {
        return this.y
    }, function (a) {
        this.y = a
    });
    w.defineProperty(A, {right: "right"}, function () {
        return this.x + this.width
    }, function (a) {
        this.x += a - (this.x + this.width)
    });
    w.defineProperty(A, {bottom: "bottom"}, function () {
        return this.y + this.height
    }, function (a) {
        this.y += a - (this.y + this.height)
    });
    w.defineProperty(A, {position: "position"}, function () {
        return new z(this.x, this.y)
    }, function (a) {
        this.x = a.x;
        this.y = a.y
    });
    w.defineProperty(A, {size: "size"}, function () {
        return new ha(this.width, this.height)
    }, function (a) {
        this.width = a.width;
        this.height = a.height
    });
    w.defineProperty(A, {Gl: "center"}, function () {
        return new z(this.x + this.width / 2, this.y + this.height / 2)
    }, function (a) {
        this.x = a.x - this.width / 2;
        this.y = a.y - this.height / 2
    });
    w.defineProperty(A, {ja: "centerX"}, function () {
        return this.x + this.width / 2
    }, function (a) {
        this.x = a - this.width / 2
    });
    w.defineProperty(A, {ra: "centerY"}, function () {
        return this.y + this.height / 2
    }, function (a) {
        this.y = a - this.height / 2
    });
    A.prototype.isReal = A.prototype.H = function () {
        return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height)
    };
    A.prototype.isEmpty = function () {
        return 0 === this.width && 0 === this.height
    };
    function eb(a, b, c, d) {
        void 0 === a ? this.left = this.bottom = this.right = this.top = 0 : void 0 === b ? this.left = this.bottom = this.right = this.top = a : void 0 === c ? (d = b, this.top = a, this.right = b, this.bottom = a, this.left = d) : void 0 !== d ? (this.top = a, this.right = b, this.bottom = c, this.left = d) : w.k("Invalid arguments to Margin constructor")
    }

    w.fa("Margin", eb);
    w.ji(eb);
    w.$d(eb, {top: !0, right: !0, bottom: !0, left: !0});
    eb.prototype.assign = function (a) {
        this.top = a.top;
        this.right = a.right;
        this.bottom = a.bottom;
        this.left = a.left
    };
    eb.prototype.setTo = eb.prototype.l = function (a, b, c, d) {
        this.top = a;
        this.right = b;
        this.bottom = c;
        this.left = d;
        return this
    };
    eb.prototype.set = eb.prototype.set = function (a) {
        this.top = a.top;
        this.right = a.right;
        this.bottom = a.bottom;
        this.left = a.left;
        return this
    };
    eb.prototype.copy = function () {
        var a = new eb;
        a.top = this.top;
        a.right = this.right;
        a.bottom = this.bottom;
        a.left = this.left;
        return a
    };
    eb.prototype.Ga = function () {
        Object.freeze(this);
        return this
    };
    eb.prototype.S = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    eb.prototype.freeze = function () {
        return this
    };
    eb.prototype.Ra = function () {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    eb.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = NaN; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            if (isNaN(c))return new eb;
            for (var e = NaN; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            if (isNaN(e))return new eb(c);
            for (var f = NaN; "" === a[b];)b++;
            (d = a[b++]) && (f = parseFloat(d));
            if (isNaN(f))return new eb(c, e);
            for (var h = NaN; "" === a[b];)b++;
            (d = a[b++]) && (h = parseFloat(d));
            return isNaN(h) ? new eb(c, e) : new eb(c, e, f, h)
        }
        return new eb
    };
    eb.stringify = function (a) {
        return a.top.toString() + " " + a.right.toString() + " " + a.bottom.toString() + " " + a.left.toString()
    };
    eb.prototype.toString = function () {
        return "Margin(" + this.top + "," + this.right + "," + this.bottom + "," + this.left + ")"
    };
    eb.prototype.equals = eb.prototype.L = function (a) {
        return a instanceof eb ? this.top === a.top && this.right === a.right && this.bottom === a.bottom && this.left === a.left : !1
    };
    eb.prototype.equalTo = eb.prototype.ex = function (a, b, c, d) {
        return this.top === a && this.right === b && this.bottom === c && this.left === d
    };
    eb.prototype.equalsApprox = eb.prototype.Ic = function (a) {
        return K(this.top, a.top) && K(this.right, a.right) && K(this.bottom, a.bottom) && K(this.left, a.left)
    };
    eb.prototype.isReal = eb.prototype.H = function () {
        return isFinite(this.top) && isFinite(this.right) && isFinite(this.bottom) && isFinite(this.left)
    };
    function ia() {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0
    }

    w.ji(ia);
    w.$d(ia, {m11: !0, m12: !0, m21: !0, m22: !0, dx: !0, dy: !0});
    ia.prototype.set = ia.prototype.set = function (a) {
        this.m11 = a.m11;
        this.m12 = a.m12;
        this.m21 = a.m21;
        this.m22 = a.m22;
        this.dx = a.dx;
        this.dy = a.dy;
        return this
    };
    ia.prototype.copy = function () {
        var a = new ia;
        a.m11 = this.m11;
        a.m12 = this.m12;
        a.m21 = this.m21;
        a.m22 = this.m22;
        a.dx = this.dx;
        a.dy = this.dy;
        return a
    };
    ia.prototype.toString = function () {
        return "Transform(" + this.m11 + "," + this.m12 + "," + this.m21 + "," + this.m22 + "," + this.dx + "," + this.dy + ")"
    };
    ia.prototype.equals = ia.prototype.L = function (a) {
        return a instanceof ia ? this.m11 === a.m11 && this.m12 === a.m12 && this.m21 === a.m21 && this.m22 === a.m22 && this.dx === a.dx && this.dy === a.dy : !1
    };
    ia.prototype.isIdentity = ia.prototype.cu = function () {
        return 1 === this.m11 && 0 === this.m12 && 0 === this.m21 && 1 === this.m22 && 0 === this.dx && 0 === this.dy
    };
    ia.prototype.reset = ia.prototype.reset = function () {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0;
        return this
    };
    ia.prototype.multiply = ia.prototype.multiply = function (a) {
        var b = this.m12 * a.m11 + this.m22 * a.m12, c = this.m11 * a.m21 + this.m21 * a.m22, d = this.m12 * a.m21 + this.m22 * a.m22, e = this.m11 * a.dx + this.m21 * a.dy + this.dx, f = this.m12 * a.dx + this.m22 * a.dy + this.dy;
        this.m11 = this.m11 * a.m11 + this.m21 * a.m12;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = f;
        return this
    };
    ia.prototype.multiplyInverted = ia.prototype.yF = function (a) {
        var b = 1 / (a.m11 * a.m22 - a.m12 * a.m21), c = a.m22 * b, d = -a.m12 * b, e = -a.m21 * b, f = a.m11 * b, h = b * (a.m21 * a.dy - a.m22 * a.dx), k = b * (a.m12 * a.dx - a.m11 * a.dy);
        a = this.m12 * c + this.m22 * d;
        b = this.m11 * e + this.m21 * f;
        e = this.m12 * e + this.m22 * f;
        f = this.m11 * h + this.m21 * k + this.dx;
        h = this.m12 * h + this.m22 * k + this.dy;
        this.m11 = this.m11 * c + this.m21 * d;
        this.m12 = a;
        this.m21 = b;
        this.m22 = e;
        this.dx = f;
        this.dy = h;
        return this
    };
    ia.prototype.invert = ia.prototype.qx = function () {
        var a = 1 / (this.m11 * this.m22 - this.m12 * this.m21), b = -this.m12 * a, c = -this.m21 * a, d = this.m11 * a, e = a * (this.m21 * this.dy - this.m22 * this.dx), f = a * (this.m12 * this.dx - this.m11 * this.dy);
        this.m11 = this.m22 * a;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = f;
        return this
    };
    ia.prototype.rotate = ia.prototype.rotate = function (a, b, c) {
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        if (0 === a)return this;
        this.translate(b, c);
        var d = 0, e = 0;
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (e = a * Math.PI / 180, d = Math.cos(e), e = Math.sin(e));
        a = this.m12 * d + this.m22 * e;
        var f = this.m11 * -e + this.m21 * d, h = this.m12 * -e + this.m22 * d;
        this.m11 = this.m11 * d + this.m21 * e;
        this.m12 = a;
        this.m21 = f;
        this.m22 = h;
        this.translate(-b, -c);
        return this
    };
    ia.prototype.translate = ia.prototype.translate = function (a, b) {
        this.dx += this.m11 * a + this.m21 * b;
        this.dy += this.m12 * a + this.m22 * b;
        return this
    };
    ia.prototype.scale = ia.prototype.scale = function (a, b) {
        void 0 === b && (b = a);
        this.m11 *= a;
        this.m12 *= a;
        this.m21 *= b;
        this.m22 *= b;
        return this
    };
    ia.prototype.transformPoint = ia.prototype.nb = function (a) {
        var b = a.x, c = a.y;
        a.x = b * this.m11 + c * this.m21 + this.dx;
        a.y = b * this.m12 + c * this.m22 + this.dy;
        return a
    };
    ia.prototype.invertedTransformPoint = ia.prototype.li = function (a) {
        var b = 1 / (this.m11 * this.m22 - this.m12 * this.m21), c = -this.m12 * b, d = this.m11 * b, e = b * (this.m12 * this.dx - this.m11 * this.dy), f = a.x, h = a.y;
        a.x = f * this.m22 * b + h * -this.m21 * b + b * (this.m21 * this.dy - this.m22 * this.dx);
        a.y = f * c + h * d + e;
        return a
    };
    ia.prototype.transformRect = ia.prototype.sG = function (a) {
        var b = a.x, c = a.y, d = b + a.width, e = c + a.height, f = this.m11, h = this.m12, k = this.m21, l = this.m22, m = this.dx, n = this.dy, p = b * f + c * k + m, q = b * h + c * l + n, r = d * f + c * k + m, c = d * h + c * l + n, s = b * f + e * k + m, b = b * h + e * l + n, f = d * f + e * k + m, d = d * h + e * l + n, e = p, h = q, p = Math.min(p, r), e = Math.max(e, r), h = Math.min(h, c), q = Math.max(q, c), p = Math.min(p, s), e = Math.max(e, s), h = Math.min(h, b), q = Math.max(q, b), p = Math.min(p, f), e = Math.max(e, f), h = Math.min(h, d), q = Math.max(q, d);
        a.x = p;
        a.y = h;
        a.width = e - p;
        a.height = q - h;
        return a
    };
    function L(a, b, c, d) {
        void 0 === a ? this.offsetY = this.offsetX = this.y = this.x = 0 : (void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.x = a, this.y = b, this.offsetX = c, this.offsetY = d)
    }

    w.fa("Spot", L);
    w.ji(L);
    w.$d(L, {x: !0, y: !0, offsetX: !0, offsetY: !0});
    L.prototype.assign = function (a) {
        this.x = a.x;
        this.y = a.y;
        this.offsetX = a.offsetX;
        this.offsetY = a.offsetY
    };
    L.prototype.setTo = L.prototype.l = function (a, b, c, d) {
        this.x = a;
        this.y = b;
        this.offsetX = c;
        this.offsetY = d;
        return this
    };
    L.prototype.set = L.prototype.set = function (a) {
        this.x = a.x;
        this.y = a.y;
        this.offsetX = a.offsetX;
        this.offsetY = a.offsetY;
        return this
    };
    L.prototype.copy = function () {
        var a = new L;
        a.x = this.x;
        a.y = this.y;
        a.offsetX = this.offsetX;
        a.offsetY = this.offsetY;
        return a
    };
    L.prototype.Ga = function () {
        Object.freeze(this);
        return this
    };
    L.prototype.S = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    L.prototype.freeze = function () {
        return this
    };
    L.prototype.Ra = function () {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    function gb(a, b) {
        a.x = NaN;
        a.y = NaN;
        a.offsetX = b;
        return a
    }

    var rb;
    L.parse = rb = function (a) {
        if ("string" === typeof a) {
            //a = a.trim();  lzz
            if ("None" === a)return sb;
            if ("TopLeft" === a)return vb;
            if ("Top" === a || "TopCenter" === a || "MiddleTop" === a)return wb;
            if ("TopRight" === a)return Ab;
            if ("Left" === a || "LeftCenter" === a || "MiddleLeft" === a)return Eb;
            if ("Center" === a)return Fb;
            if ("Right" === a || "RightCenter" === a || "MiddleRight" === a)return Hb;
            if ("BottomLeft" === a)return Ib;
            if ("Bottom" === a || "BottomCenter" === a || "MiddleBottom" === a)return Jb;
            if ("BottomRight" === a)return Kb;
            if ("TopSide" === a)return Sb;
            if ("LeftSide" ===
                a)return Tb;
            if ("RightSide" === a)return Ub;
            if ("BottomSide" === a)return Vb;
            if ("TopBottomSides" === a)return Yb;
            if ("LeftRightSides" === a)return Zb;
            if ("TopLeftSides" === a)return $b;
            if ("TopRightSides" === a)return ac;
            if ("BottomLeftSides" === a)return bc;
            if ("BottomRightSides" === a)return cc;
            if ("NotTopSide" === a)return dc;
            if ("NotLeftSide" === a)return kc;
            if ("NotRightSide" === a)return lc;
            if ("NotBottomSide" === a)return mc;
            if ("AllSides" === a)return nc;
            if ("Default" === a)return oc;
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            void 0 !== d && 0 < d.length && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (e = parseFloat(d));
            for (var f = 0; "" === a[b];)b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (f = parseFloat(d));
            for (var h = 0; "" === a[b];)b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (h = parseFloat(d));
            return new L(c, e, f, h)
        }
        return new L
    };
    L.stringify = function (a) {
        return a.fd() ? a.x.toString() + " " + a.y.toString() + " " + a.offsetX.toString() + " " + a.offsetY.toString() : a.toString()
    };
    L.prototype.toString = function () {
        return this.fd() ? 0 === this.offsetX && 0 === this.offsetY ? "Spot(" + this.x + "," + this.y + ")" : "Spot(" + this.x + "," + this.y + "," + this.offsetX + "," + this.offsetY + ")" : this.L(sb) ? "None" : this.L(vb) ? "TopLeft" : this.L(wb) ? "Top" : this.L(Ab) ? "TopRight" : this.L(Eb) ? "Left" : this.L(Fb) ? "Center" : this.L(Hb) ? "Right" : this.L(Ib) ? "BottomLeft" : this.L(Jb) ? "Bottom" : this.L(Kb) ? "BottomRight" : this.L(Sb) ? "TopSide" : this.L(Tb) ? "LeftSide" : this.L(Ub) ? "RightSide" : this.L(Vb) ? "BottomSide" : this.L(Yb) ? "TopBottomSides" : this.L(Zb) ?
            "LeftRightSides" : this.L($b) ? "TopLeftSides" : this.L(ac) ? "TopRightSides" : this.L(bc) ? "BottomLeftSides" : this.L(cc) ? "BottomRightSides" : this.L(dc) ? "NotTopSide" : this.L(kc) ? "NotLeftSide" : this.L(lc) ? "NotRightSide" : this.L(mc) ? "NotBottomSide" : this.L(nc) ? "AllSides" : this.L(oc) ? "Default" : "None"
    };
    L.prototype.equals = L.prototype.L = function (a) {
        return a instanceof L ? (this.x === a.x || isNaN(this.x) && isNaN(a.x)) && (this.y === a.y || isNaN(this.y) && isNaN(a.y)) && this.offsetX === a.offsetX && this.offsetY === a.offsetY : !1
    };
    L.prototype.opposite = L.prototype.CF = function () {
        return new L(.5 - (this.x - .5), .5 - (this.y - .5), -this.offsetX, -this.offsetY)
    };
    L.prototype.includesSide = L.prototype.qj = function (a) {
        if (!this.sj())return !1;
        if (!a.sj())if (a.L(pc))a = Tb; else if (a.L(qc))a = Ub; else if (a.L(uc))a = Sb; else if (a.L(vc))a = Vb; else return !1;
        a = a.offsetY;
        return (this.offsetY & a) === a
    };
    L.prototype.isSpot = L.prototype.fd = function () {
        return !isNaN(this.x) && !isNaN(this.y)
    };
    L.prototype.isNoSpot = L.prototype.Nd = function () {
        return isNaN(this.x) || isNaN(this.y)
    };
    L.prototype.isSide = L.prototype.sj = function () {
        return isNaN(this.x) && isNaN(this.y) && 1 === this.offsetX && 0 !== this.offsetY
    };
    L.prototype.isNone = function () {
        return isNaN(this.x) && isNaN(this.y) && 0 === this.offsetX && 0 === this.offsetY
    };
    L.prototype.isDefault = L.prototype.Uc = function () {
        return isNaN(this.x) && isNaN(this.y) && -1 === this.offsetX && 0 === this.offsetY
    };
    var sb;
    L.None = sb = gb(new L(0, 0, 0, 0), 0).Ga();
    var oc;
    L.Default = oc = gb(new L(0, 0, -1, 0), -1).Ga();
    var vb;
    L.TopLeft = vb = (new L(0, 0, 0, 0)).Ga();
    var wb;
    L.TopCenter = wb = (new L(.5, 0, 0, 0)).Ga();
    var Ab;
    L.TopRight = Ab = (new L(1, 0, 0, 0)).Ga();
    var Eb;
    L.LeftCenter = Eb = (new L(0, .5, 0, 0)).Ga();
    var Fb;
    L.Center = Fb = (new L(.5, .5, 0, 0)).Ga();
    var Hb;
    L.RightCenter = Hb = (new L(1, .5, 0, 0)).Ga();
    var Ib;
    L.BottomLeft = Ib = (new L(0, 1, 0, 0)).Ga();
    var Jb;
    L.BottomCenter = Jb = (new L(.5, 1, 0, 0)).Ga();
    var Kb;
    L.BottomRight = Kb = (new L(1, 1, 0, 0)).Ga();
    var Dc;
    L.MiddleTop = Dc = wb;
    var Ec;
    L.MiddleLeft = Ec = Eb;
    var Fc;
    L.MiddleRight = Fc = Hb;
    var Gc;
    L.MiddleBottom = Gc = Jb;
    var uc;
    L.Top = uc = wb;
    var pc;
    L.Left = pc = Eb;
    var qc;
    L.Right = qc = Hb;
    var vc;
    L.Bottom = vc = Jb;
    var Sb;
    L.TopSide = Sb = gb(new L(0, 0, 1, w.jd), 1).Ga();
    var Tb;
    L.LeftSide = Tb = gb(new L(0, 0, 1, w.Qc), 1).Ga();
    var Ub;
    L.RightSide = Ub = gb(new L(0, 0, 1, w.Zc), 1).Ga();
    var Vb;
    L.BottomSide = Vb = gb(new L(0, 0, 1, w.Yc), 1).Ga();
    var Yb;
    L.TopBottomSides = Yb = gb(new L(0, 0, 1, w.jd | w.Yc), 1).Ga();
    var Zb;
    L.LeftRightSides = Zb = gb(new L(0, 0, 1, w.Qc | w.Zc), 1).Ga();
    var $b;
    L.TopLeftSides = $b = gb(new L(0, 0, 1, w.jd | w.Qc), 1).Ga();
    var ac;
    L.TopRightSides = ac = gb(new L(0, 0, 1, w.jd | w.Zc), 1).Ga();
    var bc;
    L.BottomLeftSides = bc = gb(new L(0, 0, 1, w.Yc | w.Qc), 1).Ga();
    var cc;
    L.BottomRightSides = cc = gb(new L(0, 0, 1, w.Yc | w.Zc), 1).Ga();
    var dc;
    L.NotTopSide = dc = gb(new L(0, 0, 1, w.Qc | w.Zc | w.Yc), 1).Ga();
    var kc;
    L.NotLeftSide = kc = gb(new L(0, 0, 1, w.jd | w.Zc | w.Yc), 1).Ga();
    var lc;
    L.NotRightSide = lc = gb(new L(0, 0, 1, w.jd | w.Qc | w.Yc), 1).Ga();
    var mc;
    L.NotBottomSide = mc = gb(new L(0, 0, 1, w.jd | w.Qc | w.Zc), 1).Ga();
    var nc;
    L.AllSides = nc = gb(new L(0, 0, 1, w.jd | w.Qc | w.Zc | w.Yc), 1).Ga();
    function Hc() {
        this.Sb = [1, 0, 0, 1, 0, 0]
    }

    Hc.prototype.copy = function () {
        var a = new Hc;
        a.Sb[0] = this.Sb[0];
        a.Sb[1] = this.Sb[1];
        a.Sb[2] = this.Sb[2];
        a.Sb[3] = this.Sb[3];
        a.Sb[4] = this.Sb[4];
        a.Sb[5] = this.Sb[5];
        return a
    };
    Hc.prototype.translate = function (a, b) {
        this.Sb[4] += this.Sb[0] * a + this.Sb[2] * b;
        this.Sb[5] += this.Sb[1] * a + this.Sb[3] * b
    };
    Hc.prototype.scale = function (a, b) {
        this.Sb[0] *= a;
        this.Sb[1] *= a;
        this.Sb[2] *= b;
        this.Sb[3] *= b
    };
    function Ic(a) {
        this.type = a;
        this.r2 = this.y2 = this.x2 = this.r1 = this.y1 = this.x1 = 0;
        this.mE = [];
        this.pattern = null
    }

    Ic.prototype.addColorStop = function (a, b) {
        this.mE.push({offset: a, color: b})
    };
    function Lc(a, b, c) {
        this.fillStyle = "#000000";
        this.font = "10px sans-serif";
        this.globalAlpha = 1;
        this.lineCap = "butt";
        this.Hn = 0;
        this.lineJoin = "miter";
        this.lineWidth = 1;
        this.miterLimit = 10;
        this.shadowBlur = 0;
        this.shadowColor = "rgba(0, 0, 0, 0)";
        this.shadowOffsetY = this.shadowOffsetX = 0;
        this.strokeStyle = "#000000";
        this.textAlign = "start";
        this.Kp = !1;
        this.zg = this.Ys = this.Xs = 0;
        this.document = b || document;
        this.BE = c;
        this.Bx = null;
        this.path = [];
        this.uh = new Hc;
        this.stack = [];
        this.wf = [];
        this.ax = a;
        this.ZI = "http://www.w3.org/2000/svg";
        this.width = this.ax.width;
        this.height = this.ax.height;
        this.gm = Mc(this, "svg", {
            width: this.width + "px",
            height: this.height + "px",
            RL: "0 0 " + this.ax.width + " " + this.ax.height
        });
        this.gm.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "http://www.w3.org/2000/svg");
        this.gm.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
        Nc(this, 1, 0, 0, 1, 0, 0);
        a = w.mm++;
        b = Mc(this, "clipPath", {id: "mainClip" + a});
        b.appendChild(Mc(this, "rect", {x: 0, y: 0, width: this.width, height: this.height}));
        this.gm.appendChild(b);
        this.wf[0].setAttributeNS(null, "clip-path", "url(#mainClip" + a + ")")
    }

    g = Lc.prototype;
    g.arc = function (a, b, c, d, e, f) {
        Oc(this, a, b, c, d, e, f)
    };
    g.beginPath = function () {
        this.path = []
    };
    g.bezierCurveTo = function (a, b, c, d, e, f) {
        this.path.push(["C", a, b, c, d, e, f])
    };
    g.clearRect = function () {
    };
    g.clip = function () {
        Pc(this, "clipPath", this.path, new Hc)
    };
    g.closePath = function () {
        this.path.push(["z"])
    };
    g.createLinearGradient = function (a, b, c, d) {
        var e = new Ic("linear");
        e.x1 = a;
        e.y1 = b;
        e.x2 = c;
        e.y2 = d;
        return e
    };
    g.createPattern = function () {
        return null
    };
    g.createRadialGradient = function (a, b, c, d, e, f) {
        var h = new Ic("radial");
        h.x1 = a;
        h.y1 = b;
        h.r1 = c;
        h.x2 = d;
        h.y2 = e;
        h.r2 = f;
        return h
    };
    g.drawImage = function (a, b, c, d, e, f, h, k, l) {
        var m = "";
        a instanceof HTMLCanvasElement && (m = a.toDataURL());
        a instanceof HTMLImageElement && (m = a.src);
        void 0 === d && (f = b, h = c, k = d = a.naturalWidth, l = e = a.naturalHeight);
        d = d || 0;
        e = e || 0;
        f = f || 0;
        h = h || 0;
        k = k || 0;
        l = l || 0;
        m = {
            x: 0,
            y: 0,
            width: a.naturalWidth,
            height: a.naturalHeight,
            href: m,
            preserveAspectRatio: "xMidYMid slice"
        };
        Xa(d, k) && Xa(e, l) || (m.preserveAspectRatio = "none");
        var n = "";
        k /= d;
        l /= e;
        if (0 !== f || 0 !== h)n += " translate(" + f + ", " + h + ")";
        if (1 !== k || 1 !== l)n += " scale(" + k + ", " + l + ")";
        if (0 !==
            b || 0 !== c)n += " translate(" + -b + ", " + -c + ")";
        if (0 !== b || 0 !== c || d !== a.naturalWidth || e !== a.naturalHeight)a = "CLIP" + w.mm++, f = Mc(this, "clipPath", {id: a}), f.appendChild(Mc(this, "rect", {
            x: b,
            y: c,
            width: d,
            height: e
        })), this.gm.appendChild(f), m["clip-path"] = "url(#" + a + ")";
        Qc(this, "image", m, this.uh, n);
        this.addElement("image", m)
    };
    g.fill = function () {
        Pc(this, "fill", this.path, this.uh)
    };
    g.Hg = function () {
        this.Kp ? this.clip() : this.fill()
    };
    g.fillRect = function (a, b, c, d) {
        Rc(this, "fill", [a, b, c, d], this.uh)
    };
    g.fillText = function (a, b, c) {
        a = [a, b, c];
        b = this.textAlign;
        "left" === b ? b = "start" : "right" === b ? b = "end" : "center" === b && (b = "middle");
        b = {x: a[1], y: a[2], style: "font: " + this.font, "text-anchor": b};
        Qc(this, "fill", b, this.uh);
        this.addElement("text", b, a[0])
    };
    g.lineTo = function (a, b) {
        this.path.push(["L", a, b])
    };
    g.moveTo = function (a, b) {
        this.path.push(["M", a, b])
    };
    g.quadraticCurveTo = function (a, b, c, d) {
        this.path.push(["Q", a, b, c, d])
    };
    g.rect = function (a, b, c, d) {
        this.path.push(["M", a, b], ["L", a + c, b], ["L", a + c, b + d], ["L", a, b + d], ["z"])
    };
    g.restore = function () {
        this.uh = this.stack.pop();
        this.path = this.stack.pop();
        var a = this.stack.pop();
        this.fillStyle = a.fillStyle;
        this.font = a.font;
        this.globalAlpha = a.globalAlpha;
        this.lineCap = a.lineCap;
        this.Hn = a.Hn;
        this.lineJoin = a.lineJoin;
        this.lineWidth = a.lineWidth;
        this.miterLimit = a.miterLimit;
        this.shadowBlur = a.shadowBlur;
        this.shadowColor = a.shadowColor;
        this.shadowOffsetX = a.shadowOffsetX;
        this.shadowOffsetY = a.shadowOffsetY;
        this.strokeStyle = a.strokeStyle;
        this.textAlign = a.textAlign
    };
    g.save = function () {
        this.stack.push({
            fillStyle: this.fillStyle,
            font: this.font,
            globalAlpha: this.globalAlpha,
            lineCap: this.lineCap,
            Hn: this.Hn,
            lineJoin: this.lineJoin,
            lineWidth: this.lineWidth,
            miterLimit: this.miterLimit,
            shadowBlur: this.shadowBlur,
            shadowColor: this.shadowColor,
            shadowOffsetX: this.shadowOffsetX,
            shadowOffsetY: this.shadowOffsetY,
            strokeStyle: this.strokeStyle,
            textAlign: this.textAlign
        });
        for (var a = [], b = 0; b < this.path.length; b++)a.push(this.path[b]);
        this.stack.push(a);
        this.stack.push(this.uh.copy())
    };
    g.setTransform = function (a, b, c, d, e, f) {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === f || Nc(this, a, b, c, d, e, f)
    };
    g.scale = function (a, b) {
        this.uh.scale(a, b)
    };
    g.translate = function (a, b) {
        this.uh.translate(a, b)
    };
    g.transform = function () {
    };
    g.stroke = function () {
        Pc(this, "stroke", this.path, this.uh)
    };
    g.Cj = function () {
        this.Kp || this.stroke()
    };
    g.strokeRect = function (a, b, c, d) {
        Rc(this, "stroke", [a, b, c, d], this.uh)
    };
    function Mc(a, b, c, d) {
        a = a.document.createElementNS(a.ZI, b);
        if (w.Qa(c))for (var e in c)a.setAttributeNS("href" === e ? "http://www.w3.org/1999/xlink" : "", e, c[e]);
        void 0 !== d && (a.textContent = d);
        return a
    }

    g.addElement = function (a, b, c) {
        a = Mc(this, a, b, c);
        0 < this.wf.length ? this.wf[this.wf.length - 1].appendChild(a) : this.gm.appendChild(a);
        return this.Bx = a
    };
    function Qc(a, b, c, d, e) {
        1 !== a.globalAlpha && (c.opacity = a.globalAlpha);
        "fill" === b ? (a.fillStyle instanceof Ic ? c.fill = Sc(a, a.fillStyle) : (/^rgba\(/.test(a.fillStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle), c.fill = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["fill-opacity"] = b[4]), c.fill = a.fillStyle), c.stroke = "none") : "stroke" === b && (c.fill = "none", a.strokeStyle instanceof Ic ? c.stroke = Sc(a, a.strokeStyle) : (/^rgba\(/.test(a.strokeStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
            c.stroke = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["stroke-opacity"] = b[4]), c.stroke = a.strokeStyle), c["stroke-width"] = a.lineWidth, c["stroke-linecap"] = a.lineCap, c["stroke-linejoin"] = a.lineJoin, c["stroke-miterlimit"] = a.miterLimit);
        a = d.Sb;
        a = "matrix(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ")";
        void 0 !== e && (a += e);
        c.transform = a
    }

    function Sc(a, b) {
        var c = "GRAD" + w.mm++, d;
        if ("linear" === b.type)d = Mc(a, "linearGradient", {
            x1: b.x1,
            x2: b.x2,
            y1: b.y1,
            y2: b.y2,
            id: c,
            gradientUnits: "userSpaceOnUse"
        }); else if ("radial" === b.type)d = Mc(a, "radialGradient", {
            x1: b.x1,
            x2: b.x2,
            y1: b.y1,
            y2: b.y2,
            r1: b.r1,
            r2: b.r2,
            id: c
        }); else if ("pattern" === b.type) {
            var e = b.pattern;
            d = {width: e.width, height: e.height, id: c, patternUnits: "userSpaceOnUse"};
            var f = "";
            e instanceof HTMLCanvasElement && (f = e.toDataURL());
            e instanceof HTMLImageElement && (f = e.src);
            e = {
                x: 0, y: 0, width: e.width, height: e.height,
                href: f
            };
            d = Mc(a, "pattern", d);
            d.appendChild(Mc(a, "image", e))
        } else throw Error("invalid gradient");
        for (var e = b.mE, f = e.length, h = [], k = 0; k < f; k++) {
            var l = e[k], m = l.color, l = {offset: l.offset, "stop-color": m};
            /^rgba\(/.test(m) && (m = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m), l["stop-color"] = "rgb(" + m[1] + "," + m[2] + "," + m[3] + ")", l["stop-opacity"] = m[4]);
            h.push(l)
        }
        h.sort(function (a, b) {
            return a.offset > b.offset ? 1 : -1
        });
        for (k = 0; k < f; k++)d.appendChild(Mc(a, "stop", h[k]));
        a.gm.appendChild(d);
        return "url(#" + c + ")"
    }

    function Rc(a, b, c, d) {
        c = {x: c[0], y: c[1], width: c[2], height: c[3]};
        Qc(a, b, c, d);
        a.addElement("rect", c)
    }

    function Pc(a, b, c, d) {
        for (var e = [], f = 0; f < c.length; f++) {
            var h = w.Hl(c[f]), k = [h.shift()];
            if ("A" === k[0])k.push(h.shift() + "," + h.shift(), h.shift(), h.shift() + "," + h.shift(), h.shift() + "," + h.shift()); else for (; h.length;)k.push(h.shift() + "," + h.shift());
            e.push(k.join(" "))
        }
        c = {d: e.join(" ")};
        Qc(a, b, c, d);
        "clipPath" === b ? (b = "CLIP" + w.mm++, d = Mc(a, "clipPath", {id: b}), d.appendChild(Mc(a, "path", c)), a.gm.appendChild(d), 0 < a.wf.length && a.wf[a.wf.length - 1].setAttributeNS(null, "clip-path", "url(#" + b + ")")) : a.addElement("path",
            c)
    }

    function Oc(a, b, c, d, e, f, h) {
        var k = Math.abs(e - f);
        if (e !== f) {
            var l = b + d * Math.cos(f);
            f = c + d * Math.sin(f);
            k >= 2 * Math.PI ? (Oc(a, b, c, d, e, e + Math.PI, h), Oc(a, b, c, d, e + Math.PI, e + 2 * Math.PI, h), a.path.push(["M", l, f])) : (b += d * Math.cos(e), c += d * Math.sin(e), k = 180 * k / Math.PI, e = h ? 0 : 1, h = 180 <= k === !!h ? 0 : 1, 0 !== a.path.length ? a.path.push(["L", b, c]) : a.path.push(["M", b, c]), a.path.push(["A", d, d, k, h, e, l, f]))
        }
    }

    function Nc(a, b, c, d, e, f, h) {
        var k = new Hc;
        k.Sb = [b, c, d, e, f, h];
        b = {};
        Qc(a, "g", b, k);
        k = a.addElement("g", b);
        a.wf.push(k)
    }

    g.$a = function () {
        if (0 !== this.shadowOffsetX || 0 !== this.shadowOffsetY || 0 !== this.shadowBlur) {
            var a = "SHADOW" + w.mm++, b = this.addElement("filter", {
                id: a,
                x: "-100%",
                y: "-100%",
                width: "300%",
                height: "300%"
            }, null), c, d, e, f, h;
            c = Mc(this, "feGaussianBlur", {"in": "SourceAlpha", result: "blur", GL: this.shadowBlur / 2});
            d = Mc(this, "feFlood", {"in": "blur", result: "flood", "flood-color": this.shadowColor});
            e = Mc(this, "feComposite", {"in": "flood", in2: "blur", operator: "in", result: "comp"});
            f = Mc(this, "feOffset", {
                "in": "comp", result: "offsetBlur",
                dx: this.shadowOffsetX, dy: this.shadowOffsetY
            });
            h = Mc(this, "feMerge", {});
            h.appendChild(Mc(this, "feMergeNode", {"in": "offsetBlur"}));
            h.appendChild(Mc(this, "feMergeNode", {"in": "SourceGraphic"}));
            b.appendChild(c);
            b.appendChild(d);
            b.appendChild(e);
            b.appendChild(f);
            b.appendChild(h);
            0 < this.wf.length && this.wf[this.wf.length - 1].setAttributeNS(null, "filter", "url(#" + a + ")")
        }
    };
    g.hB = function (a, b, c) {
        this.Xs = a;
        this.Ys = b;
        this.zg = c
    };
    g.Wn = function () {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    g.Xn = function () {
        this.shadowOffsetX = this.Xs;
        this.shadowOffsetY = this.Ys;
        this.shadowBlur = this.zg
    };
    g.dA = function () {
        return !1
    };
    g.aA = function () {
    };
    g.Ee = function () {
    };
    g.ey = function () {
    };
    Lc.prototype.rotate = function () {
    };
    function Tc(a, b) {
        this.ownerDocument = void 0 === b ? document : b;
        var c = this.ownerDocument.createElement("canvas");
        c.tabIndex = 0;
        this.Gd = c;
        this.wk = new Uc(c);
        c.Z = a;
        Object.seal(this)
    }

    g = Tc.prototype;
    g.toDataURL = function (a, b) {
        return this.Gd.toDataURL(a, b)
    };
    g.getBoundingClientRect = function () {
        return this.Gd.getBoundingClientRect()
    };
    g.focus = function () {
        return this.Gd.focus()
    };
    g.addEventListener = function (a, b, c) {
        this.Gd.addEventListener(a, b, c)
    };
    g.removeEventListener = function (a, b, c) {
        this.Gd.removeEventListener(a, b, c)
    };
    w.defineProperty(Tc, {width: "width"}, function () {
        return this.Gd.width
    }, function (a) {
        this.Gd.width = a
    });
    w.defineProperty(Tc, {height: "height"}, function () {
        return this.Gd.height
    }, function (a) {
        this.Gd.height = a
    });
    w.u(Tc, {style: "style"}, function () {
        return this.Gd.style
    });
    function Uc(a) {
        a.getContext && a.getContext("2d") || w.k("Browser does not support HTML Canvas Element");
        this.ya = a.getContext("2d");
        this.By = this.Dy = this.Cy = "";
        this.Tq = !1;
        this.zg = this.Ys = this.Xs = 0;
        Object.seal(this)
    }

    Uc.prototype.ey = function (a) {
        this.ya.sA = a;
        this.ya.mL = a
    };
    w.defineProperty(Uc, {fillStyle: "fillStyle"}, function () {
        return this.ya.fillStyle
    }, function (a) {
        this.By !== a && (this.By = this.ya.fillStyle = a)
    });
    w.defineProperty(Uc, {font: "font"}, function () {
        return this.ya.font
    }, function (a) {
        this.Cy !== a && (this.Cy = this.ya.font = a)
    });
    w.defineProperty(Uc, {globalAlpha: "globalAlpha"}, function () {
        return this.ya.globalAlpha
    }, function (a) {
        this.ya.globalAlpha = a
    });
    w.defineProperty(Uc, {lineCap: "lineCap"}, function () {
        return this.ya.lineCap
    }, function (a) {
        this.ya.lineCap = a
    });
    w.defineProperty(Uc, {Hn: "lineDashOffset"}, function () {
        return this.ya.Hn
    }, function (a) {
        this.ya.Hn = a
    });
    w.defineProperty(Uc, {lineJoin: "lineJoin"}, function () {
        return this.ya.lineJoin
    }, function (a) {
        this.ya.lineJoin = a
    });
    w.defineProperty(Uc, {lineWidth: "lineWidth"}, function () {
        return this.ya.lineWidth
    }, function (a) {
        this.ya.lineWidth = a
    });
    w.defineProperty(Uc, {miterLimit: "miterLimit"}, function () {
        return this.ya.miterLimit
    }, function (a) {
        this.ya.miterLimit = a
    });
    w.defineProperty(Uc, {shadowBlur: "shadowBlur"}, function () {
        return this.ya.shadowBlur
    }, function (a) {
        this.ya.shadowBlur = a
    });
    w.defineProperty(Uc, {shadowColor: "shadowColor"}, function () {
        return this.ya.shadowColor
    }, function (a) {
        this.ya.shadowColor = a
    });
    w.defineProperty(Uc, {shadowOffsetX: "shadowOffsetX"}, function () {
        return this.ya.shadowOffsetX
    }, function (a) {
        this.ya.shadowOffsetX = a
    });
    w.defineProperty(Uc, {shadowOffsetY: "shadowOffsetY"}, function () {
        return this.ya.shadowOffsetY
    }, function (a) {
        this.ya.shadowOffsetY = a
    });
    w.defineProperty(Uc, {strokeStyle: "strokeStyle"}, function () {
        return this.ya.strokeStyle
    }, function (a) {
        this.Dy !== a && (this.Dy = this.ya.strokeStyle = a)
    });
    w.defineProperty(Uc, {textAlign: "textAlign"}, function () {
        return this.ya.textAlign
    }, function (a) {
        this.ya.textAlign = a
    });
    w.defineProperty(Uc, {sA: "imageSmoothingEnabled"}, function () {
        return this.ya.sA
    }, function (a) {
        this.ya.sA = a
    });
    g = Uc.prototype;
    g.arc = function (a, b, c, d, e, f) {
        this.ya.arc(a, b, c, d, e, f)
    };
    g.beginPath = function () {
        this.ya.beginPath()
    };
    g.bezierCurveTo = function (a, b, c, d, e, f) {
        this.ya.bezierCurveTo(a, b, c, d, e, f)
    };
    g.clearRect = function (a, b, c, d) {
        this.ya.clearRect(a, b, c, d)
    };
    g.clip = function () {
        this.ya.clip()
    };
    g.closePath = function () {
        this.ya.closePath()
    };
    g.createLinearGradient = function (a, b, c, d) {
        return this.ya.createLinearGradient(a, b, c, d)
    };
    g.createPattern = function (a, b) {
        return this.ya.createPattern(a, b)
    };
    g.createRadialGradient = function (a, b, c, d, e, f) {
        return this.ya.createRadialGradient(a, b, c, d, e, f)
    };
    g.drawImage = function (a, b, c, d, e, f, h, k, l) {
        void 0 === d ? this.ya.drawImage(a, b, c) : this.ya.drawImage(a, b, c, d, e, f, h, k, l)
    };
    g.fill = function () {
        this.ya.fill()
    };
    g.fillRect = function (a, b, c, d) {
        this.ya.fillRect(a, b, c, d)
    };
    g.fillText = function (a, b, c) {
        this.ya.fillText(a, b, c)
    };
    g.getImageData = function (a, b, c, d) {
        return this.ya.getImageData(a, b, c, d)
    };
    g.lineTo = function (a, b) {
        this.ya.lineTo(a, b)
    };
    g.measureText = function (a) {
        return this.ya.measureText(a)
    };
    g.moveTo = function (a, b) {
        this.ya.moveTo(a, b)
    };
    g.quadraticCurveTo = function (a, b, c, d) {
        this.ya.quadraticCurveTo(a, b, c, d)
    };
    g.rect = function (a, b, c, d) {
        this.ya.rect(a, b, c, d)
    };
    g.restore = function () {
        this.ya.restore()
    };
    Uc.prototype.rotate = function (a) {
        this.ya.rotate(a)
    };
    g = Uc.prototype;
    g.save = function () {
        this.ya.save()
    };
    g.setTransform = function (a, b, c, d, e, f) {
        this.ya.setTransform(a, b, c, d, e, f)
    };
    g.scale = function (a, b) {
        this.ya.scale(a, b)
    };
    g.stroke = function () {
        this.ya.stroke()
    };
    g.transform = function (a, b, c, d, e, f) {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === f || this.ya.transform(a, b, c, d, e, f)
    };
    g.translate = function (a, b) {
        this.ya.translate(a, b)
    };
    g.Hg = function (a) {
        if (a instanceof ga && a.type === $c) {
            var b = a.qo;
            a = a.Gy;
            a > b ? (this.scale(b / a, 1), this.translate((a - b) / 2, 0)) : b > a && (this.scale(1, a / b), this.translate(0, (b - a) / 2));
            this.Tq ? this.clip() : this.fill();
            a > b ? (this.translate(-(a - b) / 2, 0), this.scale(1 / (b / a), 1)) : b > a && (this.translate(0, -(b - a) / 2), this.scale(1, 1 / (a / b)))
        } else this.Tq ? this.clip() : this.fill()
    };
    g.Cj = function () {
        this.Tq || this.stroke()
    };
    w.defineProperty(Uc, {Kp: "clipInsteadOfFill"}, function () {
        return this.Tq
    }, function (a) {
        this.Tq = a
    });
    g = Uc.prototype;
    g.hB = function (a, b, c) {
        this.Xs = a;
        this.Ys = b;
        this.zg = c
    };
    g.Wn = function () {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    g.Xn = function () {
        this.shadowOffsetX = this.Xs;
        this.shadowOffsetY = this.Ys;
        this.shadowBlur = this.zg
    };
    g.dA = function (a, b) {
        var c = this.ya;
        if (void 0 !== c.setLineDash)c.setLineDash(a), c.lineDashOffset = b; else if (void 0 !== c.webkitLineDash)c.webkitLineDash = a, c.webkitLineDashOffset = b; else if (void 0 !== c.mozDash)c.mozDash = a, c.mozDashOffset = b; else return !1;
        return !0
    };
    g.aA = function () {
        var a = this.ya;
        void 0 !== a.setLineDash ? (a.setLineDash(w.fo), a.lineDashOffset = 0) : void 0 !== a.webkitLineDash ? (a.webkitLineDash = w.fo, a.webkitLineDashOffset = 0) : void 0 !== a.mozDash && (a.mozDash = null, a.mozDashOffset = 0)
    };
    g.Ee = function (a) {
        a && (this.Cy = "");
        this.By = this.Dy = ""
    };
    var ad = (Math.sqrt(2) - 1) / 3 * 4, bd = (new z(0, 0)).Ga(), cd = (new A(0, 0, 0, 0)).Ga(), dd = (new eb(0, 0, 0, 0)).Ga(), jd = (new eb(2, 2, 2, 2)).Ga(), kd = (new z(6, 6)).Ga(), ld = (new z(-Infinity, -Infinity)).Ga(), md = (new z(Infinity, Infinity)).Ga(), nd = (new ha(0, 0)).Ga(), od = (new ha(1, 1)).Ga(), yd = (new ha(6, 6)).Ga(), zd = (new ha(8, 8)).Ga(), Ad = (new ha(10, 10)).Ga(), Bd = (new ha(Infinity, Infinity)).Ga(), Cd = (new z(NaN, NaN)).Ga(), Dd = (new ha(NaN, NaN)).Ga(), Qd = (new A(NaN, NaN, NaN, NaN)).Ga(), Rd = (new L(.156, .156)).Ga(), Sd = (new L(.844, .844)).Ga(),
        Td = new sa, Ud = new sa, Vd = null;

    function Wd(a) {
        if (0 >= a)return 0;
        var b = Vd;
        if (null === b) {
            for (var b = [], c = 0; 2E3 >= c; c++)b[c] = Math.sqrt(c);
            Vd = b
        }
        return 1 > a ? (c = 1 / a, 2E3 >= c ? 1 / b[c | 0] : Math.sqrt(a)) : 2E3 >= a ? b[a | 0] : Math.sqrt(a)
    }

    function K(a, b) {
        var c = a - b;
        return .5 > c && -.5 < c
    }

    function Xa(a, b) {
        var c = a - b;
        return 5E-8 > c && -5E-8 < c
    }

    function Xd(a, b, c, d, e, f, h) {
        0 >= e && (e = 1E-6);
        var k = 0, l = 0, m = 0, n = 0;
        a < c ? (l = a, k = c) : (l = c, k = a);
        b < d ? (n = b, m = d) : (n = d, m = b);
        if (a === c)return n <= h && h <= m && a - e <= f && f <= a + e;
        if (b === d)return l <= f && f <= k && b - e <= h && h <= b + e;
        k += e;
        l -= e;
        if (l <= f && f <= k && (m += e, n -= e, n <= h && h <= m))if (k - l > m - n)if (a - c > e || c - a > e) {
            if (f = (d - b) / (c - a) * (f - a) + b, f - e <= h && h <= f + e)return !0
        } else return !0; else if (b - d > e || d - b > e) {
            if (h = (c - a) / (d - b) * (h - b) + a, h - e <= f && f <= h + e)return !0
        } else return !0;
        return !1
    }

    function Yd(a, b, c, d, e, f, h, k, l, m, n, p) {
        if (Xd(a, b, h, k, p, c, d) && Xd(a, b, h, k, p, e, f))return Xd(a, b, h, k, p, m, n);
        var q = (a + c) / 2, r = (b + d) / 2, s = (c + e) / 2, u = (d + f) / 2;
        e = (e + h) / 2;
        f = (f + k) / 2;
        d = (q + s) / 2;
        c = (r + u) / 2;
        var s = (s + e) / 2, u = (u + f) / 2, t = (d + s) / 2, x = (c + u) / 2;
        return Yd(a, b, q, r, d, c, t, x, l, m, n, p) || Yd(t, x, s, u, e, f, h, k, l, m, n, p)
    }

    function Zd(a, b, c, d, e, f, h, k, l, m) {
        if (Xd(a, b, h, k, l, c, d) && Xd(a, b, h, k, l, e, f))bb(m, a, b, 0, 0), bb(m, h, k, 0, 0); else {
            var n = (a + c) / 2, p = (b + d) / 2, q = (c + e) / 2, r = (d + f) / 2;
            e = (e + h) / 2;
            f = (f + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2, r = (r + f) / 2, s = (d + q) / 2, u = (c + r) / 2;
            Zd(a, b, n, p, d, c, s, u, l, m);
            Zd(s, u, q, r, e, f, h, k, l, m)
        }
    }

    function $d(a, b, c, d, e, f, h, k, l, m) {
        if (Xd(a, b, h, k, l, c, d) && Xd(a, b, h, k, l, e, f))0 === m.length && (m.push(a), m.push(b)), m.push(h), m.push(k); else {
            var n = (a + c) / 2, p = (b + d) / 2, q = (c + e) / 2, r = (d + f) / 2;
            e = (e + h) / 2;
            f = (f + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2, r = (r + f) / 2, s = (d + q) / 2, u = (c + r) / 2;
            $d(a, b, n, p, d, c, s, u, l, m);
            $d(s, u, q, r, e, f, h, k, l, m)
        }
    }

    function he(a, b, c, d, e, f, h, k, l, m, n, p, q, r) {
        var s = 1 - l;
        a = a * s + c * l;
        b = b * s + d * l;
        c = c * s + e * l;
        d = d * s + f * l;
        e = e * s + h * l;
        f = f * s + k * l;
        k = a * s + c * l;
        h = b * s + d * l;
        c = c * s + e * l;
        d = d * s + f * l;
        m.x = a;
        m.y = b;
        n.x = k;
        n.y = h;
        p.x = k * s + c * l;
        p.y = h * s + d * l;
        q.x = c;
        q.y = d;
        r.x = e;
        r.y = f
    }

    function ie(a, b, c, d, e, f, h, k, l, m) {
        if (Xd(a, b, e, f, m, c, d))return Xd(a, b, e, f, m, k, l);
        var n = (a + c) / 2, p = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + f) / 2;
        var q = (n + c) / 2, r = (p + d) / 2;
        return ie(a, b, n, p, q, r, h, k, l, m) || ie(q, r, c, d, e, f, h, k, l, m)
    }

    function je(a, b, c, d, e, f, h, k) {
        if (Xd(a, b, e, f, h, c, d))bb(k, a, b, 0, 0), bb(k, e, f, 0, 0); else {
            var l = (a + c) / 2, m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + f) / 2;
            var n = (l + c) / 2, p = (m + d) / 2;
            je(a, b, l, m, n, p, h, k);
            je(n, p, c, d, e, f, h, k)
        }
    }

    function ke(a, b, c, d, e, f, h, k) {
        if (Xd(a, b, e, f, h, c, d))0 === k.length && (k.push(a), k.push(b)), k.push(e), k.push(f); else {
            var l = (a + c) / 2, m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + f) / 2;
            var n = (l + c) / 2, p = (m + d) / 2;
            ke(a, b, l, m, n, p, h, k);
            ke(n, p, c, d, e, f, h, k)
        }
    }

    function le(a, b, c, d, e, f, h, k, l, m, n, p, q, r) {
        0 >= q && (q = 1E-6);
        if (Xd(a, b, h, k, q, c, d) && Xd(a, b, h, k, q, e, f)) {
            var s = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === s)return !1;
            q = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / s;
            s = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / s;
            if ((l > n ? l - n : n - l) < (m > p ? m - p : p - m)) {
                if (h = l = 0, b < k ? (l = b, h = k) : (l = k, h = b), s < l || s > h)return !1
            } else if (a < h ? l = a : (l = h, h = a), q < l || q > h)return !1;
            r.x = q;
            r.y = s;
            return !0
        }
        var s = (a + c) / 2, u = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + f) / 2;
        e = (e + h) / 2;
        f = (f + k) / 2;
        var t = (s + c) / 2, x = (u + d) / 2;
        c = (c + e) / 2;
        d = (d + f) / 2;
        var v = (t + c) / 2, B = (x + d) / 2,
            y = (n - l) * (n - l) + (p - m) * (p - m), H = !1;
        le(a, b, s, u, t, x, v, B, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < y && (y = b, H = !0));
        a = r.x;
        s = r.y;
        le(v, B, c, d, e, f, h, k, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < y ? H = !0 : (r.x = a, r.y = s));
        return H
    }

    function me(a, b, c, d, e, f, h, k, l, m, n, p, q) {
        var r = 0;
        0 >= q && (q = 1E-6);
        if (Xd(a, b, h, k, q, c, d) && Xd(a, b, h, k, q, e, f)) {
            q = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === q)return r;
            var s = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / q, u = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / q;
            if (s >= n)return r;
            if ((l > n ? l - n : n - l) < (m > p ? m - p : p - m)) {
                if (a = l = 0, b < k ? (l = b, a = k) : (l = k, a = b), u < l || u > a)return r
            } else if (a < h ? (l = a, a = h) : l = h, s < l || s > a)return r;
            0 < q ? r++ : 0 > q && r--
        } else {
            var s = (a + c) / 2, u = (b + d) / 2, t = (c + e) / 2, x = (d + f) / 2;
            e = (e + h) / 2;
            f = (f + k) / 2;
            d = (s + t) / 2;
            c = (u + x) / 2;
            var t = (t + e) / 2, x = (x + f) / 2,
                v = (d + t) / 2, B = (c + x) / 2, r = r + me(a, b, s, u, d, c, v, B, l, m, n, p, q), r = r + me(v, B, t, x, e, f, h, k, l, m, n, p, q)
        }
        return r
    }

    function Ia(a, b, c, d, e, f, h) {
        if (Xa(a, c)) {
            var k = 0;
            c = 0;
            b < d ? (k = b, c = d) : (k = d, c = b);
            d = f;
            if (d < k)return h.x = a, h.y = k, !1;
            if (d > c)return h.x = a, h.y = c, !1;
            h.x = a;
            h.y = d;
            return !0
        }
        if (Xa(b, d)) {
            a < c ? k = a : (k = c, c = a);
            d = e;
            if (d < k)return h.x = k, h.y = b, !1;
            if (d > c)return h.x = c, h.y = b, !1;
            h.x = d;
            h.y = b;
            return !0
        }
        k = ((a - e) * (a - c) + (b - f) * (b - d)) / ((c - a) * (c - a) + (d - b) * (d - b));
        if (-5E-6 > k)return h.x = a, h.y = b, !1;
        if (1.000005 < k)return h.x = c, h.y = d, !1;
        h.x = a + k * (c - a);
        h.y = b + k * (d - b);
        return !0
    }

    function ne(a, b, c, d, e, f, h, k, l) {
        if (K(a, c) && K(b, d))return l.x = a, l.y = b, !1;
        if (Xa(e, h)) {
            if (Xa(a, c))return Ia(a, b, c, d, e, f, l), !1;
            f = (d - b) / (c - a) * (e - a) + b;
            return Ia(a, b, c, d, e, f, l)
        }
        k = (k - f) / (h - e);
        if (Xa(a, c)) {
            f = k * (a - e) + f;
            c = h = 0;
            b < d ? (h = b, c = d) : (h = d, c = b);
            if (f < h)return l.x = a, l.y = h, !1;
            if (f > c)return l.x = a, l.y = c, !1;
            l.x = a;
            l.y = f;
            return !0
        }
        h = (d - b) / (c - a);
        if (Xa(k, h))return Ia(a, b, c, d, e, f, l), !1;
        e = (h * a - k * e + f - b) / (h - k);
        if (Xa(h, 0)) {
            a < c ? h = a : (h = c, c = a);
            if (e < h)return l.x = h, l.y = b, !1;
            if (e > c)return l.x = c, l.y = b, !1;
            l.x = e;
            l.y = b;
            return !0
        }
        f =
            h * (e - a) + b;
        return Ia(a, b, c, d, e, f, l)
    }

    function oe(a, b, c, d, e, f, h, k, l) {
        var m = 1E21, n = a, p = b;
        if (ne(a, b, a, d, e, f, h, k, l)) {
            var q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f);
            q < m && (m = q, n = l.x, p = l.y)
        }
        ne(c, b, c, d, e, f, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f), q < m && (m = q, n = l.x, p = l.y));
        ne(a, b, c, b, e, f, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f), q < m && (m = q, n = l.x, p = l.y));
        ne(a, d, c, d, e, f, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f), q < m && (m = q, n = l.x, p = l.y));
        l.x = n;
        l.y = p;
        return 1E21 > m
    }

    function pe(a, b, c, d, e, f, h, k, l) {
        c = a - c;
        var m = e - h, n = h = 0;
        0 === c || 0 === m ? 0 === c ? (k = (f - k) / m, h = a, n = k * h + (f - k * e)) : (d = (b - d) / c, h = e, n = d * h + (b - d * a)) : (d = (b - d) / c, k = (f - k) / m, a = b - d * a, h = (f - k * e - a) / (d - k), n = d * h + a);
        l.l(h, n);
        return l
    }

    function qe(a, b, c) {
        var d = b.x, e = b.y, f = c.x, h = c.y, k = a.left, l = a.right, m = a.top, n = a.bottom;
        return d === f ? (f = a = 0, e < h ? (a = e, f = h) : (a = h, f = e), k <= d && d <= l && a <= n && f >= m) : e === h ? (d < f ? a = d : (a = f, f = d), m <= e && e <= n && a <= l && f >= k) : a.Ha(b) || a.Ha(c) || re(k, m, l, m, d, e, f, h) || re(l, m, l, n, d, e, f, h) || re(l, n, k, n, d, e, f, h) || re(k, n, k, m, d, e, f, h) ? !0 : !1
    }

    function re(a, b, c, d, e, f, h, k) {
        return 0 >= Ae(a, b, c, d, e, f) * Ae(a, b, c, d, h, k) && 0 >= Ae(e, f, h, k, a, b) * Ae(e, f, h, k, c, d)
    }

    function Ae(a, b, c, d, e, f) {
        c -= a;
        d -= b;
        a = e - a;
        b = f - b;
        f = a * d - b * c;
        0 === f && (f = a * c + b * d, 0 < f && (f = (a - c) * c + (b - d) * d, 0 > f && (f = 0)));
        return 0 > f ? -1 : 0 < f ? 1 : 0
    }

    function Be(a) {
        0 > a && (a += 360);
        360 <= a && (a -= 360);
        return a
    }

    function Ce(a, b, c, d) {
        var e = Math.PI;
        d || (b *= e / 180, c *= e / 180);
        d = b < c ? 1 : -1;
        var f = [], h = e / 2, k = b;
        for (b = Math.min(2 * e, Math.abs(c - b)); 1E-5 < b;) {
            c = k + d * Math.min(b, h);
            var e = (c - k) / 2, l = a * Math.cos(e), m = a * Math.sin(e), n = -m, p = l * l + n * n, q = p + l * l + n * m, p = 4 / 3 * (Math.sqrt(2 * p * q) - q) / (l * m - n * l), m = l - p * n, l = n + p * l, n = -l, p = e + k, e = Math.cos(p), p = Math.sin(p);
            f.push([0 + a * Math.cos(k), 0 + a * Math.sin(k), 0 + m * e - l * p, 0 + m * p + l * e, 0 + m * e - n * p, 0 + m * p + n * e, 0 + a * Math.cos(c), 0 + a * Math.sin(c)]);
            b -= Math.abs(c - k);
            k = c
        }
        return f
    }

    function Ka(a, b, c, d, e, f, h) {
        c = Math.floor((a - c) / e) * e + c;
        d = Math.floor((b - d) / f) * f + d;
        var k = c;
        c + e - a < e / 2 && (k = c + e);
        a = d;
        d + f - b < f / 2 && (a = d + f);
        h.l(k, a)
    }

    function De(a, b) {
        var c = Math.max(a, b), d = Math.min(a, b), e = 1, f = 1;
        do e = c % d, c = f = d, d = e; while (0 < e);
        return f
    }

    function Ee(a, b, c, d) {
        var e = 0 > c, f = 0 > d, h = 0, k = h = 0;
        a < b ? (h = 1, k = 0) : (h = 0, k = 1);
        var l = 0, m = 0, n = 0, p = 0, l = 0 === h ? a : b, n = 0 === h ? c : d;
        if (0 === h ? e : f)n = -n;
        h = k;
        m = 0 === h ? a : b;
        p = 0 === h ? c : d;
        if (0 === h ? e : f)p = -p;
        a = a = 0;
        if (0 < p)if (0 < n) {
            b = l * l;
            a = m * m;
            l *= n;
            c = m * p;
            d = -a + c;
            e = -a + Math.sqrt(l * l + c * c);
            m = d;
            for (f = 0; 9999999999 > f; ++f) {
                m = .5 * (d + e);
                if (m === d || m === e)break;
                k = l / (m + b);
                h = c / (m + a);
                k = k * k + h * h - 1;
                if (0 < k)d = m; else if (0 > k)e = m; else break
            }
            n = b * n / (m + b) - n;
            p = a * p / (m + a) - p;
            a = Math.sqrt(n * n + p * p)
        } else a = Math.abs(p - m); else p = l * l - m * m, a = l * n, a < p ? (p = a / p, a = m * Math.sqrt(Math.abs(1 -
                p * p)), n = l * p - n, a = Math.sqrt(n * n + a * a)) : a = Math.abs(n - l);
        return a
    }

    function Fe(a) {
        1 < arguments.length && w.k("Geometry constructor can take at most one optional argument, the Geometry type.");
        w.lc(this);
        this.Q = !1;
        void 0 === a && (a = Ge);
        this.ma = a;
        this.Fb = this.yb = this.Gc = this.wc = 0;
        this.Nj = new I(He);
        this.xv = this.Nj.C;
        this.hv = (new A).freeze();
        this.bb = !0;
        this.Iq = this.jo = null;
        this.Jq = NaN;
        this.di = vb;
        this.ei = Kb;
        this.No = this.Po = NaN;
        this.Ci = Ie
    }

    w.fa("Geometry", Fe);
    w.ji(Fe);
    Fe.prototype.copy = function () {
        var a = new Fe;
        a.ma = this.ma;
        a.wc = this.wc;
        a.Gc = this.Gc;
        a.yb = this.yb;
        a.Fb = this.Fb;
        for (var b = this.Nj.n, c = b.length, d = a.Nj, e = 0; e < c; e++) {
            var f = b[e].copy();
            d.add(f)
        }
        a.xv = this.xv;
        a.hv.assign(this.hv);
        a.bb = this.bb;
        a.jo = this.jo;
        a.Iq = this.Iq;
        a.Jq = this.Jq;
        a.di = this.di.S();
        a.ei = this.ei.S();
        a.Po = this.Po;
        a.No = this.No;
        a.Ci = this.Ci;
        return a
    };
    var Je;
    Fe.Line = Je = w.p(Fe, "Line", 0);
    var Ke;
    Fe.Rectangle = Ke = w.p(Fe, "Rectangle", 1);
    var Se;
    Fe.Ellipse = Se = w.p(Fe, "Ellipse", 2);
    var Ge;
    Fe.Path = Ge = w.p(Fe, "Path", 3);
    Fe.prototype.Ga = function () {
        this.freeze();
        Object.freeze(this);
        return this
    };
    Fe.prototype.freeze = function () {
        this.Q = !0;
        var a = this.cc;
        a.freeze();
        for (var a = a.n, b = a.length, c = 0; c < b; c++)a[c].freeze();
        return this
    };
    Fe.prototype.Ra = function () {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        this.Q = !1;
        var a = this.cc;
        a.Ra();
        for (var a = a.n, b = a.length, c = 0; c < b; c++)a[c].Ra();
        return this
    };
    Fe.prototype.equalsApprox = Fe.prototype.Ic = function (a) {
        if (!(a instanceof Fe))return !1;
        if (this.type !== a.type)return this.type === Je && a.type === Ge ? Te(this, a) : a.type === Je && this.type === Ge ? Te(a, this) : !1;
        if (this.type === Ge) {
            var b = this.cc.n;
            a = a.cc.n;
            var c = b.length;
            if (c !== a.length)return !1;
            for (var d = 0; d < c; d++)if (!b[d].Ic(a[d]))return !1;
            return !0
        }
        return K(this.ia, a.ia) && K(this.ga, a.ga) && K(this.D, a.D) && K(this.F, a.F)
    };
    function Te(a, b) {
        if (a.type !== Je || b.type !== Ge)return !1;
        if (1 === b.cc.count) {
            var c = b.cc.da(0);
            if (1 === c.vb.count && K(a.ia, c.ia) && K(a.ga, c.ga) && (c = c.vb.da(0), c.type === Ue && K(a.D, c.D) && K(a.F, c.F)))return !0
        }
        return !1
    }

    var Ve;
    Fe.stringify = Ve = function (a) {
        return a.toString()
    };
    Fe.prototype.fc = function (a) {
        a.De === Fe ? this.type = a : w.Ej(this, a)
    };
    Fe.prototype.toString = function (a) {
        void 0 === a && (a = -1);
        switch (this.type) {
            case Je:
                return 0 > a ? "M" + this.ia.toString() + " " + this.ga.toString() + "L" + this.D.toString() + " " + this.F.toString() : "M" + this.ia.toFixed(a) + " " + this.ga.toFixed(a) + "L" + this.D.toFixed(a) + " " + this.F.toFixed(a);
            case Ke:
                var b = new A(this.ia, this.ga, 0, 0);
                b.tG(this.D, this.F, 0, 0);
                return 0 > a ? "M" + b.x.toString() + " " + b.y.toString() + "H" + b.right.toString() + "V" + b.bottom.toString() + "H" + b.left.toString() + "z" : "M" + b.x.toFixed(a) + " " + b.y.toFixed(a) + "H" + b.right.toFixed(a) +
                "V" + b.bottom.toFixed(a) + "H" + b.left.toFixed(a) + "z";
            case Se:
                b = new A(this.ia, this.ga, 0, 0);
                b.tG(this.D, this.F, 0, 0);
                if (0 > a) {
                    var c = b.left.toString() + " " + (b.y + b.height / 2).toString(), d = b.right.toString() + " " + (b.y + b.height / 2).toString();
                    return "M" + c + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + d + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + c
                }
                c = b.left.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
                d = b.right.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
                return "M" + c + "A" + (b.width /
                    2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + d + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + c;
            case Ge:
                for (var b = "", c = this.cc.n, d = c.length, e = 0; e < d; e++) {
                    var f = c[e];
                    0 < e && (b += " x ");
                    f.bu && (b += "F ");
                    b += f.toString(a)
                }
                return b;
            default:
                return this.type.toString()
        }
    };
    Fe.fillPath = function (a) {
        "string" !== typeof a && w.wd(a, "string", Fe, "fillPath:str");
        a = a.split(/[Xx]/);
        for (var b = a.length, c = "", d = 0; d < b; d++)var e = a[d], c = null !== e.match(/[Ff]/) ? 0 === d ? c + e : c + ("X" + (" " === e[0] ? "" : " ") + e) : c + ((0 === d ? "" : "X ") + "F" + (" " === e[0] ? "" : " ") + e);
        return c
    };
    var We;
    Fe.parse = We = function (a, b) {
        function c() {
            return m >= u - 1 ? !0 : null !== l[m + 1].match(/[A-Za-z]/)
        }

        function d() {
            m++;
            return l[m]
        }

        function e() {
            var a = new z(parseFloat(d()), parseFloat(d()));
            n === n.toLowerCase() && (a.x = s.x + a.x, a.y = s.y + a.y);
            return a
        }

        function f() {
            return s = e()
        }

        function h() {
            return r = e()
        }

        function k() {
            return "c" !== p.toLowerCase() && "s" !== p.toLowerCase() ? s : new z(2 * s.x - r.x, 2 * s.y - r.y)
        }

        void 0 === b && (b = !1);
        "string" !== typeof a && w.wd(a, "string", Fe, "parse:str");
        a = a.replace(/,/gm, " ");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
            "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm, "$1 $2");
        a = a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2");
        a = a.replace(/([0-9])([+\-])/gm, "$1 $2");
        a = a.replace(/(\.[0-9]*)(\.)/gm, "$1 $2");
        a = a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm, "$1 $3 $4 ");
        a = a.replace(/[\s\r\t\n]+/gm, " ");
        a = a.replace(/^\s+|\s+$/g, "");
        for (var l = a.split(" "), m = -1, n = "", p = "", q = new z(0, 0), r = new z(0, 0), s = new z(0,
            0), u = l.length, t = w.s(), x = !1, v = !1, B = !0, y = null; !(m >= u - 1);)if (p = n, n = d(), "" !== n)switch (n.toUpperCase()) {
            case "X":
                B = !0;
                v = x = !1;
                break;
            case "M":
                y = f();
                null === t.Ub || !0 === B ? (M(t, y.x, y.y, x, !1, !v), B = !1) : t.moveTo(y.x, y.y);
                for (q = s; !c();)y = f(), t.lineTo(y.x, y.y);
                break;
            case "L":
                for (; !c();)y = f(), t.lineTo(y.x, y.y);
                break;
            case "H":
                for (; !c();)s = y = new z((n === n.toLowerCase() ? s.x : 0) + parseFloat(d()), s.y), t.lineTo(s.x, s.y);
                break;
            case "V":
                for (; !c();)s = y = new z(s.x, (n === n.toLowerCase() ? s.y : 0) + parseFloat(d())), t.lineTo(s.x, s.y);
                break;
            case "C":
                for (; !c();) {
                    var H = e(), E = h(), y = f();
                    N(t, H.x, H.y, E.x, E.y, y.x, y.y)
                }
                break;
            case "S":
                for (; !c();)H = k(), E = h(), y = f(), N(t, H.x, H.y, E.x, E.y, y.x, y.y);
                break;
            case "Q":
                for (; !c();)E = h(), y = f(), Xe(t, E.x, E.y, y.x, y.y);
                break;
            case "T":
                for (; !c();)r = E = k(), y = f(), Xe(t, E.x, E.y, y.x, y.y);
                break;
            case "B":
                for (; !c();) {
                    var y = parseFloat(d()), H = parseFloat(d()), E = parseFloat(d()), V = parseFloat(d()), ba = parseFloat(d()), Q = ba, $ = !1;
                    c() || (Q = parseFloat(d()), c() || ($ = 0 !== parseFloat(d())));
                    n === n.toLowerCase() && (E += s.x, V += s.y);
                    t.arcTo(y,
                        H, E, V, ba, Q, $)
                }
                break;
            case "A":
                for (; !c();)H = Math.abs(parseFloat(d())), E = Math.abs(parseFloat(d())), V = parseFloat(d()), ba = !!parseFloat(d()), Q = !!parseFloat(d()), y = f(), Ye(t, H, E, V, ba, Q, y.x, y.y);
                break;
            case "Z":
                y = t.o.cc.n[t.o.cc.length - 1];
                O(t);
                s = q;
                break;
            case "F":
                y = "";
                for (H = 1; l[m + H];)if (null !== l[m + H].match(/[Uu]/))H++; else if (null === l[m + H].match(/[A-Za-z]/))H++; else {
                    y = l[m + H];
                    break
                }
                y.match(/[Mm]/) ? x = !0 : Ze(t);
                break;
            case "U":
                y = "";
                for (H = 1; l[m + H];)if (null !== l[m + H].match(/[Ff]/))H++; else if (null === l[m + H].match(/[A-Za-z]/))H++;
                else {
                    y = l[m + H];
                    break
                }
                y.match(/[Mm]/) ? v = !0 : t.$a(!1)
        }
        q = t.o;
        w.q(t);
        if (b)for (t = q.cc.i; t.next();)y = t.value, y.bu = !0;
        return q
    };
    function $e(a, b) {
        for (var c = a.length, d = w.K(), e = 0; e < c; e++) {
            var f = a[e];
            d.x = f[0];
            d.y = f[1];
            b.nb(d);
            f[0] = d.x;
            f[1] = d.y;
            d.x = f[2];
            d.y = f[3];
            b.nb(d);
            f[2] = d.x;
            f[3] = d.y;
            d.x = f[4];
            d.y = f[5];
            b.nb(d);
            f[4] = d.x;
            f[5] = d.y;
            d.x = f[6];
            d.y = f[7];
            b.nb(d);
            f[6] = d.x;
            f[7] = d.y
        }
        w.v(d)
    }

    Fe.prototype.wx = function () {
        if (this.bb || this.xv !== this.cc.C)return !0;
        for (var a = this.cc.n, b = a.length, c = 0; c < b; c++)if (a[c].wx())return !0;
        return !1
    };
    Fe.prototype.my = function () {
        this.bb = !1;
        this.Iq = this.jo = null;
        this.Jq = NaN;
        this.xv = this.cc.C;
        for (var a = this.cc.n, b = a.length, c = 0; c < b; c++)a[c].my()
    };
    Fe.prototype.sh = function () {
        var a = this.hv;
        a.Ra();
        isNaN(this.Po) || isNaN(this.No) ? a.l(0, 0, 0, 0) : a.l(0, 0, this.Po, this.No);
        af(this, a, !1);
        bb(a, 0, 0, 0, 0);
        a.freeze()
    };
    Fe.prototype.computeBoundsWithoutOrigin = Fe.prototype.rH = function () {
        var a = new A;
        af(this, a, !0);
        return a
    };
    function af(a, b, c) {
        switch (a.type) {
            case Je:
            case Ke:
            case Se:
                c ? b.l(a.wc, a.Gc, 0, 0) : bb(b, a.wc, a.Gc, 0, 0);
                bb(b, a.yb, a.Fb, 0, 0);
                break;
            case Ge:
                var d = a.cc;
                a = d.n;
                for (var d = d.length, e = 0; e < d; e++) {
                    var f = a[e];
                    c && 0 === e ? b.l(f.ia, f.ga, 0, 0) : bb(b, f.ia, f.ga, 0, 0);
                    for (var h = f.vb.n, k = h.length, l = f.ia, m = f.ga, n = 0; n < k; n++) {
                        var p = h[n];
                        switch (p.type) {
                            case Ue:
                            case of:
                                l = p.D;
                                m = p.F;
                                bb(b, l, m, 0, 0);
                                break;
                            case pf:
                                Zd(l, m, p.rc, p.Oc, p.Ah, p.Bh, p.D, p.F, .5, b);
                                l = p.D;
                                m = p.F;
                                break;
                            case qf:
                                je(l, m, p.rc, p.Oc, p.D, p.F, .5, b);
                                l = p.D;
                                m = p.F;
                                break;
                            case rf:
                            case sf:
                                var q =
                                    p.type === rf ? tf(p, f) : uf(p, f, l, m), r = q.length;
                                if (0 === r) {
                                    l = p.ja;
                                    m = p.ra;
                                    bb(b, l, m, 0, 0);
                                    break
                                }
                                for (var p = null, s = 0; s < r; s++)p = q[s], Zd(p[0], p[1], p[2], p[3], p[4], p[5], p[6], p[7], .5, b);
                                null !== p && (l = p[6], m = p[7]);
                                break;
                            default:
                                w.k("Unknown Segment type: " + p.type)
                        }
                    }
                }
                break;
            default:
                w.k("Unknown Geometry type: " + a.type)
        }
    }

    Fe.prototype.normalize = Fe.prototype.normalize = function () {
        this.Q && w.la(this);
        var a = this.rH();
        this.offset(-a.x, -a.y);
        return new z(-a.x, -a.y)
    };
    Fe.prototype.offset = Fe.prototype.offset = function (a, b) {
        this.Q && w.la(this);
        this.transform(1, 0, 0, 1, a, b);
        return this
    };
    Fe.prototype.scale = Fe.prototype.scale = function (a, b) {
        this.Q && w.la(this);
        this.transform(a, 0, 0, b, 0, 0);
        return this
    };
    Fe.prototype.rotate = Fe.prototype.rotate = function (a, b, c) {
        this.Q && w.la(this);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        var d = w.Ef();
        d.reset();
        d.rotate(a, b, c);
        this.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
        w.ue(d);
        return this
    };
    Fe.prototype.transform = Fe.prototype.transform = function (a, b, c, d, e, f) {
        var h = 0, k = 0;
        switch (this.type) {
            case Je:
            case Ke:
            case Se:
                h = this.wc;
                k = this.Gc;
                this.wc = h * a + k * c + e;
                this.Gc = h * b + k * d + f;
                h = this.yb;
                k = this.Fb;
                this.yb = h * a + k * c + e;
                this.Fb = h * b + k * d + f;
                break;
            case Ge:
                for (var l = this.cc.n, m = l.length, n = 0; n < m; n++) {
                    var p = l[n], h = p.ia, k = p.ga;
                    p.ia = h * a + k * c + e;
                    p.ga = h * b + k * d + f;
                    for (var p = p.vb.n, q = p.length, r = 0; r < q; r++) {
                        var s = p[r];
                        switch (s.type) {
                            case Ue:
                            case of:
                                h = s.D;
                                k = s.F;
                                s.D = h * a + k * c + e;
                                s.F = h * b + k * d + f;
                                break;
                            case pf:
                                h = s.rc;
                                k = s.Oc;
                                s.rc =
                                    h * a + k * c + e;
                                s.Oc = h * b + k * d + f;
                                h = s.Ah;
                                k = s.Bh;
                                s.Ah = h * a + k * c + e;
                                s.Bh = h * b + k * d + f;
                                h = s.D;
                                k = s.F;
                                s.D = h * a + k * c + e;
                                s.F = h * b + k * d + f;
                                break;
                            case qf:
                                h = s.rc;
                                k = s.Oc;
                                s.rc = h * a + k * c + e;
                                s.Oc = h * b + k * d + f;
                                h = s.D;
                                k = s.F;
                                s.D = h * a + k * c + e;
                                s.F = h * b + k * d + f;
                                break;
                            case rf:
                                h = s.ja;
                                k = s.ra;
                                s.ja = h * a + k * c + e;
                                s.ra = h * b + k * d + f;
                                0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.ye += h);
                                0 > a && (s.ye = 180 - s.ye, s.of = -s.of);
                                0 > d && (s.ye = -s.ye, s.of = -s.of);
                                s.radiusX *= Math.sqrt(a * a + c * c);
                                void 0 !== s.radiusY && (s.radiusY *= Math.sqrt(b * b + d * d));
                                break;
                            case sf:
                                h = s.D;
                                k = s.F;
                                s.D = h *
                                    a + k * c + e;
                                s.F = h * b + k * d + f;
                                0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.Gj += h);
                                0 > a && (s.Gj = 180 - s.Gj, s.Wl = !s.Wl);
                                0 > d && (s.Gj = -s.Gj, s.Wl = !s.Wl);
                                s.radiusX *= Math.sqrt(a * a + c * c);
                                s.radiusY *= Math.sqrt(b * b + d * d);
                                break;
                            default:
                                w.k("Unknown Segment type: " + s.type)
                        }
                    }
                }
        }
        this.bb = !0;
        return this
    };
    Fe.prototype.Ha = function (a, b, c, d) {
        var e = a.x, f = a.y, h = this.jb.x - 20;
        a = a.y;
        for (var k = 0, l = 0, m = 0, n = 0, p = 0, q = 0, r = this.cc.n, s = r.length, u = 0; u < s; u++) {
            var t = r[u];
            if (t.bu) {
                if (c && t.Ha(e, f, b))return !0;
                for (var x = t.vb, l = t.ia, m = t.ga, v = l, B = m, y = x.n, H = 0; H <= x.length; H++) {
                    var E, V;
                    H !== x.length ? (E = y[H], V = E.type, p = E.D, q = E.F) : (V = Ue, p = v, q = B);
                    switch (V) {
                        case of:
                            n = vf(e, f, h, a, l, m, v, B);
                            if (isNaN(n))return !0;
                            k += n;
                            v = p;
                            B = q;
                            break;
                        case Ue:
                            n = vf(e, f, h, a, l, m, p, q);
                            if (isNaN(n))return !0;
                            k += n;
                            break;
                        case pf:
                            n = me(l, m, E.rc, E.Oc, E.Ah, E.Bh, p, q, h,
                                a, e, f, .5);
                            k += n;
                            break;
                        case qf:
                            n = me(l, m, (l + 2 * E.rc) / 3, (m + 2 * E.Oc) / 3, (2 * E.rc + p) / 3, (2 * E.Oc + q) / 3, p, q, h, a, e, f, .5);
                            k += n;
                            break;
                        case rf:
                        case sf:
                            V = E.type === rf ? tf(E, t) : uf(E, t, l, m);
                            var ba = V.length;
                            if (0 === ba) {
                                n = vf(e, f, h, a, l, m, E.ja, E.ra);
                                if (isNaN(n))return !0;
                                k += n;
                                break
                            }
                            for (var Q = null, $ = 0; $ < ba; $++) {
                                Q = V[$];
                                if (0 === $) {
                                    n = vf(e, f, h, a, l, m, Q[0], Q[1]);
                                    if (isNaN(n))return !0;
                                    k += n
                                }
                                n = me(Q[0], Q[1], Q[2], Q[3], Q[4], Q[5], Q[6], Q[7], h, a, e, f, .5);
                                k += n
                            }
                            null !== Q && (p = Q[6], q = Q[7]);
                            break;
                        default:
                            w.k("Unknown Segment type: " + E.type)
                    }
                    l = p;
                    m = q
                }
                if (0 !==
                    k)return !0;
                k = 0
            } else if (t.Ha(e, f, d ? b : b + 2))return !0
        }
        return 0 !== k
    };
    function vf(a, b, c, d, e, f, h, k) {
        if (Xd(e, f, h, k, .05, a, b))return NaN;
        var l = (a - c) * (f - k);
        if (0 === l)return 0;
        var m = ((a * d - b * c) * (e - h) - (a - c) * (e * k - f * h)) / l;
        b = (a * d - b * c) * (f - k) / l;
        if (m >= a)return 0;
        if ((e > h ? e - h : h - e) < (f > k ? f - k : k - f)) {
            if (e = a = 0, f < k ? (a = f, e = k) : (a = k, e = f), b < a || b > e)return 0
        } else if (e < h ? (a = e, e = h) : a = h, m < a || m > e)return 0;
        return 0 < l ? 1 : -1
    }

    function wf(a, b, c, d) {
        a = a.cc.n;
        for (var e = a.length, f = 0; f < e; f++)if (a[f].Ha(b, c, d))return !0;
        return !1
    }

    Fe.prototype.getPointAlongPath = Fe.prototype.XH = function (a, b) {
        0 > a ? a = 0 : 1 < a && (a = 1);
        void 0 === b && (b = new z);
        if (this.type === Je)return b.l(this.ia + a * (this.D - this.ia), this.ga + a * (this.F - this.ga)), b;
        for (var c = this.gA, d = this.lx, e = c.length, f = this.hA * a, h = 0, k = 0; k < e; k++)for (var l = d[k], m = l.length, n = 0; n < m; n++) {
            var p = l[n];
            if (h + p >= f)return d = (f - h) / p, c = c[k], k = c[2 * n], e = c[2 * n + 1], b.l(k + (c[2 * n + 2] - k) * d, e + (c[2 * n + 3] - e) * d), b;
            h += p
        }
        b.l(NaN, NaN);
        return b
    };
    Fe.prototype.getFractionForPoint = Fe.prototype.TH = function (a) {
        if (this.type === Je) {
            var b = this.ia, c = this.ga, d = this.D, e = this.F;
            if (b !== d || c !== e) {
                var f = a.x;
                a = a.y;
                var h = 0, k = 0;
                return b === d ? (c < e ? (h = c, k = e) : (h = e, k = c), a <= h ? h === c ? 0 : 1 : a >= k ? k === c ? 0 : 1 : Math.abs(a - c) / (k - h)) : c === e ? (b < d ? (h = b, k = d) : (h = d, k = b), f <= h ? h === b ? 0 : 1 : f >= k ? k === b ? 0 : 1 : Math.abs(f - b) / (k - h)) : ((f - b) * (f - b) + (a - c) * (a - c)) / ((d - b) * (d - b) + (e - c) * (e - c))
            }
        } else if (this.type === Ke) {
            if (b = this.ia, c = this.ga, d = this.D, e = this.F, b !== d || c !== e) {
                var h = d - b, k = e - c, l = 2 * h + 2 * k, f = a.x;
                a = a.y;
                f = Math.min(Math.max(f, b), d);
                a = Math.min(Math.max(a, c), e);
                var b = Math.abs(f - b), d = Math.abs(f - d), c = Math.abs(a - c), e = Math.abs(a - e), m = Math.min(b, d, c, e);
                if (m === c)return f / l;
                if (m === d)return (h + a) / l;
                if (m === e)return (2 * h + k - f) / l;
                if (m === b)return (2 * h + 2 * k - a) / l
            }
        } else {
            for (var e = this.gA, h = this.lx, k = this.hA, l = w.K(), c = Infinity, b = d = 0, f = e.length, n = m = 0, p = 0; p < f; p++)for (var q = e[p], r = h[p], s = q.length, u = 0; u < s; u += 2) {
                var t = q[u], x = q[u + 1];
                if (0 !== u) {
                    Ia(m, n, t, x, a.x, a.y, l);
                    var v = (l.x - a.x) * (l.x - a.x) + (l.y - a.y) * (l.y - a.y);
                    v < c && (c = v,
                        d = b, d += Math.sqrt((l.x - m) * (l.x - m) + (l.y - n) * (l.y - n)));
                    b += r[(u - 2) / 2]
                }
                m = t;
                n = x
            }
            w.v(l);
            a = d / k;
            return 0 > a ? 0 : 1 < a ? 1 : a
        }
        return 0
    };
    w.u(Fe, {gA: null}, function () {
        xf(this);
        return this.jo
    });
    function xf(a) {
        if (null === a.jo) {
            a.wx() && a.my();
            var b = a.jo = [], c = a.Iq = [], d = [], e = [];
            if (a.type === Je)d.push(a.ia), d.push(a.ga), d.push(a.D), d.push(a.F), b.push(d), e.push(Math.sqrt((a.ia - a.D) * (a.ia - a.D) + (a.ga - a.F) * (a.ga - a.F))), c.push(e); else if (a.type === Ke)d.push(a.ia), d.push(a.ga), d.push(a.D), d.push(a.ga), d.push(a.D), d.push(a.F), d.push(a.ia), d.push(a.F), d.push(a.ia), d.push(a.ga), b.push(d), e.push(Math.abs(a.ia - a.D)), e.push(Math.abs(a.ga - a.F)), e.push(Math.abs(a.ia - a.D)), e.push(Math.abs(a.ga - a.F)), c.push(e);
            else if (a.type === Se) {
                var f = new He;
                f.ia = a.D;
                f.ga = (a.ga + a.F) / 2;
                var h = new yf(rf);
                h.ye = 0;
                h.of = 360;
                h.ja = (a.ia + a.D) / 2;
                h.ra = (a.ga + a.F) / 2;
                h.radiusX = Math.abs(a.ia - a.D) / 2;
                h.radiusY = Math.abs(a.ga - a.F) / 2;
                f.add(h);
                a = tf(h, f);
                e = a.length;
                if (0 === e)d.push(h.ja), d.push(h.ra); else for (var h = f.ia, f = f.ga, k = 0; k < e; k++) {
                    var l = a[k];
                    $d(h, f, l[2], l[3], l[4], l[5], l[6], l[7], .5, d);
                    h = l[6];
                    f = l[7]
                }
                b.push(d);
                c.push(zf(d))
            } else for (var m = a.cc.i; m.next();) {
                var n = m.value, d = [];
                d.push(n.ia);
                d.push(n.ga);
                for (var h = n.ia, f = n.ga, p = h, q = f, r = n.vb.n,
                         s = r.length, u = 0; u < s; u++) {
                    var t = r[u];
                    switch (t.ma) {
                        case of:
                            4 <= d.length && (b.push(d), c.push(zf(d)));
                            d = [];
                            d.push(t.D);
                            d.push(t.F);
                            h = t.D;
                            f = t.F;
                            p = h;
                            q = f;
                            break;
                        case Ue:
                            d.push(t.D);
                            d.push(t.F);
                            h = t.D;
                            f = t.F;
                            break;
                        case pf:
                            $d(h, f, t.Ad, t.Ve, t.mh, t.yg, t.yb, t.Fb, .5, d);
                            h = t.D;
                            f = t.F;
                            break;
                        case qf:
                            ke(h, f, t.Ad, t.Ve, t.yb, t.Fb, .5, d);
                            h = t.D;
                            f = t.F;
                            break;
                        case rf:
                            a = tf(t, n);
                            e = a.length;
                            if (0 === e) {
                                d.push(t.ja);
                                d.push(t.ra);
                                h = t.ja;
                                f = t.ra;
                                break
                            }
                            for (k = 0; k < e; k++)l = a[k], $d(h, f, l[2], l[3], l[4], l[5], l[6], l[7], .5, d), h = l[6], f = l[7];
                            break;
                        case sf:
                            a =
                                uf(t, n, h, f);
                            e = a.length;
                            if (0 === e) {
                                d.push(t.ja);
                                d.push(t.ra);
                                h = t.ja;
                                f = t.ra;
                                break
                            }
                            for (k = 0; k < e; k++)l = a[k], $d(h, f, l[2], l[3], l[4], l[5], l[6], l[7], .5, d), h = l[6], f = l[7];
                            break;
                        default:
                            w.k("Segment not of valid type: " + t.ma)
                    }
                    t.Ph && (d.push(p), d.push(q))
                }
                4 <= d.length && (b.push(d), c.push(zf(d)))
            }
        }
    }

    w.u(Fe, {lx: null}, function () {
        xf(this);
        return this.Iq
    });
    w.u(Fe, {hA: null}, function () {
        var a = this.Jq;
        if (isNaN(a)) {
            if (this.type === Je)var a = Math.abs(this.D - this.ia), b = Math.abs(this.F - this.ga), a = Math.sqrt(a * a + b * b); else if (this.type === Ke)a = Math.abs(this.D - this.ia), b = Math.abs(this.F - this.ga), a = 2 * a + 2 * b; else for (var b = this.lx, c = b.length, d = a = 0; d < c; d++)for (var e = b[d], f = e.length, h = 0; h < f; h++)a += e[h];
            this.Jq = a
        }
        return a
    });
    function zf(a) {
        for (var b = [], c = 0, d = 0, e = a.length, f = 0; f < e; f += 2) {
            var h = a[f], k = a[f + 1];
            0 !== f && (c = Math.sqrt(Na(c, d, h, k)), b.push(c));
            c = h;
            d = k
        }
        return b
    }

    w.defineProperty(Fe, {type: "type"}, function () {
        return this.ma
    }, function (a) {
        this.ma !== a && (this.Q && w.la(this, a), this.ma = a, this.bb = !0)
    });
    w.defineProperty(Fe, {ia: "startX"}, function () {
        return this.wc
    }, function (a) {
        this.wc !== a && (this.Q && w.la(this, a), this.wc = a, this.bb = !0)
    });
    w.defineProperty(Fe, {ga: "startY"}, function () {
        return this.Gc
    }, function (a) {
        this.Gc !== a && (this.Q && w.la(this, a), this.Gc = a, this.bb = !0)
    });
    w.defineProperty(Fe, {D: "endX"}, function () {
        return this.yb
    }, function (a) {
        this.yb !== a && (this.Q && w.la(this, a), this.yb = a, this.bb = !0)
    });
    w.defineProperty(Fe, {F: "endY"}, function () {
        return this.Fb
    }, function (a) {
        this.Fb !== a && (this.Q && w.la(this, a), this.Fb = a, this.bb = !0)
    });
    w.defineProperty(Fe, {cc: "figures"}, function () {
        return this.Nj
    }, function (a) {
        this.Nj !== a && (this.Q && w.la(this, a), this.Nj = a, this.bb = !0)
    });
    Fe.prototype.add = Fe.prototype.add = function (a) {
        this.Nj.add(a);
        return this
    };
    Fe.prototype.setSpots = function (a, b, c, d, e, f, h, k) {
        this.Q && w.la(this);
        this.di = (new L(a, b, e, f)).freeze();
        this.ei = (new L(c, d, h, k)).freeze();
        return this
    };
    w.defineProperty(Fe, {A: "spot1"}, function () {
        return this.di
    }, function (a) {
        this.Q && w.la(this, a);
        this.di = a.S()
    });
    w.defineProperty(Fe, {B: "spot2"}, function () {
        return this.ei
    }, function (a) {
        this.Q && w.la(this, a);
        this.ei = a.S()
    });
    w.defineProperty(Fe, {Zd: "defaultStretch"}, function () {
        return this.Ci
    }, function (a) {
        this.Q && w.la(this, a);
        this.Ci = a
    });
    w.u(Fe, {jb: "bounds"}, function () {
        this.wx() && (this.my(), this.sh());
        return this.hv
    });
    function He(a, b, c, d) {
        w.lc(this);
        this.Q = !1;
        void 0 === c && (c = !0);
        this.Bm = c;
        void 0 === d && (d = !0);
        this.Qo = d;
        this.wc = void 0 !== a ? a : 0;
        this.Gc = void 0 !== b ? b : 0;
        this.mp = new I(yf);
        this.uw = this.mp.C;
        this.bb = !0
    }

    w.fa("PathFigure", He);
    w.ji(He);
    He.prototype.copy = function () {
        var a = new He;
        a.Bm = this.Bm;
        a.Qo = this.Qo;
        a.wc = this.wc;
        a.Gc = this.Gc;
        for (var b = this.mp.n, c = b.length, d = a.mp, e = 0; e < c; e++) {
            var f = b[e].copy();
            d.add(f)
        }
        a.uw = this.uw;
        a.bb = this.bb;
        return a
    };
    He.prototype.equalsApprox = He.prototype.Ic = function (a) {
        if (!(a instanceof He && K(this.ia, a.ia) && K(this.ga, a.ga)))return !1;
        var b = this.vb.n;
        a = a.vb.n;
        var c = b.length;
        if (c !== a.length)return !1;
        for (var d = 0; d < c; d++)if (!b[d].Ic(a[d]))return !1;
        return !0
    };
    g = He.prototype;
    g.toString = function (a) {
        void 0 === a && (a = -1);
        for (var b = 0 > a ? "M" + this.ia.toString() + " " + this.ga.toString() : "M" + this.ia.toFixed(a) + " " + this.ga.toFixed(a), c = this.vb.n, d = c.length, e = 0; e < d; e++)b += " " + c[e].toString(a);
        return b
    };
    g.freeze = function () {
        this.Q = !0;
        var a = this.vb;
        a.freeze();
        for (var b = a.n, a = a.length, c = 0; c < a; c++)b[c].freeze();
        return this
    };
    g.Ra = function () {
        this.Q = !1;
        var a = this.vb;
        a.Ra();
        for (var a = a.n, b = a.length, c = 0; c < b; c++)a[c].Ra();
        return this
    };
    g.wx = function () {
        if (this.bb)return !0;
        var a = this.vb;
        if (this.uw !== a.C)return !0;
        for (var a = a.n, b = a.length, c = 0; c < b; c++)if (a[c].bb)return !0;
        return !1
    };
    g.my = function () {
        this.bb = !1;
        var a = this.vb;
        this.uw = a.C;
        for (var a = a.n, b = a.length, c = 0; c < b; c++) {
            var d = a[c];
            d.bb = !1;
            d.ig = null
        }
    };
    w.defineProperty(He, {bu: "isFilled"}, function () {
        return this.Bm
    }, function (a) {
        this.Q && w.la(this, a);
        this.Bm = a
    });
    w.defineProperty(He, {Zl: "isShadowed"}, function () {
        return this.Qo
    }, function (a) {
        this.Q && w.la(this, a);
        this.Qo = a
    });
    w.defineProperty(He, {ia: "startX"}, function () {
        return this.wc
    }, function (a) {
        this.Q && w.la(this, a);
        this.wc = a;
        this.bb = !0
    });
    w.defineProperty(He, {ga: "startY"}, function () {
        return this.Gc
    }, function (a) {
        this.Q && w.la(this, a);
        this.Gc = a;
        this.bb = !0
    });
    w.defineProperty(He, {vb: "segments"}, function () {
        return this.mp
    }, function (a) {
        this.Q && w.la(this, a);
        this.mp = a;
        this.bb = !0
    });
    He.prototype.add = He.prototype.add = function (a) {
        this.mp.add(a);
        return this
    };
    He.prototype.Ha = function (a, b, c) {
        for (var d = this.ia, e = this.ga, f = d, h = e, k = this.vb.n, l = k.length, m = 0; m < l; m++) {
            var n = k[m];
            switch (n.type) {
                case of:
                    f = n.D;
                    h = n.F;
                    d = n.D;
                    e = n.F;
                    break;
                case Ue:
                    if (Xd(d, e, n.D, n.F, c, a, b))return !0;
                    d = n.D;
                    e = n.F;
                    break;
                case pf:
                    if (Yd(d, e, n.rc, n.Oc, n.Ah, n.Bh, n.D, n.F, .5, a, b, c))return !0;
                    d = n.D;
                    e = n.F;
                    break;
                case qf:
                    if (ie(d, e, n.rc, n.Oc, n.D, n.F, .5, a, b, c))return !0;
                    d = n.D;
                    e = n.F;
                    break;
                case rf:
                case sf:
                    var p = n.type === rf ? tf(n, this) : uf(n, this, d, e), q = p.length;
                    if (0 === q) {
                        if (Xd(d, e, n.ja, n.ra, c, a, b))return !0;
                        d = n.ja;
                        e = n.ra;
                        break
                    }
                    for (var r = null, s = 0; s < q; s++)if (r = p[s], 0 === s && Xd(d, e, r[0], r[1], c, a, b) || Yd(r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], .5, a, b, c))return !0;
                    null !== r && (d = r[6], e = r[7]);
                    break;
                default:
                    w.k("Unknown Segment type: " + n.type)
            }
            if (n.tx && (d !== f || e !== h) && Xd(d, e, f, h, c, a, b))return !0
        }
        return !1
    };
    function yf(a, b, c, d, e, f, h, k) {
        w.lc(this);
        this.Q = !1;
        void 0 === a && (a = Ue);
        this.ma = a;
        this.yb = void 0 !== b ? b : 0;
        this.Fb = void 0 !== c ? c : 0;
        void 0 === d && (d = 0);
        void 0 === e && (e = 0);
        void 0 === f && (f = 0);
        void 0 === h && (h = 0);
        a === sf ? (a = f % 360, 0 > a && (a += 360), this.Ad = a, this.Ve = 0, this.mh = Math.max(d, 0), this.yg = Math.max(e, 0), this.Vo = "boolean" === typeof h ? !!h : !1, this.oo = !!k) : (this.Ad = d, this.Ve = e, a === rf && (f = Math.max(f, 0)), this.mh = f, "number" === typeof h ? (a === rf && (h = Math.max(h, 0)), this.yg = h) : this.yg = 0, this.oo = this.Vo = !1);
        this.Ph = !1;
        this.bb = !0;
        this.ig = null
    }

    w.fa("PathSegment", yf);
    w.ji(yf);
    yf.prototype.copy = function () {
        var a = new yf;
        a.ma = this.ma;
        a.yb = this.yb;
        a.Fb = this.Fb;
        a.Ad = this.Ad;
        a.Ve = this.Ve;
        a.mh = this.mh;
        a.yg = this.yg;
        a.Vo = this.Vo;
        a.oo = this.oo;
        a.Ph = this.Ph;
        a.bb = this.bb;
        return a
    };
    yf.prototype.equalsApprox = yf.prototype.Ic = function (a) {
        if (!(a instanceof yf) || this.type !== a.type || this.tx !== a.tx)return !1;
        switch (this.type) {
            case of:
            case Ue:
                return K(this.D, a.D) && K(this.F, a.F);
            case pf:
                return K(this.D, a.D) && K(this.F, a.F) && K(this.rc, a.rc) && K(this.Oc, a.Oc) && K(this.Ah, a.Ah) && K(this.Bh, a.Bh);
            case qf:
                return K(this.D, a.D) && K(this.F, a.F) && K(this.rc, a.rc) && K(this.Oc, a.Oc);
            case rf:
                return K(this.ye, a.ye) && K(this.of, a.of) && K(this.ja, a.ja) && K(this.ra, a.ra) && K(this.radiusX, a.radiusX) && K(this.radiusY,
                        a.radiusY);
            case sf:
                return this.Wl === a.Wl && this.xx === a.xx && K(this.Gj, a.Gj) && K(this.D, a.D) && K(this.F, a.F) && K(this.radiusX, a.radiusX) && K(this.radiusY, a.radiusY);
            default:
                return !1
        }
    };
    yf.prototype.fc = function (a) {
        a.De === yf ? this.type = a : w.Ej(this, a)
    };
    yf.prototype.toString = function (a) {
        void 0 === a && (a = -1);
        var b = "";
        switch (this.type) {
            case of:
                b = 0 > a ? "M" + this.D.toString() + " " + this.F.toString() : "M" + this.D.toFixed(a) + " " + this.F.toFixed(a);
                break;
            case Ue:
                b = 0 > a ? "L" + this.D.toString() + " " + this.F.toString() : "L" + this.D.toFixed(a) + " " + this.F.toFixed(a);
                break;
            case pf:
                b = 0 > a ? "C" + this.rc.toString() + " " + this.Oc.toString() + " " + this.Ah.toString() + " " + this.Bh.toString() + " " + this.D.toString() + " " + this.F.toString() : "C" + this.rc.toFixed(a) + " " + this.Oc.toFixed(a) + " " + this.Ah.toFixed(a) +
                " " + this.Bh.toFixed(a) + " " + this.D.toFixed(a) + " " + this.F.toFixed(a);
                break;
            case qf:
                b = 0 > a ? "Q" + this.rc.toString() + " " + this.Oc.toString() + " " + this.D.toString() + " " + this.F.toString() : "Q" + this.rc.toFixed(a) + " " + this.Oc.toFixed(a) + " " + this.D.toFixed(a) + " " + this.F.toFixed(a);
                break;
            case rf:
                b = 0 > a ? "B" + this.ye.toString() + " " + this.of.toString() + " " + this.ja.toString() + " " + this.ra.toString() + " " + this.radiusX : "B" + this.ye.toFixed(a) + " " + this.of.toFixed(a) + " " + this.ja.toFixed(a) + " " + this.ra.toFixed(a) + " " + this.radiusX;
                break;
            case sf:
                b = 0 > a ? "A" + this.radiusX.toString() + " " + this.radiusY.toString() + " " + this.Gj.toString() + " " + (this.xx ? 1 : 0) + " " + (this.Wl ? 1 : 0) + " " + this.D.toString() + " " + this.F.toString() : "A" + this.radiusX.toFixed(a) + " " + this.radiusY.toFixed(a) + " " + this.Gj.toFixed(a) + " " + (this.xx ? 1 : 0) + " " + (this.Wl ? 1 : 0) + " " + this.D.toFixed(a) + " " + this.F.toFixed(a);
                break;
            default:
                b = this.type.toString()
        }
        return b + (this.Ph ? "z" : "")
    };
    var of;
    yf.Move = of = w.p(yf, "Move", 0);
    var Ue;
    yf.Line = Ue = w.p(yf, "Line", 1);
    var pf;
    yf.Bezier = pf = w.p(yf, "Bezier", 2);
    var qf;
    yf.QuadraticBezier = qf = w.p(yf, "QuadraticBezier", 3);
    var rf;
    yf.Arc = rf = w.p(yf, "Arc", 4);
    var sf;
    yf.SvgArc = sf = w.p(yf, "SvgArc", 4);
    yf.prototype.freeze = function () {
        this.Q = !0;
        return this
    };
    yf.prototype.Ra = function () {
        this.Q = !1;
        return this
    };
    yf.prototype.close = yf.prototype.close = function () {
        this.Ph = !0;
        return this
    };
    function tf(a, b) {
        if (null !== a.ig && !1 === b.bb)return a.ig;
        var c = a.radiusX, d = a.radiusY;
        void 0 === d && (d = c);
        if (0 === c || 0 === d)return a.ig = [], a.ig;
        var e = a.Ad, f = a.Ve, h = Ce(c < d ? c : d, a.ye, a.ye + a.of, !1);
        if (c !== d) {
            var k = w.Ef();
            k.reset();
            c < d ? k.scale(1, d / c) : k.scale(c / d, 1);
            $e(h, k);
            w.ue(k)
        }
        c = h.length;
        for (d = 0; d < c; d++)k = h[d], k[0] += e, k[1] += f, k[2] += e, k[3] += f, k[4] += e, k[5] += f, k[6] += e, k[7] += f;
        a.ig = h;
        return a.ig
    }

    function uf(a, b, c, d) {
        function e(a, b, c, d) {
            return (a * d < b * c ? -1 : 1) * Math.acos((a * c + b * d) / (Math.sqrt(a * a + b * b) * Math.sqrt(c * c + d * d)))
        }

        if (null !== a.ig && !1 === b.bb)return a.ig;
        b = a.mh;
        var f = a.yg;
        if (0 === b || 0 === f)return a.ig = [], a.ig;
        var h = Math.PI / 180 * a.Ad, k = a.Vo, l = a.oo, m = a.yb, n = a.Fb, p = Math.cos(h), q = Math.sin(h), r = p * (c - m) / 2 + q * (d - n) / 2, h = -q * (c - m) / 2 + p * (d - n) / 2, s = r * r / (b * b) + h * h / (f * f);
        1 < s && (b *= Math.sqrt(s), f *= Math.sqrt(s));
        s = (k === l ? -1 : 1) * Math.sqrt((b * b * f * f - b * b * h * h - f * f * r * r) / (b * b * h * h + f * f * r * r));
        isNaN(s) && (s = 0);
        k = s * b * h / f;
        s = s * -f *
            r / b;
        isNaN(k) && (k = 0);
        isNaN(s) && (s = 0);
        c = (c + m) / 2 + p * k - q * s;
        d = (d + n) / 2 + q * k + p * s;
        n = e(1, 0, (r - k) / b, (h - s) / f);
        p = (r - k) / b;
        m = (h - s) / f;
        r = (-r - k) / b;
        k = (-h - s) / f;
        h = e(p, m, r, k);
        r = (p * r + m * k) / (Math.sqrt(p * p + m * m) * Math.sqrt(r * r + k * k));
        -1 >= r ? h = Math.PI : 1 <= r && (h = 0);
        !l && 0 < h && (h -= 2 * Math.PI);
        l && 0 > h && (h += 2 * Math.PI);
        l = b > f ? 1 : b / f;
        r = b > f ? f / b : 1;
        b = Ce(b > f ? b : f, n, n + h, !0);
        f = w.Ef();
        f.reset();
        f.translate(c, d);
        f.rotate(a.Ad, 0, 0);
        f.scale(l, r);
        $e(b, f);
        w.ue(f);
        a.ig = b;
        return a.ig
    }

    w.defineProperty(yf, {tx: "isClosed"}, function () {
        return this.Ph
    }, function (a) {
        this.Ph !== a && (this.Ph = a, this.bb = !0)
    });
    w.defineProperty(yf, {type: "type"}, function () {
        return this.ma
    }, function (a) {
        this.Q && w.la(this, a);
        this.ma = a;
        this.bb = !0
    });
    w.defineProperty(yf, {D: "endX"}, function () {
        return this.yb
    }, function (a) {
        this.Q && w.la(this, a);
        this.yb = a;
        this.bb = !0
    });
    w.defineProperty(yf, {F: "endY"}, function () {
        return this.Fb
    }, function (a) {
        this.Q && w.la(this, a);
        this.Fb = a;
        this.bb = !0
    });
    w.defineProperty(yf, {rc: "point1X"}, function () {
        return this.Ad
    }, function (a) {
        this.Q && w.la(this, a);
        this.Ad = a;
        this.bb = !0
    });
    w.defineProperty(yf, {Oc: "point1Y"}, function () {
        return this.Ve
    }, function (a) {
        this.Q && w.la(this, a);
        this.Ve = a;
        this.bb = !0
    });
    w.defineProperty(yf, {Ah: "point2X"}, function () {
        return this.mh
    }, function (a) {
        this.Q && w.la(this, a);
        this.mh = a;
        this.bb = !0
    });
    w.defineProperty(yf, {Bh: "point2Y"}, function () {
        return this.yg
    }, function (a) {
        this.Q && w.la(this, a);
        this.yg = a;
        this.bb = !0
    });
    w.defineProperty(yf, {ja: "centerX"}, function () {
        return this.Ad
    }, function (a) {
        this.Q && w.la(this, a);
        this.Ad = a;
        this.bb = !0
    });
    w.defineProperty(yf, {ra: "centerY"}, function () {
        return this.Ve
    }, function (a) {
        this.Q && w.la(this, a);
        this.Ve = a;
        this.bb = !0
    });
    w.defineProperty(yf, {radiusX: "radiusX"}, function () {
        return this.mh
    }, function (a) {
        0 > a && w.Ea(a, ">= zero", yf, "radiusX");
        this.Q && w.la(this, a);
        this.mh = a;
        this.bb = !0
    });
    w.defineProperty(yf, {radiusY: "radiusY"}, function () {
        return this.yg
    }, function (a) {
        0 > a && w.Ea(a, ">= zero", yf, "radiusY");
        this.Q && w.la(this, a);
        this.yg = a;
        this.bb = !0
    });
    w.defineProperty(yf, {ye: "startAngle"}, function () {
        return this.yb
    }, function (a) {
        this.yb !== a && (this.Q && w.la(this, a), a %= 360, 0 > a && (a += 360), this.yb = a, this.bb = !0)
    });
    w.defineProperty(yf, {of: "sweepAngle"}, function () {
        return this.Fb
    }, function (a) {
        this.Q && w.la(this, a);
        360 < a && (a = 360);
        -360 > a && (a = -360);
        this.Fb = a;
        this.bb = !0
    });
    w.defineProperty(yf, {Wl: "isClockwiseArc"}, function () {
        return this.oo
    }, function (a) {
        this.Q && w.la(this, a);
        this.oo = a;
        this.bb = !0
    });
    w.defineProperty(yf, {xx: "isLargeArc"}, function () {
        return this.Vo
    }, function (a) {
        this.Q && w.la(this, a);
        this.Vo = a;
        this.bb = !0
    });
    w.defineProperty(yf, {Gj: "xAxisRotation"}, function () {
        return this.Ad
    }, function (a) {
        a %= 360;
        0 > a && (a += 360);
        this.Q && w.la(this, a);
        this.Ad = a;
        this.bb = !0
    });
    function Af() {
        this.Z = null;
        this.Hz = (new z(0, 0)).freeze();
        this.Py = (new z(0, 0)).freeze();
        this.ev = this.aw = 0;
        this.fv = 1;
        this.Qv = "";
        this.Ew = this.tv = !1;
        this.qv = this.gv = 0;
        this.Ij = this.Cv = this.Nv = !1;
        this.ur = null;
        this.Cw = 0;
        this.Bg = this.Bw = null
    }

    w.fa("InputEvent", Af);
    Af.prototype.copy = function () {
        var a = new Af;
        a.Z = this.Z;
        a.Hz.assign(this.bf);
        a.Py.assign(this.ca);
        a.aw = this.aw;
        a.ev = this.ev;
        a.fv = this.fv;
        a.Qv = this.Qv;
        a.tv = this.tv;
        a.Ew = this.Ew;
        a.gv = this.gv;
        a.qv = this.qv;
        a.Nv = this.Nv;
        a.Cv = this.Cv;
        a.Ij = this.Ij;
        a.ur = this.ur;
        a.Cw = this.Cw;
        a.Bw = this.Bw;
        a.Bg = this.Bg;
        return a
    };
    Af.prototype.toString = function () {
        var a = "^";
        0 !== this.ud && (a += "M:" + this.ud);
        0 !== this.button && (a += "B:" + this.button);
        "" !== this.key && (a += "K:" + this.key);
        0 !== this.Fe && (a += "C:" + this.Fe);
        0 !== this.Ml && (a += "D:" + this.Ml);
        this.Ac && (a += "h");
        this.bubbles && (a += "b");
        null !== this.ca && (a += "@" + this.ca.toString());
        return a
    };
    w.defineProperty(Af, {g: "diagram"}, function () {
        return this.Z
    }, function (a) {
        this.Z = a
    });
    w.defineProperty(Af, {bf: "viewPoint"}, function () {
        return this.Hz
    }, function (a) {
        w.G(a, z, Af, "viewPoint");
        this.Hz.assign(a)
    });
    w.defineProperty(Af, {ca: "documentPoint"}, function () {
        return this.Py
    }, function (a) {
        w.G(a, z, Af, "documentPoint");
        this.Py.assign(a)
    });
    Af.prototype.getMultiTouchViewPoint = Af.prototype.nx = function (a, b) {
        var c = this.g;
        if (null === c)return b;
        Bf(c, this.event, a, b);
        return b
    };
    Af.prototype.getMultiTouchDocumentPoint = function (a, b) {
        var c = this.g;
        if (null === c)return b;
        Bf(c, this.event, a, b);
        b.assign(c.rB(b));
        return b
    };
    w.defineProperty(Af, {ud: "modifiers"}, function () {
        return this.aw
    }, function (a) {
        this.aw = a
    });
    w.defineProperty(Af, {button: "button"}, function () {
        return this.ev
    }, function (a) {
        this.ev = a;
        if (null === this.event)switch (a) {
            case 0:
                this.buttons = 1;
                break;
            case 1:
                this.buttons = 4;
                break;
            case 2:
                this.buttons = 2
        }
    });
    w.defineProperty(Af, {buttons: "buttons"}, function () {
        return this.fv
    }, function (a) {
        this.fv = a
    });
    w.defineProperty(Af, {key: "key"}, function () {
        return this.Qv
    }, function (a) {
        this.Qv = a
    });
    w.defineProperty(Af, {Nl: "down"}, function () {
        return this.tv
    }, function (a) {
        this.tv = a
    });
    w.defineProperty(Af, {up: "up"}, function () {
        return this.Ew
    }, function (a) {
        this.Ew = a
    });
    w.defineProperty(Af, {Fe: "clickCount"}, function () {
        return this.gv
    }, function (a) {
        this.gv = a
    });
    w.defineProperty(Af, {Ml: "delta"}, function () {
        return this.qv
    }, function (a) {
        this.qv = a
    });
    w.defineProperty(Af, {du: "isMultiTouch"}, function () {
        return this.Nv
    }, function (a) {
        this.Nv = a
    });
    w.defineProperty(Af, {Ac: "handled"}, function () {
        return this.Cv
    }, function (a) {
        this.Cv = a
    });
    w.defineProperty(Af, {bubbles: "bubbles"}, function () {
        return this.Ij
    }, function (a) {
        this.Ij = a
    });
    w.defineProperty(Af, {event: "event"}, function () {
        return this.ur
    }, function (a) {
        this.ur = a
    });
    w.u(Af, {tj: "isTouchEvent"}, function () {
        var a = window.TouchEvent;
        return a && this.event instanceof a ? !0 : (a = window.PointerEvent) && this.event instanceof a && "touch" === this.event.pointerType
    });
    w.u(Af, {Ek: "isMac"}, function () {
        return w.Ek
    });
    w.defineProperty(Af, {timestamp: "timestamp"}, function () {
        return this.Cw
    }, function (a) {
        this.Cw = a
    });
    w.defineProperty(Af, {Ug: "targetDiagram"}, function () {
        return this.Bw
    }, function (a) {
        this.Bw = a
    });
    w.defineProperty(Af, {Pe: "targetObject"}, function () {
        return this.Bg
    }, function (a) {
        this.Bg = a
    });
    w.defineProperty(Af, {control: "control"}, function () {
        return 0 !== (this.ud & 1)
    }, function (a) {
        this.ud = a ? this.ud | 1 : this.ud & -2
    });
    w.defineProperty(Af, {shift: "shift"}, function () {
        return 0 !== (this.ud & 4)
    }, function (a) {
        this.ud = a ? this.ud | 4 : this.ud & -5
    });
    w.defineProperty(Af, {alt: "alt"}, function () {
        return 0 !== (this.ud & 2)
    }, function (a) {
        this.ud = a ? this.ud | 2 : this.ud & -3
    });
    w.defineProperty(Af, {mu: "meta"}, function () {
        return 0 !== (this.ud & 8)
    }, function (a) {
        this.ud = a ? this.ud | 8 : this.ud & -9
    });
    w.defineProperty(Af, {left: "left"}, function () {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 0 === this.button : 0 !== (this.buttons & 1)
    }, function (a) {
        this.buttons = a ? this.buttons | 1 : this.buttons & -2
    });
    w.defineProperty(Af, {right: "right"}, function () {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 2 === this.button : 0 !== (this.buttons & 2)
    }, function (a) {
        this.buttons = a ? this.buttons | 2 : this.buttons & -3
    });
    w.defineProperty(Af, {jL: "middle"}, function () {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 1 === this.button : 0 !== (this.buttons & 4)
    }, function (a) {
        this.buttons = a ? this.buttons | 4 : this.buttons & -5
    });
    function Cf() {
        this.Z = null;
        this.Qb = "";
        this.iw = this.zw = null;
        this.Qq = !1
    }

    w.fa("DiagramEvent", Cf);
    Cf.prototype.copy = function () {
        var a = new Cf;
        a.Z = this.Z;
        a.Qb = this.Qb;
        a.zw = this.zw;
        a.iw = this.iw;
        a.Qq = this.Qq;
        return a
    };
    Cf.prototype.toString = function () {
        var a = "*" + this.name;
        null !== this.jB && (a += ":" + this.jB.toString());
        null !== this.OA && (a += "(" + this.OA.toString() + ")");
        return a
    };
    w.defineProperty(Cf, {g: "diagram"}, function () {
        return this.Z
    }, function (a) {
        this.Z = a
    });
    w.defineProperty(Cf, {name: "name"}, function () {
        return this.Qb
    }, function (a) {
        this.Qb = a
    });
    w.defineProperty(Cf, {jB: "subject"}, function () {
        return this.zw
    }, function (a) {
        this.zw = a
    });
    w.defineProperty(Cf, {OA: "parameter"}, function () {
        return this.iw
    }, function (a) {
        this.iw = a
    });
    w.defineProperty(Cf, {cancel: "cancel"}, function () {
        return this.Qq
    }, function (a) {
        this.Qq !== a && w.Gt("DiagramEvent.cancel", "2.0");
        this.Qq = a
    });
    function Lf() {
        this.Rq = Mf;
        this.Tm = this.$v = "";
        this.qs = this.rs = this.us = this.vs = this.ts = this.Z = this.ke = null
    }

    w.fa("ChangedEvent", Lf);
    var Nf;
    Lf.Transaction = Nf = w.p(Lf, "Transaction", -1);
    var Mf;
    Lf.Property = Mf = w.p(Lf, "Property", 0);
    var Of;
    Lf.Insert = Of = w.p(Lf, "Insert", 1);
    var Pf;
    Lf.Remove = Pf = w.p(Lf, "Remove", 2);
    Lf.prototype.clear = Lf.prototype.clear = function () {
        this.qs = this.rs = this.us = this.vs = this.ts = this.Z = this.ke = null
    };
    Lf.prototype.copy = function () {
        var a = new Lf;
        a.Rq = this.Rq;
        a.$v = this.$v;
        a.Tm = this.Tm;
        a.ke = this.ke;
        a.Z = this.Z;
        a.ts = this.ts;
        var b = this.vs;
        a.vs = w.Qa(b) && "function" === typeof b.S ? b.S() : b;
        b = this.us;
        a.us = w.Qa(b) && "function" === typeof b.S ? b.S() : b;
        b = this.rs;
        a.rs = w.Qa(b) && "function" === typeof b.S ? b.S() : b;
        b = this.qs;
        a.qs = w.Qa(b) && "function" === typeof b.S ? b.S() : b;
        return a
    };
    Lf.prototype.fc = function (a) {
        a.De === Lf ? this.xc = a : w.Ej(this, a)
    };
    Lf.prototype.toString = function () {
        var a = "", a = this.xc === Nf ? a + "* " : this.xc === Mf ? a + (null !== this.ba ? "!m" : "!d") : a + ((null !== this.ba ? "!m" : "!d") + this.xc);
        this.propertyName && "string" === typeof this.propertyName && (a += " " + this.propertyName);
        this.nf && this.nf !== this.propertyName && (a += " " + this.nf);
        a += ": ";
        this.xc === Nf ? null !== this.oldValue && (a += " " + this.oldValue) : (null !== this.object && (a += Qf(this.object)), null !== this.oldValue && (a += "  old: " + Qf(this.oldValue)), null !== this.zj && (a += " " + this.zj), null !== this.newValue &&
        (a += "  new: " + Qf(this.newValue)), null !== this.yj && (a += " " + this.yj));
        return a
    };
    Lf.prototype.getValue = Lf.prototype.ka = function (a) {
        return a ? this.oldValue : this.newValue
    };
    Lf.prototype.getParam = function (a) {
        return a ? this.zj : this.yj
    };
    Lf.prototype.canUndo = Lf.prototype.canUndo = function () {
        return null !== this.ba || null !== this.g ? !0 : !1
    };
    Lf.prototype.undo = Lf.prototype.undo = function () {
        this.canUndo() && (null !== this.ba ? this.ba.ln(this, !0) : null !== this.g && this.g.ln(this, !0))
    };
    Lf.prototype.canRedo = Lf.prototype.canRedo = function () {
        return null !== this.ba || null !== this.g ? !0 : !1
    };
    Lf.prototype.redo = Lf.prototype.redo = function () {
        this.canRedo() && (null !== this.ba ? this.ba.ln(this, !1) : null !== this.g && this.g.ln(this, !1))
    };
    w.defineProperty(Lf, {ba: "model"}, function () {
        return this.ke
    }, function (a) {
        this.ke = a
    });
    w.defineProperty(Lf, {g: "diagram"}, function () {
        return this.Z
    }, function (a) {
        this.Z = a
    });
    w.defineProperty(Lf, {xc: "change"}, function () {
        return this.Rq
    }, function (a) {
        this.Rq = a
    });
    w.defineProperty(Lf, {nf: "modelChange"}, function () {
        return this.$v
    }, function (a) {
        this.$v = a
    });
    w.defineProperty(Lf, {propertyName: "propertyName"}, function () {
        return this.Tm
    }, function (a) {
        this.Tm = a
    });
    w.u(Lf, {oF: "isTransactionFinished"}, function () {
        return this.Rq === Nf && ("CommittedTransaction" === this.Tm || "FinishedUndo" === this.Tm || "FinishedRedo" === this.Tm)
    });
    w.defineProperty(Lf, {object: "object"}, function () {
        return this.ts
    }, function (a) {
        this.ts = a
    });
    w.defineProperty(Lf, {oldValue: "oldValue"}, function () {
        return this.vs
    }, function (a) {
        this.vs = a
    });
    w.defineProperty(Lf, {zj: "oldParam"}, function () {
        return this.us
    }, function (a) {
        this.us = a
    });
    w.defineProperty(Lf, {newValue: "newValue"}, function () {
        return this.rs
    }, function (a) {
        this.rs = a
    });
    w.defineProperty(Lf, {yj: "newParam"}, function () {
        return this.qs
    }, function (a) {
        this.qs = a
    });
    function F(a) {
        1 < arguments.length && w.k("Model constructor can only take one optional argument, the Array of node data.");
        w.lc(this);
        this.fr = this.Qb = "";
        this.Ji = !1;
        this.lz = {};
        this.Ce = [];
        this.Ec = new ka(null, Object);
        this.ek = "key";
        this.to = this.Zo = null;
        this.Xq = this.Yq = !1;
        this.Hq = null;
        this.Om = "category";
        this.Di = new ka(null, J);
        this.ak = null;
        this.cj = !1;
        this.Gz = null;
        this.oa = new Rf;
        void 0 !== a && (this.cg = a)
    }

    w.fa("Model", F);
    F.prototype.cloneProtected = function (a) {
        a.Qb = this.Qb;
        a.fr = this.fr;
        a.Ji = this.Ji;
        a.ek = this.ek;
        a.Zo = this.Zo;
        a.to = this.to;
        a.Yq = this.Yq;
        a.Xq = this.Xq;
        a.Hq = this.Hq;
        a.Om = this.Om
    };
    F.prototype.copy = function () {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    F.prototype.clear = F.prototype.clear = function () {
        this.Ce = [];
        this.Ec.clear();
        this.Di.clear();
        this.oa.clear()
    };
    g = F.prototype;
    g.toString = function (a) {
        void 0 === a && (a = 0);
        if (1 < a)return this.mB();
        var b = ("" !== this.name ? this.name : "") + " Model";
        if (0 < a) {
            b += "\n node data:";
            a = this.cg;
            for (var c = w.Ya(a), d = 0; d < c; d++)var e = w.Da(a, d), b = b + (" " + this.ub(e) + ":" + Qf(e))
        }
        return b
    };
    g.bo = function () {
        var a = "";
        "" !== this.name && (a += ',\n  "name": ' + this.quote(this.name));
        "" !== this.Kl && (a += ',\n  "dataFormat": ' + this.quote(this.Kl));
        this.cb && (a += ',\n  "isReadOnly": ' + this.cb);
        "key" !== this.bm && "string" === typeof this.bm && (a += ',\n  "nodeKeyProperty": ' + this.quote(this.bm));
        this.Xz && (a += ',\n  "copiesArrays": true');
        this.Wz && (a += ',\n  "copiesArrayObjects": true');
        "category" !== this.Rn && "string" === typeof this.Rn && (a += ',\n  "nodeCategoryProperty": ' + this.quote(this.Rn));
        return a
    };
    g.wu = function (a) {
        a.name && (this.name = a.name);
        a.dataFormat && (this.Kl = a.dataFormat);
        a.isReadOnly && (this.cb = a.isReadOnly);
        a.nodeKeyProperty && (this.bm = a.nodeKeyProperty);
        a.copiesArrays && (this.Xz = a.copiesArrays);
        a.copiesArrayObjects && (this.Wz = a.copiesArrayObjects);
        a.nodeCategoryProperty && (this.Rn = a.nodeCategoryProperty)
    };
    function Sf(a) {
        return ',\n  "modelData": ' + Tf(a, a.Fk)
    }

    function Uf(a, b) {
        var c = b.modelData;
        w.Qa(c) && (a.zu(c), a.Fk = c)
    }

    g.zB = function () {
        var a = this.Fk, b = !1, c;
        for (c in a)if (!Vf(c, a[c])) {
            b = !0;
            break
        }
        a = "";
        b && (a = Sf(this));
        return a + ',\n  "nodeDataArray": ' + Wf(this, this.cg, !0)
    };
    g.RA = function (a) {
        Uf(this, a);
        a = a.nodeDataArray;
        w.isArray(a) && (this.zu(a), this.cg = a)
    };
    function Xf(a, b, c, d) {
        if (b === c)return !0;
        if (typeof b !== typeof c || "function" === typeof b || "function" === typeof c)return !1;
        if (Array.isArray(b) && Array.isArray(c)) {
            if (d.ka(b) === c)return !0;
            d.add(b, c);
            if (b.length !== c.length)return !1;
            for (var e = 0; e < b.length; e++)if (!Xf(a, b[e], c[e], d))return !1;
            return !0
        }
        if (w.Qa(b) && w.Qa(c)) {
            if (d.ka(b) === c)return !0;
            d.add(b, c);
            for (e in b) {
                var f = b[e];
                if (!Vf(e, f)) {
                    var h = c[e];
                    if (void 0 === h || !Xf(a, f, h, d))return !1
                }
            }
            for (var k in c)if (h = c[k], !Vf(k, h) && (f = b[k], void 0 === f || !Xf(a, f, h, d)))return !1;
            return !0
        }
        return !1
    }

    function Yf(a, b, c) {
        a[c] !== b[c] && w.k("Model.computeJsonDifference: Model." + c + ' is not the same in both models: "' + a[c] + '" and "' + b[c] + '"')
    }

    g.AB = function (a) {
        Yf(this, a, "nodeKeyProperty");
        this instanceof Zf && Yf(this, a, "nodeParentKeyProperty");
        for (var b = new J, c = new J, d = (new J).Hc(this.Ec.pF), e = new ka, f = a.cg, h = 0; h < f.length; h++) {
            var k = f[h], l = a.ub(k);
            if (void 0 !== l) {
                d.remove(l);
                var m = this.te(l);
                null === m ? (b.add(l), c.add(k)) : Xf(this, m, k, e) || c.add(k)
            } else this.DA(k), l = this.ub(k), b.add(l), c.add(k)
        }
        f = "";
        Xf(this, this.Fk, a.Fk, e) || (f += Sf(this));
        0 < b.count && (f += this.xy + Wf(this, b.dc(), !0));
        0 < c.count && (f += this.IB + Wf(this, c.dc(), !0));
        0 < d.count && (f += this.zy +
            Wf(this, d.dc(), !0));
        return f
    };
    F.prototype.computeJsonDifference = F.prototype.computeJSONDifference = function (a, b) {
        w.G(a, F, F, "computeJsonDifference:newmodel");
        void 0 === b && (b = this.constructor === F ? "go.Model" : this.constructor === P ? "go.GraphLinksModel" : this.constructor === Zf ? "go.TreeModel" : w.hf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.bo() + this.AB(a) + "}"
    };
    g = F.prototype;
    g.xy = ',\n  "insertedNodeKeys": ';
    g.IB = ',\n  "modifiedNodeData": ';
    g.zy = ',\n  "removedNodeKeys": ';
    g.yB = function (a, b) {
        var c = this, d = !1, e = new J, f = new J, h = new J;
        a.Pf.each(function (a) {
            a.ba === c && ("nodeDataArray" === a.nf ? a.xc === Of ? e.add(a.newValue) : a.xc === Pf && h.add(a.oldValue) : c.Ge(a.object) ? f.add(a.object) : c.Fk === a.object && a.xc === Mf && (d = !0))
        });
        var k = new J;
        e.each(function (a) {
            k.add(c.ub(a));
            b || f.add(a)
        });
        var l = new J;
        h.each(function (a) {
            l.add(c.ub(a));
            b && f.add(a)
        });
        var m = "";
        d && (m += Sf(this));
        0 < k.count && (m += (b ? this.zy : this.xy) + Wf(this, k.dc(), !0));
        0 < f.count && (m += this.IB + Wf(this, f.dc(), !0));
        0 < l.count && (m += (b ?
                this.xy : this.zy) + Wf(this, l.dc(), !0));
        return m
    };
    g.QA = function (a) {
        Uf(this, a);
        var b = a.insertedNodeKeys;
        if (w.isArray(b))for (var c = w.Ya(b), d = 0; d < c; d++) {
            var e = w.Da(b, d), f = this.te(e);
            null === f && (f = this.copyNodeData({}), this.gy(f, e), this.Al(f))
        }
        e = a.modifiedNodeData;
        if (w.isArray(e))for (c = w.Ya(e), d = 0; d < c; d++)if (b = w.Da(e, d), f = this.ub(b), f = this.te(f), null !== f)for (var h in b)"__gohashid" !== h && h !== this.bm && this.setDataProperty(f, h, b[h]);
        a = a.removedNodeKeys;
        if (w.isArray(a))for (c = w.Ya(a), d = 0; d < c; d++)e = w.Da(a, d), f = this.te(e), null !== f && this.Xx(f)
    };
    F.prototype.toIncrementalJson = F.prototype.toIncrementalJSON = function (a, b) {
        w.G(a, Lf, F, "toIncrementalJson:e");
        a.xc !== Nf && w.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:" + a.toString());
        var c = a.object;
        if (!(a.oF && c instanceof $f))return '{ "incremental": 0 }';
        void 0 === b && (b = this.constructor === F ? "go.Model" : this.constructor === P ? "go.GraphLinksModel" : this.constructor === Zf ? "go.TreeModel" : w.hf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.bo() + this.yB(c, "FinishedUndo" ===
                a.propertyName) + "}"
    };
    F.prototype.toJson = F.prototype.toJSON = F.prototype.mB = function (a) {
        void 0 === a && (a = this.constructor === F ? "go.Model" : this.constructor === P ? "go.GraphLinksModel" : this.constructor === Zf ? "go.TreeModel" : w.hf(this));
        return '{ "class": ' + this.quote(a) + this.bo() + this.zB() + "}"
    };
    F.prototype.applyIncrementalJson = F.prototype.applyIncrementalJSON = function (a) {
        var b = null;
        if ("string" === typeof a)if (window.JSON && window.JSON.parse)try {
            b = window.JSON.parse(a)
        } catch (c) {
        } else w.trace("WARNING: no JSON.parse available"); else"object" === typeof a ? b = a : w.k("Unable to modify a Model from: " + a);
        var d = b.incremental;
        "number" !== typeof d && w.k("Unable to apply non-incremental changes to Model: " + a);
        0 !== d && (this.Tb("applyIncrementalJson"), this.QA(b), this.Fd("applyIncrementalJson"))
    };
    F.fromJson = F.fromJSON = function (a, b) {
        void 0 === b && (b = null);
        null !== b && w.G(b, F, F, "fromJson:model");
        var c = null;
        if ("string" === typeof a)if (window.JSON && window.JSON.parse)try {
            c = window.JSON.parse(a)
        } catch (d) {
        } else w.trace("WARNING: no JSON.parse available"); else"object" === typeof a ? c = a : w.k("Unable to construct a Model from: " + a);
        if (null === b) {
            var e;
            e = null;
            var f = c["class"];
            if ("string" === typeof f)try {
                var h = null;
                0 === f.indexOf("go.") ? (f = f.substr(3), h = da[f]) : (h = da[f], void 0 === h && (h = window[f]));
                "function" === typeof h &&
                (e = new h)
            } catch (k) {
            }
            null === e || e instanceof F ? b = e : w.k("Unable to construct a Model of declared class: " + c["class"])
        }
        null === b && (b = new P);
        b.wu(c);
        b.RA(c);
        return b
    };
    F.prototype.replaceJsonObjects = F.prototype.zu = function (a) {
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++) {
            var d = w.Da(a, c);
            w.Qa(d) && w.jE(a, c, this.zu(d))
        } else if (w.Qa(a)) {
            for (c in a)d = a[c], w.Qa(d) && (d = this.zu(d), a[c] = d);
            if ("object" === typeof a) {
                d = a;
                c = a["class"];
                if ("NaN" === c)d = NaN; else if ("Date" === c)d = new Date(a.value); else if ("go.Point" === c)d = new z(ig(a.x), ig(a.y)); else if ("go.Size" === c)d = new ha(ig(a.width), ig(a.height)); else if ("go.Rect" === c)d = new A(ig(a.x), ig(a.y), ig(a.width), ig(a.height)); else if ("go.Margin" ===
                    c)d = new eb(ig(a.top), ig(a.right), ig(a.bottom), ig(a.left)); else if ("go.Spot" === c)d = "string" === typeof a["enum"] ? rb(a["enum"]) : new L(ig(a.x), ig(a.y), ig(a.offsetX), ig(a.offsetY)); else if ("go.Brush" === c) {
                    if (d = new ga, d.type = pa(ga, a.type), "string" === typeof a.color && (d.color = a.color), a.start instanceof L && (d.start = a.start), a.end instanceof L && (d.end = a.end), "number" === typeof a.startRadius && (d.Ku = ig(a.startRadius)), "number" === typeof a.endRadius && (d.It = ig(a.endRadius)), a = a.colorStops, w.Qa(a))for (b in a)d.addColorStop(parseFloat(b),
                        a[b])
                } else"go.Geometry" === c ? (b = null, b = "string" === typeof a.path ? We(a.path) : new Fe, b.type = pa(Fe, a.type), "number" === typeof a.startX && (b.ia = ig(a.startX)), "number" === typeof a.startY && (b.ga = ig(a.startY)), "number" === typeof a.endX && (b.D = ig(a.endX)), "number" === typeof a.endY && (b.F = ig(a.endY)), a.spot1 instanceof L && (b.A = a.spot1), a.spot2 instanceof L && (b.B = a.spot2), d = b) : "go.EnumValue" === c && (b = a.classType, 0 === b.indexOf("go.") && (b = b.substr(3)), d = pa(da[b], a.name));
                a = d
            }
        }
        return a
    };
    F.prototype.quote = function (a) {
        for (var b = "", c = a.length, d = 0; d < c; d++) {
            var e = a[d];
            if ('"' === e || "\\" === e)b += "\\" + e; else if ("\b" === e)b += "\\b"; else if ("\f" === e)b += "\\f"; else if ("\n" === e)b += "\\n"; else if ("\r" === e)b += "\\r"; else if ("\t" === e)b += "\\t"; else var f = a.charCodeAt(d), b = 16 > f ? b + ("\\u000" + a.charCodeAt(d).toString(16)) : 32 > f ? b + ("\\u00" + a.charCodeAt(d).toString(16)) : 8232 === f ? b + "\\u2028" : 8233 === f ? b + "\\u2029" : b + e
        }
        return '"' + b + '"'
    };
    F.prototype.writeJsonValue = F.prototype.Pu = function (a) {
        return void 0 === a ? "undefined" : null === a ? "null" : !0 === a ? "true" : !1 === a ? "false" : "string" === typeof a ? this.quote(a) : "number" === typeof a ? Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : isNaN(a) ? '{"class":"NaN"}' : a.toString() : a instanceof Date ? '{"class":"Date", "value":"' + a.toJSON() + '"}' : a instanceof Number ? this.Pu(a.valueOf()) : w.isArray(a) ? Wf(this, a) : w.Qa(a) ? Tf(this, a) : "function" === typeof a ? "null" : a.toString()
    };
    function Wf(a, b, c) {
        void 0 === c && (c = !1);
        var d = w.Ya(b);
        if (0 >= d)return "[]";
        var e = new ra;
        e.add("[ ");
        c && 1 < d && e.add("\n");
        for (var f = 0; f < d; f++) {
            var h = w.Da(b, f);
            void 0 !== h && (0 < f && (e.add(","), c && e.add("\n")), e.add(a.Pu(h)))
        }
        c && 1 < d && e.add("\n");
        e.add(" ]");
        return e.toString()
    }

    function Vf(a, b) {
        return void 0 === b || "__gohashid" === a || "_" === a[0] || "function" === typeof b ? !0 : !1
    }

    function jg(a) {
        return isNaN(a) ? "NaN" : Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : a
    }

    function Tf(a, b) {
        var c = b;
        if (c instanceof z)b = {
            "class": "go.Point",
            x: jg(c.x),
            y: jg(c.y)
        }; else if (c instanceof ha)b = {
            "class": "go.Size",
            width: jg(c.width),
            height: jg(c.height)
        }; else if (c instanceof A)b = {
            "class": "go.Rect",
            x: jg(c.x),
            y: jg(c.y),
            width: jg(c.width),
            height: jg(c.height)
        }; else if (c instanceof eb)b = {
            "class": "go.Margin",
            top: jg(c.top),
            right: jg(c.right),
            bottom: jg(c.bottom),
            left: jg(c.left)
        }; else if (c instanceof L)b = c.fd() ? {
            "class": "go.Spot",
            x: jg(c.x),
            y: jg(c.y),
            offsetX: jg(c.offsetX),
            offsetY: jg(c.offsetY)
        } :
        {"class": "go.Spot", "enum": c.toString()}; else if (c instanceof ga) {
            b = {"class": "go.Brush", type: c.type.name};
            if (c.type === kg)b.color = c.color; else if (c.type === lg || c.type === $c)b.start = c.start, b.end = c.end, c.type === $c && (0 !== c.Ku && (b.startRadius = jg(c.Ku)), isNaN(c.It) || (b.endRadius = jg(c.It)));
            if (null !== c.tk) {
                for (var d = {}, c = c.tk.i; c.next();)d[c.key] = c.value;
                b.colorStops = d
            }
        } else if (c instanceof Fe)b = {
            "class": "go.Geometry",
            type: c.type.name
        }, 0 !== c.ia && (b.startX = jg(c.ia)), 0 !== c.ga && (b.startY = jg(c.ga)), 0 !== c.D && (b.endX =
            jg(c.D)), 0 !== c.F && (b.endY = jg(c.F)), c.A.L(vb) || (b.spot1 = c.A), c.B.L(Kb) || (b.spot2 = c.B), c.type === Ge && (b.path = Ve(c)); else if (c instanceof ea)b = {
            "class": "go.EnumValue",
            classType: w.hf(c.De),
            name: c.name
        }; else if (c instanceof G || c instanceof D || c instanceof mg || c instanceof F || c instanceof ng || c instanceof og || c instanceof pg || c instanceof qg || c instanceof Rf || c instanceof $f)return w.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: " + c.toString()),
            "{}";
        var d = "{", c = !0, e;
        for (e in b) {
            var f = w.rb(b, e);
            if (!Vf(e, f))if (c ? c = !1 : d += ", ", d += '"' + e + '":', "points" === e && f instanceof I && f.ma === z) {
                for (var h = "[", f = f.i; f.next();) {
                    var k = f.value;
                    1 < h.length && (h += ",");
                    h += a.Pu(k.x);
                    h += ",";
                    h += a.Pu(k.y)
                }
                h += "]";
                d += h
            } else d += a.Pu(f)
        }
        return d + "}"
    }

    function ig(a) {
        return "number" === typeof a ? a : "NaN" === a ? NaN : "9e9999" === a ? Infinity : "-9e9999" === a ? -Infinity : parseFloat(a)
    }

    w.defineProperty(F, {name: "name"}, function () {
        return this.Qb
    }, function (a) {
        var b = this.Qb;
        b !== a && (w.j(a, "string", F, "name"), this.Qb = a, this.h("name", b, a))
    });
    w.defineProperty(F, {Kl: "dataFormat"}, function () {
        return this.fr
    }, function (a) {
        var b = this.fr;
        b !== a && (w.j(a, "string", F, "dataFormat"), this.fr = a, this.h("dataFormat", b, a))
    });
    w.defineProperty(F, {cb: "isReadOnly"}, function () {
        return this.Ji
    }, function (a) {
        var b = this.Ji;
        b !== a && (w.j(a, "boolean", F, "isReadOnly"), this.Ji = a, this.h("isReadOnly", b, a))
    });
    w.defineProperty(F, {Fk: "modelData"}, function () {
        return this.lz
    }, function (a) {
        var b = this.lz;
        b !== a && (w.j(a, "object", F, "modelData"), this.lz = a, this.h("modelData", b, a), this.Hb(a))
    });
    F.prototype.addChangedListener = F.prototype.fn = function (a) {
        w.j(a, "function", F, "addChangedListener:listener");
        null === this.ak && (this.ak = new I("function"));
        this.ak.add(a)
    };
    F.prototype.removeChangedListener = F.prototype.xu = function (a) {
        w.j(a, "function", F, "removeChangedListener:listener");
        null !== this.ak && (this.ak.remove(a), 0 === this.ak.count && (this.ak = null))
    };
    F.prototype.Rw = function (a) {
        this.wb || this.oa.XE(a);
        if (null !== this.ak) {
            var b = this.ak, c = b.length;
            if (1 === c)b = b.da(0), b(a); else if (0 !== c)for (var d = b.dc(), e = 0; e < c; e++)b = d[e], b(a)
        }
    };
    F.prototype.raiseChangedEvent = F.prototype.Wc = function (a, b, c, d, e, f, h) {
        rg(this, "", a, b, c, d, e, f, h)
    };
    F.prototype.raiseChanged = F.prototype.h = function (a, b, c, d, e) {
        rg(this, "", Mf, a, this, b, c, d, e)
    };
    F.prototype.raiseDataChanged = F.prototype.PA = function (a, b, c, d, e, f) {
        rg(this, "", Mf, b, a, c, d, e, f)
    };
    function rg(a, b, c, d, e, f, h, k, l) {
        void 0 === k && (k = null);
        void 0 === l && (l = null);
        var m = new Lf;
        m.ba = a;
        m.xc = c;
        m.nf = b;
        m.propertyName = d;
        m.object = e;
        m.oldValue = f;
        m.zj = k;
        m.newValue = h;
        m.yj = l;
        a.Rw(m)
    }

    w.defineProperty(F, {oa: "undoManager"}, function () {
        return this.Gz
    }, function (a) {
        var b = this.Gz;
        b !== a && (w.G(a, Rf, F, "undoManager"), null !== b && b.hJ(this), this.Gz = a, null !== a && a.$G(this))
    });
    w.defineProperty(F, {wb: "skipsUndoManager"}, function () {
        return this.cj
    }, function (a) {
        w.j(a, "boolean", F, "skipsUndoManager");
        this.cj = a
    });
    F.prototype.ln = function (a, b) {
        if (null !== a && a.ba === this)if (a.xc === Mf) {
            var c = a.object, d = a.propertyName, e = a.ka(b);
            w.Ma(c, d, e)
        } else a.xc === Of ? (c = a.yj, "nodeDataArray" === a.nf ? (d = a.newValue, w.Qa(d) && "number" === typeof c && (e = this.ub(d), b ? (w.Da(this.Ce, c) === d && w.Fg(this.Ce, c), void 0 !== e && this.Ec.remove(e)) : (w.Da(this.Ce, c) !== d && w.qh(this.Ce, c, d), void 0 !== e && this.Ec.add(e, d)))) : "" === a.nf ? (d = a.object, !w.isArray(d) && a.propertyName && (d = w.rb(a.object, a.propertyName)), w.isArray(d) && "number" === typeof c && (e = a.newValue,
            b ? w.Fg(d, c) : w.qh(d, c, e))) : w.k("unknown ChangedEvent.Insert modelChange: " + a.toString())) : a.xc === Pf ? (c = a.zj, "nodeDataArray" === a.nf ? (d = a.oldValue, w.Qa(d) && "number" === typeof c && (e = this.ub(d), b ? (w.Da(this.Ce, c) !== d && w.qh(this.Ce, c, d), void 0 !== e && this.Ec.add(e, d)) : (w.Da(this.Ce, c) === d && w.Fg(this.Ce, c), void 0 !== e && this.Ec.remove(e)))) : "" === a.nf ? (d = a.object, !w.isArray(d) && a.propertyName && (d = w.rb(a.object, a.propertyName)), w.isArray(d) && "number" === typeof c && (e = a.oldValue, b ? w.qh(d, c, e) : w.Fg(d, c))) : w.k("unknown ChangedEvent.Remove modelChange: " +
            a.toString())) : a.xc !== Nf && w.k("unknown ChangedEvent: " + a.toString())
    };
    F.prototype.startTransaction = F.prototype.Tb = function (a) {
        return this.oa.Tb(a)
    };
    F.prototype.commitTransaction = F.prototype.Fd = function (a) {
        return this.oa.Fd(a)
    };
    F.prototype.rollbackTransaction = F.prototype.nq = function () {
        return this.oa.nq()
    };
    F.prototype.updateTargetBindings = F.prototype.Hb = function (a, b) {
        void 0 === b && (b = "");
        rg(this, "SourceChanged", Nf, b, a, null, null)
    };
    w.defineProperty(F, {bm: "nodeKeyProperty"}, function () {
        return this.ek
    }, function (a) {
        var b = this.ek;
        b !== a && (sg(a, F, "nodeKeyProperty"), "" === a && w.k("Model.nodeKeyProperty may not be the empty string"), 0 < this.Ec.count && w.k("Cannot set Model.nodeKeyProperty when there is existing node data"), this.ek = a, this.h("nodeKeyProperty", b, a))
    });
    function sg(a, b, c) {
        "string" !== typeof a && "function" !== typeof a && w.wd(a, "string or function", b, c)
    }

    F.prototype.getKeyForNodeData = F.prototype.ub = function (a) {
        if (null !== a) {
            var b = this.ek;
            if ("" !== b && (b = w.rb(a, b), void 0 !== b)) {
                if (tg(b))return b;
                w.k("Key value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    F.prototype.setKeyForNodeData = F.prototype.gy = function (a, b) {
        void 0 !== b && null !== b && tg(b) || w.wd(b, "number or string", F, "setKeyForNodeData:key");
        if (null !== a) {
            var c = this.ek;
            if ("" !== c)if (this.Ge(a)) {
                var d = w.rb(a, c);
                d !== b && null === this.te(b) && (w.Ma(a, c, b), this.Ec.remove(d), this.Ec.add(b, a), rg(this, "nodeKey", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c), this.yu(d, b))
            } else w.Ma(a, c, b)
        }
    };
    w.defineProperty(F, {cL: "makeUniqueKeyFunction"}, function () {
        return this.Zo
    }, function (a) {
        var b = this.Zo;
        b !== a && (null !== a && w.j(a, "function", F, "makeUniqueKeyFunction"), this.Zo = a, this.h("makeUniqueKeyFunction", b, a))
    });
    function tg(a) {
        return "number" === typeof a || "string" === typeof a
    }

    F.prototype.containsNodeData = F.prototype.Ge = function (a) {
        var b = this.ub(a);
        return void 0 === b ? !1 : this.Ec.ka(b) === a
    };
    F.prototype.findNodeDataForKey = F.prototype.te = function (a) {
        null === a && w.k("Model.findNodeDataForKey:key must not be null");
        return void 0 !== a && tg(a) ? this.Ec.ka(a) : null
    };
    w.defineProperty(F, {cg: "nodeDataArray"}, function () {
        return this.Ce
    }, function (a) {
        var b = this.Ce;
        if (b !== a) {
            w.Qz(a, F, "nodeDataArray");
            this.Ec.clear();
            this.tB();
            for (var c = w.Ya(a), d = 0; d < c; d++) {
                var e = w.Da(a, d);
                if (!w.Qa(e)) {
                    w.k("Model.nodeDataArray must only contain Objects, not: " + e);
                    return
                }
                w.Yp(e)
            }
            this.Ce = a;
            for (var f = new I(Object), d = 0; d < c; d++) {
                var e = w.Da(a, d), h = this.ub(e);
                void 0 === h ? f.add(e) : null !== this.Ec.ka(h) ? f.add(e) : this.Ec.add(h, e)
            }
            for (d = f.i; d.next();)e = d.value, this.DA(e), f = this.ub(e), void 0 !== f &&
            this.Ec.add(f, e);
            rg(this, "nodeDataArray", Mf, "nodeDataArray", this, b, a);
            for (d = 0; d < c; d++)e = w.Da(a, d), this.mq(e), this.lq(e);
            this.lE();
            w.rI(a) || (this.cb = !0)
        }
    });
    F.prototype.makeNodeDataKeyUnique = F.prototype.DA = function (a) {
        if (null !== a) {
            var b = this.ek;
            if ("" !== b) {
                var c = this.ub(a);
                if (void 0 === c || this.Ec.contains(c)) {
                    var d = this.Zo;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.Ec.contains(c))) {
                        w.Ma(a, b, c);
                        return
                    }
                    if ("string" === typeof c) {
                        for (d = 2; this.Ec.contains(c + d);)d++;
                        w.Ma(a, b, c + d)
                    } else if (void 0 === c || "number" === typeof c) {
                        for (d = -this.Ec.count - 1; this.Ec.contains(d);)d--;
                        w.Ma(a, b, d)
                    } else w.k("Model.getKeyForNodeData returned something other than a string or a number: " +
                        c)
                }
            }
        }
    };
    F.prototype.addNodeData = F.prototype.Al = function (a) {
        null !== a && (w.Yp(a), this.Ge(a) || ug(this, a, !0))
    };
    function ug(a, b, c) {
        var d = a.ub(b);
        if (void 0 === d || a.Ec.ka(d) !== b)a.DA(b), d = a.ub(b), void 0 === d ? w.k("Model.makeNodeDataKeyUnique failed on " + b + ".  Data not added to Model.") : (a.Ec.add(d, b), d = null, c && (d = w.Ya(a.Ce), w.qh(a.Ce, d, b)), rg(a, "nodeDataArray", Of, "nodeDataArray", a, null, b, null, d), a.mq(b), a.lq(b))
    }

    F.prototype.addNodeDataCollection = function (a) {
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++)this.Al(w.Da(a, c)); else for (a = a.i; a.next();)this.Al(a.value)
    };
    F.prototype.removeNodeData = F.prototype.Xx = function (a) {
        null !== a && vg(this, a, !0)
    };
    function vg(a, b, c) {
        var d = a.ub(b);
        void 0 !== d && a.Ec.remove(d);
        d = null;
        if (c) {
            d = w.El(a.Ce, b);
            if (0 > d)return;
            w.Fg(a.Ce, d)
        }
        rg(a, "nodeDataArray", Pf, "nodeDataArray", a, b, null, d, null);
        a.Nu(b)
    }

    F.prototype.removeNodeDataCollection = function (a) {
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++)this.Xx(w.Da(a, c)); else for (a = a.i; a.next();)this.Xx(a.value)
    };
    g = F.prototype;
    g.yu = function (a, b) {
        var c = wg(this, a);
        c instanceof J && this.Di.add(b, c)
    };
    g.tB = function () {
    };
    g.mq = function () {
    };
    g.lq = function () {
    };
    g.Nu = function () {
    };
    function Mg(a, b, c) {
        if (void 0 !== b) {
            var d = a.Di.ka(b);
            null === d && (d = new J(Object), a.Di.add(b, d));
            d.add(c)
        }
    }

    function Ng(a, b, c) {
        if (void 0 !== b) {
            var d = a.Di.ka(b);
            d instanceof J && (void 0 === c || null === c ? a.Di.remove(b) : (d.remove(c), 0 === d.count && a.Di.remove(b)))
        }
    }

    function wg(a, b) {
        if (void 0 === b)return null;
        var c = a.Di.ka(b);
        return c instanceof J ? c : null
    }

    F.prototype.clearUnresolvedReferences = F.prototype.lE = function (a) {
        void 0 === a ? this.Di.clear() : this.Di.remove(a)
    };
    w.defineProperty(F, {xK: "copyNodeDataFunction"}, function () {
        return this.to
    }, function (a) {
        var b = this.to;
        b !== a && (null !== a && w.j(a, "function", F, "copyNodeDataFunction"), this.to = a, this.h("copyNodeDataFunction", b, a))
    });
    w.defineProperty(F, {Xz: "copiesArrays"}, function () {
        return this.Yq
    }, function (a) {
        var b = this.Yq;
        b !== a && (null !== a && w.j(a, "boolean", F, "copiesArrays"), this.Yq = a, this.h("copiesArrays", b, a))
    });
    w.defineProperty(F, {Wz: "copiesArrayObjects"}, function () {
        return this.Xq
    }, function (a) {
        var b = this.Xq;
        b !== a && (null !== a && w.j(a, "boolean", F, "copiesArrayObjects"), this.Xq = a, this.h("copiesArrayObjects", b, a))
    });
    F.prototype.copyNodeData = function (a) {
        if (null === a)return null;
        var b = null, b = this.to, b = null !== b ? b(a, this) : Og(this, a, !0);
        w.Qa(b) && w.lc(b);
        return b
    };
    function Og(a, b, c) {
        if (a.Xz && Array.isArray(b)) {
            var d = [];
            for (c = 0; c < b.length; c++) {
                var e = Og(a, b[c], a.Wz);
                d.push(e)
            }
            w.lc(d);
            return d
        }
        if (c && w.Qa(b)) {
            c = (c = b.constructor) ? new c : {};
            for (d in b)if ("__gohashid" !== d) {
                var e = w.rb(b, d), f;
                f = e;
                f instanceof G || f instanceof D || f instanceof mg || f instanceof Pg || f instanceof Qg || f instanceof ng || f instanceof og || f instanceof pg || f instanceof Af || f instanceof Cf ? ("_" !== d[0] && w.trace('Warning: found GraphObject or Diagram reference when copying model data on property "' +
                    d + '" of data object: ' + b.toString() + "  \nModel data should not have any references to a Diagram or any part of a diagram, such as: " + f.toString()), f = !0) : f = f instanceof F || f instanceof Rf || f instanceof $f || f instanceof Lf ? !0 : !1;
                f || (e = Og(a, e, !1));
                w.Ma(c, d, e)
            }
            w.lc(c);
            return c
        }
        return b instanceof z ? b.copy() : b instanceof ha ? b.copy() : b instanceof A ? b.copy() : b instanceof L ? b.copy() : b instanceof eb ? b.copy() : b
    }

    w.defineProperty(F, {bH: "afterCopyFunction"}, function () {
        return this.Hq
    }, function (a) {
        var b = this.Hq;
        b !== a && (null !== a && w.j(a, "function", F, "afterCopyFunction"), this.Hq = a, this.h("afterCopyFunction", b, a))
    });
    var Rg = !1;
    F.prototype.setDataProperty = function (a, b, c) {
        if (this.Ge(a))if (b === this.bm)this.gy(a, c); else {
            if (b === this.Rn) {
                this.by(a, c);
                return
            }
        } else!Rg && a instanceof G && (Rg = !0, w.trace('Model.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), w.trace("  Is that really your intent?"));
        var d = w.rb(a, b);
        d !== c && (w.Ma(a, b, c), this.PA(a, b, d, c))
    };
    F.prototype.addArrayItem = function (a, b) {
        this.tA(a, -1, b)
    };
    F.prototype.insertArrayItem = F.prototype.tA = function (a, b, c) {
        a === this.Ce && w.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");
        0 > b && (b = w.Ya(a));
        w.qh(a, b, c);
        rg(this, "", Of, "", a, null, c, null, b)
    };
    F.prototype.removeArrayItem = F.prototype.KF = function (a, b) {
        void 0 === b && (b = -1);
        a === this.Ce && w.k("Model.removeArrayItem should not be called on the Model.nodeDataArray");
        -1 === b && (b = w.Ya(a) - 1);
        var c = w.Da(a, b);
        w.Fg(a, b);
        rg(this, "", Pf, "", a, c, null, b, null)
    };
    w.defineProperty(F, {Rn: "nodeCategoryProperty"}, function () {
        return this.Om
    }, function (a) {
        var b = this.Om;
        b !== a && (sg(a, F, "nodeCategoryProperty"), this.Om = a, this.h("nodeCategoryProperty", b, a))
    });
    F.prototype.getCategoryForNodeData = F.prototype.lA = function (a) {
        if (null === a)return "";
        var b = this.Om;
        if ("" === b)return "";
        b = w.rb(a, b);
        if (void 0 === b)return "";
        if ("string" === typeof b)return b;
        w.k("getCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    F.prototype.setCategoryForNodeData = F.prototype.by = function (a, b) {
        w.j(b, "string", F, "setCategoryForNodeData:cat");
        if (null !== a) {
            var c = this.Om;
            if ("" !== c)if (this.Ge(a)) {
                var d = w.rb(a, c);
                void 0 === d && (d = "");
                d !== b && (w.Ma(a, c, b), rg(this, "nodeCategory", Mf, c, a, d, b))
            } else w.Ma(a, c, b)
        }
    };
    function P(a, b) {
        F.call(this);
        2 < arguments.length && w.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");
        this.df = [];
        this.Pi = new J(Object);
        this.$c = new ka(null, Object);
        this.ll = "";
        this.pm = this.so = this.$o = null;
        this.Sh = "from";
        this.Th = "to";
        this.Km = this.Jm = "";
        this.Im = "category";
        this.ug = "";
        this.dp = "isGroup";
        this.jh = "group";
        this.Zq = !1;
        void 0 !== a && (this.cg = a);
        void 0 !== b && (this.Mg = b)
    }

    w.La(P, F);
    w.fa("GraphLinksModel", P);
    P.prototype.cloneProtected = function (a) {
        F.prototype.cloneProtected.call(this, a);
        a.ll = this.ll;
        a.$o = this.$o;
        a.so = this.so;
        a.Sh = this.Sh;
        a.Th = this.Th;
        a.Jm = this.Jm;
        a.Km = this.Km;
        a.Im = this.Im;
        a.ug = this.ug;
        a.dp = this.dp;
        a.jh = this.jh;
        a.Zq = this.Zq
    };
    P.prototype.clear = P.prototype.clear = function () {
        F.prototype.clear.call(this);
        this.df = [];
        this.$c.clear();
        this.Pi.clear()
    };
    g = P.prototype;
    g.toString = function (a) {
        void 0 === a && (a = 0);
        if (2 <= a)return this.mB();
        var b = ("" !== this.name ? this.name : "") + " GraphLinksModel";
        if (0 < a) {
            b += "\n node data:";
            a = this.cg;
            for (var c = w.Ya(a), d = 0, d = 0; d < c; d++)var e = w.Da(a, d), b = b + (" " + this.ub(e) + ":" + Qf(e));
            b += "\n link data:";
            a = this.Mg;
            c = w.Ya(a);
            for (d = 0; d < c; d++)e = w.Da(a, d), b += " " + this.Sl(e) + "--\x3e" + this.Tl(e)
        }
        return b
    };
    g.bo = function () {
        var a = F.prototype.bo.call(this), b = "";
        "category" !== this.hu && "string" === typeof this.hu && (b += ',\n  "linkCategoryProperty": ' + this.quote(this.hu));
        "" !== this.wj && "string" === typeof this.wj && (b += ',\n  "linkKeyProperty": ' + this.quote(this.wj));
        "from" !== this.In && "string" === typeof this.In && (b += ',\n  "linkFromKeyProperty": ' + this.quote(this.In));
        "to" !== this.Jn && "string" === typeof this.Jn && (b += ',\n  "linkToKeyProperty": ' + this.quote(this.Jn));
        "" !== this.iu && "string" === typeof this.iu && (b += ',\n  "linkFromPortIdProperty": ' +
            this.quote(this.iu));
        "" !== this.ku && "string" === typeof this.ku && (b += ',\n  "linkToPortIdProperty": ' + this.quote(this.ku));
        "" !== this.ju && "string" === typeof this.ju && (b += ',\n  "linkLabelKeysProperty": ' + this.quote(this.ju));
        "isGroup" !== this.su && "string" === typeof this.su && (b += ',\n  "nodeIsGroupProperty": ' + this.quote(this.su));
        "group" !== this.ru && "string" === typeof this.ru && (b += ',\n  "nodeGroupKeyProperty": ' + this.quote(this.ru));
        return a + b
    };
    g.wu = function (a) {
        F.prototype.wu.call(this, a);
        a.linkKeyProperty && (this.wj = a.linkKeyProperty);
        a.linkFromKeyProperty && (this.In = a.linkFromKeyProperty);
        a.linkToKeyProperty && (this.Jn = a.linkToKeyProperty);
        a.linkFromPortIdProperty && (this.iu = a.linkFromPortIdProperty);
        a.linkToPortIdProperty && (this.ku = a.linkToPortIdProperty);
        a.linkCategoryProperty && (this.hu = a.linkCategoryProperty);
        a.linkLabelKeysProperty && (this.ju = a.linkLabelKeysProperty);
        a.nodeIsGroupProperty && (this.su = a.nodeIsGroupProperty);
        a.nodeGroupKeyProperty &&
        (this.ru = a.nodeGroupKeyProperty)
    };
    g.zB = function () {
        var a = F.prototype.zB.call(this), b = ',\n  "linkDataArray": ' + Wf(this, this.Mg, !0);
        return a + b
    };
    g.RA = function (a) {
        F.prototype.RA.call(this, a);
        a = a.linkDataArray;
        w.isArray(a) && (this.zu(a), this.Mg = a)
    };
    g.AB = function (a) {
        if (!(a instanceof P))return w.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"), "";
        "" === this.wj && w.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");
        var b = F.prototype.AB.call(this, a);
        Yf(this, a, "linkKeyProperty");
        Yf(this, a, "linkFromKeyProperty");
        Yf(this, a, "linkToKeyProperty");
        Yf(this, a, "linkLabelKeysProperty");
        Yf(this, a, "nodeIsGroupProperty");
        Yf(this, a, "nodeGroupKeyProperty");
        for (var c = new J, d = new J, e = (new J).Hc(this.$c.pF),
                 f = new ka, h = a.Mg, k = 0; k < h.length; k++) {
            var l = h[k], m = a.Rf(l);
            if (void 0 !== m) {
                e.remove(m);
                var n = this.Up(m);
                null === n ? (c.add(m), d.add(l)) : Xf(this, n, l, f) || d.add(l)
            } else this.CA(l), m = this.Rf(l), c.add(m), d.add(l)
        }
        a = b;
        0 < c.count && (a += this.wy + Wf(this, c.dc(), !0));
        0 < d.count && (a += this.HB + Wf(this, d.dc(), !0));
        0 < e.count && (a += this.yy + Wf(this, e.dc(), !0));
        return a
    };
    g.wy = ',\n  "insertedLinkKeys": ';
    g.HB = ',\n  "modifiedLinkData": ';
    g.yy = ',\n  "removedLinkKeys": ';
    g.yB = function (a, b) {
        "" === this.wj && w.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");
        var c = F.prototype.yB.call(this, a, b), d = this, e = new J, f = new J, h = new J;
        a.Pf.each(function (a) {
            a.ba === d && ("linkDataArray" === a.nf ? a.xc === Of ? e.add(a.newValue) : a.xc === Pf && h.add(a.oldValue) : d.th(a.object) && f.add(a.object))
        });
        var k = new J;
        e.each(function (a) {
            k.add(d.Rf(a));
            b || f.add(a)
        });
        var l = new J;
        h.each(function (a) {
            l.add(d.Rf(a));
            b && f.add(a)
        });
        0 < k.count && (c += (b ? this.yy : this.wy) +
            Wf(this, k.dc(), !0));
        0 < f.count && (c += this.HB + Wf(this, f.dc(), !0));
        0 < l.count && (c += (b ? this.wy : this.yy) + Wf(this, l.dc(), !0));
        return c
    };
    g.QA = function (a) {
        F.prototype.QA.call(this, a);
        var b = a.insertedLinkKeys;
        if (w.isArray(b))for (var c = w.Ya(b), d = 0; d < c; d++) {
            var e = w.Da(b, d), f = this.Up(e);
            null === f && (f = this.Uw({}), this.cG(f, e), this.vt(f))
        }
        e = a.modifiedLinkData;
        if (w.isArray(e))for (c = w.Ya(e), d = 0; d < c; d++)if (b = w.Da(e, d), f = this.Rf(b), f = this.Up(f), null !== f)for (var h in b)"__gohashid" !== h && h !== this.wj && this.setDataProperty(f, h, b[h]);
        a = a.removedLinkKeys;
        if (w.isArray(a))for (c = w.Ya(a), d = 0; d < c; d++)e = w.Da(a, d), f = this.Up(e), null !== f && this.Wx(f)
    };
    g.ln = function (a, b) {
        if (a.xc === Of) {
            var c = a.yj;
            if ("linkDataArray" === a.nf) {
                var d = a.newValue;
                if (w.Qa(d) && "number" === typeof c) {
                    var e = this.Rf(d);
                    b ? (this.Pi.remove(d), w.Da(this.df, c) === d && w.Fg(this.df, c), void 0 !== e && this.$c.remove(e)) : (this.Pi.add(d), w.Da(this.df, c) !== d && w.qh(this.df, c, d), void 0 !== e && this.$c.add(e, d))
                }
                return
            }
            if ("linkLabelKeys" === a.nf) {
                d = this.Ak(a.object);
                w.isArray(d) && "number" === typeof c && (b ? (c = w.El(d, a.newValue), 0 <= c && w.Fg(d, c)) : 0 > w.El(d, a.newValue) && w.qh(d, c, a.newValue));
                return
            }
        } else if (a.xc ===
            Pf) {
            c = a.zj;
            if ("linkDataArray" === a.nf) {
                d = a.oldValue;
                w.Qa(d) && "number" === typeof c && (e = this.Rf(d), b ? (this.Pi.add(d), w.Da(this.df, c) !== d && w.qh(this.df, c, d), void 0 !== e && this.$c.add(e, d)) : (this.Pi.remove(d), w.Da(this.df, c) === d && w.Fg(this.df, c), void 0 !== e && this.$c.remove(e)));
                return
            }
            if ("linkLabelKeys" === a.nf) {
                d = this.Ak(a.object);
                w.isArray(d) && "number" === typeof c && (b ? 0 > w.El(d, a.newValue) && w.qh(d, c, a.newValue) : (c = w.El(d, a.newValue), 0 <= c && w.Fg(d, c)));
                return
            }
        }
        F.prototype.ln.call(this, a, b)
    };
    w.defineProperty(P, {Oz: "archetypeNodeData"}, function () {
        return this.pm
    }, function (a) {
        var b = this.pm;
        b !== a && (null !== a && w.G(a, Object, P, "archetypeNodeData"), this.pm = a, this.h("archetypeNodeData", b, a))
    });
    P.prototype.Kn = function (a) {
        if (void 0 !== a) {
            var b = this.pm;
            if (null !== b) {
                var c = this.te(a);
                null === c && (c = this.copyNodeData(b), w.Ma(c, this.ek, a), this.Al(c))
            }
            return a
        }
    };
    w.defineProperty(P, {In: "linkFromKeyProperty"}, function () {
        return this.Sh
    }, function (a) {
        var b = this.Sh;
        b !== a && (sg(a, P, "linkFromKeyProperty"), this.Sh = a, this.h("linkFromKeyProperty", b, a))
    });
    P.prototype.getFromKeyForLinkData = P.prototype.Sl = function (a) {
        if (null !== a) {
            var b = this.Sh;
            if ("" !== b && (b = w.rb(a, b), void 0 !== b)) {
                if (tg(b))return b;
                w.k("FromKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    P.prototype.setFromKeyForLinkData = P.prototype.$A = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || tg(b) || w.wd(b, "number or string", P, "setFromKeyForLinkData:key");
        if (null !== a) {
            var c = this.Sh;
            if ("" !== c)if (b = this.Kn(b), this.th(a)) {
                var d = w.rb(a, c);
                d !== b && (Ng(this, d, a), w.Ma(a, c, b), null === this.te(b) && Mg(this, b, a), rg(this, "linkFromKey", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    w.defineProperty(P, {Jn: "linkToKeyProperty"}, function () {
        return this.Th
    }, function (a) {
        var b = this.Th;
        b !== a && (sg(a, P, "linkToKeyProperty"), this.Th = a, this.h("linkToKeyProperty", b, a))
    });
    P.prototype.getToKeyForLinkData = P.prototype.Tl = function (a) {
        if (null !== a) {
            var b = this.Th;
            if ("" !== b && (b = w.rb(a, b), void 0 !== b)) {
                if (tg(b))return b;
                w.k("ToKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    P.prototype.setToKeyForLinkData = P.prototype.fB = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || tg(b) || w.wd(b, "number or string", P, "setToKeyForLinkData:key");
        if (null !== a) {
            var c = this.Th;
            if ("" !== c)if (b = this.Kn(b), this.th(a)) {
                var d = w.rb(a, c);
                d !== b && (Ng(this, d, a), w.Ma(a, c, b), null === this.te(b) && Mg(this, b, a), rg(this, "linkToKey", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    w.defineProperty(P, {iu: "linkFromPortIdProperty"}, function () {
        return this.Jm
    }, function (a) {
        var b = this.Jm;
        b !== a && (sg(a, P, "linkFromPortIdProperty"), a !== this.In && a !== this.Jn || w.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.Jm = a, this.h("linkFromPortIdProperty", b, a))
    });
    P.prototype.getFromPortIdForLinkData = P.prototype.UH = function (a) {
        if (null === a)return "";
        var b = this.Jm;
        if ("" === b)return "";
        a = w.rb(a, b);
        return void 0 === a ? "" : a
    };
    P.prototype.setFromPortIdForLinkData = P.prototype.aB = function (a, b) {
        w.j(b, "string", P, "setFromPortIdForLinkData:portname");
        if (null !== a) {
            var c = this.Jm;
            if ("" !== c)if (this.th(a)) {
                var d = w.rb(a, c);
                void 0 === d && (d = "");
                d !== b && (w.Ma(a, c, b), rg(this, "linkFromPortId", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    w.defineProperty(P, {ku: "linkToPortIdProperty"}, function () {
        return this.Km
    }, function (a) {
        var b = this.Km;
        b !== a && (sg(a, P, "linkToPortIdProperty"), a !== this.In && a !== this.Jn || w.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.Km = a, this.h("linkToPortIdProperty", b, a))
    });
    P.prototype.getToPortIdForLinkData = P.prototype.YH = function (a) {
        if (null === a)return "";
        var b = this.Km;
        if ("" === b)return "";
        a = w.rb(a, b);
        return void 0 === a ? "" : a
    };
    P.prototype.setToPortIdForLinkData = P.prototype.gB = function (a, b) {
        w.j(b, "string", P, "setToPortIdForLinkData:portname");
        if (null !== a) {
            var c = this.Km;
            if ("" !== c)if (this.th(a)) {
                var d = w.rb(a, c);
                void 0 === d && (d = "");
                d !== b && (w.Ma(a, c, b), rg(this, "linkToPortId", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    w.defineProperty(P, {ju: "linkLabelKeysProperty"}, function () {
        return this.ug
    }, function (a) {
        var b = this.ug;
        b !== a && (sg(a, P, "linkLabelKeysProperty"), this.ug = a, this.h("linkLabelKeysProperty", b, a))
    });
    P.prototype.getLabelKeysForLinkData = P.prototype.Ak = function (a) {
        if (null === a)return w.fo;
        var b = this.ug;
        if ("" === b)return w.fo;
        a = w.rb(a, b);
        return void 0 === a ? w.fo : a
    };
    P.prototype.setLabelKeysForLinkData = P.prototype.dG = function (a, b) {
        w.Qz(b, P, "setLabelKeysForLinkData:arr");
        if (null !== a) {
            var c = this.ug;
            if ("" !== c)if (this.th(a)) {
                var d = w.rb(a, c);
                void 0 === d && (d = w.fo);
                if (d !== b) {
                    for (var e = w.Ya(d), f = 0; f < e; f++) {
                        var h = w.Da(d, f);
                        Ng(this, h, a)
                    }
                    w.Ma(a, c, b);
                    e = w.Ya(b);
                    for (f = 0; f < e; f++)h = w.Da(b, f), null === this.te(h) && Mg(this, h, a);
                    rg(this, "linkLabelKeys", Mf, c, a, d, b);
                    "string" === typeof c && this.Hb(a, c)
                }
            } else w.Ma(a, c, b)
        }
    };
    P.prototype.addLabelKeyForLinkData = P.prototype.cE = function (a, b) {
        if (null !== b && void 0 !== b && (tg(b) || w.wd(b, "number or string", P, "addLabelKeyForLinkData:key"), null !== a)) {
            var c = this.ug;
            if ("" !== c) {
                var d = w.rb(a, c);
                if (void 0 === d)c = [], c.push(b), this.dG(a, c); else if (w.isArray(d)) {
                    var e = w.El(d, b);
                    0 <= e || (e = w.Ya(d), w.qh(d, Infinity, b), this.th(a) && (null === this.te(b) && Mg(this, b, a), rg(this, "linkLabelKeys", Of, c, a, null, b, null, e)))
                } else w.k(c + " property is not an Array; cannot addLabelKeyForLinkData: " + a)
            }
        }
    };
    P.prototype.removeLabelKeyForLinkData = P.prototype.gJ = function (a, b) {
        if (null !== b && void 0 !== b && (tg(b) || w.wd(b, "number or string", P, "removeLabelKeyForLinkData:key"), null !== a)) {
            var c = this.ug;
            if ("" !== c) {
                var d = w.rb(a, c);
                if (w.isArray(d)) {
                    var e = w.El(d, b);
                    0 > e || (w.Fg(d, e), this.th(a) && (Ng(this, b, a), rg(this, "linkLabelKeys", Pf, c, a, b, null, e, null)))
                } else void 0 !== d && w.k(c + " property is not an Array; cannot removeLabelKeyforLinkData: " + a)
            }
        }
    };
    w.defineProperty(P, {Mg: "linkDataArray"}, function () {
        return this.df
    }, function (a) {
        var b = this.df;
        if (b !== a) {
            w.Qz(a, P, "linkDataArray");
            this.$c.clear();
            for (var c = w.Ya(a), d = 0; d < c; d++) {
                var e = w.Da(a, d);
                if (!w.Qa(e)) {
                    w.k("GraphLinksModel.linkDataArray must only contain Objects, not: " + e);
                    return
                }
                w.Yp(e)
            }
            this.df = a;
            if ("" !== this.wj) {
                for (var f = new I(Object), d = 0; d < c; d++) {
                    var e = w.Da(a, d), h = this.Rf(e);
                    void 0 === h ? f.add(e) : null !== this.$c.ka(h) ? f.add(e) : this.$c.add(h, e)
                }
                for (d = f.i; d.next();)e = d.value, this.CA(e), f = this.Rf(e),
                void 0 !== f && this.$c.add(f, e)
            }
            f = new J(Object);
            for (d = 0; d < c; d++)e = w.Da(a, d), f.add(e);
            this.Pi = f;
            rg(this, "linkDataArray", Mf, "linkDataArray", this, b, a);
            for (d = 0; d < c; d++)e = w.Da(a, d), Sg(this, e)
        }
    });
    w.defineProperty(P, {wj: "linkKeyProperty"}, function () {
        return this.ll
    }, function (a) {
        var b = this.ll;
        if (b !== a) {
            sg(a, P, "linkKeyProperty");
            this.ll = a;
            this.$c.clear();
            for (var c = w.Ya(this.Mg), d = 0; d < c; d++) {
                var e = w.Da(this.Mg, d), f = this.Rf(e);
                void 0 !== f && this.$c.add(f, e)
            }
            this.h("linkKeyProperty", b, a)
        }
    });
    P.prototype.getKeyForLinkData = P.prototype.Rf = function (a) {
        if (null !== a) {
            var b = this.ll;
            if ("" !== b && (b = w.rb(a, b), void 0 !== b)) {
                if (tg(b))return b;
                w.k("Key value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    P.prototype.setKeyForLinkData = P.prototype.cG = function (a, b) {
        void 0 !== b && null !== b && tg(b) || w.wd(b, "number or string", P, "setKeyForLinkData:key");
        if (null !== a) {
            var c = this.ll;
            if ("" !== c)if (this.th(a)) {
                var d = w.rb(a, c);
                d !== b && null === this.Up(b) && (w.Ma(a, c, b), this.$c.remove(d), this.$c.add(b, a), rg(this, "linkKey", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    w.defineProperty(P, {dL: "makeUniqueLinkKeyFunction"}, function () {
        return this.$o
    }, function (a) {
        var b = this.$o;
        b !== a && (null !== a && w.j(a, "function", P, "makeUniqueLinkKeyFunction"), this.$o = a, this.h("makeUniqueLinkKeyFunction", b, a))
    });
    P.prototype.findLinkDataForKey = P.prototype.Up = function (a) {
        null === a && w.k("GraphLinksModel.findLinkDataForKey:key must not be null");
        return void 0 !== a && tg(a) ? this.$c.ka(a) : null
    };
    P.prototype.makeLinkDataKeyUnique = P.prototype.CA = function (a) {
        if (null !== a) {
            var b = this.ll;
            if ("" !== b) {
                var c = this.Rf(a);
                if (void 0 === c || this.$c.contains(c)) {
                    var d = this.$o;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.$c.contains(c))) {
                        w.Ma(a, b, c);
                        return
                    }
                    if ("string" === typeof c) {
                        for (d = 2; this.$c.contains(c + d);)d++;
                        w.Ma(a, b, c + d)
                    } else if (void 0 === c || "number" === typeof c) {
                        for (d = -this.$c.count - 1; this.$c.contains(d);)d--;
                        w.Ma(a, b, d)
                    } else w.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: " +
                        c)
                }
            }
        }
    };
    P.prototype.containsLinkData = P.prototype.th = function (a) {
        return null === a ? !1 : this.Pi.contains(a)
    };
    P.prototype.addLinkData = P.prototype.vt = function (a) {
        null !== a && (w.Yp(a), this.th(a) || Tg(this, a, !0))
    };
    function Tg(a, b, c) {
        if ("" !== a.wj) {
            var d = a.Rf(b);
            if (void 0 !== d && a.$c.ka(d) === b)return;
            a.CA(b);
            d = a.Rf(b);
            if (void 0 === d) {
                w.k("GraphLinksModel.makeLinkDataKeyUnique failed on " + b + ". Data not added to model.");
                return
            }
            a.$c.add(d, b)
        }
        a.Pi.add(b);
        d = null;
        c && (d = w.Ya(a.df), w.qh(a.df, d, b));
        rg(a, "linkDataArray", Of, "linkDataArray", a, null, b, null, d);
        Sg(a, b)
    }

    P.prototype.addLinkDataCollection = function (a) {
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++)this.vt(w.Da(a, c)); else for (a = a.i; a.next();)this.vt(a.value)
    };
    P.prototype.removeLinkData = P.prototype.Wx = function (a) {
        null !== a && Ug(this, a, !0)
    };
    function Ug(a, b, c) {
        a.Pi.remove(b);
        var d = a.Rf(b);
        void 0 !== d && a.$c.remove(d);
        d = null;
        if (c) {
            d = w.El(a.df, b);
            if (0 > d)return;
            w.Fg(a.df, d)
        }
        rg(a, "linkDataArray", Pf, "linkDataArray", a, b, null, d, null);
        c = a.Sl(b);
        Ng(a, c, b);
        c = a.Tl(b);
        Ng(a, c, b);
        d = a.Ak(b);
        if (w.isArray(d))for (var e = w.Ya(d), f = 0; f < e; f++)c = w.Da(d, f), Ng(a, c, b)
    }

    P.prototype.removeLinkDataCollection = function (a) {
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++)this.Wx(w.Da(a, c)); else for (a = a.i; a.next();)this.Wx(a.value)
    };
    function Sg(a, b) {
        var c = a.Sl(b), c = a.Kn(c);
        null === a.te(c) && Mg(a, c, b);
        c = a.Tl(b);
        c = a.Kn(c);
        null === a.te(c) && Mg(a, c, b);
        var d = a.Ak(b);
        if (w.isArray(d))for (var e = w.Ya(d), f = 0; f < e; f++)c = w.Da(d, f), null === a.te(c) && Mg(a, c, b)
    }

    w.defineProperty(P, {wK: "copyLinkDataFunction"}, function () {
        return this.so
    }, function (a) {
        var b = this.so;
        b !== a && (null !== a && w.j(a, "function", P, "copyLinkDataFunction"), this.so = a, this.h("copyLinkDataFunction", b, a))
    });
    P.prototype.copyLinkData = P.prototype.Uw = function (a) {
        if (null === a)return null;
        var b = null, b = this.so, b = null !== b ? b(a, this) : Og(this, a, !0);
        w.Qa(b) && (w.lc(b), "" !== this.Sh && w.Ma(b, this.Sh, void 0), "" !== this.Th && w.Ma(b, this.Th, void 0), "" !== this.ug && w.Ma(b, this.ug, []));
        return b
    };
    w.defineProperty(P, {su: "nodeIsGroupProperty"}, function () {
        return this.dp
    }, function (a) {
        var b = this.dp;
        b !== a && (sg(a, P, "nodeIsGroupProperty"), this.dp = a, this.h("nodeIsGroupProperty", b, a))
    });
    P.prototype.isGroupForNodeData = P.prototype.wA = function (a) {
        if (null === a)return !1;
        var b = this.dp;
        return "" === b ? !1 : w.rb(a, b) ? !0 : !1
    };
    w.defineProperty(P, {ru: "nodeGroupKeyProperty"}, function () {
        return this.jh
    }, function (a) {
        var b = this.jh;
        b !== a && (sg(a, P, "nodeGroupKeyProperty"), this.jh = a, this.h("nodeGroupKeyProperty", b, a))
    });
    w.defineProperty(P, {pn: "copiesGroupKeyOfNodeData"}, function () {
        return this.Zq
    }, function (a) {
        this.Zq !== a && (w.j(a, "boolean", P, "copiesGroupKeyOfNodeData"), this.Zq = a)
    });
    P.prototype.getGroupKeyForNodeData = P.prototype.yn = function (a) {
        if (null !== a) {
            var b = this.jh;
            if ("" !== b && (b = w.rb(a, b), void 0 !== b)) {
                if (tg(b))return b;
                w.k("GroupKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    P.prototype.setGroupKeyForNodeData = P.prototype.bB = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || tg(b) || w.wd(b, "number or string", P, "setGroupKeyForNodeData:key");
        if (null !== a) {
            var c = this.jh;
            if ("" !== c)if (this.Ge(a)) {
                var d = w.rb(a, c);
                d !== b && (Ng(this, d, a), w.Ma(a, c, b), null === this.te(b) && Mg(this, b, a), rg(this, "nodeGroupKey", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    P.prototype.copyNodeData = function (a) {
        if (null === a)return null;
        a = F.prototype.copyNodeData.call(this, a);
        this.pn || "" === this.jh || void 0 === w.rb(a, this.jh) || w.Ma(a, this.jh, void 0);
        return a
    };
    P.prototype.setDataProperty = function (a, b, c) {
        if (this.Ge(a))if (b === this.bm)this.gy(a, c); else {
            if (b === this.Rn) {
                this.by(a, c);
                return
            }
            if (b === this.ru) {
                this.bB(a, c);
                return
            }
            b === this.su && w.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: " + b)
        } else if (this.th(a)) {
            if (b === this.In) {
                this.$A(a, c);
                return
            }
            if (b === this.Jn) {
                this.fB(a, c);
                return
            }
            if (b === this.iu) {
                this.aB(a, c);
                return
            }
            if (b === this.ku) {
                this.gB(a, c);
                return
            }
            if (b === this.wj) {
                this.cG(a, c);
                return
            }
            if (b === this.hu) {
                this.bG(a, c);
                return
            }
            if (b ===
                this.ju) {
                this.dG(a, c);
                return
            }
        } else!Rg && a instanceof G && (Rg = !0, w.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), w.trace("  Is that really your intent?"));
        var d = w.rb(a, b);
        d !== c && (w.Ma(a, b, c), this.PA(a, b, d, c))
    };
    g = P.prototype;
    g.yu = function (a, b) {
        F.prototype.yu.call(this, a, b);
        for (var c = this.Ec.i; c.next();)this.UA(c.value, a, b);
        for (c = this.Pi.i; c.next();) {
            var d = c.value, e = a, f = b;
            if (this.Sl(d) === e) {
                var h = this.Sh;
                w.Ma(d, h, f);
                rg(this, "linkFromKey", Mf, h, d, e, f);
                "string" === typeof h && this.Hb(d, h)
            }
            this.Tl(d) === e && (h = this.Th, w.Ma(d, h, f), rg(this, "linkToKey", Mf, h, d, e, f), "string" === typeof h && this.Hb(d, h));
            h = this.Ak(d);
            if (w.isArray(h))for (var k = w.Ya(h), l = this.ug, m = 0; m < k; m++)w.Da(h, m) === e && (w.jE(h, m, f), rg(this, "linkLabelKeys", Of, l, d, e, f, m,
                m))
        }
    };
    g.UA = function (a, b, c) {
        if (this.yn(a) === b) {
            var d = this.jh;
            w.Ma(a, d, c);
            rg(this, "nodeGroupKey", Mf, d, a, b, c);
            "string" === typeof d && this.Hb(a, d)
        }
    };
    g.tB = function () {
        F.prototype.tB.call(this);
        for (var a = this.Mg, b = w.Ya(a), c = 0; c < b; c++) {
            var d = w.Da(a, c);
            Sg(this, d)
        }
    };
    g.mq = function (a) {
        F.prototype.mq.call(this, a);
        a = this.ub(a);
        var b = wg(this, a);
        if (null !== b) {
            for (var c = new I(Object), b = b.i; b.next();) {
                var d = b.value;
                if (this.Ge(d)) {
                    if (this.yn(d) === a) {
                        var e = this.jh;
                        rg(this, "nodeGroupKey", Mf, e, d, a, a);
                        "string" === typeof e && this.Hb(d, e);
                        c.add(d)
                    }
                } else if (this.Sl(d) === a && (e = this.Sh, rg(this, "linkFromKey", Mf, e, d, a, a), "string" === typeof e && this.Hb(d, e), c.add(d)), this.Tl(d) === a && (e = this.Th, rg(this, "linkToKey", Mf, e, d, a, a), "string" === typeof e && this.Hb(d, e), c.add(d)), e = this.Ak(d), w.isArray(e))for (var f =
                    w.Ya(e), h = this.ug, k = 0; k < f; k++)w.Da(e, k) === a && (rg(this, "linkLabelKeys", Of, h, d, a, a, k, k), c.add(d))
            }
            for (c = c.i; c.next();)Ng(this, a, c.value)
        }
    };
    g.lq = function (a) {
        F.prototype.lq.call(this, a);
        var b = this.yn(a);
        null === this.te(b) && Mg(this, b, a)
    };
    g.Nu = function (a) {
        F.prototype.Nu.call(this, a);
        var b = this.yn(a);
        Ng(this, b, a)
    };
    w.defineProperty(P, {hu: "linkCategoryProperty"}, function () {
        return this.Im
    }, function (a) {
        var b = this.Im;
        b !== a && (sg(a, P, "linkCategoryProperty"), this.Im = a, this.h("linkCategoryProperty", b, a))
    });
    P.prototype.getCategoryForLinkData = P.prototype.mx = function (a) {
        if (null === a)return "";
        var b = this.Im;
        if ("" === b)return "";
        b = w.rb(a, b);
        if (void 0 === b)return "";
        if ("string" === typeof b)return b;
        w.k("getCategoryForLinkData found a non-string category for " + a + ": " + b);
        return ""
    };
    P.prototype.setCategoryForLinkData = P.prototype.bG = function (a, b) {
        w.j(b, "string", P, "setCategoryForLinkData:cat");
        if (null !== a) {
            var c = this.Im;
            if ("" !== c)if (this.th(a)) {
                var d = w.rb(a, c);
                void 0 === d && (d = "");
                d !== b && (w.Ma(a, c, b), rg(this, "linkCategory", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    function Zf(a) {
        1 < arguments.length && w.k("TreeModel constructor can only take one optional argument, the Array of node data.");
        F.call(this);
        this.kh = "parent";
        this.$q = !1;
        this.Rm = "parentLinkCategory";
        void 0 !== a && (this.cg = a)
    }

    w.La(Zf, F);
    w.fa("TreeModel", Zf);
    Zf.prototype.cloneProtected = function (a) {
        F.prototype.cloneProtected.call(this, a);
        a.kh = this.kh;
        a.$q = this.$q;
        a.Rm = this.Rm
    };
    Zf.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        if (2 <= a)return this.mB();
        var b = ("" !== this.name ? this.name : "") + " TreeModel";
        if (0 < a) {
            b += "\n node data:";
            a = this.cg;
            for (var c = w.Ya(a), d = 0; d < c; d++)var e = w.Da(a, d), b = b + (" " + this.ub(e) + ":" + Qf(e))
        }
        return b
    };
    Zf.prototype.bo = function () {
        var a = F.prototype.bo.call(this), b = "";
        "parent" !== this.tu && "string" === typeof this.tu && (b += ',\n  "nodeParentKeyProperty": ' + this.quote(this.tu));
        return a + b
    };
    Zf.prototype.wu = function (a) {
        F.prototype.wu.call(this, a);
        a.nodeParentKeyProperty && (this.tu = a.nodeParentKeyProperty)
    };
    Zf.prototype.Kn = function (a) {
        return a
    };
    w.defineProperty(Zf, {tu: "nodeParentKeyProperty"}, function () {
        return this.kh
    }, function (a) {
        var b = this.kh;
        b !== a && (sg(a, Zf, "nodeParentKeyProperty"), this.kh = a, this.h("nodeParentKeyProperty", b, a))
    });
    w.defineProperty(Zf, {qn: "copiesParentKeyOfNodeData"}, function () {
        return this.$q
    }, function (a) {
        this.$q !== a && (w.j(a, "boolean", Zf, "copiesParentKeyOfNodeData"), this.$q = a)
    });
    Zf.prototype.getParentKeyForNodeData = Zf.prototype.An = function (a) {
        if (null !== a) {
            var b = this.kh;
            if ("" !== b && (b = w.rb(a, b), void 0 !== b)) {
                if (tg(b))return b;
                w.k("ParentKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Zf.prototype.setParentKeyForNodeData = Zf.prototype.oi = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || tg(b) || w.wd(b, "number or string", Zf, "setParentKeyForNodeData:key");
        if (null !== a) {
            var c = this.kh;
            if ("" !== c)if (b = this.Kn(b), this.Ge(a)) {
                var d = w.rb(a, c);
                d !== b && (Ng(this, d, a), w.Ma(a, c, b), null === this.te(b) && Mg(this, b, a), rg(this, "nodeParentKey", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    w.defineProperty(Zf, {vL: "parentLinkCategoryProperty"}, function () {
        return this.Rm
    }, function (a) {
        var b = this.Rm;
        b !== a && (sg(a, Zf, "parentLinkCategoryProperty"), this.Rm = a, this.h("parentLinkCategoryProperty", b, a))
    });
    Zf.prototype.getParentLinkCategoryForNodeData = Zf.prototype.WH = function (a) {
        if (null === a)return "";
        var b = this.Rm;
        if ("" === b)return "";
        b = w.rb(a, b);
        if (void 0 === b)return "";
        if ("string" === typeof b)return b;
        w.k("getParentLinkCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    Zf.prototype.setParentLinkCategoryForNodeData = Zf.prototype.wJ = function (a, b) {
        w.j(b, "string", Zf, "setParentLinkCategoryForNodeData:cat");
        if (null !== a) {
            var c = this.Rm;
            if ("" !== c)if (this.Ge(a)) {
                var d = w.rb(a, c);
                void 0 === d && (d = "");
                d !== b && (w.Ma(a, c, b), rg(this, "parentLinkCategory", Mf, c, a, d, b), "string" === typeof c && this.Hb(a, c))
            } else w.Ma(a, c, b)
        }
    };
    Zf.prototype.copyNodeData = function (a) {
        if (null === a)return null;
        a = F.prototype.copyNodeData.call(this, a);
        this.qn || "" === this.kh || void 0 === w.rb(a, this.kh) || w.Ma(a, this.kh, void 0);
        return a
    };
    Zf.prototype.setDataProperty = function (a, b, c) {
        if (this.Ge(a))if (b === this.bm)this.gy(a, c); else {
            if (b === this.Rn) {
                this.by(a, c);
                return
            }
            if (b === this.tu) {
                this.oi(a, c);
                return
            }
        } else!Rg && a instanceof G && (Rg = !0, w.trace('TreeModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), w.trace("  Is that really your intent?"));
        var d = w.rb(a, b);
        d !== c && (w.Ma(a, b, c), this.PA(a, b, d, c))
    };
    g = Zf.prototype;
    g.yu = function (a, b) {
        F.prototype.yu.call(this, a, b);
        for (var c = this.Ec.i; c.next();)this.UA(c.value, a, b)
    };
    g.UA = function (a, b, c) {
        if (this.An(a) === b) {
            var d = this.kh;
            w.Ma(a, d, c);
            rg(this, "nodeParentKey", Mf, d, a, b, c);
            "string" === typeof d && this.Hb(a, d)
        }
    };
    g.mq = function (a) {
        F.prototype.mq.call(this, a);
        a = this.ub(a);
        var b = wg(this, a);
        if (null !== b) {
            for (var c = new I(Object), b = b.i; b.next();) {
                var d = b.value;
                if (this.Ge(d) && this.An(d) === a) {
                    var e = this.kh;
                    rg(this, "nodeParentKey", Mf, e, d, a, a);
                    "string" === typeof e && this.Hb(d, e);
                    c.add(d)
                }
            }
            for (c = c.i; c.next();)Ng(this, a, c.value)
        }
    };
    g.lq = function (a) {
        F.prototype.lq.call(this, a);
        var b = this.An(a), b = this.Kn(b);
        null === this.te(b) && Mg(this, b, a)
    };
    g.Nu = function (a) {
        F.prototype.Nu.call(this, a);
        var b = this.An(a);
        Ng(this, b, a)
    };
    function Vg(a, b, c) {
        w.lc(this);
        this.Q = !1;
        void 0 === a ? a = "" : w.j(a, "string", Vg, "constructor:targetprop");
        void 0 === b ? b = a : w.j(b, "string", Vg, "constructor:sourceprop");
        void 0 === c ? c = null : null !== c && w.j(c, "function", Vg, "constructor:conv");
        this.DD = -1;
        this.Bg = null;
        this.yp = a;
        this.xp = this.it = 0;
        this.ww = null;
        this.Pr = !1;
        this.op = b;
        this.Wq = c;
        this.hs = Wg;
        this.Pq = null;
        this.Xy = new J
    }

    w.fa("Binding", Vg);
    Vg.prototype.copy = function () {
        var a = new Vg;
        a.yp = this.yp;
        a.it = this.it;
        a.xp = this.xp;
        a.ww = this.ww;
        a.Pr = this.Pr;
        a.op = this.op;
        a.Wq = this.Wq;
        a.hs = this.hs;
        a.Pq = this.Pq;
        return a
    };
    var Wg;
    Vg.OneWay = Wg = w.p(Vg, "OneWay", 1);
    var Xg;
    Vg.TwoWay = Xg = w.p(Vg, "TwoWay", 2);
    Vg.parseEnum = function (a, b) {
        w.j(a, "function", Vg, "parseEnum:ctor");
        w.mb(b, a, Vg, "parseEnum:defval");
        return function (c) {
            c = pa(a, c);
            return null === c ? b : c
        }
    };
    Vg.prototype.fc = function (a) {
        a.De === Vg ? this.mode = a : w.Ej(this, a)
    };
    var Qf;
    Vg.toString = Qf = function (a) {
        var b = a;
        w.Qa(a) && (a.text ? b = a.text : a.name ? b = a.name : void 0 !== a.key ? b = a.key : void 0 !== a.id ? b = a.id : a.constructor === Object && (a.Text ? b = a.Text : a.Name ? b = a.Name : void 0 !== a.Key ? b = a.Key : void 0 !== a.Id ? b = a.Id : void 0 !== a.ID && (b = a.ID)));
        return void 0 === b ? "undefined" : null === b ? "null" : b.toString()
    };
    Vg.prototype.toString = function () {
        return "Binding(" + this.jy + ":" + this.gG + (-1 !== this.hm ? " " + this.hm : "") + " " + this.mode.name + ")"
    };
    Vg.prototype.freeze = function () {
        this.Q = !0;
        return this
    };
    Vg.prototype.Ra = function () {
        this.Q = !1;
        return this
    };
    w.defineProperty(Vg, {hm: null}, function () {
        return this.DD
    }, function (a) {
        this.Q && w.la(this);
        w.j(a, "number", Vg, "targetId");
        this.DD = a
    });
    w.defineProperty(Vg, {jy: "targetProperty"}, function () {
        return this.yp
    }, function (a) {
        this.Q && w.la(this);
        w.j(a, "string", Vg, "targetProperty");
        this.yp = a
    });
    w.defineProperty(Vg, {yq: "sourceName"}, function () {
        return this.ww
    }, function (a) {
        this.Q && w.la(this);
        null !== a && w.j(a, "string", Vg, "sourceName");
        this.ww = a;
        null !== a && (this.Pr = !1)
    });
    w.defineProperty(Vg, {zx: "isToModel"}, function () {
        return this.Pr
    }, function (a) {
        this.Q && w.la(this);
        w.j(a, "boolean", Vg, "isToModel");
        this.Pr = a
    });
    w.defineProperty(Vg, {gG: "sourceProperty"}, function () {
        return this.op
    }, function (a) {
        this.Q && w.la(this);
        w.j(a, "string", Vg, "sourceProperty");
        this.op = a
    });
    w.defineProperty(Vg, {uH: "converter"}, function () {
        return this.Wq
    }, function (a) {
        this.Q && w.la(this);
        null !== a && w.j(a, "function", Vg, "converter");
        this.Wq = a
    });
    w.defineProperty(Vg, {hH: "backConverter"}, function () {
        return this.Pq
    }, function (a) {
        this.Q && w.la(this);
        null !== a && w.j(a, "function", Vg, "backConverter");
        this.Pq = a
    });
    w.defineProperty(Vg, {mode: "mode"}, function () {
        return this.hs
    }, function (a) {
        this.Q && w.la(this);
        w.mb(a, Vg, Vg, "mode");
        this.hs = a
    });
    Vg.prototype.makeTwoWay = Vg.prototype.HI = function (a) {
        void 0 === a && (a = null);
        null !== a && w.j(a, "function", Vg, "makeTwoWay");
        this.mode = Xg;
        this.hH = a;
        return this
    };
    Vg.prototype.ofObject = Vg.prototype.Kx = function (a) {
        void 0 === a && (a = "");
        this.yq = a;
        this.zx = !1;
        return this
    };
    Vg.prototype.ofModel = function () {
        this.yq = null;
        this.zx = !0;
        return this
    };
    function Yg(a, b, c) {
        a = a.yq;
        var d = null;
        return d = null === a || "" === a ? b : "/" === a ? c.U : "." === a ? c : ".." === a ? c.O : b.sd(a)
    }

    Vg.prototype.updateTarget = Vg.prototype.vG = function (a, b, c) {
        var d = this.op;
        if (void 0 === c || "" === d || d === c) {
            c = this.yp;
            var e = this.Wq;
            if (null === e && "" === c)w.trace("Binding error: target property is the empty string: " + this.toString()); else {
                var f = b;
                "" !== d && (f = w.rb(b, d));
                if (void 0 !== f)if (null === e)"" !== c && w.Ma(a, c, f); else try {
                    if ("" !== c) {
                        var h = e(f, a);
                        w.Ma(a, c, h)
                    } else e(f, a)
                } catch (k) {
                }
            }
        }
    };
    Vg.prototype.updateSource = Vg.prototype.ky = function (a, b, c, d) {
        if (this.hs === Xg) {
            var e = this.yp;
            if (void 0 === c || e === c) {
                c = this.op;
                var f = this.Pq, h = a;
                "" !== e && (h = w.rb(a, e));
                if (void 0 !== h && !this.Xy.contains(a))try {
                    this.Xy.add(a);
                    var k = null !== d ? d.g : null, l = null !== k ? k.ba : null;
                    if (null === f)if ("" !== c)null !== l ? l.setDataProperty(b, c, h) : w.Ma(b, c, h); else {
                        if (null !== l && null !== d && 0 <= d.fu && null !== d.O && Array.isArray(d.O.eq)) {
                            var m = d.fu, n = d.O.eq;
                            l.KF(n, m);
                            l.tA(n, m, h)
                        }
                    } else try {
                        if ("" !== c) {
                            var p = f(h, b, l);
                            null !== l ? l.setDataProperty(b,
                                c, p) : w.Ma(b, c, p)
                        } else p = f(h, b, l), void 0 !== p && null !== l && null !== d && 0 <= d.fu && null !== d.O && Array.isArray(d.O.eq) && (m = d.fu, n = d.O.eq, l.KF(n, m), l.tA(n, m, p))
                    } catch (q) {
                    }
                } finally {
                    this.Xy.remove(a)
                }
            }
        }
    };
    function $f() {
        this.BG = (new I(Lf)).freeze();
        this.Qb = "";
        this.IC = !1
    }

    w.fa("Transaction", $f);
    $f.prototype.toString = function (a) {
        var b = "Transaction: " + this.name + " " + this.Pf.count.toString() + (this.$t ? "" : ", incomplete");
        if (void 0 !== a && 0 < a) {
            a = this.Pf.count;
            for (var c = 0; c < a; c++) {
                var d = this.Pf.da(c);
                null !== d && (b += "\n  " + d.toString())
            }
        }
        return b
    };
    $f.prototype.clear = $f.prototype.clear = function () {
        var a = this.Pf;
        a.Ra();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.da(b);
            null !== c && c.clear()
        }
        a.clear();
        a.freeze()
    };
    $f.prototype.canUndo = $f.prototype.canUndo = function () {
        return this.$t
    };
    $f.prototype.undo = $f.prototype.undo = function () {
        if (this.canUndo())for (var a = this.Pf.count - 1; 0 <= a; a--) {
            var b = this.Pf.da(a);
            null !== b && b.undo()
        }
    };
    $f.prototype.canRedo = $f.prototype.canRedo = function () {
        return this.$t
    };
    $f.prototype.redo = $f.prototype.redo = function () {
        if (this.canRedo())for (var a = this.Pf.count, b = 0; b < a; b++) {
            var c = this.Pf.da(b);
            null !== c && c.redo()
        }
    };
    w.u($f, {Pf: "changes"}, function () {
        return this.BG
    });
    w.defineProperty($f, {name: "name"}, function () {
        return this.Qb
    }, function (a) {
        this.Qb = a
    });
    w.defineProperty($f, {$t: "isComplete"}, function () {
        return this.IC
    }, function (a) {
        this.IC = a
    });
    function Rf() {
        this.mz = new J(F);
        this.cf = !1;
        this.FG = (new I($f)).freeze();
        this.dh = -1;
        this.XC = 999;
        this.Ki = !1;
        this.pv = null;
        this.xl = 0;
        this.SB = !1;
        this.ih = (new I("string")).freeze();
        this.cp = new I("number");
        this.Yy = !0;
        this.hz = !1
    }

    w.fa("UndoManager", Rf);
    Rf.prototype.toString = function (a) {
        for (var b = "UndoManager " + this.pj + "<" + this.history.count + "<=" + this.uF, b = b + "[", c = this.zF.count, d = 0; d < c; d++)0 < d && (b += " "), b += this.zF.da(d);
        b += "]";
        if (void 0 !== a && 0 < a)for (c = this.history.count, d = 0; d < c; d++)b += "\n " + this.history.da(d).toString(a - 1);
        return b
    };
    Rf.prototype.clear = Rf.prototype.clear = function () {
        var a = this.history;
        a.Ra();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.da(b);
            null !== c && c.clear()
        }
        a.clear();
        this.dh = -1;
        a.freeze();
        this.Ki = !1;
        this.pv = null;
        this.xl = 0;
        this.ih.Ra();
        this.ih.clear();
        this.ih.freeze();
        this.cp.clear()
    };
    Rf.prototype.addModel = Rf.prototype.$G = function (a) {
        this.mz.add(a)
    };
    Rf.prototype.removeModel = Rf.prototype.hJ = function (a) {
        this.mz.remove(a)
    };
    Rf.prototype.startTransaction = Rf.prototype.Tb = function (a) {
        void 0 === a && (a = "");
        null === a && (a = "");
        if (this.fb)return !1;
        !0 === this.Yy && (this.Yy = !1, this.xl++, this.bd("StartingFirstTransaction", a, this.kj), 0 < this.xl && this.xl--);
        this.isEnabled && (this.ih.Ra(), this.ih.add(a), this.ih.freeze(), null === this.kj ? this.cp.add(0) : this.cp.add(this.kj.Pf.count));
        this.xl++;
        var b = 1 === this.Fh;
        b && this.bd("StartedTransaction", a, this.kj);
        return b
    };
    Rf.prototype.commitTransaction = Rf.prototype.Fd = function (a) {
        void 0 === a && (a = "");
        return Zg(this, !0, a)
    };
    Rf.prototype.rollbackTransaction = Rf.prototype.nq = function () {
        return Zg(this, !1, "")
    };
    function Zg(a, b, c) {
        if (a.fb)return !1;
        a.Rz && 1 > a.Fh && w.trace("Ending transaction without having started a transaction: " + c);
        var d = 1 === a.Fh;
        d && b && a.bd("CommittingTransaction", c, a.kj);
        var e = 0;
        if (0 < a.Fh && (a.xl--, a.isEnabled)) {
            var f = a.ih.count;
            0 < f && ("" === c && (c = a.ih.da(0)), a.ih.Ra(), a.ih.Xc(f - 1), a.ih.freeze());
            f = a.cp.count;
            0 < f && (e = a.cp.da(f - 1), a.cp.Xc(f - 1))
        }
        f = a.kj;
        if (d) {
            if (b) {
                a.hz = !1;
                if (a.isEnabled && null !== f) {
                    b = f;
                    b.$t = !0;
                    b.name = c;
                    d = a.history;
                    d.Ra();
                    for (e = d.count - 1; e > a.pj; e--)f = d.da(e), null !== f && f.clear(),
                        d.Xc(e), a.hz = !0;
                    e = a.uF;
                    0 === e && (e = 1);
                    0 < e && d.count >= e && (f = d.da(0), null !== f && f.clear(), d.Xc(0), a.dh--);
                    d.add(b);
                    a.dh++;
                    d.freeze();
                    f = b
                }
                a.bd("CommittedTransaction", c, f)
            } else {
                a.Ki = !0;
                try {
                    a.isEnabled && null !== f && (f.$t = !0, f.undo())
                } finally {
                    a.bd("RolledBackTransaction", c, f), a.Ki = !1
                }
                null !== f && f.clear()
            }
            a.pv = null;
            return !0
        }
        if (a.isEnabled && !b && null !== f) {
            a = e;
            c = f.Pf;
            for (b = c.count - 1; b >= a; b--)d = c.da(b), null !== d && d.undo(), c.Ra(), c.Xc(b);
            c.freeze()
        }
        return !1
    }

    Rf.prototype.canUndo = Rf.prototype.canUndo = function () {
        if (!this.isEnabled || 0 < this.Fh || this.fb)return !1;
        var a = this.qG;
        return null !== a && a.canUndo() ? !0 : !1
    };
    Rf.prototype.undo = Rf.prototype.undo = function () {
        if (this.canUndo()) {
            var a = this.qG;
            try {
                this.bd("StartingUndo", "Undo", a), this.Ki = !0, this.dh--, a.undo()
            } catch (b) {
                w.trace("undo error: " + b.toString())
            } finally {
                this.Ki = !1, this.bd("FinishedUndo", "Undo", a)
            }
        }
    };
    Rf.prototype.canRedo = Rf.prototype.canRedo = function () {
        if (!this.isEnabled || 0 < this.Fh || this.fb)return !1;
        var a = this.pG;
        return null !== a && a.canRedo() ? !0 : !1
    };
    Rf.prototype.redo = Rf.prototype.redo = function () {
        if (this.canRedo()) {
            var a = this.pG;
            try {
                this.bd("StartingRedo", "Redo", a), this.Ki = !0, this.dh++, a.redo()
            } catch (b) {
                w.trace("redo error: " + b.toString())
            } finally {
                this.Ki = !1, this.bd("FinishedRedo", "Redo", a)
            }
        }
    };
    Rf.prototype.bd = function (a, b, c) {
        void 0 === c && (c = null);
        var d = new Lf;
        d.xc = Nf;
        d.propertyName = a;
        d.object = c;
        d.oldValue = b;
        for (a = this.SI; a.next();)b = a.value, d.ba = b, b.Rw(d)
    };
    Rf.prototype.handleChanged = Rf.prototype.XE = function (a) {
        if (this.isEnabled && !this.fb && !this.skipsEvent(a)) {
            var b = this.kj;
            null === b && (this.pv = b = new $f);
            var c = a.copy(), b = b.Pf;
            b.Ra();
            b.add(c);
            b.freeze();
            this.Rz && 0 >= this.Fh && !this.Yy && (a = a.g, null !== a && !1 === a.Fn || w.trace("Change not within a transaction: " + c.toString()))
        }
    };
    Rf.prototype.skipsEvent = function (a) {
        if (null === a || 0 > a.xc.value)return !0;
        a = a.object;
        if (a instanceof G) {
            if (a = a.layer, null !== a && a.Jc)return !0
        } else if (a instanceof mg && a.Jc)return !0;
        return !1
    };
    w.u(Rf, {SI: "models"}, function () {
        return this.mz.i
    });
    w.defineProperty(Rf, {isEnabled: "isEnabled"}, function () {
        return this.cf
    }, function (a) {
        this.cf = a
    });
    w.u(Rf, {qG: "transactionToUndo"}, function () {
        return 0 <= this.pj && this.pj <= this.history.count - 1 ? this.history.da(this.pj) : null
    });
    w.u(Rf, {pG: "transactionToRedo"}, function () {
        return this.pj < this.history.count - 1 ? this.history.da(this.pj + 1) : null
    });
    w.u(Rf, {fb: "isUndoingRedoing"}, function () {
        return this.Ki
    });
    w.u(Rf, {history: "history"}, function () {
        return this.FG
    });
    w.defineProperty(Rf, {uF: "maxHistoryLength"}, function () {
        return this.XC
    }, function (a) {
        this.XC = a
    });
    w.u(Rf, {pj: "historyIndex"}, function () {
        return this.dh
    });
    w.u(Rf, {kj: "currentTransaction"}, function () {
        return this.pv
    });
    w.u(Rf, {Fh: "transactionLevel"}, function () {
        return this.xl
    });
    w.u(Rf, {jF: "isInTransaction"}, function () {
        return 0 < this.xl
    });
    w.defineProperty(Rf, {Rz: "checksTransactionLevel"}, function () {
        return this.SB
    }, function (a) {
        this.SB = a
    });
    w.u(Rf, {zF: "nestedTransactionNames"}, function () {
        return this.ih
    });
    function og() {
        0 < arguments.length && w.hd(og);
        w.lc(this);
        this.Z = null;
        this.VB = !1;
        this.pC = this.WB = !0;
        this.YB = this.ZB = this.qC = this.$B = !1;
        this.ol = this.LB = null;
        this.XD = 1.05;
        this.mC = 1;
        this.iz = NaN;
        this.TC = null;
        this.Kz = NaN;
        this.Jz = cd;
        this.bj = null
    }

    w.fa("CommandHandler", og);
    var $g = null, ah = "";
    og.prototype.toString = function () {
        return "CommandHandler"
    };
    w.u(og, {g: "diagram"}, function () {
        return this.Z
    });
    og.prototype.Pc = function (a) {
        this.Z = a
    };
    og.prototype.doKeyDown = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R, c = w.Ek ? b.mu : b.control, d = b.shift, e = b.alt, f = b.key;
            !c || "C" !== f && "Insert" !== f ? c && "X" === f || d && "Del" === f ? this.canCutSelection() && this.cutSelection() : c && "V" === f || d && "Insert" === f ? this.canPasteSelection() && this.pasteSelection() : c && "Y" === f || e && d && "Backspace" === f ? this.canRedo() && this.redo() : c && "Z" === f || e && "Backspace" === f ? this.canUndo() && this.undo() : "Del" === f || "Backspace" === f ? this.canDeleteSelection() && this.deleteSelection() : c && "A" === f ? this.canSelectAll() &&
            this.selectAll() : "Esc" === f ? this.canStopCommand() && this.stopCommand() : "Up" === f ? a.ne && (c ? a.scroll("pixel", "up") : a.scroll("line", "up")) : "Down" === f ? a.ne && (c ? a.scroll("pixel", "down") : a.scroll("line", "down")) : "Left" === f ? a.me && (c ? a.scroll("pixel", "left") : a.scroll("line", "left")) : "Right" === f ? a.me && (c ? a.scroll("pixel", "right") : a.scroll("line", "right")) : "PageUp" === f ? d && a.me ? a.scroll("page", "left") : a.ne && a.scroll("page", "up") : "PageDown" === f ? d && a.me ? a.scroll("page", "right") : a.ne && a.scroll("page", "down") : "Home" ===
            f ? c && a.ne ? a.scroll("document", "up") : !c && a.me && a.scroll("document", "left") : "End" === f ? c && a.ne ? a.scroll("document", "down") : !c && a.me && a.scroll("document", "right") : " " === f ? this.canScrollToPart() && this.scrollToPart() : "Subtract" === f ? this.canDecreaseZoom() && this.decreaseZoom() : "Add" === f ? this.canIncreaseZoom() && this.increaseZoom() : c && "0" === f ? this.canResetZoom() && this.resetZoom() : d && "Z" === f ? this.canZoomToFit() && this.zoomToFit() : c && !d && "G" === f ? this.canGroupSelection() && this.groupSelection() : c && d && "G" === f ? this.canUngroupSelection() &&
            this.ungroupSelection() : b.event && 113 === b.event.which ? this.canEditTextBlock() && this.editTextBlock() : b.event && 93 === b.event.which ? this.canShowContextMenu() && this.showContextMenu() : b.bubbles = !0 : this.canCopySelection() && this.copySelection()
        }
    };
    og.prototype.doKeyUp = function () {
        var a = this.g;
        null !== a && (a.R.bubbles = !0)
    };
    og.prototype.stopCommand = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.Za;
            b instanceof bh && a.tf && a.Sw();
            null !== b && b.doCancel()
        }
    };
    og.prototype.canStopCommand = function () {
        return !0
    };
    og.prototype.selectAll = function () {
        var a = this.g;
        if (null !== a) {
            a.na();
            try {
                a.bc = "wait";
                a.Ba("ChangingSelection");
                for (var b = a.Hk; b.next();)b.value.eb = !0;
                for (var c = a.dg; c.next();)c.value.eb = !0;
                for (var d = a.links; d.next();)d.value.eb = !0
            } finally {
                a.Ba("ChangedSelection"), a.bc = ""
            }
        }
    };
    og.prototype.canSelectAll = function () {
        var a = this.g;
        return null !== a && a.tf
    };
    og.prototype.deleteSelection = function () {
        var a = this.g;
        if (null !== a && !a.Ba("SelectionDeleting", a.selection))try {
            a.bc = "wait";
            a.Tb("Delete");
            a.Ba("ChangingSelection");
            for (var b = new J(S), c = a.selection.i; c.next();)ch(b, c.value, !0, this.FH ? Infinity : 0, this.zE, function (a) {
                return a.canDelete()
            });
            a.TA(b, !0);
            a.Ba("SelectionDeleted", b)
        } finally {
            a.Ba("ChangedSelection"), a.Fd("Delete"), a.bc = ""
        }
    };
    og.prototype.canDeleteSelection = function () {
        var a = this.g;
        return null === a || a.cb || a.xf || !a.gn || 0 === a.selection.count ? !1 : !0
    };
    function ch(a, b, c, d, e, f) {
        void 0 === f && (f = null);
        if (!(a.contains(b) || null !== f && !f(b) || b instanceof dh))if (a.add(b), b instanceof T) {
            if (c && b instanceof U)for (var h = b.Mc; h.next();)ch(a, h.value, c, d, e, f);
            if (e)for (h = b.fe; h.next();) {
                var k = h.value;
                if (!a.contains(k)) {
                    var l = k.W, m = k.$;
                    null !== l && a.contains(l) && null !== m && a.contains(m) ? ch(a, k, c, d, e, f) : null !== l && null !== m || ch(a, k, c, d, e, f)
                }
            }
            if (1 < d)for (b = b.KE(); b.next();)ch(a, b.value, c, d - 1, e, f)
        } else if (b instanceof W)for (b = b.Vf; b.next();)ch(a, b.value, c, d, e, f)
    }

    og.prototype.Np = function (a, b, c) {
        var d = new ka(S, S);
        for (a = a.i; a.next();)eh(this, a.value, b, d, c);
        if (null !== b) {
            c = b.ba;
            a = !1;
            null !== b.ab.re && (a = b.ab.re.mj);
            for (var e = new J(W), f = new ka(W, W), h = d.i; h.next();) {
                var k = h.value;
                if (k instanceof W) {
                    var l = k;
                    a || null !== l.W && null !== l.$ || e.add(l)
                } else if (c instanceof Zf && k instanceof T && null !== k.data) {
                    var l = c, m = k, k = h.key, n = k.Ql();
                    null !== n && (n = d.ka(n), null !== n ? (l.oi(m.data, l.ub(n.data)), l = b.Qf(m.data), k = k.vn(), null !== k && null !== l && f.add(k, l)) : l.oi(m.data, void 0))
                }
            }
            0 < e.count &&
            b.TA(e, !1);
            if (0 < f.count)for (c = f.i; c.next();)d.add(c.key, c.value)
        }
        if (null !== b && null !== this.g && (b = b.ba, c = b.bH, null !== c)) {
            var p = new ka;
            d.each(function (a) {
                null !== a.key.data && p.add(a.key.data, a.value.data)
            });
            c(p, b, this.g.ba)
        }
        for (b = d.i; b.next();)b.value.Hb();
        return d
    };
    function eh(a, b, c, d, e) {
        if (null === b || e && !b.canCopy())return null;
        if (d.contains(b))return d.ka(b);
        var f = null, h = b.data;
        if (null !== h && null !== c) {
            var k = c.ba;
            b instanceof W ? k instanceof P && (h = k.Uw(h), w.Qa(h) && (k.vt(h), f = c.Qf(h))) : (h = k.copyNodeData(h), w.Qa(h) && (k.Al(h), f = c.vh(h)))
        } else fh(b), f = b.copy(), null !== f && (null !== c ? c.add(f) : null !== h && null !== a.g && a.vH && (k = a.g.ba, h = f instanceof W && k instanceof P ? k.Uw(h) : k.copyNodeData(h), w.Qa(h) && (f.data = h)));
        if (!(f instanceof S))return null;
        f.eb = !1;
        f.Lg = !1;
        d.add(b, f);
        if (b instanceof T) {
            for (h = b.fe; h.next();) {
                k = h.value;
                if (k.W === b) {
                    var l = d.ka(k);
                    null !== l && (l.W = f)
                }
                k.$ === b && (l = d.ka(k), null !== l && (l.$ = f))
            }
            if (b instanceof U && f instanceof U)for (h = f, b = b.Mc; b.next();)k = eh(a, b.value, c, d, e), k instanceof W || null === k || (k.Ka = h)
        } else if (b instanceof W && f instanceof W)for (h = b.W, null !== h && (h = d.ka(h), null !== h && (f.W = h)), h = b.$, null !== h && (h = d.ka(h), null !== h && (f.$ = h)), b = b.Vf; b.next();)h = eh(a, b.value, c, d, e), null !== h && h instanceof T && (h.Lc = f);
        return f
    }

    og.prototype.copySelection = function () {
        var a = this.g;
        if (null !== a) {
            for (var b = new J(S), a = a.selection.i; a.next();)ch(b, a.value, !0, this.yH ? Infinity : 0, this.wH, function (a) {
                return a.canCopy()
            });
            this.copyToClipboard(b)
        }
    };
    og.prototype.canCopySelection = function () {
        var a = this.g;
        return null !== a && a.sk && a.Mz && 0 !== a.selection.count ? !0 : !1
    };
    og.prototype.cutSelection = function () {
        this.copySelection();
        this.deleteSelection()
    };
    og.prototype.canCutSelection = function () {
        var a = this.g;
        return null !== a && !a.cb && !a.xf && a.sk && a.gn && a.Mz && 0 !== a.selection.count ? !0 : !1
    };
    og.prototype.copyToClipboard = function (a) {
        var b = this.g;
        if (null !== b) {
            var c = null;
            if (null === a)$g = null, ah = ""; else {
                var c = b.ba, d = !1, e = !1, f = null;
                try {
                    if (c instanceof Zf) {
                        var h = c, d = h.qn;
                        h.qn = this.sE
                    }
                    c instanceof P && (h = c, e = h.pn, h.pn = this.rE);
                    f = b.Np(a, null, !0)
                } finally {
                    c instanceof Zf && (c.qn = d), c instanceof P && (c.pn = e), c = new I(S), c.Hc(f), $g = c, ah = b.ba.Kl
                }
            }
            b.Ba("ClipboardChanged", c)
        }
    };
    og.prototype.pasteFromClipboard = function () {
        var a = new J(S), b = $g;
        if (null === b)return a;
        var c = this.g;
        if (null === c || ah !== c.ba.Kl)return a;
        var d = c.ba, e = !1, f = !1, h = null;
        try {
            if (d instanceof Zf) {
                var k = d, e = k.qn;
                k.qn = this.sE
            }
            d instanceof P && (k = d, f = k.pn, k.pn = this.rE);
            h = c.Np(b, c, !1)
        } finally {
            for (d instanceof Zf && (d.qn = e), d instanceof P && (d.pn = f), b = h.i; b.next();)c = b.value, d = b.key, c.location.H() || (d.location.H() ? c.location = d.location : !c.position.H() && d.position.H() && (c.position = d.position)), a.add(c)
        }
        return a
    };
    og.prototype.pasteSelection = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.bc = "wait";
            b.Tb("Paste");
            b.Ba("ChangingSelection");
            var c = this.pasteFromClipboard();
            0 < c.count && gh(b);
            for (var d = c.i; d.next();)d.value.eb = !0;
            b.Ba("ChangedSelection");
            if (null !== a) {
                var e = b.computePartsBounds(b.selection);
                if (e.H()) {
                    var f = b.ab.re;
                    null === f && (f = new hh, f.Pc(b));
                    var h = f.computeEffectiveCollection(b.selection);
                    f.moveParts(h, new z(a.x - e.ja, a.y - e.ra), !1)
                }
            }
            b.Ba("ClipboardPasted", c)
        } finally {
            b.Fd("Paste"), b.bc =
                ""
        }
    };
    og.prototype.canPasteSelection = function () {
        var a = this.g;
        return null === a || a.cb || a.xf || !a.Ep || !a.Mz || null === $g || ah !== a.ba.Kl ? !1 : !0
    };
    og.prototype.undo = function () {
        var a = this.g;
        null !== a && a.oa.undo()
    };
    og.prototype.canUndo = function () {
        var a = this.g;
        return null === a || a.cb || a.xf ? !1 : a.fE && a.oa.canUndo()
    };
    og.prototype.redo = function () {
        var a = this.g;
        null !== a && a.oa.redo()
    };
    og.prototype.canRedo = function () {
        var a = this.g;
        return null === a || a.cb || a.xf ? !1 : a.fE && a.oa.canRedo()
    };
    og.prototype.decreaseZoom = function (a) {
        void 0 === a && (a = 1 / this.ny);
        w.Ed(a, og, "decreaseZoom:factor");
        var b = this.g;
        null !== b && b.Fl === ih && (a *= b.scale, a < b.yh || a > b.xh || (b.scale = a))
    };
    og.prototype.canDecreaseZoom = function (a) {
        void 0 === a && (a = 1 / this.ny);
        w.Ed(a, og, "canDecreaseZoom:factor");
        var b = this.g;
        if (null === b || b.Fl !== ih)return !1;
        a *= b.scale;
        return a < b.yh || a > b.xh ? !1 : b.Qw
    };
    og.prototype.increaseZoom = function (a) {
        void 0 === a && (a = this.ny);
        w.Ed(a, og, "increaseZoom:factor");
        var b = this.g;
        null !== b && b.Fl === ih && (a *= b.scale, a < b.yh || a > b.xh || (b.scale = a))
    };
    og.prototype.canIncreaseZoom = function (a) {
        void 0 === a && (a = this.ny);
        w.Ed(a, og, "canIncreaseZoom:factor");
        var b = this.g;
        if (null === b || b.Fl !== ih)return !1;
        a *= b.scale;
        return a < b.yh || a > b.xh ? !1 : b.Qw
    };
    og.prototype.resetZoom = function (a) {
        void 0 === a && (a = this.Yw);
        w.Ed(a, og, "resetZoom:newscale");
        var b = this.g;
        null === b || a < b.yh || a > b.xh || (b.scale = a)
    };
    og.prototype.canResetZoom = function (a) {
        void 0 === a && (a = this.Yw);
        w.Ed(a, og, "canResetZoom:newscale");
        var b = this.g;
        return null === b || a < b.yh || a > b.xh ? !1 : b.Qw
    };
    og.prototype.zoomToFit = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.scale, c = a.position;
            b === this.Kz && !isNaN(this.iz) && a.qe.L(this.Jz) ? (a.scale = this.iz, a.position = this.TC, this.Kz = NaN, this.Jz = cd) : (this.iz = b, this.TC = c.copy(), a.zoomToFit(), this.Kz = a.scale, this.Jz = a.qe.copy())
        }
    };
    og.prototype.canZoomToFit = function () {
        var a = this.g;
        return null === a ? !1 : a.Qw
    };
    og.prototype.scrollToPart = function (a) {
        void 0 === a && (a = null);
        null !== a && w.G(a, S, og, "part");
        var b = this.g;
        if (null !== b) {
            if (null === a) {
                try {
                    null !== this.bj && (this.bj.next() ? a = this.bj.value : this.bj = null)
                } catch (c) {
                    this.bj = null
                }
                null === a && (0 < b.Ul.count ? this.bj = b.Ul.i : 0 < b.selection.count && (this.bj = b.selection.i), null !== this.bj && this.bj.next() && (a = this.bj.value))
            }
            if (null !== a) {
                var d = b.Pa;
                d.Sn("Scroll To Part");
                var e = b.position.copy();
                b.iH(a.Y);
                e.Ic(b.position) && d.pi()
            }
        }
    };
    og.prototype.canScrollToPart = function (a) {
        void 0 === a && (a = null);
        if (null !== a && !(a instanceof S))return !1;
        a = this.g;
        return null === a || 0 === a.selection.count && 0 === a.Ul.count ? !1 : a.me && a.ne
    };
    og.prototype.collapseTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Tb("Collapse Tree");
            b.Pa.Sn("Collapse Tree");
            var c = new I(T);
            if (null !== a && a.gd)a.collapseTree(), c.add(a); else for (var d = b.selection.i; d.next();) {
                var e = d.value;
                e instanceof T && (a = e, a.gd && (a.collapseTree(), c.add(a)))
            }
            b.Ba("TreeCollapsed", c)
        } finally {
            b.Fd("Collapse Tree")
        }
    };
    og.prototype.canCollapseTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.cb)return !1;
        if (null !== a) {
            if (!(a instanceof T && a.gd))return !1;
            if (0 < a.kx().count)return !0
        } else for (a = b.selection.i; a.next();)if (b = a.value, b instanceof T && b.gd && 0 < b.kx().count)return !0;
        return !1
    };
    og.prototype.expandTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Tb("Expand Tree");
            b.Pa.Sn("Expand Tree");
            var c = new I(T);
            if (null === a || a.gd)for (var d = b.selection.i; d.next();) {
                var e = d.value;
                e instanceof T && (a = e, a.gd || (a.expandTree(), c.add(a)))
            } else a.expandTree(), c.add(a);
            b.Ba("TreeExpanded", c)
        } finally {
            b.Fd("Expand Tree")
        }
    };
    og.prototype.canExpandTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.cb)return !1;
        if (null !== a) {
            if (!(a instanceof T) || a.gd)return !1;
            if (0 < a.kx().count)return !0
        } else for (a = b.selection.i; a.next();)if (b = a.value, b instanceof T && !b.gd && 0 < b.kx().count)return !0;
        return !1
    };
    og.prototype.groupSelection = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.ba;
            if (b instanceof P) {
                var c = this.gE;
                if (null !== c) {
                    var d = null;
                    try {
                        a.bc = "wait";
                        a.Tb("Group");
                        a.Ba("ChangingSelection");
                        for (var e = new I(S), f = a.selection.i; f.next();) {
                            var h = f.value;
                            h.de() && h.canGroup() && e.add(h)
                        }
                        for (var k = new I(S), l = e.i; l.next();) {
                            for (var m = l.value, f = !1, n = e.i; n.next();)if (m.mi(n.value)) {
                                f = !0;
                                break
                            }
                            f || k.add(m)
                        }
                        if (0 < k.count) {
                            var p = k.first().Ka;
                            if (null !== p)for (; null !== p;) {
                                for (var e = !1, q = k.i; q.next();)if (!q.value.mi(p)) {
                                    e = !0;
                                    break
                                }
                                if (e)p = p.Ka; else break
                            }
                            if (c instanceof U)fh(c), d = c.copy(), null !== d && a.add(d); else if (b.wA(c)) {
                                var r = b.copyNodeData(c);
                                w.Qa(r) && (b.Al(r), d = a.jx(r))
                            }
                            if (null !== d) {
                                null !== p && this.isValidMember(p, d) && (d.Ka = p);
                                for (var s = k.i; s.next();) {
                                    var u = s.value;
                                    this.isValidMember(d, u) && (u.Ka = d)
                                }
                                a.select(d)
                            }
                        }
                        a.Ba("ChangedSelection");
                        a.Ba("SelectionGrouped", d)
                    } finally {
                        a.Fd("Group"), a.bc = ""
                    }
                }
            }
        }
    };
    og.prototype.canGroupSelection = function () {
        var a = this.g;
        if (null === a || a.cb || a.xf || !a.Ep || !a.Lw || !(a.ba instanceof P) || null === this.gE)return !1;
        for (a = a.selection.i; a.next();) {
            var b = a.value;
            if (b.de() && b.canGroup())return !0
        }
        return !1
    };
    function Bh(a) {
        var b = w.lb();
        for (a = a.i; a.next();) {
            var c = a.value;
            c instanceof W || b.push(c)
        }
        a = new J(S);
        for (var c = b.length, d = 0; d < c; d++) {
            for (var e = b[d], f = !0, h = 0; h < c; h++)if (e.mi(b[h])) {
                f = !1;
                break
            }
            f && a.add(e)
        }
        w.va(b);
        return a
    }

    og.prototype.isValidMember = function (a, b) {
        if (null === b || a === b || b instanceof W)return !1;
        if (null !== a) {
            if (a === b || a.mi(b))return !1;
            var c = a.FA;
            if (null !== c && !c(a, b) || null === a.data && null !== b.data || null !== a.data && null === b.data)return !1
        }
        c = this.FA;
        return null !== c ? c(a, b) : !0
    };
    og.prototype.ungroupSelection = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) {
            var c = b.ba;
            if (c instanceof P)try {
                b.bc = "wait";
                b.Tb("Ungroup");
                b.Ba("ChangingSelection");
                var d = new I(U);
                if (null !== a)d.add(a); else for (var e = b.selection.i; e.next();) {
                    var f = e.value;
                    f instanceof U && (a = f, a.canUngroup() && d.add(a))
                }
                if (0 < d.count) {
                    b.Sw();
                    for (var h = d.i; h.next();) {
                        var k = h.value;
                        k.expandSubGraph();
                        var l = k.Ka, m = null !== l && null !== l.data ? c.ub(l.data) : void 0, n = new I(S);
                        n.Hc(k.Mc);
                        for (var p = n.i; p.next();) {
                            var q =
                                p.value;
                            q.eb = !0;
                            if (!(q instanceof W)) {
                                var r = q.data;
                                null !== r ? c.bB(r, m) : q.Ka = l
                            }
                        }
                        b.remove(k)
                    }
                }
                b.Ba("ChangedSelection");
                b.Ba("SelectionUngrouped", d, n)
            } finally {
                b.Fd("Ungroup"), b.bc = ""
            }
        }
    };
    og.prototype.canUngroupSelection = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.cb || b.xf || !b.gn || !b.Pw || !(b.ba instanceof P))return !1;
        if (null !== a) {
            if (!(a instanceof U))return !1;
            if (a.canUngroup())return !0
        } else for (a = b.selection.i; a.next();)if (b = a.value, b instanceof U && b.canUngroup())return !0;
        return !1
    };
    og.prototype.addTopLevelParts = function (a, b) {
        for (var c = !0, d = Bh(a).i; d.next();) {
            var e = d.value;
            null !== e.Ka && (!b || this.isValidMember(null, e) ? e.Ka = null : c = !1)
        }
        return c
    };
    og.prototype.collapseSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Tb("Collapse SubGraph");
            b.Pa.Sn("Collapse SubGraph");
            var c = new I(U);
            if (null !== a && a.we)a.collapseSubGraph(), c.add(a); else for (var d = b.selection.i; d.next();) {
                var e = d.value;
                e instanceof U && (a = e, a.we && (a.collapseSubGraph(), c.add(a)))
            }
            b.Ba("SubGraphCollapsed", c)
        } finally {
            b.Fd("Collapse SubGraph")
        }
    };
    og.prototype.canCollapseSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.cb)return !1;
        if (null !== a)return a instanceof U && a.we ? !0 : !1;
        for (a = b.selection.i; a.next();)if (b = a.value, b instanceof U && b.we)return !0;
        return !1
    };
    og.prototype.expandSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Tb("Expand SubGraph");
            b.Pa.Sn("Expand SubGraph");
            var c = new I(U);
            if (null === a || a.we)for (var d = b.selection.i; d.next();) {
                var e = d.value;
                e instanceof U && (a = e, a.we || (a.expandSubGraph(), c.add(a)))
            } else a.expandSubGraph(), c.add(a);
            b.Ba("SubGraphExpanded", c)
        } finally {
            b.Fd("Expand SubGraph")
        }
    };
    og.prototype.canExpandSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.cb)return !1;
        if (null !== a)return a instanceof U && !a.we ? !0 : !1;
        for (a = b.selection.i; a.next();)if (b = a.value, b instanceof U && !b.we)return !0;
        return !1
    };
    og.prototype.editTextBlock = function (a) {
        void 0 === a && (a = null);
        null !== a && w.G(a, Ch, og, "editTextBlock");
        var b = this.g;
        if (null !== b) {
            var c = b.ab.kB;
            if (null !== c) {
                if (null === a) {
                    a = null;
                    for (var d = b.selection.i; d.next();) {
                        var e = d.value;
                        if (e.canEdit()) {
                            a = e;
                            break
                        }
                    }
                    if (null === a)return;
                    a = a.Kt(function (a) {
                        return a instanceof Ch && a.cA
                    })
                }
                null !== a && (b.Za = null, c.Xg = a, b.Za = c)
            }
        }
    };
    og.prototype.canEditTextBlock = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.cb || b.xf || !b.Ow || null === b.ab.kB)return !1;
        if (null !== a) {
            if (!(a instanceof Ch))return !1;
            a = a.U;
            if (null !== a && a.canEdit())return !0
        } else for (b = b.selection.i; b.next();)if (a = b.value, a.canEdit() && (a = a.Kt(function (a) {
                return a instanceof Ch && a.cA
            }), null !== a))return !0;
        return !1
    };
    og.prototype.showContextMenu = function (a) {
        var b = this.g;
        if (null !== b) {
            var c = b.ab.Vz;
            if (null !== c && (void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b), a = c.findObjectWithContextMenu(a), null !== a)) {
                var d = new Af, e = null;
                a instanceof G ? e = a.Wa(Fb) : b.sI || (e = b.sb, e = new z(e.x + e.width / 2, e.y + e.height / 2));
                null !== e && (d.g = b, d.bf = b.rG(e), d.ca = e, d.left = !1, d.right = !0, d.up = !0, b.R = d);
                b.Za = c;
                Dh(c, !1, a)
            }
        }
    };
    og.prototype.canShowContextMenu = function (a) {
        var b = this.g;
        if (null === b)return !1;
        var c = b.ab.Vz;
        if (null === c)return !1;
        void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b);
        return null === c.findObjectWithContextMenu(a) ? !1 : !0
    };
    w.defineProperty(og, {vH: "copiesClipboardData"}, function () {
        return this.VB
    }, function (a) {
        w.j(a, "boolean", og, "copiesClipboardData");
        this.VB = a
    });
    w.defineProperty(og, {wH: "copiesConnectedLinks"}, function () {
        return this.WB
    }, function (a) {
        w.j(a, "boolean", og, "copiesConnectedLinks");
        this.WB = a
    });
    w.defineProperty(og, {zE: "deletesConnectedLinks"}, function () {
        return this.pC
    }, function (a) {
        w.j(a, "boolean", og, "deletesConnectedLinks");
        this.pC = a
    });
    w.defineProperty(og, {yH: "copiesTree"}, function () {
        return this.$B
    }, function (a) {
        w.j(a, "boolean", og, "copiesTree");
        this.$B = a
    });
    w.defineProperty(og, {FH: "deletesTree"}, function () {
        return this.qC
    }, function (a) {
        w.j(a, "boolean", og, "deletesTree");
        this.qC = a
    });
    w.defineProperty(og, {sE: "copiesParentKey"}, function () {
        return this.ZB
    }, function (a) {
        w.j(a, "boolean", og, "copiesParentKey");
        this.ZB = a
    });
    w.defineProperty(og, {rE: "copiesGroupKey"}, function () {
        return this.YB
    }, function (a) {
        w.j(a, "boolean", og, "copiesGroupKey");
        this.YB = a
    });
    w.defineProperty(og, {gE: "archetypeGroupData"}, function () {
        return this.LB
    }, function (a) {
        null !== a && w.G(a, Object, og, "archetypeGroupData");
        var b = this.g;
        null !== b && (b = b.ba, b instanceof P && (a instanceof U || b.wA(a) || w.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: " + a)));
        this.LB = a
    });
    w.defineProperty(og, {FA: "memberValidation"}, function () {
        return this.ol
    }, function (a) {
        null !== a && w.j(a, "function", og, "memberValidation");
        this.ol = a
    });
    w.defineProperty(og, {Yw: "defaultScale"}, function () {
        return this.mC
    }, function (a) {
        w.Ed(a, og, "defaultScale");
        0 < a || w.k("defaultScale must be larger than zero, not: " + a);
        this.mC = a
    });
    w.defineProperty(og, {ny: "zoomFactor"}, function () {
        return this.XD
    }, function (a) {
        w.Ed(a, og, "zoomFactor");
        1 < a || w.k("zoomFactor must be larger than 1.0, not: " + a);
        this.XD = a
    });
    og.prototype.ft = function (a) {
        if (null !== a)for (a = a.i; a.next();) {
            var b = a.key;
            b instanceof W && (b.Dj = !0)
        }
    };
    og.prototype.jp = function (a) {
        if (null !== a)for (a = a.i; a.next();) {
            var b = a.key;
            b instanceof W && (b.Dj = !1, Eh(b) && b.Xb())
        }
    };
    function ng() {
        0 < arguments.length && w.hd(ng);
        w.lc(this);
        this.Z = null;
        this.Qb = "";
        this.cf = !0;
        this.GC = !1;
        this.RD = null;
        this.Hw = -1
    }

    w.fa("Tool", ng);
    ng.prototype.Pc = function (a) {
        this.Z = a
    };
    ng.prototype.toString = function () {
        return "" !== this.name ? this.name + " Tool" : w.hf(Object.getPrototypeOf(this))
    };
    ng.prototype.updateAdornments = function () {
    };
    ng.prototype.canStart = function () {
        return this.isEnabled
    };
    ng.prototype.doStart = function () {
    };
    ng.prototype.doActivate = function () {
        this.sa = !0
    };
    ng.prototype.doDeactivate = function () {
        this.sa = !1
    };
    ng.prototype.doStop = function () {
    };
    ng.prototype.doCancel = function () {
        this.stopTool()
    };
    ng.prototype.stopTool = function () {
        var a = this.g;
        null !== a && a.Za === this && (a.Za = null, a.bc = "")
    };
    ng.prototype.doMouseDown = function () {
        !this.sa && this.canStart() && this.doActivate()
    };
    ng.prototype.doMouseMove = function () {
    };
    ng.prototype.doMouseUp = function () {
        this.stopTool()
    };
    ng.prototype.doMouseWheel = function () {
    };
    ng.prototype.canStartMultiTouch = function () {
        return !0
    };
    ng.prototype.standardPinchZoomStart = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R, c = b.nx(0, w.xb(NaN, NaN)), d = b.nx(1, w.xb(NaN, NaN));
            if (c.H() && d.H() && (this.doCancel(), a.Ut("hasGestureZoom"))) {
                a.gD = a.scale;
                var e = d.x - c.x, f = d.y - c.y;
                a.yD = Math.sqrt(e * e + f * f);
                b.bubbles = !1
            }
            w.v(c);
            w.v(d)
        }
    };
    ng.prototype.standardPinchZoomMove = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R, c = b.nx(0, w.xb(NaN, NaN)), d = b.nx(1, w.xb(NaN, NaN));
            if (c.H() && d.H() && (this.doCancel(), a.Ut("hasGestureZoom"))) {
                var e = d.x - c.x, f = d.y - c.y, f = Math.sqrt(e * e + f * f) / a.yD, e = new z((Math.min(d.x, c.x) + Math.max(d.x, c.x)) / 2, (Math.min(d.y, c.y) + Math.max(d.y, c.y)) / 2), f = a.gD * f, h = a.ob;
                if (f !== a.scale && h.canResetZoom(f)) {
                    var k = a.lm;
                    a.lm = e;
                    h.resetZoom(f);
                    a.lm = k
                }
                b.bubbles = !1
            }
            w.v(c);
            w.v(d)
        }
    };
    ng.prototype.doKeyDown = function () {
        var a = this.g;
        null !== a && "Esc" === a.R.key && this.doCancel()
    };
    ng.prototype.doKeyUp = function () {
    };
    ng.prototype.startTransaction = ng.prototype.Tb = function (a) {
        void 0 === a && (a = this.name);
        this.Ff = null;
        var b = this.g;
        return null === b ? !1 : b.Tb(a)
    };
    ng.prototype.stopTransaction = ng.prototype.Jk = function () {
        var a = this.g;
        return null === a ? !1 : null === this.Ff ? a.nq() : a.Fd(this.Ff)
    };
    ng.prototype.standardMouseSelect = function () {
        var a = this.g;
        if (null !== a && a.tf) {
            var b = a.R, c = a.Nt(b.ca, !1);
            if (null !== c)if (w.Ek ? b.mu : b.control) {
                a.Ba("ChangingSelection");
                for (b = c; null !== b && !b.canSelect();)b = b.Ka;
                null !== b && (b.eb = !b.eb);
                a.Ba("ChangedSelection")
            } else if (b.shift) {
                if (!c.eb) {
                    a.Ba("ChangingSelection");
                    for (b = c; null !== b && !b.canSelect();)b = b.Ka;
                    null !== b && (b.eb = !0);
                    a.Ba("ChangedSelection")
                }
            } else {
                if (!c.eb) {
                    for (b = c; null !== b && !b.canSelect();)b = b.Ka;
                    null !== b && a.select(b)
                }
            } else!b.left || (w.Ek ? b.mu : b.control) ||
            b.shift || a.Sw()
        }
    };
    ng.prototype.standardMouseClick = function (a, b) {
        void 0 === a && (a = null);
        void 0 === b && (b = function (a) {
            return !a.layer.Jc
        });
        var c = this.g;
        if (null === c)return !1;
        var d = c.R, e = c.Je(d.ca, a, b);
        d.Pe = e;
        Fh(e, d, c);
        return d.Ac
    };
    function Fh(a, b, c) {
        b.Ac = !1;
        if (null === a || a.au()) {
            var d = 0;
            b.left ? d = 1 === b.Fe ? 1 : 2 === b.Fe ? 2 : 1 : b.right && 1 === b.Fe && (d = 3);
            var e = "";
            if (null !== a) {
                switch (d) {
                    case 1:
                        e = "ObjectSingleClicked";
                        break;
                    case 2:
                        e = "ObjectDoubleClicked";
                        break;
                    case 3:
                        e = "ObjectContextClicked"
                }
                0 !== d && c.Ba(e, a)
            } else {
                switch (d) {
                    case 1:
                        e = "BackgroundSingleClicked";
                        break;
                    case 2:
                        e = "BackgroundDoubleClicked";
                        break;
                    case 3:
                        e = "BackgroundContextClicked"
                }
                0 !== d && c.Ba(e)
            }
            if (null !== a)for (; null !== a;) {
                c = null;
                switch (d) {
                    case 1:
                        c = a.click;
                        break;
                    case 2:
                        c = a.Ht ? a.Ht :
                            a.click;
                        break;
                    case 3:
                        c = a.Uz
                }
                if (null !== c && (c(b, a), b.Ac))break;
                a = a.O
            } else {
                a = null;
                switch (d) {
                    case 1:
                        a = c.click;
                        break;
                    case 2:
                        a = c.Ht ? c.Ht : c.click;
                        break;
                    case 3:
                        a = c.Uz
                }
                null !== a && a(b)
            }
        }
    }

    ng.prototype.standardMouseOver = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R;
            if (null !== b.g && !0 !== a.Pa.oc) {
                var c = a.wb;
                a.wb = !0;
                var d = a.Je(b.ca, null, null);
                b.Pe = d;
                var e = !1;
                if (d !== a.uo) {
                    var f = a.uo, h = f;
                    a.uo = d;
                    this.doCurrentObjectChanged(f, d);
                    for (b.Ac = !1; null !== f;) {
                        var k = f.ou;
                        if (null !== k) {
                            if (d === f)break;
                            if (null !== d && d.Xl(f))break;
                            k(b, f, d);
                            e = !0;
                            if (b.Ac)break
                        }
                        f = f.O
                    }
                    f = h;
                    for (b.Ac = !1; null !== d;) {
                        k = d.nu;
                        if (null !== k) {
                            if (f === d)break;
                            if (null !== f && f.Xl(d))break;
                            k(b, d, f);
                            e = !0;
                            if (b.Ac)break
                        }
                        d = d.O
                    }
                    d = a.uo
                }
                if (null !== d) {
                    f =
                        d;
                    for (h = ""; null !== f;) {
                        h = f.cursor;
                        if ("" !== h)break;
                        f = f.O
                    }
                    a.bc = h;
                    b.Ac = !1;
                    for (f = d; null !== f;) {
                        d = f.JA;
                        if (null !== d && (d(b, f), e = !0, b.Ac))break;
                        f = f.O
                    }
                } else a.bc = "", d = a.JA, null !== d && (d(b), e = !0);
                e && a.Le();
                a.wb = c
            }
        }
    };
    ng.prototype.doCurrentObjectChanged = function () {
    };
    ng.prototype.standardMouseWheel = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R, c = b.Ml;
            if (0 !== c && a.qe.H()) {
                var d = a.ob, e = a.ab.pu;
                if ((e === Gh && !b.shift || e === Hh && b.control) && (0 < c ? d.canIncreaseZoom() : d.canDecreaseZoom()))e = a.lm, a.lm = b.bf, 0 < c ? d.increaseZoom() : d.decreaseZoom(), a.lm = e, b.bubbles = !1; else if (e === Gh && b.shift || e === Hh && !b.control) {
                    var d = a.position.copy(), e = 0 < c ? c : -c, f = b.event.deltaX, h = b.event.deltaY;
                    void 0 === f || void 0 === h || 0 === f && 0 === h || b.shift ? !b.shift && a.ne ? (f = a.Du, e = e / 40 * f, 0 < c ? a.scroll("pixel",
                        "up", e) : a.scroll("pixel", "down", e)) : b.shift && a.me && (f = a.Cu, e = e / 40 * f, 0 < c ? a.scroll("pixel", "left", e) : a.scroll("pixel", "right", e)) : (0 !== f && a.me && (0 < f ? a.scroll("pixel", "left", -f) : a.scroll("pixel", "right", f)), 0 !== h && a.ne && (0 < h ? a.scroll("pixel", "up", -h) : a.scroll("pixel", "down", h)));
                    a.position.L(d) || (b.bubbles = !1)
                }
            }
        }
    };
    ng.prototype.standardWaitAfter = function (a, b) {
        w.j(a, "number", ng, "standardWaitAfter:delay");
        this.cancelWaitAfter();
        var c = this, d = b.copy();
        this.Hw = w.setTimeout(function () {
            c.doWaitAfter(d)
        }, a)
    };
    ng.prototype.cancelWaitAfter = function () {
        -1 !== this.Hw && w.clearTimeout(this.Hw);
        this.Hw = -1
    };
    ng.prototype.doWaitAfter = function () {
    };
    ng.prototype.findToolHandleAt = function (a, b) {
        var c = this.g;
        if (null === c)return null;
        c = c.Je(a, function (a) {
            for (; null !== a && !(a.O instanceof dh);)a = a.O;
            return a
        });
        return null === c ? null : c.U.rd === b ? c : null
    };
    ng.prototype.isBeyondDragSize = function (a, b) {
        var c = this.g;
        if (null === c)return !1;
        void 0 === a && (a = c.zc.bf);
        void 0 === b && (b = c.R.bf);
        var d = c.ab.JH, e = d.width, d = d.height;
        c.zc.tj && (e += 6, d += 6);
        return Math.abs(b.x - a.x) > e || Math.abs(b.y - a.y) > d
    };
    w.u(ng, {g: "diagram"}, function () {
        return this.Z
    });
    w.defineProperty(ng, {name: "name"}, function () {
        return this.Qb
    }, function (a) {
        w.j(a, "string", ng, "name");
        this.Qb = a
    });
    w.defineProperty(ng, {isEnabled: "isEnabled"}, function () {
        return this.cf
    }, function (a) {
        w.j(a, "boolean", ng, "isEnabled");
        this.cf = a
    });
    w.defineProperty(ng, {sa: "isActive"}, function () {
        return this.GC
    }, function (a) {
        w.j(a, "boolean", ng, "isActive");
        this.GC = a
    });
    w.defineProperty(ng, {Ff: "transactionResult"}, function () {
        return this.RD
    }, function (a) {
        null !== a && w.j(a, "string", ng, "transactionResult");
        this.RD = a
    });
    function hh() {
        ng.call(this);
        0 < arguments.length && w.hd(hh);
        this.name = "Dragging";
        this.XB = this.KC = !0;
        this.Jr = this.wC = !1;
        this.OC = !0;
        this.Zy = (new ha(NaN, NaN)).freeze();
        this.$y = vb;
        this.az = (new z(NaN, NaN)).freeze();
        this.vC = !1;
        this.tC = this.UB = this.uC = this.eC = this.$i = null;
        this.pr = this.MC = !1;
        this.rp = new z(NaN, NaN);
        this.xw = new z;
        this.Aw = !1;
        this.JC = !0;
        this.Ao = 100;
        this.Mj = [];
        this.EG = (new J(S)).freeze()
    }

    w.La(hh, ng);
    w.fa("DraggingTool", hh);
    w.defineProperty(hh, {eF: "isCopyEnabled"}, function () {
        return this.KC
    }, function (a) {
        w.j(a, "boolean", hh, "isCopyEnabled");
        this.KC = a
    });
    w.defineProperty(hh, {xH: "copiesEffectiveCollection"}, function () {
        return this.XB
    }, function (a) {
        w.j(a, "boolean", hh, "copiesEffectiveCollection");
        this.XB = a
    });
    w.defineProperty(hh, {KH: "dragsTree"}, function () {
        return this.wC
    }, function (a) {
        w.j(a, "boolean", hh, "dragsTree");
        this.wC = a
    });
    w.defineProperty(hh, {vx: "isGridSnapEnabled"}, function () {
        return this.Jr
    }, function (a) {
        w.j(a, "boolean", hh, "isGridSnapEnabled");
        this.Jr = a
    });
    w.defineProperty(hh, {nI: "isComplexRoutingRealtime"}, function () {
        return this.JC
    }, function (a) {
        w.j(a, "boolean", hh, "isComplexRoutingRealtime");
        this.JC = a
    });
    w.defineProperty(hh, {pI: "isGridSnapRealtime"}, function () {
        return this.OC
    }, function (a) {
        w.j(a, "boolean", hh, "isGridSnapRealtime");
        this.OC = a
    });
    w.defineProperty(hh, {WE: "gridSnapCellSize"}, function () {
        return this.Zy
    }, function (a) {
        w.G(a, ha, hh, "gridSnapCellSize");
        this.Zy.L(a) || (this.Zy = a = a.S())
    });
    w.defineProperty(hh, {ZH: "gridSnapCellSpot"}, function () {
        return this.$y
    }, function (a) {
        w.G(a, L, hh, "gridSnapCellSpot");
        this.$y.L(a) || (this.$y = a = a.S())
    });
    w.defineProperty(hh, {$H: "gridSnapOrigin"}, function () {
        return this.az
    }, function (a) {
        w.G(a, z, hh, "gridSnapOrigin");
        this.az.L(a) || (this.az = a = a.S())
    });
    w.defineProperty(hh, {mj: "dragsLink"}, function () {
        return this.vC
    }, function (a) {
        w.j(a, "boolean", hh, "dragsLink");
        this.vC = a
    });
    w.defineProperty(hh, {sn: "currentPart"}, function () {
        return this.eC
    }, function (a) {
        null !== a && w.G(a, S, hh, "currentPart");
        this.eC = a
    });
    w.defineProperty(hh, {ac: "copiedParts"}, function () {
        return this.UB
    }, function (a) {
        this.UB = a
    });
    w.defineProperty(hh, {Wb: "draggedParts"}, function () {
        return this.uC
    }, function (a) {
        this.uC = a
    });
    w.u(hh, {MK: "draggingParts"}, function () {
        return null !== this.ac ? this.ac.Fj() : null !== this.Wb ? this.Wb.Fj() : this.EG
    });
    w.defineProperty(hh, {dd: "draggedLink"}, function () {
        return this.tC
    }, function (a) {
        null !== a && w.G(a, W, hh, "draggedLink");
        this.tC = a
    });
    w.defineProperty(hh, {ux: "isDragOutStarted"}, function () {
        return this.MC
    }, function (a) {
        this.MC = a
    });
    w.defineProperty(hh, {Ik: "startPoint"}, function () {
        return this.xw
    }, function (a) {
        w.G(a, z, hh, "startPoint");
        this.xw.L(a) || (this.xw = a = a.S())
    });
    w.defineProperty(hh, {vE: "delay"}, function () {
        return this.Ao
    }, function (a) {
        w.j(a, "number", hh, "delay");
        this.Ao = a
    });
    hh.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.cb && !a.zt || !a.Dl && !a.sk && !a.zt || !a.tf)return !1;
        var b = a.R;
        return !b.left || a.Za !== this && (!this.isBeyondDragSize() || b.tj && b.timestamp - a.zc.timestamp < this.Ao) ? !1 : null !== this.findDraggablePart()
    };
    hh.prototype.findDraggablePart = function () {
        var a = this.g;
        if (null === a)return null;
        a = a.Nt(a.zc.ca, !1);
        if (null === a)return null;
        for (; null !== a && !a.canSelect();)a = a.Ka;
        return null !== a && (a.canMove() || a.canCopy()) ? a : null
    };
    hh.prototype.standardMouseSelect = function () {
        var a = this.g;
        if (null !== a && a.tf) {
            var b = a.Nt(a.zc.ca, !1);
            if (null !== b) {
                for (; null !== b && !b.canSelect();)b = b.Ka;
                this.sn = b;
                this.sn.eb || (a.Ba("ChangingSelection"), b = a.R, (w.Ek ? b.mu : b.control) || b.shift || gh(a), this.sn.eb = !0, a.Ba("ChangedSelection"))
            }
        }
    };
    hh.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a) {
            null === this.sn && this.standardMouseSelect();
            var b = this.sn;
            null !== b && (b.canMove() || b.canCopy()) && (this.sa = !0, this.rp.set(a.position), Ih(this, a.selection), this.Mj.length = 0, this.Wb = this.computeEffectiveCollection(a.selection), a.Ju = !0, this.ft(this.Wb), this.Tb("Drag"), this.Ik = a.zc.ca, a.$e = !0, a.zt && (this.ux = !0, this.pr = !1, Jh = this, Kh = this.g, this.doSimulatedDragOut()))
        }
    };
    function Ih(a, b) {
        if (a.mj) {
            var c = a.g;
            null !== c && c.hn && (c.ba instanceof P && 1 === b.count && b.first() instanceof W ? (a.dd = b.first(), a.dd.canRelinkFrom() && a.dd.canRelinkTo() && a.dd.Ct(), a.$i = c.ab.JF, null === a.$i && (a.$i = new Lh, a.$i.Pc(c))) : (a.dd = null, a.$i = null))
        }
    }

    hh.prototype.computeEffectiveCollection = function (a) {
        var b = null !== this.g && this.g.Za === this, c = new ka(S);
        if (null === a)return c;
        for (var d = a.i; d.next();)Mh(this, c, d.value, b);
        if (null !== this.dd && this.mj)return c;
        for (d = a.i; d.next();)a = d.value, a instanceof W && (b = a.W, null === b || c.contains(b) ? (b = a.$, null === b || c.contains(b) || c.remove(a)) : c.remove(a));
        return c
    };
    function Nh(a) {
        return void 0 === a ? new Oh(bd) : new Oh(a.copy())
    }

    function Mh(a, b, c, d) {
        if (!b.contains(c) && (!d || c.canMove() || c.canCopy()))if (c instanceof T) {
            b.add(c, Nh(c.location));
            if (c instanceof U)for (var e = c.Mc; e.next();)Mh(a, b, e.value, d);
            for (e = c.fe; e.next();) {
                var f = e.value;
                if (!b.contains(f)) {
                    var h = f.W, k = f.$;
                    null !== h && b.contains(h) && null !== k && b.contains(k) && Mh(a, b, f, d)
                }
            }
            if (a.KH)for (c = c.KE(); c.next();)Mh(a, b, c.value, d)
        } else if (c instanceof W)for (f = c, b.add(f, Nh()), c = f.Vf; c.next();)Mh(a, b, c.value, d); else c instanceof dh || b.add(c, Nh(c.location))
    }

    hh.prototype.doDeactivate = function () {
        this.sa = !1;
        var a = this.g;
        null !== a && Ph(a);
        Qh(this);
        this.jp(this.Wb);
        this.Wb = this.sn = null;
        this.pr = this.ux = !1;
        if (0 < Rh.count) {
            for (var b = Rh.length, c = 0; c < b; c++) {
                var d = Rh.da(c);
                Sh(d);
                Th(d);
                Qh(d);
                null !== d.g && Ph(d.g)
            }
            Rh.clear()
        }
        Sh(this);
        this.rp.l(NaN, NaN);
        Jh = Kh = null;
        Th(this);
        a.$e = !1;
        a.bc = "";
        a.Ju = !1;
        this.Jk()
    };
    function Qh(a) {
        var b = a.g;
        if (null !== b) {
            var c = b.wb;
            b.wb = !0;
            Uh(a, b.R, null);
            b.wb = c
        }
        a.Mj.length = 0
    }

    function Vh() {
        var a = Jh;
        Th(a);
        ii(a);
        var b = a.g;
        null !== b && a.rp.H() && (b.position = a.rp);
        null !== b && Ph(b)
    }

    hh.prototype.doCancel = function () {
        Th(this);
        ii(this);
        var a = this.g;
        null !== a && this.rp.H() && (a.position = this.rp);
        this.stopTool()
    };
    hh.prototype.ft = function (a) {
        if (null !== a)for (this.Aw = !0, a = a.i; a.next();) {
            var b = a.key;
            b instanceof W && (b.Dj = !0)
        }
    };
    hh.prototype.jp = function (a) {
        if (null !== a) {
            for (a = a.i; a.next();) {
                var b = a.key;
                b instanceof W && (b.Dj = !1, Eh(b) && b.Xb())
            }
            this.Aw = !1
        }
    };
    hh.prototype.doKeyDown = function () {
        var a = this.g;
        null !== a && (a = a.R, null !== a && this.sa && ("Esc" === a.key ? this.doCancel() : this.doMouseMove()))
    };
    hh.prototype.doKeyUp = function () {
        var a = this.g;
        null !== a && null !== a.R && this.sa && this.doMouseMove()
    };
    function vi(a, b) {
        for (var c = Infinity, d = Infinity, e = -Infinity, f = -Infinity, h = a.i; h.next();) {
            var k = h.value;
            if (k.de() && k.isVisible()) {
                var l = k.location, k = l.x, l = l.y;
                isNaN(k) || isNaN(l) || (k < c && (c = k), l < d && (d = l), k > e && (e = k), l > f && (f = l))
            }
        }
        Infinity === c ? b.l(0, 0, 0, 0) : b.l(c, d, e - c, f - d)
    }

    function wi(a, b) {
        if (null === a.ac) {
            var c = a.g;
            if (!(null === c || b && (c.cb || c.xf)) && null !== a.Wb) {
                var d = c.oa;
                d.isEnabled && d.jF ? null !== d.kj && 0 < d.kj.Pf.count && (c.oa.nq(), c.Tb("Drag")) : ii(a);
                c.wb = !b;
                c.Fq = !b;
                a.Ik = c.zc.ca;
                d = a.xH ? a.Wb.Fj() : c.selection;
                d = c.Np(d, c, !0);
                for (c = d.i; c.next();)c.value.location = c.key.location;
                c = w.Df();
                vi(d, c);
                w.Gb(c);
                for (var c = new ka(S), e = a.Wb.i; e.next();) {
                    var f = e.key;
                    f.de() && f.canCopy() && (f = d.ka(f), null !== f && (f.Ze(), c.add(f, Nh(f.location))))
                }
                for (d = d.i; d.next();)e = d.value, e instanceof W &&
                e.canCopy() && c.add(e, Nh());
                a.ac = c;
                Ih(a, c.Fj());
                null !== a.dd && (c = a.dd, d = c.Un, c.am(a.Ik.x - (d.x + d.width / 2), a.Ik.y - (d.y + d.height / 2)))
            }
        }
    }

    function Th(a) {
        var b = a.g;
        if (null !== b) {
            if (null !== a.ac && (b.TA(a.ac.Fj(), !1), a.ac = null, null !== a.Wb))for (var c = a.Wb.i; c.next();)c.key instanceof W && (c.value.point = new z(0, 0));
            b.wb = !1;
            b.Fq = !1;
            a.Ik = b.zc.ca
        }
    }

    function Sh(a) {
        if (null !== a.dd) {
            if (a.mj && null !== a.$i) {
                var b = a.$i;
                null !== b.g && (b.g.remove(b.Qd), b.g.remove(b.Rd))
            }
            a.dd = null;
            a.$i = null
        }
    }

    function xi(a, b, c) {
        var d = a.g;
        if (null !== d) {
            var e = a.Ik, f = w.K();
            f.assign(d.R.ca);
            a.moveParts(b, f.Yn(e), c);
            w.v(f)
        }
    }

    hh.prototype.moveParts = function (a, b, c) {
        if (null !== a && (w.G(a, ka, hh, "moveParts:parts"), 0 !== a.count)) {
            var d = w.K(), e = w.K();
            e.assign(b);
            isNaN(e.x) && (e.x = 0);
            isNaN(e.y) && (e.y = 0);
            (b = this.Aw) || this.ft(a);
            for (var f = new I(yi), h = new I(Ca), k = a.i; k.next();) {
                var l = k.key;
                if (l.de()) {
                    var m = zi(this, l, a);
                    if (null !== m)f.add(new yi(l, k.value, m)); else if (!c || l.canMove()) {
                        m = k.value.point;
                        d.assign(m);
                        var n = w.K(), p = this.computeMove(l, d.add(e), a, n);
                        l.location = p;
                        k.value.eG = n.Yn(m);
                        w.v(n)
                    }
                } else k.key instanceof W && h.add(k.Va)
            }
            for (c =
                     f.i; c.next();)f = c.value, m = f.info.point, d.assign(m), f.Nc.location = d.add(f.aI.eG);
            c = w.K();
            m = w.K();
            for (h = h.i; h.next();)if (k = h.value, f = k.key, f instanceof W)if (f.Dj)l = f.W, n = f.$, null !== this.dd && this.mj ? (k = k.value.point, a.add(f, Nh(e)), l = e.x - k.x, k = e.y - k.y, f.am(l, k)) : (null !== l && (c.assign(l.location), p = a.ka(l), null !== p && c.Yn(p.point)), null !== n && (m.assign(n.location), p = a.ka(n), null !== p && m.Yn(p.point)), null !== l && null !== n ? c.Ic(m) ? (k = k.value.point, l = d, l.assign(c), l.Yn(k), a.add(f, Nh(c)), f.am(l.x, l.y)) : (f.Dj = !1,
                f.Xb()) : (k = k.value.point, n = null !== l ? c : null !== n ? m : e, a.add(f, Nh(n)), l = n.x - k.x, k = n.y - k.y, f.am(l, k))); else if (null === f.W || null === f.$)k = k.value.point, a.add(f, Nh(e)), l = e.x - k.x, k = e.y - k.y, f.am(l, k);
            w.v(d);
            w.v(e);
            w.v(c);
            w.v(m);
            b || (Ai(this.g), this.jp(a))
        }
    };
    function zi(a, b, c) {
        b = b.Ka;
        if (null !== b) {
            a = zi(a, b, c);
            if (null !== a)return a;
            a = c.ka(b);
            if (null !== a)return a
        }
        return null
    }

    function ii(a) {
        if (null !== a.Wb) {
            for (var b = a.g, c = a.Wb.i; c.next();) {
                var d = c.key;
                d.de() && (d.location = c.value.point)
            }
            for (c = a.Wb.i; c.next();)if (d = c.key, d instanceof W && d.Dj) {
                var e = c.value.point;
                a.Wb.add(d, Nh());
                d.am(-e.x, -e.y)
            }
            b.Yf()
        }
    }

    hh.prototype.computeMove = function (a, b, c, d) {
        void 0 === d && (d = new z);
        d.assign(b);
        if (null === a)return d;
        void 0 === c && (c = null);
        var e = b;
        if (this.vx && (this.pI || null === c || null !== this.g && this.g.R.up) && (e = w.K(), c = e, c.assign(b), null !== a)) {
            var f = this.g;
            if (null !== f) {
                var h = f.Bn, k = this.WE, f = k.width, k = k.height, l = this.$H, m = l.x, l = l.y, n = this.ZH;
                if (null !== h) {
                    var p = h.px;
                    isNaN(f) && (f = p.width);
                    isNaN(k) && (k = p.height);
                    h = h.VE;
                    isNaN(m) && (m = h.x);
                    isNaN(l) && (l = h.y)
                }
                h = w.xb(0, 0);
                h.Hu(0, 0, f, k, n);
                Ka(b.x, b.y, m + h.x, l + h.y, f, k, c);
                w.v(h)
            }
        }
        c =
            null !== a.AE ? a.AE(a, b, e) : e;
        k = a.RI;
        f = k.x;
        isNaN(f) && (f = a.location.x);
        k = k.y;
        isNaN(k) && (k = a.location.y);
        h = a.KI;
        m = h.x;
        isNaN(m) && (m = a.location.x);
        h = h.y;
        isNaN(h) && (h = a.location.y);
        d.l(Math.max(f, Math.min(c.x, m)), Math.max(k, Math.min(c.y, h)));
        e !== b && w.v(e);
        return d
    };
    function Bi(a, b) {
        if (null === b)return !0;
        var c = b.U;
        return null === c || c instanceof dh || c.layer.Jc || a.Wb && a.Wb.contains(c) || a.ac && a.ac.contains(c) ? !0 : !1
    }

    function Ci(a, b, c, d) {
        var e = a.g;
        if (null !== e) {
            a.mj && (null !== a.dd && (a.dd.W = null, a.dd.$ = null), Di(a, !1));
            var f = Ei(e, b, null, function (b) {
                return !Bi(a, b)
            }), h = e.R;
            h.Pe = f;
            var k = e.wb, l = !1;
            try {
                e.wb = !0;
                l = Uh(a, h, f);
                if (!a.sa && null === Jh)return;
                if (null === f) {
                    var m = e.VI;
                    null !== m && (m(h), l = !0)
                }
                if (!a.sa && null === Jh)return;
                a.doDragOver(b, f);
                if (!a.sa && null === Jh)return
            } finally {
                e.wb = k, l && e.Yf()
            }
            (e.me || e.ne) && (c || d) && e.bA(h.bf)
        }
    }

    function Uh(a, b, c) {
        var d = !1, e = a.Mj.length, f = 0 < e ? a.Mj[0] : null;
        if (c === f)return !1;
        b.Ac = !1;
        for (var h = 0; h < e; h++) {
            var k = a.Mj[h], l = k.UI;
            if (null !== l && (l(b, k, c), d = !0, b.Ac))break
        }
        a.Mj.length = 0;
        if (!a.sa && null === Jh || null === c)return d;
        for (b.Ac = !1; null !== c;)a.Mj.push(c), c = Fi(c);
        e = a.Mj.length;
        for (h = 0; h < e && (k = a.Mj[h], l = k.TI, null === l || (l(b, k, f), d = !0, !b.Ac)); h++);
        return d
    }

    function Fi(a) {
        var b = a.O;
        return null !== b ? b : a instanceof S && !(a instanceof U) && (a = a.Ka, null !== a && a.dI) ? a : null
    }

    function Gi(a, b, c) {
        var d = a.$i;
        if (null === d)return null;
        var e = a.g.un(b, d.HF, function (a) {
            return d.findValidLinkablePort(a, c)
        });
        a = w.K();
        for (var f = Infinity, h = null, e = e.i; e.next();) {
            var k = e.value;
            if (null !== k.U) {
                var l = k.Wa(Fb, a), l = b.uf(l);
                l < f && (h = k, f = l)
            }
        }
        w.v(a);
        return h
    }

    function Di(a, b) {
        var c = a.dd;
        if (null !== c && !(2 > c.qa)) {
            var d = a.g;
            if (null !== d && !d.cb && (d = a.$i, null !== d)) {
                var e = null, f = null;
                null === c.W && (e = Gi(a, c.m(0), !1), null !== e && (f = e.U));
                var h = null, k = null;
                null === c.$ && (h = Gi(a, c.m(c.qa - 1), !0), null !== h && (k = h.U));
                d.isValidLink(f, e, k, h) ? b ? (c.Op = c.m(0), c.Pp = c.m(c.qa - 1), c.Dj = !1, c.W = f, null !== e && (c.Jg = e.Pd), c.$ = k, null !== h && (c.Eh = h.Pd)) : Hi(d, f, e, k, h) : Hi(d, null, null, null, null)
            }
        }
    }

    hh.prototype.doDragOver = function () {
    };
    function Ii(a, b) {
        var c = a.g;
        if (null !== c) {
            a.mj && Di(a, !0);
            Qh(a);
            var d = Ei(c, b, null, function (b) {
                return !Bi(a, b)
            }), e = c.R;
            e.Pe = d;
            if (null !== d) {
                e.Ac = !1;
                for (var f = d; null !== f;) {
                    var h = f.GA;
                    if (null !== h && (h(e, f), e.Ac))break;
                    f = Fi(f)
                }
            } else f = c.GA, null !== f && f(e);
            if (a.sa || null !== Jh) {
                for (e = (a.ac || a.Wb).i; e.next();)f = e.key, f instanceof T && f.fe.each(function (a) {
                    a.Dj = !1
                });
                a.doDropOnto(b, d);
                if (a.sa || null !== Jh) {
                    d = w.Df();
                    for (e = c.selection.i; e.next();)f = e.value, f instanceof T && Ji(c, f.getAvoidableRect(d));
                    w.Gb(d)
                }
            }
        }
    }

    hh.prototype.doDropOnto = function () {
    };
    hh.prototype.doMouseMove = function () {
        if (this.sa) {
            var a = this.g;
            if (null !== a && null !== this.sn && null !== this.Wb) {
                var b = !1, c = !1;
                this.mayCopy() ? (b = !0, a.bc = "copy", wi(this, !1), this.ft(this.ac), xi(this, this.ac, !1), this.jp(this.ac)) : this.mayMove() ? (c = !0, a.bc = "default", Th(this), xi(this, this.Wb, !0)) : this.mayDragOut() ? (a.bc = "no-drop", wi(this, !1), xi(this, this.ac, !1)) : Th(this);
                Ci(this, a.R.ca, c, b)
            }
        }
    };
    hh.prototype.doMouseUp = function () {
        if (this.sa) {
            var a = this.g;
            if (null !== a) {
                var b = !1, c = this.mayCopy();
                c && null !== this.ac ? (Th(this), wi(this, !0), this.ft(this.ac), xi(this, this.ac, !1), this.jp(this.ac), null !== this.ac && a.$F(this.ac.Fj())) : (b = !0, Th(this), this.mayMove() && (xi(this, this.Wb, !0), Ci(this, a.R.ca, !0, !1)));
                this.pr = !0;
                Ii(this, a.R.ca);
                if (this.sa) {
                    this.ac = null;
                    if (b && null !== this.Wb)for (b = this.Wb.i; b.next();) {
                        var d = b.key;
                        d instanceof T && (d = d.Ka, null === d || null === d.placeholder || this.Wb.contains(d) || d.placeholder.I())
                    }
                    a.qc();
                    this.jp(this.Wb);
                    this.Ff = c ? "Copy" : "Move";
                    a.Ba(c ? "SelectionCopied" : "SelectionMoved", a.selection)
                }
                this.stopTool()
            }
        }
    };
    hh.prototype.mayCopy = function () {
        if (!this.eF)return !1;
        var a = this.g;
        if (null === a || a.cb || a.xf || !a.Ep || !a.sk || (w.Ek ? !a.R.alt : !a.R.control))return !1;
        for (a = a.selection.i; a.next();) {
            var b = a.value;
            if (b.de() && b.canCopy())return !0
        }
        return null !== this.dd && this.mj && this.dd.canCopy() ? !0 : !1
    };
    hh.prototype.mayDragOut = function () {
        if (!this.eF)return !1;
        var a = this.g;
        if (null === a || !a.zt || !a.sk || a.Dl)return !1;
        for (a = a.selection.i; a.next();) {
            var b = a.value;
            if (b.de() && b.canCopy())return !0
        }
        return null !== this.dd && this.mj && this.dd.canCopy() ? !0 : !1
    };
    hh.prototype.mayMove = function () {
        var a = this.g;
        if (null === a || a.cb || !a.Dl)return !1;
        for (a = a.selection.i; a.next();) {
            var b = a.value;
            if (b.de() && b.canMove())return !0
        }
        return null !== this.dd && this.mj && this.dd.canMove() ? !0 : !1
    };
    var Rh = new I(hh), Jh = null, Kh = null;
    hh.prototype.getDraggingSource = function () {
        return Jh
    };
    hh.prototype.mayDragIn = function () {
        var a = this.g;
        if (null === a || !a.eE || a.cb || a.xf || !a.Ep)return !1;
        var b = Jh;
        return null === b || null === b.g || b.g.ba.Kl !== a.ba.Kl ? !1 : !0
    };
    hh.prototype.doSimulatedDragEnter = function () {
        if (this.mayDragIn()) {
            var a = this.g;
            a.Pa.pi();
            Ki(a);
            a = Jh;
            null !== a && null !== a.g && (a.g.bc = "copy")
        }
    };
    hh.prototype.doSimulatedDragLeave = function () {
        var a = Jh;
        null !== a && a.doSimulatedDragOut();
        this.doCancel()
    };
    hh.prototype.doSimulatedDragOver = function () {
        var a = this.g;
        if (null !== a) {
            var b = Jh;
            null !== b && null !== b.Wb && this.mayDragIn() && (a.bc = "copy", Li(this, b.Wb.Fj(), !1), xi(this, this.ac, !1), Ci(this, a.R.ca, !1, !0))
        }
    };
    hh.prototype.doSimulatedDrop = function () {
        var a = this.g;
        if (null !== a) {
            var b = Jh;
            if (null !== b) {
                var c = b.g;
                b.pr = !0;
                Th(this);
                this.mayDragIn() && (this.Tb("Drop"), Li(this, b.Wb.Fj(), !0), xi(this, this.ac, !1), null !== this.ac && a.$F(this.ac.Fj()), Ii(this, a.R.ca), a.qc(), b = a.selection, null !== this.ac ? this.Ff = "ExternalCopy" : b = new J(S), this.ac = null, a.doFocus(), a.Ba("ExternalObjectsDropped", b, c), this.Jk())
            }
        }
    };
    function Li(a, b, c) {
        if (null === a.ac) {
            var d = a.g;
            if (null !== d && !d.cb && !d.xf) {
                d.wb = !c;
                d.Fq = !c;
                a.Ik = d.R.ca;
                d = d.Np(b, d, !0);
                c = w.Df();
                vi(b, c);
                var e = c.x + c.width / 2, f = c.y + c.height / 2;
                w.Gb(c);
                var h = a.xw;
                c = new ka(S);
                var k = w.K();
                for (b = b.i; b.next();) {
                    var l = b.value;
                    if (l.de() && l.canCopy()) {
                        var m = l.location, l = d.ka(l);
                        k.l(h.x - (e - m.x), h.y - (f - m.y));
                        l.location = k;
                        l.Ze();
                        c.add(l, Nh(k))
                    }
                }
                w.v(k);
                for (d = d.i; d.next();)e = d.value, e instanceof W && e.canCopy() && c.add(e, Nh());
                a.ac = c;
                Ih(a, c.Fj());
                null !== a.dd && (c = a.dd, d = c.Un, c.am(a.Ik.x -
                    (d.x + d.width / 2), a.Ik.y - (d.y + d.height / 2)))
            }
        }
    }

    hh.prototype.doSimulatedDragOut = function () {
        var a = this.g;
        null !== a && (this.mayCopy() || this.mayMove() ? a.bc = "" : a.bc = "no-drop")
    };
    function Oh(a) {
        this.point = a;
        this.eG = bd
    }

    w.fa("DraggingInfo", Oh);
    function yi(a, b, c) {
        this.Nc = a;
        this.info = b;
        this.aI = c
    }

    function Mi() {
        0 < arguments.length && w.hd(Mi);
        ng.call(this);
        this.qD = 100;
        this.RC = !1;
        var a = new W, b = new X;
        b.Uf = !0;
        b.stroke = "blue";
        a.add(b);
        b = new X;
        b.zq = "Standard";
        b.fill = "blue";
        b.stroke = "blue";
        a.add(b);
        a.Wf = "Tool";
        this.KD = a;
        a = new T;
        b = new X;
        b.Pd = "";
        b.Cb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.kb = 2;
        b.Aa = od;
        a.add(b);
        a.dm = !1;
        a.Wf = "Tool";
        this.HD = a;
        this.JD = b;
        a = new T;
        b = new X;
        b.Pd = "";
        b.Cb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.kb = 2;
        b.Aa = od;
        a.add(b);
        a.dm = !1;
        a.Wf = "Tool";
        this.LD = a;
        this.MD = b;
        this.oD = this.nD =
            this.jD = this.iD = this.kD = null;
        this.NC = !0;
        this.SG = new ka(G, "boolean");
        this.rD = this.ml = this.ED = null
    }

    w.La(Mi, ng);
    w.fa("LinkingBaseTool", Mi);
    Mi.prototype.doStop = function () {
        var a = this.g;
        null !== a && Ph(a);
        this.Rg = this.Qg = this.Pg = this.Og = this.jc = null;
        this.ly.clear();
        this.Cf = null
    };
    w.defineProperty(Mi, {HF: "portGravity"}, function () {
        return this.qD
    }, function (a) {
        w.j(a, "number", Mi, "portGravity");
        0 <= a && (this.qD = a)
    });
    w.defineProperty(Mi, {dq: "isUnconnectedLinkValid"}, function () {
        return this.RC
    }, function (a) {
        w.j(a, "boolean", Mi, "isUnconnectedLinkValid");
        this.RC = a
    });
    w.defineProperty(Mi, {Wg: "temporaryLink"}, function () {
        return this.KD
    }, function (a) {
        w.G(a, W, Mi, "temporaryLink");
        this.KD = a
    });
    w.defineProperty(Mi, {Qd: "temporaryFromNode"}, function () {
        return this.HD
    }, function (a) {
        w.G(a, T, Mi, "temporaryFromNode");
        this.HD = a
    });
    w.defineProperty(Mi, {Zn: "temporaryFromPort"}, function () {
        return this.JD
    }, function (a) {
        w.G(a, G, Mi, "temporaryFromPort");
        this.JD = a
    });
    w.defineProperty(Mi, {Rd: "temporaryToNode"}, function () {
        return this.LD
    }, function (a) {
        w.G(a, T, Mi, "temporaryToNode");
        this.LD = a
    });
    w.defineProperty(Mi, {$n: "temporaryToPort"}, function () {
        return this.MD
    }, function (a) {
        w.G(a, G, Mi, "temporaryToPort");
        this.MD = a
    });
    w.defineProperty(Mi, {jc: "originalLink"}, function () {
        return this.kD
    }, function (a) {
        null !== a && w.G(a, W, Mi, "originalLink");
        this.kD = a
    });
    w.defineProperty(Mi, {Og: "originalFromNode"}, function () {
        return this.iD
    }, function (a) {
        null !== a && w.G(a, T, Mi, "originalFromNode");
        this.iD = a
    });
    w.defineProperty(Mi, {Pg: "originalFromPort"}, function () {
        return this.jD
    }, function (a) {
        null !== a && w.G(a, G, Mi, "originalFromPort");
        this.jD = a
    });
    w.defineProperty(Mi, {Qg: "originalToNode"}, function () {
        return this.nD
    }, function (a) {
        null !== a && w.G(a, T, Mi, "originalToNode");
        this.nD = a
    });
    w.defineProperty(Mi, {Rg: "originalToPort"}, function () {
        return this.oD
    }, function (a) {
        null !== a && w.G(a, G, Mi, "originalToPort");
        this.oD = a
    });
    w.defineProperty(Mi, {Md: "isForwards"}, function () {
        return this.NC
    }, function (a) {
        w.j(a, "boolean", Mi, "isForwards");
        this.NC = a
    });
    w.u(Mi, {ly: "validPortsCache"}, function () {
        return this.SG
    });
    w.defineProperty(Mi, {Cf: "targetPort"}, function () {
        return this.ED
    }, function (a) {
        null !== a && w.G(a, G, Mi, "targetPort");
        this.ED = a
    });
    Mi.prototype.copyPortProperties = function (a, b, c, d, e) {
        if (null !== a && null !== b && null !== c && null !== d) {
            d.Aa = b.Y.size;
            e ? (d.Bb = b.Bb, d.jm = b.jm) : (d.Ab = b.Ab, d.Rl = b.Rl);
            c.zf = Fb;
            var f = w.K();
            c.location = b.Wa(Fb, f);
            w.v(f);
            d.angle = b.xn();
            null !== this.Qx && this.Qx(a, b, c, d, e)
        }
    };
    Mi.prototype.setNoTargetPortProperties = function (a, b, c) {
        null !== b && (b.Aa = od, b.Ab = sb, b.Bb = sb);
        null !== a && null !== this.g && (a.location = this.g.R.ca);
        null !== this.Qx && this.Qx(null, null, a, b, c)
    };
    Mi.prototype.doMouseDown = function () {
        this.sa && this.doMouseMove()
    };
    Mi.prototype.doMouseMove = function () {
        if (this.sa) {
            var a = this.g;
            if (null !== a) {
                this.Cf = this.findTargetPort(this.Md);
                if (null !== this.Cf && this.Cf.U instanceof T) {
                    var b = this.Cf.U;
                    this.Md ? this.copyPortProperties(b, this.Cf, this.Rd, this.$n, !0) : this.copyPortProperties(b, this.Cf, this.Qd, this.Zn, !1)
                } else this.Md ? this.setNoTargetPortProperties(this.Rd, this.$n, !0) : this.setNoTargetPortProperties(this.Qd, this.Zn, !1);
                (a.me || a.ne) && a.bA(a.R.bf)
            }
        }
    };
    Mi.prototype.findValidLinkablePort = function (a, b) {
        if (null === a)return null;
        var c = a.U;
        if (!(c instanceof T))return null;
        for (; null !== a;) {
            var d = b ? a.mG : a.ME;
            if (!0 === d && (null !== a.Pd || a instanceof T) && (b ? this.isValidTo(c, a) : this.isValidFrom(c, a)))return a;
            if (!1 === d)break;
            a = a.O
        }
        return null
    };
    Mi.prototype.findTargetPort = function (a) {
        var b = this.g, c = b.R.ca, d = this.HF;
        0 >= d && (d = .1);
        for (var e = this, f = b.un(c, d, function (b) {
            return e.findValidLinkablePort(b, a)
        }, null, !0), d = Infinity, b = null, f = f.i; f.next();) {
            var h = f.value, k = h.U;
            if (k instanceof T) {
                var l = h.Wa(Fb, w.K()), m = c.x - l.x, n = c.y - l.y;
                w.v(l);
                l = m * m + n * n;
                l < d && (m = this.ly.ka(h), null !== m ? m && (b = h, d = l) : a && this.isValidLink(this.Og, this.Pg, k, h) || !a && this.isValidLink(k, h, this.Qg, this.Rg) ? (this.ly.add(h, !0), b = h, d = l) : this.ly.add(h, !1))
            }
        }
        return null !== b && (c = b.U,
        c instanceof T && (null === c.layer || c.layer.At)) ? b : null
    };
    Mi.prototype.isValidFrom = function (a, b) {
        if (null === a || null === b)return this.dq;
        if (null !== this.g && this.g.Za === this && (null !== a.layer && !a.layer.At || !0 !== b.ME))return !1;
        var c = b.jA;
        if (Infinity > c) {
            if (null !== this.jc && a === this.Og && b === this.Pg)return !0;
            var d = b.Pd;
            null === d && (d = "");
            if (a.ix(d).count >= c)return !1
        }
        return !0
    };
    Mi.prototype.isValidTo = function (a, b) {
        if (null === a || null === b)return this.dq;
        if (null !== this.g && this.g.Za === this && (null !== a.layer && !a.layer.At || !0 !== b.mG))return !1;
        var c = b.KJ;
        if (Infinity > c) {
            if (null !== this.jc && a === this.Qg && b === this.Rg)return !0;
            var d = b.Pd;
            null === d && (d = "");
            if (a.Ig(d).count >= c)return !1
        }
        return !0
    };
    Mi.prototype.isInSameNode = function (a, b) {
        if (null === a || null === b)return !1;
        if (a === b)return !0;
        var c = a.U, d = b.U;
        return null !== c && c === d
    };
    Mi.prototype.isLinked = function (a, b) {
        if (null === a || null === b)return !1;
        var c = a.U;
        if (!(c instanceof T))return !1;
        var d = a.Pd;
        null === d && (d = "");
        var e = b.U;
        if (!(e instanceof T))return !1;
        var f = b.Pd;
        null === f && (f = "");
        for (e = e.Ig(f); e.next();)if (f = e.value, f.W === c && f.Jg === d)return !0;
        return !1
    };
    Mi.prototype.isValidLink = function (a, b, c, d) {
        if (!this.isValidFrom(a, b) || !this.isValidTo(c, d) || !(null === b || null === d || (b.RH && d.JJ || !this.isInSameNode(b, d)) && (b.QH && d.IJ || !this.isLinked(b, d))) || null !== this.jc && (null !== a && this.isLabelDependentOnLink(a, this.jc) || null !== c && this.isLabelDependentOnLink(c, this.jc)) || null !== a && null !== c && (null === a.data && null !== c.data || null !== a.data && null === c.data) || !this.isValidCycle(a, c, this.jc))return !1;
        if (null !== a) {
            var e = a.Gx;
            if (null !== e && !e(a, b, c, d, this.jc))return !1
        }
        if (null !==
            c && (e = c.Gx, null !== e && !e(a, b, c, d, this.jc)))return !1;
        e = this.Gx;
        return null !== e ? e(a, b, c, d, this.jc) : !0
    };
    Mi.prototype.isLabelDependentOnLink = function (a, b) {
        if (null === a)return !1;
        var c = a.Lc;
        if (null === c)return !1;
        if (c === b)return !0;
        var d = new J(T);
        d.add(a);
        return Ni(this, c, b, d)
    };
    function Ni(a, b, c, d) {
        if (b === c)return !0;
        var e = b.W;
        if (null !== e && e.lf && (d.add(e), Ni(a, e.Lc, c, d)))return !0;
        b = b.$;
        return null !== b && b.lf && (d.add(b), Ni(a, b.Lc, c, d)) ? !0 : !1
    }

    Mi.prototype.isValidCycle = function (a, b, c) {
        void 0 === c && (c = null);
        if (null === a || null === b)return this.dq;
        var d = null !== this.g ? this.g.QJ : Oi;
        if (d !== Oi) {
            if (d === Pi) {
                if (null !== c && !c.Kc)return !0;
                for (d = b.fe; d.next();) {
                    var e = d.value;
                    if (e !== c && e.Kc && e.$ === b)return !1
                }
                return !Qi(this, a, b, c, !0)
            }
            if (d === Ri) {
                if (null !== c && !c.Kc)return !0;
                for (d = a.fe; d.next();)if (e = d.value, e !== c && e.Kc && e.W === a)return !1;
                return !Qi(this, a, b, c, !0)
            }
            if (d === Si)return a === b ? a = !0 : (d = new J(T), d.add(b), a = Ti(this, d, a, b, c)), !a;
            if (d === Ui)return !Qi(this,
                a, b, c, !1);
            if (d === Vi)return a === b ? a = !0 : (d = new J(T), d.add(b), a = Wi(this, d, a, b, c)), !a
        }
        return !0
    };
    function Qi(a, b, c, d, e) {
        if (b === c)return !0;
        if (null === b || null === c)return !1;
        for (var f = b.fe; f.next();) {
            var h = f.value;
            if (h !== d && (!e || h.Kc) && h.$ === b && (h = h.W, h !== b && Qi(a, h, c, d, e)))return !0
        }
        return !1
    }

    function Ti(a, b, c, d, e) {
        if (c === d)return !0;
        if (null === c || null === d || b.contains(c))return !1;
        b.add(c);
        for (var f = c.fe; f.next();) {
            var h = f.value;
            if (h !== e && h.$ === c && (h = h.W, h !== c && Ti(a, b, h, d, e)))return !0
        }
        return !1
    }

    function Wi(a, b, c, d, e) {
        if (c === d)return !0;
        if (null === c || null === d || b.contains(c))return !1;
        b.add(c);
        for (var f = c.fe; f.next();) {
            var h = f.value;
            if (h !== e) {
                var k = h.W, h = h.$, k = k === c ? h : k;
                if (k !== c && Wi(a, b, k, d, e))return !0
            }
        }
        return !1
    }

    w.defineProperty(Mi, {Gx: "linkValidation"}, function () {
        return this.ml
    }, function (a) {
        null !== a && w.j(a, "function", Mi, "linkValidation");
        this.ml = a
    });
    w.defineProperty(Mi, {Qx: "portTargeted"}, function () {
        return this.rD
    }, function (a) {
        null !== a && w.j(a, "function", Mi, "portTargeted");
        this.rD = a
    });
    function Xi() {
        0 < arguments.length && w.hd(Xi);
        Mi.call(this);
        this.name = "Linking";
        this.NB = {};
        this.MB = null;
        this.aa = Yi;
        this.zD = null
    }

    w.La(Xi, Mi);
    w.fa("LinkingTool", Xi);
    var Yi;
    Xi.Either = Yi = w.p(Xi, "Either", 0);
    var Zi;
    Xi.ForwardsOnly = Zi = w.p(Xi, "ForwardsOnly", 0);
    var $i;
    Xi.BackwardsOnly = $i = w.p(Xi, "BackwardsOnly", 0);
    w.defineProperty(Xi, {dH: "archetypeLinkData"}, function () {
        return this.NB
    }, function (a) {
        null !== a && w.G(a, Object, Xi, "archetypeLinkData");
        a instanceof G && w.G(a, W, Xi, "archetypeLinkData");
        this.NB = a
    });
    w.defineProperty(Xi, {hE: "archetypeLabelNodeData"}, function () {
        return this.MB
    }, function (a) {
        null !== a && w.G(a, Object, Xi, "archetypeLabelNodeData");
        a instanceof G && w.G(a, T, Xi, "archetypeLabelNodeData");
        this.MB = a
    });
    w.defineProperty(Xi, {direction: "direction"}, function () {
        return this.aa
    }, function (a) {
        w.mb(a, Xi, Xi, "direction");
        this.aa = a
    });
    w.defineProperty(Xi, {hG: "startObject"}, function () {
        return this.zD
    }, function (a) {
        null !== a && w.G(a, G, Xi, "startObject");
        this.zD = a
    });
    Xi.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.cb || a.xf || !a.At)return !1;
        var b = a.ba;
        return (b instanceof P || b instanceof Zf) && a.R.left && (a.Za === this || this.isBeyondDragSize()) ? null !== this.findLinkablePort() : !1
    };
    Xi.prototype.findLinkablePort = function () {
        var a = this.g;
        if (null === a)return null;
        var b = this.hG;
        null === b && (b = a.Je(a.zc.ca, null, null));
        if (null === b || !(b.U instanceof T))return null;
        a = this.direction;
        if (a === Yi || a === Zi) {
            var c = this.findValidLinkablePort(b, !1);
            if (null !== c)return this.Md = !0, c
        }
        if (a === Yi || a === $i)if (c = this.findValidLinkablePort(b, !0), null !== c)return this.Md = !1, c;
        return null
    };
    Xi.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a) {
            var b = this.findLinkablePort();
            null !== b && (this.Tb(this.name), a.$e = !0, a.bc = "pointer", this.Md ? (null === this.Rd || this.Rd.location.H() || (this.Rd.location = a.R.ca), this.Pg = b, b = this.Pg.U, b instanceof T && (this.Og = b), this.copyPortProperties(this.Og, this.Pg, this.Qd, this.Zn, !1)) : (null === this.Qd || this.Qd.location.H() || (this.Qd.location = a.R.ca), this.Rg = b, b = this.Rg.U, b instanceof T && (this.Qg = b), this.copyPortProperties(this.Qg, this.Rg, this.Rd, this.$n, !0)),
                a.add(this.Qd), a.add(this.Rd), null !== this.Wg && (null !== this.Qd && (this.Wg.W = this.Qd), null !== this.Rd && (this.Wg.$ = this.Rd), this.Wg.Xb(), a.add(this.Wg)), this.sa = !0)
        }
    };
    Xi.prototype.doDeactivate = function () {
        this.sa = !1;
        var a = this.g;
        null !== a && (a.remove(this.Wg), a.remove(this.Qd), a.remove(this.Rd), a.$e = !1, a.bc = "", this.Jk())
    };
    Xi.prototype.doStop = function () {
        Mi.prototype.doStop.call(this);
        this.hG = null
    };
    Xi.prototype.doMouseUp = function () {
        if (this.sa) {
            var a = this.g;
            if (null === a)return;
            var b = this.Ff = null, c = null, d = null, e = null, f = this.Cf = this.findTargetPort(this.Md);
            if (null !== f) {
                var h = f.U;
                h instanceof T && (this.Md ? (null !== this.Og && (b = this.Og, c = this.Pg), d = h, e = f) : (b = h, c = f, null !== this.Qg && (d = this.Qg, e = this.Rg)))
            } else this.Md ? null !== this.Og && this.dq && (b = this.Og, c = this.Pg) : null !== this.Qg && this.dq && (d = this.Qg, e = this.Rg);
            null !== b || null !== d ? (h = this.insertLink(b, c, d, e), null !== h ? (null === f && (this.Md ? h.Pp = a.R.ca : h.Op =
                a.R.ca), a.tf && a.select(h), this.Ff = this.name, a.Ba("LinkDrawn", h)) : (a.ba.lE(), this.doNoLink(b, c, d, e))) : this.Md ? this.doNoLink(this.Og, this.Pg, null, null) : this.doNoLink(null, null, this.Qg, this.Rg)
        }
        this.stopTool()
    };
    Xi.prototype.insertLink = function (a, b, c, d) {
        var e = this.g;
        if (null === e)return null;
        var f = e.ba;
        if (f instanceof Zf) {
            var h = a;
            b = c;
            e.Od || (h = c, b = a);
            if (null !== h && null !== b)return f.oi(b.data, f.ub(h.data)), b.vn()
        } else if (f instanceof P)if (h = "", null !== a && (null === b && (b = a), h = b.Pd, null === h && (h = "")), b = "", null !== c && (null === d && (d = c), b = d.Pd, null === b && (b = "")), d = this.dH, d instanceof W) {
            if (fh(d), f = d.copy(), null !== f)return f.W = a, f.Jg = h, f.$ = c, f.Eh = b, e.add(f), a = this.hE, a instanceof T && (fh(a), a = a.copy(), null !== a && (a.Lc = f, e.add(a))),
                f
        } else if (null !== d && (d = f.Uw(d), w.Qa(d)))return null !== a && f.$A(d, f.ub(a.data)), f.aB(d, h), null !== c && f.fB(d, f.ub(c.data)), f.gB(d, b), f.vt(d), a = this.hE, null === a || a instanceof T || (a = f.copyNodeData(a), w.Qa(a) && (f.Al(a), a = f.ub(a), void 0 !== a && f.cE(d, a))), f = e.Qf(d);
        return null
    };
    Xi.prototype.doNoLink = function () {
    };
    function Lh() {
        0 < arguments.length && w.hd(Lh);
        Mi.call(this);
        this.name = "Relinking";
        var a = new X;
        a.Cb = "Diamond";
        a.Aa = zd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Me = 0;
        this.AC = a;
        a = new X;
        a.Cb = "Diamond";
        a.Aa = zd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Me = -1;
        this.ND = a;
        this.ec = null;
        this.lD = new A
    }

    w.La(Lh, Mi);
    w.fa("RelinkingTool", Lh);
    Lh.prototype.updateAdornments = function (a) {
        if (null !== a && a instanceof W) {
            var b = "RelinkFrom", c = null;
            if (a.eb && null !== this.g && !this.g.cb) {
                var d = a.Eu;
                null !== d && a.canRelinkFrom() && a.Y.H() && a.isVisible() && d.Y.H() && d.vj() && (c = a.Tp(b), null === c && (c = this.makeAdornment(d, !1), a.zl(b, c)))
            }
            null === c && a.Aj(b);
            b = "RelinkTo";
            c = null;
            a.eb && null !== this.g && !this.g.cb && (d = a.Eu, null !== d && a.canRelinkTo() && a.Y.H() && a.isVisible() && d.Y.H() && d.vj() && (c = a.Tp(b), null === c && (c = this.makeAdornment(d, !0), a.zl(b, c))));
            null === c && a.Aj(b)
        }
    };
    Lh.prototype.makeAdornment = function (a, b) {
        var c = new dh;
        c.type = aj;
        var d = b ? this.HJ : this.PH;
        null !== d && c.add(d.copy());
        c.qb = a;
        return c
    };
    w.defineProperty(Lh, {PH: "fromHandleArchetype"}, function () {
        return this.AC
    }, function (a) {
        null !== a && w.G(a, G, Lh, "fromHandleArchetype");
        this.AC = a
    });
    w.defineProperty(Lh, {HJ: "toHandleArchetype"}, function () {
        return this.ND
    }, function (a) {
        null !== a && w.G(a, G, Lh, "toHandleArchetype");
        this.ND = a
    });
    w.u(Lh, {handle: "handle"}, function () {
        return this.ec
    });
    Lh.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.cb || a.xf || !a.hn)return !1;
        var b = a.ba;
        if (!(b instanceof P || b instanceof Zf) || !a.R.left)return !1;
        b = this.findToolHandleAt(a.zc.ca, "RelinkFrom");
        null === b && (b = this.findToolHandleAt(a.zc.ca, "RelinkTo"));
        return null !== b
    };
    Lh.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a) {
            if (null === this.jc) {
                var b = this.findToolHandleAt(a.zc.ca, "RelinkFrom");
                null === b && (b = this.findToolHandleAt(a.zc.ca, "RelinkTo"));
                if (null === b)return;
                var c = b.U;
                if (!(c instanceof dh && c.Nf instanceof W))return;
                this.ec = b;
                this.Md = null === c || "RelinkTo" === c.rd;
                this.jc = c.Nf
            }
            this.Tb(this.name);
            a.$e = !0;
            a.bc = "pointer";
            this.Pg = this.jc.ed;
            this.Og = this.jc.W;
            this.Rg = this.jc.Sd;
            this.Qg = this.jc.$;
            this.lD.set(this.jc.Y);
            null !== this.jc && 0 < this.jc.qa && (null === this.jc.W &&
            (null !== this.Zn && (this.Zn.Aa = nd), null !== this.Qd && (this.Qd.location = this.jc.m(0))), null === this.jc.$ && (null !== this.$n && (this.$n.Aa = nd), null !== this.Rd && (this.Rd.location = this.jc.m(this.jc.qa - 1))));
            this.copyPortProperties(this.Og, this.Pg, this.Qd, this.Zn, !1);
            this.copyPortProperties(this.Qg, this.Rg, this.Rd, this.$n, !0);
            a.add(this.Qd);
            a.add(this.Rd);
            null !== this.Wg && (null !== this.Qd && (this.Wg.W = this.Qd), null !== this.Rd && (this.Wg.$ = this.Rd), this.copyLinkProperties(this.jc, this.Wg), this.Wg.Xb(), a.add(this.Wg));
            this.sa = !0
        }
    };
    Lh.prototype.copyLinkProperties = function (a, b) {
        if (null !== a && null !== b) {
            b.xt = a.xt;
            b.Yz = a.Yz;
            var c = a.Ye;
            if (c === bj || c === cj)c = dj;
            b.Ye = c;
            b.Xw = a.Xw;
            b.Zx = a.Zx;
            b.wq = a.wq;
            b.Ab = a.Ab;
            b.Rl = a.Rl;
            b.St = a.St;
            b.Tt = a.Tt;
            b.Bb = a.Bb;
            b.jm = a.jm;
            b.Lu = a.Lu;
            b.Mu = a.Mu
        }
    };
    Lh.prototype.doDeactivate = function () {
        this.sa = !1;
        var a = this.g;
        null !== a && (a.remove(this.Wg), a.remove(this.Qd), a.remove(this.Rd), a.$e = !1, a.bc = "", this.Jk())
    };
    Lh.prototype.doStop = function () {
        Mi.prototype.doStop.call(this);
        this.ec = null
    };
    Lh.prototype.doMouseUp = function () {
        if (this.sa) {
            var a = this.g;
            if (null === a)return;
            this.Ff = null;
            var b = this.Og, c = this.Pg, d = this.Qg, e = this.Rg, f = this.jc;
            this.Cf = this.findTargetPort(this.Md);
            if (null !== this.Cf) {
                var h = this.Cf.U;
                h instanceof T && (this.Md ? (d = h, e = this.Cf) : (b = h, c = this.Cf))
            } else this.dq ? this.Md ? e = d = null : c = b = null : f = null;
            null !== f ? (this.reconnectLink(f, this.Md ? d : b, this.Md ? e : c, this.Md), null === this.Cf && (this.Md ? f.Pp = a.R.ca : f.Op = a.R.ca, f.Xb()), a.tf && (f.eb = !0), this.Ff = this.name, a.Ba("LinkRelinked", f, this.Md ?
                this.Rg : this.Pg)) : this.doNoRelink(this.jc, this.Md);
            ej(this.jc, this.lD)
        }
        this.stopTool()
    };
    Lh.prototype.reconnectLink = function (a, b, c, d) {
        if (null === this.g)return !1;
        c = null !== c && null !== c.Pd ? c.Pd : "";
        d ? (a.$ = b, a.Eh = c) : (a.W = b, a.Jg = c);
        return !0
    };
    Lh.prototype.doNoRelink = function () {
    };
    function Hi(a, b, c, d, e) {
        null !== a.g && (null !== b ? (a.copyPortProperties(b, c, a.Qd, a.Zn, !1), a.g.add(a.Qd)) : a.g.remove(a.Qd), null !== d ? (a.copyPortProperties(d, e, a.Rd, a.$n, !0), a.g.add(a.Rd)) : a.g.remove(a.Rd))
    }

    function fj() {
        0 < arguments.length && w.hd(fj);
        ng.call(this);
        this.name = "LinkReshaping";
        var a = new X;
        a.Cb = "Rectangle";
        a.Aa = yd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.bl = a;
        a = new X;
        a.Cb = "Diamond";
        a.Aa = yd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.YC = a;
        this.sD = 3;
        this.Ay = this.ec = null;
        this.fp = new z;
        this.fw = null
    }

    w.La(fj, ng);
    w.fa("LinkReshapingTool", fj);
    var gj;
    fj.None = gj = w.p(fj, "None", 0);
    var hj;
    fj.Horizontal = hj = w.p(fj, "Horizontal", 1);
    var ij;
    fj.Vertical = ij = w.p(fj, "Vertical", 2);
    var rj;
    fj.All = rj = w.p(fj, "All", 3);
    fj.prototype.getReshapingBehavior = fj.prototype.QE = function (a) {
        return a && a.rz ? a.rz : gj
    };
    fj.prototype.setReshapingBehavior = fj.prototype.Gu = function (a, b) {
        w.G(a, G, fj, "setReshapingBehavior:obj");
        w.mb(b, fj, fj, "setReshapingBehavior:behavior");
        a.rz = b
    };
    fj.prototype.updateAdornments = function (a) {
        if (null !== a && a instanceof W) {
            if (a.eb && null !== this.g && !this.g.cb) {
                var b = a.path;
                if (null !== b && a.canReshape() && a.Y.H() && a.isVisible() && b.Y.H() && b.vj()) {
                    var c = a.Tp(this.name);
                    if (null === c || c.fD !== a.qa || c.WD !== a.Au)c = this.makeAdornment(b), null !== c && (c.fD = a.qa, c.WD = a.Au, a.zl(this.name, c));
                    if (null !== c) {
                        c.location = a.position;
                        return
                    }
                }
            }
            a.Aj(this.name)
        }
    };
    fj.prototype.makeAdornment = function (a) {
        var b = a.U, c = b.qa, d = b.ic, e = null;
        if (null !== b.points && 1 < c) {
            e = new dh;
            e.type = aj;
            var c = b.Ot, f = b.Cx, h = d ? 1 : 0;
            if (b.Au && b.Ye !== sj)for (var k = c + h; k < f - h; k++) {
                var l = this.makeResegmentHandle(a, k);
                null !== l && (l.Me = k, l.XA = .5, l.jA = 999, e.add(l))
            }
            for (k = c + 1; k < f; k++)if (l = this.makeHandle(a, k), null !== l) {
                l.Me = k;
                if (k !== c)if (k === c + 1 && d) {
                    var h = b.m(c), m = b.m(c + 1);
                    K(h.x, m.x) && K(h.y, m.y) && (m = b.m(c - 1));
                    K(h.x, m.x) ? (this.Gu(l, ij), l.cursor = "n-resize") : K(h.y, m.y) && (this.Gu(l, hj), l.cursor = "w-resize")
                } else k ===
                f - 1 && d ? (h = b.m(f - 1), m = b.m(f), K(h.x, m.x) && K(h.y, m.y) && (h = b.m(f + 1)), K(h.x, m.x) ? (this.Gu(l, ij), l.cursor = "n-resize") : K(h.y, m.y) && (this.Gu(l, hj), l.cursor = "w-resize")) : k !== f && (this.Gu(l, rj), l.cursor = "move");
                e.add(l)
            }
            e.qb = a
        }
        return e
    };
    fj.prototype.makeHandle = function () {
        var a = this.Vt;
        return null === a ? null : a.copy()
    };
    w.defineProperty(fj, {Vt: "handleArchetype"}, function () {
        return this.bl
    }, function (a) {
        null !== a && w.G(a, G, fj, "handleArchetype");
        this.bl = a
    });
    fj.prototype.makeResegmentHandle = function () {
        var a = this.QI;
        return null === a ? null : a.copy()
    };
    w.defineProperty(fj, {QI: "midHandleArchetype"}, function () {
        return this.YC
    }, function (a) {
        null !== a && w.G(a, G, fj, "midHandleArchetype");
        this.YC = a
    });
    w.u(fj, {handle: "handle"}, function () {
        return this.ec
    });
    w.u(fj, {yt: "adornedLink"}, function () {
        return this.Ay
    });
    fj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null !== a && !a.cb && a.Mw && a.R.left ? null !== this.findToolHandleAt(a.zc.ca, this.name) : !1
    };
    fj.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a && (this.ec = this.findToolHandleAt(a.zc.ca, this.name), null !== this.ec)) {
            var b = this.ec.U.Nf;
            if (b instanceof W) {
                this.Ay = b;
                a.$e = !0;
                this.Tb(this.name);
                if (b.Au && 999 === this.ec.jA) {
                    var c = b.points.copy(), d = this.ec.Wa(Fb);
                    c.Ld(this.ec.Me + 1, d);
                    b.ic && c.Ld(this.ec.Me + 1, d);
                    b.points = c;
                    b.ce();
                    this.ec = this.findToolHandleAt(a.zc.ca, this.name);
                    if (null === this.ec) {
                        this.doDeactivate();
                        return
                    }
                }
                this.fp = b.m(this.ec.Me);
                this.fw = b.points.copy();
                this.sa = !0
            }
        }
    };
    fj.prototype.doDeactivate = function () {
        this.Jk();
        this.Ay = this.ec = null;
        var a = this.g;
        null !== a && (a.$e = !1);
        this.sa = !1
    };
    fj.prototype.doCancel = function () {
        var a = this.yt;
        null !== a && (a.points = this.fw);
        this.stopTool()
    };
    fj.prototype.doMouseMove = function () {
        var a = this.g;
        this.sa && null !== a && (a = this.computeReshape(a.R.ca), this.reshape(a))
    };
    fj.prototype.doMouseUp = function () {
        var a = this.g;
        if (this.sa && null !== a) {
            var b = this.computeReshape(a.R.ca);
            this.reshape(b);
            b = this.yt;
            if (null !== b && b.Au) {
                var c = this.handle.Me, d = b.m(c - 1), e = b.m(c), f = b.m(c + 1);
                if (b.ic) {
                    if (c > b.Ot + 1 && c < b.Cx - 1) {
                        var h = b.m(c - 2);
                        if (Math.abs(d.x - e.x) < this.Ch && Math.abs(d.y - e.y) < this.Ch && (tj(this, h, d, e, f, !0) || tj(this, h, d, e, f, !1))) {
                            var k = b.points.copy();
                            tj(this, h, d, e, f, !0) ? (k.fg(c - 2, new z(h.x, (f.y + h.y) / 2)), k.fg(c + 1, new z(f.x, (f.y + h.y) / 2))) : (k.fg(c - 2, new z((f.x + h.x) / 2, h.y)), k.fg(c + 1,
                                new z((f.x + h.x) / 2, f.y)));
                            k.Xc(c);
                            k.Xc(c - 1);
                            b.points = k;
                            b.ce()
                        } else h = b.m(c + 2), Math.abs(e.x - f.x) < this.Ch && Math.abs(e.y - f.y) < this.Ch && (tj(this, d, e, f, h, !0) || tj(this, d, e, f, h, !1)) && (k = b.points.copy(), tj(this, d, e, f, h, !0) ? (k.fg(c - 1, new z(d.x, (d.y + h.y) / 2)), k.fg(c + 2, new z(h.x, (d.y + h.y) / 2))) : (k.fg(c - 1, new z((d.x + h.x) / 2, d.y)), k.fg(c + 2, new z((d.x + h.x) / 2, h.y))), k.Xc(c + 1), k.Xc(c), b.points = k, b.ce())
                    }
                } else h = w.K(), Ia(d.x, d.y, f.x, f.y, e.x, e.y, h) && h.uf(e) < this.Ch * this.Ch && (k = b.points.copy(), k.Xc(c), b.points = k, b.ce()),
                    w.v(h)
            }
            a.qc();
            this.Ff = this.name;
            a.Ba("LinkReshaped", this.yt, this.fw)
        }
        this.stopTool()
    };
    function tj(a, b, c, d, e, f) {
        return f ? Math.abs(b.y - c.y) < a.Ch && Math.abs(c.y - d.y) < a.Ch && Math.abs(d.y - e.y) < a.Ch : Math.abs(b.x - c.x) < a.Ch && Math.abs(c.x - d.x) < a.Ch && Math.abs(d.x - e.x) < a.Ch
    }

    w.defineProperty(fj, {Ch: "resegmentingDistance"}, function () {
        return this.sD
    }, function (a) {
        w.j(a, "number", fj, "resegmentingDistance");
        this.sD = a
    });
    fj.prototype.reshape = function (a) {
        var b = this.yt;
        b.fm();
        var c = this.handle.Me, d = this.QE(this.handle);
        if (b.ic)if (c === b.Ot + 1)c = b.Ot + 1, d === ij ? (b.ea(c, b.m(c - 1).x, a.y), b.ea(c + 1, b.m(c + 2).x, a.y)) : d === hj && (b.ea(c, a.x, b.m(c - 1).y), b.ea(c + 1, a.x, b.m(c + 2).y)); else if (c === b.Cx - 1)c = b.Cx - 1, d === ij ? (b.ea(c - 1, b.m(c - 2).x, a.y), b.ea(c, b.m(c + 1).x, a.y)) : d === hj && (b.ea(c - 1, a.x, b.m(c - 2).y), b.ea(c, a.x, b.m(c + 1).y)); else {
            var d = c, e = b.m(d), f = b.m(d - 1), h = b.m(d + 1);
            K(f.x, e.x) && K(e.y, h.y) ? (K(f.x, b.m(d - 2).x) && !K(f.y, b.m(d - 2).y) ? (b.w(d, a.x,
                f.y), c++, d++) : b.ea(d - 1, a.x, f.y), K(h.y, b.m(d + 2).y) && !K(h.x, b.m(d + 2).x) ? b.w(d + 1, h.x, a.y) : b.ea(d + 1, h.x, a.y)) : K(f.y, e.y) && K(e.x, h.x) ? (K(f.y, b.m(d - 2).y) && !K(f.x, b.m(d - 2).x) ? (b.w(d, f.x, a.y), c++, d++) : b.ea(d - 1, f.x, a.y), K(h.x, b.m(d + 2).x) && !K(h.y, b.m(d + 2).y) ? b.w(d + 1, a.x, h.y) : b.ea(d + 1, a.x, h.y)) : K(f.x, e.x) && K(e.x, h.x) ? (K(f.x, b.m(d - 2).x) && !K(f.y, b.m(d - 2).y) ? (b.w(d, a.x, f.y), c++, d++) : b.ea(d - 1, a.x, f.y), K(h.x, b.m(d + 2).x) && !K(h.y, b.m(d + 2).y) ? b.w(d + 1, a.x, h.y) : b.ea(d + 1, a.x, h.y)) : K(f.y, e.y) && K(e.y, h.y) && (K(f.y, b.m(d -
                2).y) && !K(f.x, b.m(d - 2).x) ? (b.w(d, f.x, a.y), c++, d++) : b.ea(d - 1, f.x, a.y), K(h.y, b.m(d + 2).y) && !K(h.x, b.m(d + 2).x) ? b.w(d + 1, h.x, a.y) : b.ea(d + 1, h.x, a.y));
            b.ea(c, a.x, a.y)
        } else b.ea(c, a.x, a.y), 1 === c && b.computeSpot(!0).Nd() && (e = b.W, f = b.ed, null === e || e.isVisible() || (e = e.findVisibleNode(), e !== b.W && (f = e.Ol(""))), d = f.Wa(Fb, w.K()), e = b.getLinkPointFromPoint(e, f, d, a, !0, w.K()), b.ea(0, e.x, e.y), w.v(d), w.v(e)), c === b.qa - 2 && b.computeSpot(!1).Nd() && (c = b.$, e = b.Sd, null === c || c.isVisible() || (c = c.findVisibleNode(), c !== b.$ && (e = c.Ol(""))),
            d = e.Wa(Fb, w.K()), e = b.getLinkPointFromPoint(c, e, d, a, !1, w.K()), b.ea(b.qa - 1, e.x, e.y), w.v(d), w.v(e));
        b.ij()
    };
    fj.prototype.computeReshape = function (a) {
        var b = this.yt, c = this.handle.Me;
        switch (this.QE(this.handle)) {
            case rj:
                return a;
            case ij:
                return b = b.m(c), new z(b.x, a.y);
            case hj:
                return b = b.m(c), new z(a.x, b.y);
            default:
            case gj:
                return b.m(c)
        }
    };
    w.u(fj, {rL: "originalPoint"}, function () {
        return this.fp
    });
    w.u(fj, {sL: "originalPoints"}, function () {
        return this.fw
    });
    function uj() {
        0 < arguments.length && w.hd(uj);
        ng.call(this);
        this.name = "Resizing";
        this.Vh = (new ha(1, 1)).freeze();
        this.Uh = (new ha(9999, 9999)).freeze();
        this.Jj = (new ha(NaN, NaN)).freeze();
        this.Jr = !1;
        this.Dc = null;
        var a = new X;
        a.oh = Fb;
        a.Cb = "Rectangle";
        a.Aa = yd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.kb = 1;
        a.cursor = "pointer";
        this.bl = a;
        this.ec = null;
        this.fp = new z;
        this.hD = new ha;
        this.mD = new z;
        this.Wy = new ha(0, 0);
        this.Vy = new ha(Infinity, Infinity);
        this.Uy = new ha(1, 1);
        this.eD = !0
    }

    w.La(uj, ng);
    w.fa("ResizingTool", uj);
    uj.prototype.updateAdornments = function (a) {
        if (!(null === a || a instanceof W)) {
            if (a.eb && null !== this.g && !this.g.cb) {
                var b = a.SF;
                if (null !== b && a.canResize() && a.Y.H() && a.isVisible() && b.Y.H() && b.vj()) {
                    var c = a.Tp(this.name);
                    if (null === c || c.qb !== b)c = this.makeAdornment(b);
                    if (null !== c) {
                        var d = b.xn();
                        c.angle = d;
                        var e = b.Wa(c.zf, w.K()), f = b.nj();
                        c.location = e;
                        w.v(e);
                        e = c.placeholder;
                        if (null !== e) {
                            var b = b.Ia, h = w.im();
                            h.l(b.width * f, b.height * f);
                            e.Aa = h;
                            w.zk(h)
                        }
                        this.updateResizeHandles(c, d);
                        a.zl(this.name, c);
                        return
                    }
                }
            }
            a.Aj(this.name)
        }
    };
    uj.prototype.makeAdornment = function (a) {
        var b = null, b = a.U.RF;
        if (null === b) {
            b = new dh;
            b.type = Gj;
            b.zf = Fb;
            var c = new Hj;
            c.Uf = !0;
            b.add(c);
            b.add(this.makeHandle(a, vb));
            b.add(this.makeHandle(a, Ab));
            b.add(this.makeHandle(a, Kb));
            b.add(this.makeHandle(a, Ib));
            b.add(this.makeHandle(a, Dc));
            b.add(this.makeHandle(a, Fc));
            b.add(this.makeHandle(a, Gc));
            b.add(this.makeHandle(a, Ec))
        } else if (fh(b), b = b.copy(), null === b)return null;
        b.qb = a;
        return b
    };
    uj.prototype.makeHandle = function (a, b) {
        var c = this.Vt;
        if (null === c)return null;
        c = c.copy();
        c.alignment = b;
        return c
    };
    uj.prototype.updateResizeHandles = function (a, b) {
        if (null !== a)if (!a.alignment.Uc() && ("pointer" === a.cursor || 0 < a.cursor.indexOf("resize")))a:{
            var c = a.alignment;
            c.Nd() && (c = Fb);
            var d = b;
            if (0 >= c.x)d = 0 >= c.y ? d + 225 : 1 <= c.y ? d + 135 : d + 180; else if (1 <= c.x)0 >= c.y ? d += 315 : 1 <= c.y && (d += 45); else if (0 >= c.y)d += 270; else if (1 <= c.y)d += 90; else break a;
            0 > d ? d += 360 : 360 <= d && (d -= 360);
            a.cursor = 22.5 > d ? "e-resize" : 67.5 > d ? "se-resize" : 112.5 > d ? "s-resize" : 157.5 > d ? "sw-resize" : 202.5 > d ? "w-resize" : 247.5 > d ? "nw-resize" : 292.5 > d ? "n-resize" : 337.5 > d ?
                "ne-resize" : "e-resize"
        } else if (a instanceof C)for (c = a.elements; c.next();)this.updateResizeHandles(c.value, b)
    };
    w.defineProperty(uj, {Vt: "handleArchetype"}, function () {
        return this.bl
    }, function (a) {
        null !== a && w.G(a, G, uj, "handleArchetype");
        this.bl = a
    });
    w.u(uj, {handle: "handle"}, function () {
        return this.ec
    });
    w.defineProperty(uj, {qb: "adornedObject"}, function () {
        return this.Dc
    }, function (a) {
        null !== a && w.G(a, G, uj, "adornedObject");
        this.Dc = a
    });
    uj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null !== a && !a.cb && a.Bt && a.R.left ? null !== this.findToolHandleAt(a.zc.ca, this.name) : !1
    };
    uj.prototype.doActivate = function () {
        var a = this.g;
        null !== a && (this.ec = this.findToolHandleAt(a.zc.ca, this.name), null !== this.ec && (this.Dc = this.ec.U.qb, this.fp.set(this.qb.Wa(this.handle.alignment.CF())), this.mD.set(this.Dc.U.location), this.hD.set(this.Dc.Aa), this.Uy = this.computeCellSize(), this.Wy = this.computeMinSize(), this.Vy = this.computeMaxSize(), a.$e = !0, this.eD = a.Pa.isEnabled, a.Pa.isEnabled = !1, this.Tb(this.name), this.sa = !0))
    };
    uj.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (this.Jk(), this.Dc = this.ec = null, this.sa = a.$e = !1, a.Pa.isEnabled = this.eD)
    };
    uj.prototype.doCancel = function () {
        null !== this.qb && (this.qb.Aa = this.DF, this.qb.U.location = this.$I);
        this.stopTool()
    };
    uj.prototype.doMouseMove = function () {
        var a = this.g;
        if (this.sa && null !== a) {
            var b = this.Wy, c = this.Vy, d = this.Uy, e = this.qb.OE(a.R.ca, w.K()), f = this.computeReshape(), b = this.computeResize(e, this.handle.alignment, b, c, d, f);
            this.resize(b);
            a.Yf();
            w.v(e)
        }
    };
    uj.prototype.doMouseUp = function () {
        var a = this.g;
        if (this.sa && null !== a) {
            var b = this.Wy, c = this.Vy, d = this.Uy, e = this.qb.OE(a.R.ca, w.K()), f = this.computeReshape(), b = this.computeResize(e, this.handle.alignment, b, c, d, f);
            this.resize(b);
            w.v(e);
            a.qc();
            this.Ff = this.name;
            a.Ba("PartResized", this.qb, this.DF)
        }
        this.stopTool()
    };
    uj.prototype.resize = function (a) {
        if (null !== this.g) {
            var b = this.qb, c = b.U;
            b.Aa = a.size;
            c.Ze();
            a = this.qb.Wa(this.handle.alignment.CF());
            c instanceof U ? (a = c.position.copy().Yn(a).add(this.fp), c.move(a)) : c.location = c.location.copy().Yn(a).add(this.fp)
        }
    };
    uj.prototype.computeResize = function (a, b, c, d, e, f) {
        b.Nd() && (b = Fb);
        var h = this.qb.Ia, k = h.x, l = h.y, m = h.x + h.width, n = h.y + h.height, p = 1;
        if (!f) {
            var p = h.width, q = h.height;
            0 >= p && (p = 1);
            0 >= q && (q = 1);
            p = q / p
        }
        q = w.K();
        Ka(a.x, a.y, k, l, e.width, e.height, q);
        a = h.copy();
        0 >= b.x ? 0 >= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = Math.max(n - a.y, c.height), f || (b = a.height / a.width, p < b ? (a.height = p * a.width, a.y = n - a.height) : (a.width =
            a.height / p, a.x = m - a.width))) : 1 <= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), f || (b = a.height / a.width, p < b ? a.height = p * a.width : (a.width = a.height / p, a.x = m - a.width))) : (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = m - a.x, f || (a.height = p * a.width, a.y = l + .5 * (n - l - a.height))) : 1 <= b.x ? 0 >= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height),
            a.height = Math.max(n - a.y, c.height), f || (b = a.height / a.width, p < b ? (a.height = p * a.width, a.y = n - a.height) : a.width = a.height / p)) : 1 <= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), f || (b = a.height / a.width, p < b ? a.height = p * a.width : a.width = a.height / p)) : (a.width = Math.max(Math.min(q.x - k, d.width), c.width), f || (a.height = p * a.width, a.y = l + .5 * (n - l - a.height))) : 0 >= b.y ? (a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = n - a.y, f || (a.width = a.height / p, a.x =
            k + .5 * (m - k - a.width))) : 1 <= b.y && (a.height = Math.max(Math.min(q.y - l, d.height), c.height), f || (a.width = a.height / p, a.x = k + .5 * (m - k - a.width)));
        w.v(q);
        return a
    };
    uj.prototype.computeReshape = function () {
        var a = Ij;
        this.qb instanceof X && (a = Jj(this.qb));
        return !(a === Kj || a === Lj || null !== this.g && this.g.R.shift)
    };
    uj.prototype.computeMinSize = function () {
        var a = this.qb.zh.copy(), b = this.zh;
        !isNaN(b.width) && b.width > a.width && (a.width = b.width);
        !isNaN(b.height) && b.height > a.height && (a.height = b.height);
        return a
    };
    uj.prototype.computeMaxSize = function () {
        var a = this.qb.Af.copy(), b = this.Af;
        !isNaN(b.width) && b.width < a.width && (a.width = b.width);
        !isNaN(b.height) && b.height < a.height && (a.height = b.height);
        return a
    };
    uj.prototype.computeCellSize = function () {
        var a = new ha(NaN, NaN), b = this.qb.U;
        if (null !== b) {
            var c = b.kJ;
            !isNaN(c.width) && 0 < c.width && (a.width = c.width);
            !isNaN(c.height) && 0 < c.height && (a.height = c.height)
        }
        c = this.Hp;
        isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width);
        isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height);
        b = this.g;
        (isNaN(a.width) || isNaN(a.height)) && b && (c = b.ab.re, null !== c && c.vx && (c = c.WE, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) &&
        0 < c.height && (a.height = c.height)), b = b.Bn, null !== b && b.visible && this.vx && (c = b.px, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height)));
        if (isNaN(a.width) || 0 === a.width || Infinity === a.width)a.width = 1;
        if (isNaN(a.height) || 0 === a.height || Infinity === a.height)a.height = 1;
        return a
    };
    w.defineProperty(uj, {zh: "minSize"}, function () {
        return this.Vh
    }, function (a) {
        w.G(a, ha, uj, "minSize");
        if (!this.Vh.L(a)) {
            var b = a.width;
            isNaN(b) && (b = 0);
            a = a.height;
            isNaN(a) && (a = 0);
            this.Vh.l(b, a)
        }
    });
    w.defineProperty(uj, {Af: "maxSize"}, function () {
        return this.Uh
    }, function (a) {
        w.G(a, ha, uj, "maxSize");
        if (!this.Uh.L(a)) {
            var b = a.width;
            isNaN(b) && (b = Infinity);
            a = a.height;
            isNaN(a) && (a = Infinity);
            this.Uh.l(b, a)
        }
    });
    w.defineProperty(uj, {Hp: "cellSize"}, function () {
        return this.Jj
    }, function (a) {
        w.G(a, ha, uj, "cellSize");
        this.Jj.L(a) || this.Jj.assign(a)
    });
    w.defineProperty(uj, {vx: "isGridSnapEnabled"}, function () {
        return this.Jr
    }, function (a) {
        w.j(a, "boolean", uj, "isGridSnapEnabled");
        this.Jr = a
    });
    w.u(uj, {DF: "originalDesiredSize"}, function () {
        return this.hD
    });
    w.u(uj, {$I: "originalLocation"}, function () {
        return this.mD
    });
    function Mj() {
        0 < arguments.length && w.hd(Mj);
        ng.call(this);
        this.name = "Rotating";
        this.xD = 45;
        this.wD = 2;
        this.Dc = null;
        var a = new X;
        a.Cb = "Ellipse";
        a.Aa = zd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.kb = 1;
        a.cursor = "pointer";
        this.bl = a;
        this.ec = null;
        this.ew = 0;
        this.tD = new z
    }

    w.La(Mj, ng);
    w.fa("RotatingTool", Mj);
    Mj.prototype.updateAdornments = function (a) {
        if (!(null === a || a instanceof W)) {
            if (a.eb && null !== this.g && !this.g.cb) {
                var b = a.VF;
                if (null !== b && a.canRotate() && a.Y.H() && a.isVisible() && b.Y.H() && b.vj()) {
                    var c = a.Tp(this.name);
                    if (null === c || c.qb !== b)c = this.makeAdornment(b);
                    if (null !== c) {
                        c.angle = b.xn();
                        var d = null, e = null;
                        b === a || b === a.Xf ? (d = a.Xf, e = a.zf) : (d = b, e = Fb);
                        for (var f = d.Ia, e = w.xb(f.width * e.x + e.offsetX, f.height * e.y + e.offsetY); null !== d && d !== b;)d.transform.nb(e), d = d.O;
                        var d = e.y, f = Math.max(e.x - b.Ia.width, 0), h = w.K();
                        c.location = b.Wa(new L(1, 0, 50 + f, d), h);
                        w.v(h);
                        w.v(e);
                        a.zl(this.name, c);
                        return
                    }
                }
            }
            a.Aj(this.name)
        }
    };
    Mj.prototype.makeAdornment = function (a) {
        var b = null, b = a.U.nJ;
        if (null === b) {
            b = new dh;
            b.type = Nj;
            b.zf = Fb;
            var c = this.Vt;
            null !== c && b.add(c.copy())
        } else if (fh(b), b = b.copy(), null === b)return null;
        b.qb = a;
        return b
    };
    w.defineProperty(Mj, {Vt: "handleArchetype"}, function () {
        return this.bl
    }, function (a) {
        null !== a && w.G(a, G, Mj, "handleArchetype");
        this.bl = a
    });
    w.u(Mj, {handle: "handle"}, function () {
        return this.ec
    });
    w.defineProperty(Mj, {qb: "adornedObject"}, function () {
        return this.Dc
    }, function (a) {
        null !== a && w.G(a, G, Mj, "adornedObject");
        this.Dc = a
    });
    Mj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null !== a && !a.cb && a.Nw && a.R.left ? null !== this.findToolHandleAt(a.zc.ca, this.name) : !1
    };
    Mj.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a && (this.ec = this.findToolHandleAt(a.zc.ca, this.name), null !== this.ec)) {
            this.Dc = this.ec.U.qb;
            var b = this.Dc.U, c = b.Xf;
            this.tD = this.Dc === b || this.Dc === c ? c.Wa(b.zf) : this.Dc.Wa(Fb);
            this.ew = this.Dc.angle;
            a.$e = !0;
            a.$z = !0;
            this.Tb(this.name);
            this.sa = !0
        }
    };
    Mj.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (this.Jk(), this.Dc = this.ec = null, this.sa = a.$e = !1)
    };
    Mj.prototype.doCancel = function () {
        var a = this.g;
        null !== a && (a.$z = !1);
        this.rotate(this.ew);
        this.stopTool()
    };
    Mj.prototype.doMouseMove = function () {
        var a = this.g;
        this.sa && null !== a && (a = this.computeRotate(a.R.ca), this.rotate(a))
    };
    Mj.prototype.doMouseUp = function () {
        var a = this.g;
        if (this.sa && null !== a) {
            a.$z = !1;
            var b = this.computeRotate(a.R.ca);
            this.rotate(b);
            a.qc();
            this.Ff = this.name;
            a.Ba("PartRotated", this.Dc, this.ew)
        }
        this.stopTool()
    };
    Mj.prototype.rotate = function (a) {
        null !== this.Dc && (this.Dc.angle = a)
    };
    Mj.prototype.computeRotate = function (a) {
        a = this.tD.yc(a);
        var b = this.Dc.O;
        null !== b && (a -= b.xn(), 360 <= a ? a -= 360 : 0 > a && (a += 360));
        var b = Math.min(Math.abs(this.AJ), 180), c = Math.min(Math.abs(this.zJ), b / 2);
        (null === this.g || !this.g.R.shift) && 0 < b && 0 < c && (a % b < c ? a = Math.floor(a / b) * b : a % b > b - c && (a = (Math.floor(a / b) + 1) * b));
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        return a
    };
    w.defineProperty(Mj, {AJ: "snapAngleMultiple"}, function () {
        return this.xD
    }, function (a) {
        w.j(a, "number", Mj, "snapAngleMultiple");
        this.xD = a
    });
    w.defineProperty(Mj, {zJ: "snapAngleEpsilon"}, function () {
        return this.wD
    }, function (a) {
        w.j(a, "number", Mj, "snapAngleEpsilon");
        this.wD = a
    });
    w.u(Mj, {qL: "originalAngle"}, function () {
        return this.ew
    });
    function Oj() {
        ng.call(this);
        0 < arguments.length && w.hd(Oj);
        this.name = "ClickSelecting"
    }

    w.La(Oj, ng);
    w.fa("ClickSelectingTool", Oj);
    Oj.prototype.canStart = function () {
        return !this.isEnabled || null === this.g || this.isBeyondDragSize() ? !1 : !0
    };
    Oj.prototype.doMouseUp = function () {
        this.sa && (this.standardMouseSelect(), !this.standardMouseClick() && null !== this.g && this.g.R.tj && this.g.ab.doToolTip());
        this.stopTool()
    };
    function Pj() {
        ng.call(this);
        0 < arguments.length && w.hd(Pj);
        this.name = "Action";
        this.ho = null
    }

    w.La(Pj, ng);
    w.fa("ActionTool", Pj);
    Pj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a)return !1;
        var b = a.R, c = a.Je(b.ca, function (a) {
            for (; null !== a.O && !a.sx;)a = a.O;
            return a
        });
        if (null !== c) {
            if (!c.sx)return !1;
            this.ho = c;
            a.uo = a.Je(b.ca, null, null);
            return !0
        }
        return !1
    };
    Pj.prototype.doMouseDown = function () {
        if (this.sa) {
            var a = this.g.R, b = this.ho;
            null !== b && (a.Pe = b, null !== b.ZD && b.ZD(a, b))
        } else this.canStart() && this.doActivate()
    };
    Pj.prototype.doMouseMove = function () {
        if (this.sa) {
            var a = this.g.R, b = this.ho;
            null !== b && (a.Pe = b, null !== b.$D && b.$D(a, b))
        }
    };
    Pj.prototype.doMouseUp = function () {
        if (this.sa) {
            var a = this.g, b = a.R, c = this.ho;
            if (null === c)return;
            b.Pe = c;
            null !== c.aE && c.aE(b, c);
            this.isBeyondDragSize() || Fh(c, b, a)
        }
        this.stopTool()
    };
    Pj.prototype.doCancel = function () {
        var a = this.g;
        if (null !== a) {
            var a = a.R, b = this.ho;
            if (null === b)return;
            a.Pe = b;
            null !== b.YD && b.YD(a, b)
        }
        this.stopTool()
    };
    Pj.prototype.doStop = function () {
        this.ho = null
    };
    function Qj() {
        ng.call(this);
        0 < arguments.length && w.hd(Qj);
        this.name = "ClickCreating";
        this.pm = null;
        this.LC = !0;
        this.zC = new z(0, 0)
    }

    w.La(Qj, ng);
    w.fa("ClickCreatingTool", Qj);
    Qj.prototype.canStart = function () {
        if (!this.isEnabled || null === this.Oz)return !1;
        var a = this.g;
        if (null === a || a.cb || a.xf || !a.Ep || !a.R.left || this.isBeyondDragSize())return !1;
        if (this.oI) {
            if (1 === a.R.Fe && (this.zC = a.R.bf.copy()), 2 !== a.R.Fe || this.isBeyondDragSize(this.zC))return !1
        } else if (1 !== a.R.Fe)return !1;
        return a.Za !== this && null !== a.Nt(a.R.ca, !0) ? !1 : !0
    };
    Qj.prototype.doMouseUp = function () {
        var a = this.g;
        this.sa && null !== a && this.insertPart(a.R.ca);
        this.stopTool()
    };
    Qj.prototype.insertPart = function (a) {
        var b = this.g;
        if (null === b)return null;
        var c = this.Oz;
        if (null === c)return null;
        this.Tb(this.name);
        var d = null;
        c instanceof S ? c.de() && (fh(c), d = c.copy(), null !== d && b.add(d)) : null !== c && (c = b.ba.copyNodeData(c), w.Qa(c) && (b.ba.Al(c), d = b.vh(c)));
        null !== d && (d.location = a, b.tf && b.select(d));
        b.qc();
        this.Ff = this.name;
        b.Ba("PartCreated", d);
        this.Jk();
        return d
    };
    w.defineProperty(Qj, {Oz: "archetypeNodeData"}, function () {
        return this.pm
    }, function (a) {
        null !== a && w.G(a, Object, Qj, "archetypeNodeData");
        this.pm = a
    });
    w.defineProperty(Qj, {oI: "isDoubleClick"}, function () {
        return this.LC
    }, function (a) {
        w.j(a, "boolean", Qj, "isDoubleClick");
        this.LC = a
    });
    function Rj() {
        this.TD = this.WC = this.cz = this.yz = null
    }

    w.fa("HTMLInfo", Rj);
    w.defineProperty(Rj, {BA: "mainElement"}, function () {
        return this.WC
    }, function (a) {
        null !== a && w.G(a, HTMLElement, Rj, "mainElement");
        this.WC = a
    });
    w.defineProperty(Rj, {show: "show"}, function () {
        return this.yz
    }, function (a) {
        this.yz !== a && (null !== a && w.j(a, "function", Rj, "show"), this.yz = a)
    });
    w.defineProperty(Rj, {Cn: "hide"}, function () {
        return this.cz
    }, function (a) {
        this.cz !== a && (null !== a && w.j(a, "function", Rj, "hide"), this.cz = a)
    });
    w.defineProperty(Rj, {vB: "valueFunction"}, function () {
        return this.TD
    }, function (a) {
        this.TD = a
    });
    function Sj(a, b, c) {
        this.text = a;
        this.nE = b;
        this.visible = c
    }

    function Tj() {
        ng.call(this);
        0 < arguments.length && w.hd(Tj);
        this.name = "ContextMenu";
        this.dC = this.Hy = this.aC = null;
        this.bD = new z;
        this.Jy = this.vm = null;
        var a = this;
        this.Fz = function () {
            a.stopTool()
        };
        Uj(this)
    }

    w.La(Tj, ng);
    w.fa("ContextMenuTool", Tj);
    function Uj(a) {
        var b = new Rj;
        b.show = function (a, b, c) {
            c.showDefaultContextMenu()
        };
        b.Cn = function (a, b) {
            b.hideDefaultContextMenu()
        };
        a.vm = b;
        a.Fz = function () {
            a.stopTool()
        };
        if (!1 === w.uE) {
            var b = w.createElement("div"), c = w.createElement("div");
            b.style.cssText = "top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
            c.style.cssText = "z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";
            var d = w.createElement("style");
            window.document.getElementsByTagName("head")[0].appendChild(d);
            d.sheet.insertRule(".goCXul { list-style: none; }", 0);
            d.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }", 0);
            d.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }", 0);
            b.addEventListener("contextmenu", Vj, !1);
            b.addEventListener("selectstart", Vj, !1);
            c.addEventListener("contextmenu", Vj, !1);
            window.document.body && (window.document.body.appendChild(b), window.document.body.appendChild(c));
            w.Et = b;
            w.Dt = c;
            w.uE = !0
        }
    }

    function Vj(a) {
        a.preventDefault();
        return !1
    }

    Tj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null === a || this.isBeyondDragSize() || !a.R.right ? !1 : null !== this.vm && a.R.tj || null !== this.findObjectWithContextMenu() ? !0 : !1
    };
    Tj.prototype.doStart = function () {
        var a = this.g;
        null !== a && this.bD.set(a.zc.ca)
    };
    Tj.prototype.doStop = function () {
        this.hideContextMenu();
        this.Ww = null
    };
    Tj.prototype.findObjectWithContextMenu = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b)return null;
        var c = b.R, d = null;
        a instanceof D || (d = a instanceof G ? a : b.Je(c.ca, null, function (a) {
            return !a.layer.Jc
        }));
        if (null !== d) {
            for (a = d; null !== a;) {
                if (null !== a.contextMenu)return a;
                a = a.O
            }
            if (null !== this.vm && b.R.tj)return d.U
        } else if (null !== b.contextMenu)return b;
        return null
    };
    Tj.prototype.doActivate = function () {
    };
    Tj.prototype.doMouseDown = function () {
        ng.prototype.doMouseDown.call(this);
        null !== this.g && this.g.ab.af.contains(this) && Wj(this)
    };
    Tj.prototype.doMouseUp = function () {
        Wj(this)
    };
    function Wj(a) {
        var b = a.g;
        if (null !== b)if (a.sa) {
            var c = a.Il;
            if (null !== c) {
                if (!(c instanceof Rj)) {
                    var d = b.Je(b.R.ca, null, null);
                    null !== d && d.Xl(c) && a.standardMouseClick(null, null)
                }
                a.stopTool();
                a.canStart() && (b.Za = a, a.doMouseUp())
            }
        } else a.canStart() && (Dh(a, !0), a.sa || a.stopTool())
    }

    function Dh(a, b, c) {
        void 0 === c && (c = null);
        b && a.standardMouseSelect();
        if (!a.standardMouseClick())if (a.sa = !0, b = a.vm, null === c && (c = a.findObjectWithContextMenu()), null !== c) {
            var d = c.contextMenu;
            null !== d ? (a.Ww = c instanceof G ? c : null, a.showContextMenu(d, a.Ww)) : null !== b && a.showContextMenu(b, a.Ww)
        } else null !== b && a.showContextMenu(b, null)
    }

    Tj.prototype.doMouseMove = function () {
        this.sa && null !== this.g && this.g.ab.doMouseMove()
    };
    Tj.prototype.showContextMenu = function (a, b) {
        null !== b && w.G(b, G, Tj, "showContextMenu:obj");
        var c = this.g;
        if (null !== c) {
            a !== this.Il && this.hideContextMenu();
            if (a instanceof dh) {
                a.Wf = "Tool";
                a.dm = !1;
                a.scale = 1 / c.scale;
                a.rd = this.name;
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                c.add(a);
                if (null !== b) {
                    var c = null, d = b.Pl();
                    null !== d && (c = d.data);
                    a.qb = b;
                    a.data = c
                } else a.data = c.ba;
                a.Ze();
                this.positionContextMenu(a, b)
            } else a instanceof Rj && a.show(b, c, this);
            this.Il = a
        }
    };
    Tj.prototype.positionContextMenu = function (a) {
        if (null === a.placeholder) {
            var b = this.g;
            if (null !== b) {
                var c = b.R.ca.copy(), d = a.za, e = b.sb;
                b.R.tj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5);
                c.x < e.x && (c.x = e.x);
                c.y + d.height > e.bottom && (c.y -= d.height + 5);
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    Tj.prototype.hideContextMenu = function () {
        var a = this.g;
        if (null !== a) {
            var b = this.Il;
            null !== b && (b instanceof dh ? (a.remove(b), null !== this.Hy && this.Hy.Aj(b.rd), b.data = null, b.qb = null) : b instanceof Rj && (null !== b.Cn ? b.Cn(a, this) : null !== b.BA && (b.BA.style.display = "none")), this.Il = null, this.standardMouseOver())
        }
    };
    function Xj(a) {
        if (null === a.g)return null;
        a = new I(Sj);
        a.add(new Sj("Copy", function (a) {
            a.ob.copySelection()
        }, function (a) {
            return a.ob.canCopySelection()
        }));
        a.add(new Sj("Cut", function (a) {
            a.ob.cutSelection()
        }, function (a) {
            return a.ob.canCutSelection()
        }));
        a.add(new Sj("Delete", function (a) {
            a.ob.deleteSelection()
        }, function (a) {
            return a.ob.canDeleteSelection()
        }));
        a.add(new Sj("Paste", function (a) {
            a.ob.pasteSelection(a.R.ca)
        }, function (a) {
            return a.ob.canPasteSelection()
        }));
        a.add(new Sj("Select All", function (a) {
                a.ob.selectAll()
            },
            function (a) {
                return a.ob.canSelectAll()
            }));
        a.add(new Sj("Undo", function (a) {
            a.ob.undo()
        }, function (a) {
            return a.ob.canUndo()
        }));
        a.add(new Sj("Redo", function (a) {
            a.ob.redo()
        }, function (a) {
            return a.ob.canRedo()
        }));
        a.add(new Sj("Scroll To Part", function (a) {
            a.ob.scrollToPart()
        }, function (a) {
            return a.ob.canScrollToPart()
        }));
        a.add(new Sj("Zoom To Fit", function (a) {
            a.ob.zoomToFit()
        }, function (a) {
            return a.ob.canZoomToFit()
        }));
        a.add(new Sj("Reset Zoom", function (a) {
            a.ob.resetZoom()
        }, function (a) {
            return a.ob.canResetZoom()
        }));
        a.add(new Sj("Group Selection", function (a) {
            a.ob.groupSelection()
        }, function (a) {
            return a.ob.canGroupSelection()
        }));
        a.add(new Sj("Ungroup Selection", function (a) {
            a.ob.ungroupSelection()
        }, function (a) {
            return a.ob.canUngroupSelection()
        }));
        a.add(new Sj("Edit Text", function (a) {
            a.ob.editTextBlock()
        }, function (a) {
            return a.ob.canEditTextBlock()
        }));
        return a
    }

    Tj.prototype.showDefaultContextMenu = function () {
        var a = this.g;
        if (null !== a) {
            null === this.Jy && (this.Jy = Xj(this));
            w.Et.innerHTML = "";
            w.Dt.addEventListener("click", this.Fz, !1);
            var b = this, c = w.createElement("ul");
            c.className = "goCXul";
            w.Et.appendChild(c);
            c.innerHTML = "";
            for (var d = this.Jy.i; d.next();) {
                var e = d.value, f = e.visible;
                if ("function" === typeof e.nE && ("function" !== typeof f || f(a))) {
                    f = w.createElement("li");
                    f.className = "goCXli";
                    var h = w.createElement("a");
                    h.className = "goCXa";
                    h.href = "#";
                    h.CG = e.nE;
                    h.addEventListener("click",
                        function (c) {
                            this.CG(a);
                            b.stopTool();
                            c.preventDefault();
                            return !1
                        }, !1);
                    h.textContent = e.text;
                    f.appendChild(h);
                    c.appendChild(f)
                }
            }
            w.Et.style.display = "block";
            w.Dt.style.display = "block"
        }
    };
    Tj.prototype.hideDefaultContextMenu = function () {
        null !== this.Il && this.Il === this.vm && (w.Et.style.display = "none", w.Dt.style.display = "none", w.Dt.removeEventListener("click", this.Fz, !1), this.Il = null)
    };
    w.defineProperty(Tj, {Il: "currentContextMenu"}, function () {
        return this.aC
    }, function (a) {
        this.aC = a;
        this.Hy = a instanceof dh ? a.Nf : null
    });
    w.defineProperty(Tj, {LK: "defaultTouchContextMenu"}, function () {
        return this.vm
    }, function (a) {
        this.vm = a
    });
    w.defineProperty(Tj, {Ww: "currentObject"}, function () {
        return this.dC
    }, function (a) {
        null !== a && w.G(a, G, Tj, "currentObject");
        this.dC = a
    });
    w.u(Tj, {lL: "mouseDownPoint"}, function () {
        return this.bD
    });
    function Yj() {
        ng.call(this);
        0 < arguments.length && w.hd(Yj);
        this.name = "DragSelecting";
        this.Ao = 175;
        this.QC = !1;
        var a = new S;
        a.Wf = "Tool";
        a.dm = !1;
        var b = new X;
        b.name = "SHAPE";
        b.Cb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        a.add(b);
        this.rm = a
    }

    w.La(Yj, ng);
    w.fa("DragSelectingTool", Yj);
    Yj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || !a.tf)return !1;
        var b = a.R;
        return !b.left || a.Za !== this && (!this.isBeyondDragSize() || b.timestamp - a.zc.timestamp < this.vE || null !== a.Nt(b.ca, !0)) ? !1 : !0
    };
    Yj.prototype.doActivate = function () {
        var a = this.g;
        null !== a && (this.sa = !0, a.$e = !0, a.wb = !0, a.add(this.rh), this.doMouseMove())
    };
    Yj.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (Ph(a), a.remove(this.rh), a.wb = !1, this.sa = a.$e = !1)
    };
    Yj.prototype.doMouseMove = function () {
        var a = this.g;
        if (null !== a && this.sa && null !== this.rh) {
            var b = this.computeBoxBounds(), c = this.rh.sd("SHAPE");
            null === c && (c = this.rh.Hd());
            c.Aa = b.size;
            this.rh.position = b.position;
            (a.me || a.ne) && a.bA(a.R.bf)
        }
    };
    Yj.prototype.doMouseUp = function () {
        if (this.sa) {
            var a = this.g;
            a.remove(this.rh);
            try {
                a.bc = "wait", this.selectInRect(this.computeBoxBounds())
            } finally {
                a.bc = ""
            }
        }
        this.stopTool()
    };
    Yj.prototype.computeBoxBounds = function () {
        var a = this.g;
        return null === a ? new A(0, 0, 0, 0) : new A(a.zc.ca, a.R.ca)
    };
    Yj.prototype.selectInRect = function (a) {
        var b = this.g;
        if (null !== b) {
            var c = b.R;
            b.Ba("ChangingSelection");
            a = b.yk(a, null, function (a) {
                return a instanceof S ? a.canSelect() : !1
            }, this.uI);
            if (w.Ek ? c.mu : c.control)if (c.shift)for (a = a.i; a.next();)c = a.value, c.eb && (c.eb = !1); else for (a = a.i; a.next();)c = a.value, c.eb = !c.eb; else {
                if (!c.shift) {
                    for (var c = new I(S), d = b.selection.i; d.next();) {
                        var e = d.value;
                        a.contains(e) || c.add(e)
                    }
                    for (c = c.i; c.next();)c.value.eb = !1
                }
                for (a = a.i; a.next();)c = a.value, c.eb || (c.eb = !0)
            }
            b.Ba("ChangedSelection")
        }
    };
    w.defineProperty(Yj, {vE: "delay"}, function () {
        return this.Ao
    }, function (a) {
        w.j(a, "number", Yj, "delay");
        this.Ao = a
    });
    w.defineProperty(Yj, {uI: "isPartialInclusion"}, function () {
        return this.QC
    }, function (a) {
        w.j(a, "boolean", Yj, "isPartialInclusion");
        this.QC = a
    });
    w.defineProperty(Yj, {rh: "box"}, function () {
        return this.rm
    }, function (a) {
        null !== a && w.G(a, S, Yj, "box");
        this.rm = a
    });
    function Zj() {
        ng.call(this);
        0 < arguments.length && w.hd(Zj);
        this.name = "Panning";
        this.pz = new z;
        this.Ij = !1;
        var a = this;
        this.BD = function () {
            window.document.removeEventListener("scroll", a.BD, !1);
            a.stopTool()
        }
    }

    w.La(Zj, ng);
    w.fa("PanningTool", Zj);
    Zj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null === a || !a.me && !a.ne || !a.R.left || a.Za !== this && !this.isBeyondDragSize() ? !1 : !0
    };
    Zj.prototype.doActivate = function () {
        var a = this.g;
        null !== a && (this.Ij ? (a.R.bubbles = !0, window.document.addEventListener("scroll", this.BD, !1)) : (a.bc = "move", a.$e = !0, this.pz = a.position.copy()), this.sa = !0)
    };
    Zj.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (a.bc = "", this.sa = a.$e = !1)
    };
    Zj.prototype.doCancel = function () {
        var a = this.g;
        null !== a && (a.position = this.pz, a.$e = !1);
        this.stopTool()
    };
    Zj.prototype.doMouseMove = function () {
        this.move()
    };
    Zj.prototype.doMouseUp = function () {
        this.move();
        this.stopTool()
    };
    Zj.prototype.move = function () {
        var a = this.g;
        if (this.sa && a)if (this.Ij)a.R.bubbles = !0; else {
            var b = a.position, c = a.zc.ca, d = a.R.ca, e = b.x + c.x - d.x, c = b.y + c.y - d.y;
            a.me || (e = b.x);
            a.ne || (c = b.y);
            a.position = new z(e, c)
        }
    };
    w.defineProperty(Zj, {bubbles: "bubbles"}, function () {
        return this.Ij
    }, function (a) {
        w.j(a, "boolean", Zj, "bubbles");
        this.Ij = a
    });
    w.u(Zj, {tL: "originalPosition"}, function () {
        return this.pz
    });
    function ak() {
        0 < arguments.length && w.hd(ak);
        ng.call(this);
        this.name = "TextEditing";
        this.Dz = this.kk = null;
        this.AD = bk;
        this.vl = null;
        this.Ta = ck;
        this.ql = null;
        this.ZC = 1;
        this.uD = !0;
        var a = new Rj;
        this.fC = null;
        this.nC = a;
        this.Ky = null;
        dk(this, a)
    }

    w.fa("TextEditingTool", ak);
    w.La(ak, ng);
    var ek;
    ak.LostFocus = ek = w.p(ak, "LostFocus", 0);
    var fk;
    ak.MouseDown = fk = w.p(ak, "MouseDown", 1);
    var gk;
    ak.Tab = gk = w.p(ak, "Tab", 2);
    var hk;
    ak.Enter = hk = w.p(ak, "Enter", 3);
    ak.SingleClick = w.p(ak, "SingleClick", 0);
    var bk;
    ak.SingleClickSelected = bk = w.p(ak, "SingleClickSelected", 1);
    var ik;
    ak.DoubleClick = ik = w.p(ak, "DoubleClick", 2);
    var ck;
    ak.StateNone = ck = w.p(ak, "StateNone", 0);
    var jk;
    ak.StateActive = jk = w.p(ak, "StateActive", 1);
    var kk;
    ak.StateEditing = kk = w.p(ak, "StateEditing", 2);
    var lk;
    ak.StateValidating = lk = w.p(ak, "StateValidating", 3);
    var mk;
    ak.StateInvalid = mk = w.p(ak, "StateInvalid", 4);
    var nk;
    ak.StateValidated = nk = w.p(ak, "StateValidated", 5);
    function dk(a, b) {
        var c = w.createElement("textarea");
        a.Ky = c;
        c.addEventListener("input", function () {
            if (null !== a.Xg) {
                var b = a.MI(this.value), c = this.GJ;
                this.style.width = 20 + b.za.width * c + "px";
                this.style.height = 10 + b.za.height * c + "px";
                this.rows = b.BI
            }
        }, !1);
        c.addEventListener("keydown", function (b) {
            if (null !== a.Xg) {
                var c = b.which;
                13 === c ? (!1 === a.Xg.yx && b.preventDefault(), a.acceptText(hk)) : 9 === c ? (a.acceptText(gk), b.preventDefault()) : 27 === c && (a.doCancel(), null !== a.g && a.g.doFocus())
            }
        }, !1);
        c.addEventListener("focus", function () {
                ok(a)
            },
            !1);
        c.addEventListener("blur", function () {
            pk(a)
        }, !1);
        b.vB = function () {
            return c.value
        };
        b.BA = c;
        b.show = function (a, b, f) {
            if (f.state === mk)c.style.border = "3px solid red", c.focus(); else {
                var h = a.Wa(Fb), k = b.position, l = b.scale, m = a.nj() * l;
                m < f.xF && (m = f.xF);
                var n = a.Ia.width * m + 6, p = a.Ia.height * m + 2, q = (h.x - k.x) * l, h = (h.y - k.y) * l;
                c.value = a.text;
                b.lj.style.font = a.font;
                c.style.cssText = "position: absolute;z-index: 100;font: inherit;fontSize: " + 100 * m + "%;lineHeight: normal;width: " + n + "px;height: " + p + "px;left: " + ((q - n / 2 | 0) - 1) +
                    "px;top: " + ((h - p / 2 | 0) - 1) + "px;textAlign: " + a.textAlign + ";margin: 0;padding: 1px;border: 0;outline: none;white-space: pre-wrap;overflow: hidden;";
                c.GJ = m;
                b.lj.appendChild(c);
                c.focus();
                f.ay && (c.select(), c.setSelectionRange(0, 9999))
            }
        };
        b.Cn = function (a) {
            a.lj.removeChild(c)
        }
    }

    w.defineProperty(ak, {Xg: "textBlock"}, function () {
        return this.Dz
    }, function (a) {
        null !== a && w.G(a, Ch, ak, "textBlock");
        this.Dz = a
    });
    w.defineProperty(ak, {jj: "currentTextEditor"}, function () {
        return this.fC
    }, function (a) {
        this.fC = a
    });
    w.defineProperty(ak, {DH: "defaultTextEditor"}, function () {
        return this.nC
    }, function (a) {
        this.nC = a
    });
    w.defineProperty(ak, {iG: "starting"}, function () {
        return this.AD
    }, function (a) {
        w.mb(a, ak, ak, "starting");
        this.AD = a
    });
    ak.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.cb || !a.R.left || this.isBeyondDragSize())return !1;
        var b = a.Je(a.R.ca, null, function (a) {
            return a instanceof Ch
        });
        if (null === b || !b.cA || !b.U.canEdit())return !1;
        b = b.U;
        return null === b || this.iG === bk && !b.eb || this.iG === ik && 2 > a.R.Fe ? !1 : !0
    };
    ak.prototype.doStart = function () {
        this.sa || null === this.Xg || this.doActivate()
    };
    ak.prototype.doActivate = function () {
        if (!this.sa) {
            var a = this.g;
            if (null !== a) {
                var b = this.Xg;
                null === b && (b = a.Je(a.R.ca, function (a) {
                    return a instanceof Ch ? a : null
                }));
                if (null !== b && (this.Xg = b, null !== b.U)) {
                    this.sa = !0;
                    this.Ta = jk;
                    var c = this.DH;
                    null !== b.lG && (c = b.lG);
                    this.kk = this.Xg.copy();
                    var d = new A(this.Xg.Wa(vb), this.Xg.Wa(Kb));
                    a.sJ(d);
                    if (c instanceof Rj)c.show(b, a, this); else {
                        c.style.position = "absolute";
                        c.style.zIndex = "100";
                        c.textEditingTool = this;
                        if ("function" === typeof c.onActivate)c.onActivate();
                        "function" === typeof c.focus && c.focus();
                        "function" === typeof c.select && this.ay && (c.select(), c.setSelectionRange(0, 9999));
                        a.lj.appendChild(c)
                    }
                    this.jj = c
                }
            }
        }
    };
    ak.prototype.doCancel = function () {
        null !== this.ql && this.jj instanceof HTMLElement && (this.jj.style.border = this.ql, this.ql = null);
        this.stopTool()
    };
    ak.prototype.doMouseUp = function () {
        !this.sa && this.canStart() && this.doActivate()
    };
    ak.prototype.doMouseDown = function () {
        this.sa && this.acceptText(fk)
    };
    ak.prototype.acceptText = function (a) {
        switch (a) {
            case fk:
                if (this.Ta === nk)this.jj instanceof HTMLElement && this.jj.focus(); else if (this.Ta === jk || this.Ta === mk || this.Ta === kk)this.Ta = lk, qk(this);
                break;
            case ek:
            case hk:
            case gk:
                if (hk === a && !0 === this.Dz.yx)break;
                if (this.Ta === jk || this.Ta === mk || this.Ta === kk)this.Ta = lk, qk(this)
        }
    };
    function qk(a) {
        var b = a.Xg, c = a.g, d = a.jj;
        if (null !== b && null !== d) {
            var e = b.text, f = "";
            d instanceof Rj ? null !== d.vB && (f = d.vB()) : (f = d.value, f = "function" === typeof f ? f() : f);
            a.isValidText(b, e, f) ? (a.Tb(a.name), a.Ta = nk, d instanceof Rj ? d.show(b, c, a) : null !== a.ql && (d.style.border = a.ql, a.ql = null), a.Ff = a.name, b.text = f, null !== b.kG && b.kG(b, e, f), null !== c && c.Ba("TextEdited", b, e), a.Jk(), a.stopTool(), null !== c && c.doFocus()) : (a.Ta = mk, null !== b.eA && b.eA(a, e, f), d instanceof Rj ? d.show(b, c, a) : (null === a.ql && (a.ql = d.style.border,
                d.style.border = "3px solid red"), "function" === typeof d.focus && d.focus()))
        }
    }

    ak.prototype.doDeactivate = function () {
        var a = this.g;
        if (null !== a) {
            this.Ta = ck;
            this.Xg = null;
            if (null !== this.jj) {
                var b = this.jj;
                if (b instanceof Rj)b.Cn(a, this); else {
                    if ("function" === typeof b.onDeactivate)b.onDeactivate();
                    null !== b && a.lj.removeChild(b)
                }
            }
            this.sa = !1
        }
    };
    ak.prototype.doFocus = function () {
        ok(this)
    };
    ak.prototype.doBlur = function () {
        pk(this)
    };
    function ok(a) {
        if (null !== a.jj) {
            var b = a.Ky;
            a.Ta === jk && (a.Ta = kk);
            "function" === typeof b.select && a.ay && (b.select(), b.setSelectionRange(0, 9999))
        }
    }

    function pk(a) {
        if (null !== a.jj) {
            var b = a.Ky;
            "function" === typeof b.focus && b.focus();
            "function" === typeof b.select && a.ay && (b.select(), b.setSelectionRange(0, 9999))
        }
    }

    ak.prototype.isValidText = function (a, b, c) {
        w.G(a, Ch, ak, "isValidText:textblock");
        var d = this.lB;
        if (null !== d && !d(a, b, c))return !1;
        d = a.lB;
        return null === d || d(a, b, c) ? !0 : !1
    };
    w.defineProperty(ak, {lB: "textValidation"}, function () {
        return this.vl
    }, function (a) {
        null !== a && w.j(a, "function", ak, "textValidation");
        this.vl = a
    });
    w.defineProperty(ak, {xF: "minimumEditorScale"}, function () {
        return this.ZC
    }, function (a) {
        null !== a && w.j(a, "number", ak, "minimumEditorScale");
        this.ZC = a
    });
    w.defineProperty(ak, {ay: "selectsTextOnActivate"}, function () {
        return this.uD
    }, function (a) {
        null !== a && w.j(a, "boolean", ak, "selectsTextOnActivate");
        this.uD = a
    });
    w.defineProperty(ak, {state: "state"}, function () {
        return this.Ta
    }, function (a) {
        this.Ta !== a && (w.mb(a, ak, ak, "starting"), this.Ta = a)
    });
    ak.prototype.measureTemporaryTextBlock = ak.prototype.MI = function (a) {
        var b = this.kk;
        b.text = a;
        rk(b, this.Xg.Wo, Infinity);
        return b
    };
    function bh() {
        ng.call(this);
        this.name = "ToolManager";
        this.HG = new I(ng);
        this.IG = new I(ng);
        this.JG = new I(ng);
        this.DC = this.EC = 850;
        this.sC = (new ha(2, 2)).Ga();
        this.OD = 5E3;
        this.cD = Hh;
        this.BC = sk;
        this.ov = this.gC = null;
        this.en = -1
    }

    w.La(bh, ng);
    w.fa("ToolManager", bh);
    var Hh;
    bh.WheelScroll = Hh = w.p(bh, "WheelScroll", 0);
    var Gh;
    bh.WheelZoom = Gh = w.p(bh, "WheelZoom", 1);
    bh.WheelNone = w.p(bh, "WheelNone", 2);
    var sk;
    bh.GestureZoom = sk = w.p(bh, "GestureZoom", 3);
    var tk;
    bh.GestureCancel = tk = w.p(bh, "GestureCancel", 4);
    var uk;
    bh.GestureNone = uk = w.p(bh, "GestureNone", 5);
    w.defineProperty(bh, {pu: "mouseWheelBehavior"}, function () {
        return this.cD
    }, function (a) {
        w.mb(a, bh, bh, "mouseWheelBehavior");
        this.cD = a
    });
    w.defineProperty(bh, {Xp: "gestureBehavior"}, function () {
        return this.BC
    }, function (a) {
        w.mb(a, bh, bh, "gestureBehavior");
        this.BC = a
    });
    bh.prototype.initializeStandardTools = function () {
        this.UG = new Pj;
        this.JF = new Lh;
        this.EI = new fj;
        this.UF = new uj;
        this.pJ = new Mj;
        this.tF = new Xi;
        this.re = new hh;
        this.IH = new Yj;
        this.aJ = new Zj;
        this.Vz = new Tj;
        this.kB = new ak;
        this.kH = new Qj;
        this.lH = new Oj
    };
    bh.prototype.updateAdornments = function (a) {
        var b = this.Jl;
        if (b instanceof dh && this.ov === a) {
            var c = b.qb;
            (null !== a ? c.U === a : null === c) ? this.showToolTip(b, c) : this.hideToolTip()
        }
    };
    bh.prototype.doMouseDown = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R;
            b.tj && this.Xp === tk && (b.bubbles = !1);
            if (b.du) {
                this.cancelWaitAfter();
                if (this.Xp === uk) {
                    b.bubbles = !0;
                    return
                }
                if (this.Xp === tk)return;
                if (a.Za.canStartMultiTouch()) {
                    a.Za.standardPinchZoomStart();
                    return
                }
            }
            var c = a.oa;
            c.Rz && 0 !== c.Fh && w.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");
            for (var c = this.af.length, d = 0; d < c; d++) {
                var e = this.af.da(d);
                null === e.g && e.Pc(this.g);
                if (e.canStart()) {
                    a.doFocus();
                    a.Za = e;
                    a.Za === e && (e.sa || e.doActivate(), e.doMouseDown());
                    return
                }
            }
            1 === a.R.button && (this.pu === Hh ? this.pu = Gh : this.pu === Gh && (this.pu = Hh));
            this.doActivate();
            this.standardWaitAfter(this.ZE, b)
        }
    };
    bh.prototype.doMouseMove = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R;
            if (b.du) {
                if (this.Xp === uk) {
                    b.bubbles = !0;
                    return
                }
                if (this.Xp === tk)return;
                if (a.Za.canStartMultiTouch()) {
                    a.Za.standardPinchZoomMove();
                    return
                }
            }
            if (this.sa)for (var c = this.Zf.length, d = 0; d < c; d++) {
                var e = this.Zf.da(d);
                null === e.g && e.Pc(this.g);
                if (e.canStart()) {
                    a.doFocus();
                    a.Za = e;
                    a.Za === e && (e.sa || e.doActivate(), e.doMouseMove());
                    return
                }
            }
            vk(this, a);
            null === b.event || "mousemove" !== b.event.type && b.event.cancelable || (b.bubbles = !0)
        }
    };
    function vk(a, b) {
        a.standardMouseOver();
        a.isBeyondDragSize() && a.standardWaitAfter(a.sa ? a.ZE : a.gI, b.R)
    }

    bh.prototype.doCurrentObjectChanged = function (a, b) {
        var c = this.Jl;
        null === c || null !== b && c instanceof dh && (b === c || b.Xl(c)) || this.hideToolTip()
    };
    bh.prototype.doWaitAfter = function (a) {
        var b = this.g;
        null !== b && b.Eb && (this.doMouseHover(), this.sa || this.doToolTip(), a.tj && !b.R.Ac && (a = a.copy(), a.button = 2, a.buttons = 2, b.R = a, b.ht = !0, b.doMouseUp()))
    };
    bh.prototype.doMouseHover = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R;
            null === b.Pe && (b.Pe = a.Je(b.ca, null, null));
            var c = b.Pe;
            if (null !== c)for (b.Ac = !1; null !== c;) {
                a = this.sa ? c.HA : c.IA;
                if (null !== a && (a(b, c), b.Ac))break;
                c = c.O
            } else c = this.sa ? a.HA : a.IA, null !== c && c(b)
        }
    };
    bh.prototype.doToolTip = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.R;
            null === b.Pe && (b.Pe = a.Je(b.ca, null, null));
            b = b.Pe;
            if (null !== b) {
                if (a = this.Jl, !(a instanceof dh) || b !== a && !b.Xl(a)) {
                    for (; null !== b;) {
                        a = b.nB;
                        if (null !== a) {
                            this.showToolTip(a, b);
                            return
                        }
                        b = b.O
                    }
                    this.hideToolTip()
                }
            } else a = a.nB, null !== a ? this.showToolTip(a, null) : this.hideToolTip()
        }
    };
    bh.prototype.showToolTip = function (a, b) {
        null !== b && w.G(b, G, bh, "showToolTip:obj");
        var c = this.g;
        if (null !== c) {
            a !== this.Jl && this.hideToolTip();
            if (a instanceof dh) {
                a.Wf = "Tool";
                a.dm = !1;
                a.scale = 1 / c.scale;
                a.rd = "ToolTip";
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                c.add(a);
                if (null !== b) {
                    var c = null, d = b.Pl();
                    null !== d && (c = d.data);
                    a.qb = b;
                    a.data = c
                } else a.data = c.ba;
                a.Ze();
                this.positionToolTip(a, b)
            } else a instanceof Rj && a !== this.Jl && a.show(b, c, this);
            this.Jl = a;
            -1 !== this.en && (w.clearTimeout(this.en), this.en = -1);
            c = this.LJ;
            if (0 < c && Infinity !== c) {
                var e = this;
                this.en = w.setTimeout(function () {
                    e.hideToolTip()
                }, c)
            }
        }
    };
    bh.prototype.positionToolTip = function (a) {
        if (null === a.placeholder) {
            var b = this.g;
            if (null !== b) {
                var c = b.R.ca.copy(), d = a.za, e = b.sb;
                b.R.tj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5);
                c.x < e.x && (c.x = e.x);
                c.y = c.y + 20 + d.height > e.bottom ? c.y - (d.height + 5) : c.y + 20;
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    bh.prototype.hideToolTip = function () {
        -1 !== this.en && (w.clearTimeout(this.en), this.en = -1);
        var a = this.g;
        if (null !== a) {
            var b = this.Jl;
            null !== b && (b instanceof dh ? (a.remove(b), null !== this.ov && this.ov.Aj(b.rd), b.data = null, b.qb = null) : b instanceof Rj && null !== b.Cn && b.Cn(a, this), this.Jl = null)
        }
    };
    w.defineProperty(bh, {Jl: "currentToolTip"}, function () {
        return this.gC
    }, function (a) {
        this.gC = a;
        this.ov = null !== a && a instanceof dh ? a.Nf : null
    });
    bh.prototype.doMouseUp = function () {
        this.cancelWaitAfter();
        var a = this.g;
        if (null !== a) {
            if (this.sa)for (var b = this.$f.length, c = 0; c < b; c++) {
                var d = this.$f.da(c);
                null === d.g && d.Pc(this.g);
                if (d.canStart()) {
                    a.doFocus();
                    a.Za = d;
                    a.Za === d && (d.sa || d.doActivate(), d.doMouseUp());
                    return
                }
            }
            a.doFocus();
            this.doDeactivate()
        }
    };
    bh.prototype.doMouseWheel = function () {
        this.standardMouseWheel()
    };
    bh.prototype.doKeyDown = function () {
        var a = this.g;
        null !== a && a.ob.doKeyDown()
    };
    bh.prototype.doKeyUp = function () {
        var a = this.g;
        null !== a && a.ob.doKeyUp()
    };
    bh.prototype.doCancel = function () {
        null !== Jh && Jh.doCancel();
        ng.prototype.doCancel.call(this)
    };
    bh.prototype.findTool = function (a) {
        w.j(a, "string", bh, "findTool:name");
        for (var b = this.af.length, c = 0; c < b; c++) {
            var d = this.af.da(c);
            if (d.name === a)return d
        }
        b = this.Zf.length;
        for (c = 0; c < b; c++)if (d = this.Zf.da(c), d.name === a)return d;
        b = this.$f.length;
        for (c = 0; c < b; c++)if (d = this.$f.da(c), d.name === a)return d;
        return null
    };
    bh.prototype.replaceTool = function (a, b) {
        w.j(a, "string", bh, "replaceTool:name");
        null !== b && (w.G(b, ng, bh, "replaceTool:newtool"), b.g && b.g !== this.g && w.k("Cannot share tools between Diagrams: " + b.toString()), b.Pc(this.g));
        for (var c = this.af.length, d = 0; d < c; d++) {
            var e = this.af.da(d);
            if (e.name === a)return null !== b ? this.af.fg(d, b) : this.af.Xc(d), e
        }
        c = this.Zf.length;
        for (d = 0; d < c; d++)if (e = this.Zf.da(d), e.name === a)return null !== b ? this.Zf.fg(d, b) : this.Zf.Xc(d), e;
        c = this.$f.length;
        for (d = 0; d < c; d++)if (e = this.$f.da(d), e.name ===
            a)return null !== b ? this.$f.fg(d, b) : this.$f.Xc(d), e;
        return null
    };
    function wk(a, b, c, d) {
        w.j(b, "string", bh, "replaceStandardTool:name");
        w.G(d, I, bh, "replaceStandardTool:list");
        null !== c && (w.G(c, ng, bh, "replaceStandardTool:newtool"), c.g && c.g !== a.g && w.k("Cannot share tools between Diagrams: " + c.toString()), c.name = b, c.Pc(a.g));
        a.findTool(b) ? a.replaceTool(b, c) : null !== c && d.add(c)
    }

    w.u(bh, {af: "mouseDownTools"}, function () {
        return this.HG
    });
    w.u(bh, {Zf: "mouseMoveTools"}, function () {
        return this.IG
    });
    w.u(bh, {$f: "mouseUpTools"}, function () {
        return this.JG
    });
    w.defineProperty(bh, {gI: "hoverDelay"}, function () {
        return this.EC
    }, function (a) {
        w.j(a, "number", bh, "hoverDelay");
        this.EC = a
    });
    w.defineProperty(bh, {ZE: "holdDelay"}, function () {
        return this.DC
    }, function (a) {
        w.j(a, "number", bh, "holdDelay");
        this.DC = a
    });
    w.defineProperty(bh, {JH: "dragSize"}, function () {
        return this.sC
    }, function (a) {
        w.G(a, ha, bh, "dragSize");
        this.sC = a.S()
    });
    w.defineProperty(bh, {LJ: "toolTipDuration"}, function () {
        return this.OD
    }, function (a) {
        w.j(a, "number", bh, "toolTipDuration");
        this.OD = a
    });
    w.defineProperty(bh, {UG: "actionTool"}, function () {
        return this.findTool("Action")
    }, function (a) {
        wk(this, "Action", a, this.af)
    });
    w.defineProperty(bh, {JF: "relinkingTool"}, function () {
        return this.findTool("Relinking")
    }, function (a) {
        wk(this, "Relinking", a, this.af)
    });
    w.defineProperty(bh, {EI: "linkReshapingTool"}, function () {
        return this.findTool("LinkReshaping")
    }, function (a) {
        wk(this, "LinkReshaping", a, this.af)
    });
    w.defineProperty(bh, {UF: "resizingTool"}, function () {
        return this.findTool("Resizing")
    }, function (a) {
        wk(this, "Resizing", a, this.af)
    });
    w.defineProperty(bh, {pJ: "rotatingTool"}, function () {
        return this.findTool("Rotating")
    }, function (a) {
        wk(this, "Rotating", a, this.af)
    });
    w.defineProperty(bh, {tF: "linkingTool"}, function () {
        return this.findTool("Linking")
    }, function (a) {
        wk(this, "Linking", a, this.Zf)
    });
    w.defineProperty(bh, {re: "draggingTool"}, function () {
        return this.findTool("Dragging")
    }, function (a) {
        wk(this, "Dragging", a, this.Zf)
    });
    w.defineProperty(bh, {IH: "dragSelectingTool"}, function () {
        return this.findTool("DragSelecting")
    }, function (a) {
        wk(this, "DragSelecting", a, this.Zf)
    });
    w.defineProperty(bh, {aJ: "panningTool"}, function () {
        return this.findTool("Panning")
    }, function (a) {
        wk(this, "Panning", a, this.Zf)
    });
    w.defineProperty(bh, {Vz: "contextMenuTool"}, function () {
        return this.findTool("ContextMenu")
    }, function (a) {
        wk(this, "ContextMenu", a, this.$f)
    });
    w.defineProperty(bh, {kB: "textEditingTool"}, function () {
        return this.findTool("TextEditing")
    }, function (a) {
        wk(this, "TextEditing", a, this.$f)
    });
    w.defineProperty(bh, {kH: "clickCreatingTool"}, function () {
        return this.findTool("ClickCreating")
    }, function (a) {
        wk(this, "ClickCreating", a, this.$f)
    });
    w.defineProperty(bh, {lH: "clickSelectingTool"}, function () {
        return this.findTool("ClickSelecting")
    }, function (a) {
        wk(this, "ClickSelecting", a, this.$f)
    });
    function Qg() {
        this.hC = xk;
        this.kr = this.lr = this.Z = null;
        this.ko = this.mr = this.nr = 0;
        this.lo = this.oc = this.Ro = this.Vj = !1;
        this.Wj = this.cf = !0;
        this.mv = this.lv = this.cC = null;
        this.bC = 0;
        this.nv = null;
        this.av = new J("string");
        this.Ry = 600;
        this.KG = new z(0, 0);
        this.QB = this.PB = this.SD = !1;
        this.Pm = new ka(G, yk)
    }

    w.fa("AnimationManager", Qg);
    Qg.prototype.Pc = function (a) {
        this.Z = a
    };
    function xk(a, b, c, d) {
        a /= d / 2;
        return 1 > a ? c / 2 * a * a + b : -c / 2 * (--a * (a - 2) - 1) + b
    }

    w.u(Qg, {pK: "animationReasons"}, function () {
        return this.av
    });
    Qg.prototype.canStart = function () {
        return !0
    };
    Qg.prototype.prepareAutomaticAnimation = Qg.prototype.Sn = function (a) {
        this.cf && (this.Wj || this.Z.Fn) && (this.av.add(a), this.canStart(a) && (this.Vj && this.pi(), this.oc = !0))
    };
    function zk(a) {
        if (a.cf && (a.av.clear(), a.oc))if (!a.lo)a.oc = !1; else if (0 === a.ko) {
            var b = +new Date;
            a.ko = b;
            requestAnimationFrame(function () {
                if (!1 !== a.oc && !a.Vj && a.ko === b) {
                    var c = a.Z;
                    c.oj("temporaryPixelRatio") && (c.jk = 1);
                    Ak(c);
                    a.oc = !1;
                    c.Ba("AnimationStarting");
                    Bk(a, b)
                }
            })
        }
    }

    function Ck(a, b, c, d, e, f) {
        if (!(!a.oc || "position" === c && d.L(e) || b instanceof S && !b.cF)) {
            var h = a.Pm;
            if (h.contains(b)) {
                var h = h.ka(b), k = h.start, l = h.end;
                void 0 === k[c] && (k[c] = Qk(d));
                h.Vw && void 0 !== l[c] ? h.Jt[c] = Qk(e) : (f || (h.Jt[c] = Qk(e)), l[c] = Qk(e));
                f && 0 === c.indexOf("position:") && b instanceof S && (h.Jt.location = Qk(b.location))
            } else k = new sa, l = new sa, k[c] = Qk(d), l[c] = Qk(e), d = l, e = k.position, e instanceof z && !e.H() && a.av.contains("Expand SubGraph") && e.assign(d.position), k = new yk(k, l, f), f && 0 === c.indexOf("position:") &&
            b instanceof S && (k.Jt.location = Qk(b.location)), h.add(b, k);
            a.lo = !0
        }
    }

    function Qk(a) {
        return a instanceof z ? a.copy() : a instanceof ha ? a.copy() : a
    }

    function Bk(a, b) {
        var c;

        function d() {
            if (!1 !== f.Vj && f.ko === b) {
                var a = +new Date, c = a > s ? m : a - r;
                Wk(f);
                Xk(f, e, q, h, c, m);
                f.lv && f.lv();
                Ki(e);
                Yk(f);
                a > s ? Zk(f) : requestAnimationFrame(d)
            }
        }

        void 0 === c && (c = new sa);
        var e = a.Z;
        if (null !== e) {
            a.Vj = !0;
            var f = a, h = c.OK || a.hC, k = c.oL || null, l = c.pL || null, m = c.duration || a.Ry, n = a.KG;
            for (c = a.Pm.i; c.next();) {
                var p = c.value.start.position;
                p instanceof z && (p.H() || p.assign(n))
            }
            a.cC = h;
            a.lv = k;
            a.mv = l;
            a.bC = m;
            a.nv = a.Pm;
            var q = a.nv;
            for (c = q.i; c.next();)k = c.value.end, k["position:placeholder"] && (l =
                k["position:placeholder"], n = l.Wa(vb), n.x += l.padding.left, n.y += l.padding.top, k["position:placeholder"] = n);
            Wk(a);
            Xk(a, e, q, h, 0, m);
            Ki(a.Z);
            Yk(a);
            var r = +new Date, s = r + m;
            f.ko === b && requestAnimationFrame(function () {
                d()
            })
        }
    }

    function Wk(a) {
        if (!a.Ro) {
            var b = a.Z;
            a.SD = b.wb;
            a.PB = b.Ne;
            a.QB = b.Ju;
            b.wb = !0;
            b.Ne = !0;
            b.Ju = !0;
            a.Ro = !0
        }
    }

    function Yk(a) {
        var b = a.Z;
        b.wb = a.SD;
        b.Ne = a.PB;
        b.Ju = a.QB;
        a.Ro = !1
    }

    function Xk(a, b, c, d, e, f) {
        for (c = c.i; c.next();) {
            var h = c.key, k = c.value, l = k.start, k = k.end, m;
            for (m in k)if (("position" !== m || !k["position:placeholder"] && !k["position:node"]) && void 0 !== $k[m])$k[m](h, l[m], k[m], d, e, f)
        }
        d = b.vA;
        b.vA = !0;
        m = a.hC;
        0 !== a.nr && 0 !== a.mr && (c = a.nr, b.tb = m(e, c, a.mr - c, f));
        null !== a.lr && null !== a.kr && (c = a.lr, a = a.kr, b.hb = new z(m(e, c.x, a.x - c.x, f), m(e, c.y, a.y - c.y, f)));
        b.vA = d
    }

    Qg.prototype.stopAnimation = Qg.prototype.pi = function () {
        !0 === this.oc && (this.oc = !1, this.lo && this.Z.Le());
        this.Vj && this.cf && Zk(this)
    };
    function Zk(a) {
        a.Vj = !1;
        a.lo = !1;
        Wk(a);
        for (var b = a.Z, c = a.cC, d = a.bC, e = a.nv.i; e.next();) {
            var f = e.key, h = e.value, k = h.start, l = h.end, m = h.Jt, n;
            for (n in l)if (void 0 !== $k[n]) {
                var p = n;
                !h.Vw || "position:node" !== p && "position:placeholder" !== p || (p = "position");
                $k[p](f, k[n], void 0 !== m[n] ? m[n] : h.Vw ? k[n] : l[n], c, d, d)
            }
            h.Vw && void 0 !== m.location && f instanceof S && (f.location = m.location);
            h.Ux && f instanceof S && f.td(!1)
        }
        for (c = a.Z.links; c.next();)d = c.value, null !== d.lp && (d.points = d.lp, d.lp = null);
        b.Hx.clear();
        b.jk = null;
        b.qc();
        b.na();
        b.Yf();
        al(b);
        Yk(a);
        a.mv && a.mv();
        a.ko = 0;
        a.nv = null;
        a.mv = null;
        a.lv = null;
        a.lr = null;
        a.kr = null;
        a.nr = 0;
        a.mr = 0;
        a.Pm = new ka(G, yk);
        b.Ba("AnimationFinished");
        b.Le()
    }

    function bl(a, b, c) {
        var d = b.Y, e = c.Y, f = null;
        c instanceof U && (f = c.placeholder);
        null !== f ? (d = f.Wa(vb), d.x += f.padding.left, d.y += f.padding.top, Ck(a, b, "position", d, b.position, !1)) : Ck(a, b, "position", new z(e.x + e.width / 2 - d.width / 2, e.y + e.height / 2 - d.height / 2), b.position, !1);
        Ck(a, b, "scale", .01, b.scale, !1);
        if (b instanceof U)for (b = b.Mc; b.next();)f = b.value, f instanceof T && bl(a, f, c)
    }

    function cl(a, b, c) {
        if (b.isVisible()) {
            var d = null;
            c instanceof U && (d = c.placeholder);
            null !== d ? Ck(a, b, "position:placeholder", b.position, d, !0) : Ck(a, b, "position:node", b.position, c, !0);
            Ck(a, b, "scale", b.scale, .01, !0);
            a.oc && (d = a.Pm, d.contains(b) && (d.ka(b).Ux = !0));
            if (b instanceof U)for (b = b.Mc; b.next();)d = b.value, d instanceof T && cl(a, d, c)
        }
    }

    function dl(a, b, c) {
        a.oc && (null === a.lr && b.H() && null === a.kr && (a.lr = b.copy()), a.kr = c.copy(), a.lo = !0)
    }

    function el(a, b, c) {
        a.oc && a.Z.Fn && (0 === a.nr && 0 === a.mr && (a.nr = b), a.mr = c, a.lo = !0)
    }

    w.defineProperty(Qg, {isEnabled: "isEnabled"}, function () {
        return this.cf
    }, function (a) {
        w.j(a, "boolean", Qg, "isEnabled");
        this.cf = a
    });
    w.defineProperty(Qg, {duration: "duration"}, function () {
        return this.Ry
    }, function (a) {
        w.j(a, "number", Qg, "duration");
        1 > a && w.Ea(a, ">= 1", Qg, "duration");
        this.Ry = a
    });
    w.u(Qg, {kf: "isAnimating"}, function () {
        return this.Vj
    });
    w.u(Qg, {vI: "isTicking"}, function () {
        return this.Ro
    });
    w.defineProperty(Qg, {kF: "isInitial"}, function () {
        return this.Wj
    }, function (a) {
        w.j(a, "boolean", Qg, "isInitial");
        this.Wj = a
    });
    function yk(a, b, c) {
        this.start = a;
        this.end = b;
        this.Jt = new sa;
        this.Vw = c;
        this.Ux = !1
    }

    var $k = {
        opacity: function (a, b, c, d, e, f) {
            a.opacity = d(e, b, c - b, f)
        }, position: function (a, b, c, d, e, f) {
            e !== f ? a.hy(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f)) : a.position = new z(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f))
        }, "position:node": function (a, b, c, d, e, f) {
            var h = a.Y, k = c.Y;
            c = k.x + k.width / 2 - h.width / 2;
            h = k.y + k.height / 2 - h.height / 2;
            e !== f ? a.hy(d(e, b.x, c - b.x, f), d(e, b.y, h - b.y, f)) : a.position = new z(d(e, b.x, c - b.x, f), d(e, b.y, h - b.y, f))
        }, "position:placeholder": function (a, b, c, d, e, f) {
            e !== f ? a.hy(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f)) :
                a.position = new z(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f))
        }, scale: function (a, b, c, d, e, f) {
            a.scale = d(e, b, c - b, f)
        }, visible: function (a, b, c, d, e, f) {
            a.visible = e !== f ? b : c
        }
    };

    function mg() {
        0 < arguments.length && w.hd(mg);
        w.lc(this);
        this.Z = null;
        this.zb = new I(S);
        this.Qb = "";
        this.vc = 1;
        this.gz = !1;
        this.rl = this.Iz = this.Tk = this.Sk = this.Rk = this.Qk = this.Ok = this.Pk = this.Nk = this.Vk = this.Mk = this.Uk = this.Lk = this.Kk = !0;
        this.dz = !1;
        this.gw = []
    }

    w.fa("Layer", mg);
    mg.prototype.Pc = function (a) {
        this.Z = a
    };
    mg.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = 'Layer "' + this.name + '"';
        if (0 >= a)return b;
        for (var c = 0, d = 0, e = 0, f = 0, h = 0, k = this.zb.i; k.next();) {
            var l = k.value;
            l instanceof U ? e++ : l instanceof T ? d++ : l instanceof W ? f++ : l instanceof dh ? h++ : c++
        }
        k = "";
        0 < c && (k += c + " Parts ");
        0 < d && (k += d + " Nodes ");
        0 < e && (k += e + " Groups ");
        0 < f && (k += f + " Links ");
        0 < h && (k += h + " Adornments ");
        if (1 < a)for (a = this.zb.i; a.next();)c = a.value, k += "\n    " + c.toString(), d = c.data, null !== d && w.Jd(d) && (k += " #" + w.Jd(d)), c instanceof T ? k += " " +
            Qf(d) : c instanceof W && (k += " " + Qf(c.W) + " " + Qf(c.$));
        return b + " " + this.zb.count + ": " + k
    };
    mg.prototype.findObjectAt = mg.prototype.Je = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (!1 === this.rl)return null;
        var d = !1;
        null !== this.g && this.g.sb.Ha(a) && (d = !0);
        for (var e = w.K(), f = this.zb.n, h = f.length; h--;) {
            var k = f[h];
            if ((!0 !== d || !1 !== fl(k)) && k.isVisible() && (e.assign(a), La(e, k.ph), k = k.Je(e, b, c), null !== k && (null !== b && (k = b(k)), null !== k && (null === c || c(k)))))return w.v(e), k
        }
        w.v(e);
        return null
    };
    mg.prototype.findObjectsAt = mg.prototype.Mt = function (a, b, c, d) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof I || d instanceof J || (d = new J(G));
        if (!1 === this.rl)return d;
        var e = !1;
        null !== this.g && this.g.sb.Ha(a) && (e = !0);
        for (var f = w.K(), h = this.zb.n, k = h.length; k--;) {
            var l = h[k];
            if ((!0 !== e || !1 !== fl(l)) && l.isVisible()) {
                f.assign(a);
                La(f, l.ph);
                var m = l;
                l.Mt(f, b, c, d) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (d instanceof J && d.add(m), d instanceof I && d.add(m)))
            }
        }
        w.v(f);
        return d
    };
    mg.prototype.findObjectsIn = mg.prototype.yk = function (a, b, c, d, e) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof I || e instanceof J || (e = new J(G));
        if (!1 === this.rl)return e;
        var f = !1;
        null !== this.g && this.g.sb.vk(a) && (f = !0);
        for (var h = this.zb.n, k = h.length; k--;) {
            var l = h[k];
            if ((!0 !== f || !1 !== fl(l)) && l.isVisible()) {
                var m = l;
                l.yk(a, b, c, d, e) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (e instanceof J && e.add(m), e instanceof I && e.add(m)))
            }
        }
        return e
    };
    mg.prototype.fA = function (a, b, c, d, e, f, h) {
        if (!1 === this.rl)return e;
        for (var k = this.zb.n, l = k.length; l--;) {
            var m = k[l];
            if ((!0 !== h || !1 !== fl(m)) && f(m) && m.isVisible()) {
                var n = m;
                m.yk(a, b, c, d, e) && (null !== b && (n = b(n)), null === n || null !== c && !c(n) || (e instanceof J && e.add(n), e instanceof I && e.add(n)))
            }
        }
        return e
    };
    mg.prototype.findObjectsNear = mg.prototype.un = function (a, b, c, d, e, f) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e) {
            if (e instanceof I || e instanceof J)f = e;
            e = !0
        }
        f instanceof I || f instanceof J || (f = new J(G));
        if (!1 === this.rl)return f;
        var h = !1;
        null !== this.g && this.g.sb.Ha(a) && (h = !0);
        for (var k = w.K(), l = w.K(), m = this.zb.n, n = m.length; n--;) {
            var p = m[n];
            if ((!0 !== h || !1 !== fl(p)) && p.isVisible()) {
                k.assign(a);
                La(k, p.ph);
                l.l(a.x + b, a.y);
                La(l, p.ph);
                var q = p;
                p.un(k, l, c, d, e, f) && (null !== c && (q =
                    c(q)), null === q || null !== d && !d(q) || (f instanceof J && f.add(q), f instanceof I && f.add(q)))
            }
        }
        w.v(k);
        w.v(l);
        return f
    };
    g = mg.prototype;
    g.Bf = function (a, b) {
        if (this.visible) {
            var c;
            c = void 0 === b ? a.sb : b;
            for (var d = this.zb.n, e = d.length, f = 0; f < e; f++) {
                var h = d[f];
                h.VC = f;
                if (!(h instanceof W && !1 === h.Zg)) {
                    if (h instanceof dh) {
                        var k = h;
                        if (null !== k.Nf)continue
                    }
                    if (ab(h.Y, c))for (h.Bf(!0), gl(h), h = h.Kw; h.next();)k = h.value, rk(k, Infinity, Infinity), k.gc(), k.Bf(!0); else h.Bf(!1), null !== h.Kw && 0 < h.Kw.count && gl(h)
                }
            }
        }
    };
    g.se = function (a, b, c) {
        if (this.visible && 0 !== this.vc && (void 0 === c && (c = !0), c || !this.Jc)) {
            c = this.zb.n;
            var d = c.length;
            if (0 !== d) {
                1 !== this.vc && (a.globalAlpha = this.vc);
                var e = this.gw;
                e.length = 0;
                for (var f = b.scale, h = 0; h < d; h++) {
                    var k = c[h];
                    if (fl(k)) {
                        if (k instanceof W) {
                            var l = k;
                            l.ic && e.push(l);
                            if (!1 === l.Zg)continue
                        }
                        l = k.Y;
                        1 < l.width * f || 1 < l.height * f ? k.se(a, b) : hl(k, a)
                    }
                }
                a.globalAlpha = 1
            }
        }
    };
    function il(a, b, c, d) {
        if (a.visible && 0 !== a.vc) {
            1 !== a.vc && (b.globalAlpha = a.vc);
            var e = a.gw;
            e.length = 0;
            var f = c.scale;
            a = a.zb.n;
            for (var h = a.length, k = d.length, l = 0; l < h; l++) {
                var m = a[l];
                if (fl(m)) {
                    if (m instanceof W) {
                        var n = m;
                        n.ic && e.push(n);
                        if (!1 === n.Zg)continue
                    }
                    var n = jl(m, m.Y), p;
                    a:{
                        p = n;
                        for (var q = d, r = k, s = 2 / f, u = 4 / f, t = 0; t < r; t++) {
                            var x = q[t];
                            if (0 !== x.width && 0 !== x.height && p.aF(x.x - s, x.y - s, x.width + u, x.height + u)) {
                                p = !0;
                                break a
                            }
                        }
                        p = !1
                    }
                    p && (1 < n.width * f || 1 < n.height * f ? m.se(b, c) : hl(m, b))
                }
            }
            b.globalAlpha = 1
        }
    }

    g.h = function (a, b, c, d, e) {
        var f = this.g;
        null !== f && f.Wc(Mf, a, this, b, c, d, e)
    };
    g.$p = function (a, b, c) {
        var d = this.zb;
        b.Rv = this;
        if (a >= d.count)a = d.count; else if (d.da(a) === b)return -1;
        d.Ld(a, b);
        b.Wt(c);
        d = this.g;
        null !== d && (c ? d.na() : d.$p(b));
        kl(this, a, b);
        return a
    };
    g.jf = function (a, b, c) {
        if (!c && b.layer !== this && null !== b.layer)return b.layer.jf(a, b, c);
        var d = this.zb;
        if (0 > a || a >= d.length) {
            if (a = d.indexOf(b), 0 > a)return -1
        } else if (d.da(a) !== b && (a = d.indexOf(b), 0 > a))return -1;
        b.Xt(c);
        d.Xc(a);
        d = this.g;
        null !== d && (c ? d.na() : d.jf(b));
        b.Rv = null;
        return a
    };
    function kl(a, b, c) {
        b = ll(a, b, c);
        if (c instanceof U && null !== c && isNaN(c.eo)) {
            if (0 !== c.Mc.count) {
                for (var d = -1, e = a.zb.n, f = e.length, h = 0; h < f; h++) {
                    var k = e[h];
                    if (k === c && (b = h, 0 <= d))break;
                    if (0 > d && k.Ka === c && (d = h, 0 <= b))break
                }
                !(0 > d) && d < b && (e = a.zb, e.Xc(b), e.Ld(d, c))
            }
            c = c.Ka;
            null !== c && kl(a, -1, c)
        }
    }

    function ll(a, b, c) {
        var d = c.eo;
        if (isNaN(d))return b;
        a = a.zb;
        var e = a.count;
        if (1 >= e)return b;
        0 > b && (b = a.indexOf(c));
        if (0 > b)return -1;
        for (var f = b - 1, h = NaN; 0 <= f;) {
            h = a.da(f).eo;
            if (!isNaN(h))break;
            f--
        }
        for (var k = b + 1, l = NaN; k < e;) {
            l = a.da(k).eo;
            if (!isNaN(l))break;
            k++
        }
        if (!isNaN(h) && h > d)for (; ;) {
            if (-1 === f || h <= d) {
                f++;
                if (f === b)break;
                a.Xc(b);
                a.Ld(f, c);
                return f
            }
            for (h = NaN; 0 <= --f && (h = a.da(f).eo, isNaN(h)););
        } else if (!isNaN(l) && l < d)for (; ;) {
            if (k === e || l >= d) {
                k--;
                if (k === b)break;
                a.Xc(b);
                a.Ld(k, c);
                return k
            }
            for (l = NaN; ++k < e && (l = a.da(k).eo,
                isNaN(l)););
        }
        return b
    }

    g.clear = function () {
        for (var a = this.zb.dc(), b = a.length, c = 0; c < b; c++)a[c].Bf(!1), this.jf(-1, a[c], !1)
    };
    w.u(mg, {Hk: "parts"}, function () {
        return this.zb.i
    });
    w.u(mg, {wL: "partsBackwards"}, function () {
        return this.zb.Gn
    });
    w.u(mg, {g: "diagram"}, function () {
        return this.Z
    });
    w.defineProperty(mg, {name: "name"}, function () {
        return this.Qb
    }, function (a) {
        w.j(a, "string", mg, "name");
        var b = this.Qb;
        if (b !== a) {
            var c = this.g;
            if (null !== c)for ("" === b && w.k("Cannot rename default Layer to: " + a), c = c.Ex; c.next();)c.value.name === a && w.k("Layer.name is already present in this diagram: " + a);
            this.Qb = a;
            this.h("name", b, a);
            for (a = this.zb.i; a.next();)a.value.Wf = this.Qb
        }
    });
    w.defineProperty(mg, {opacity: "opacity"}, function () {
        return this.vc
    }, function (a) {
        var b = this.vc;
        b !== a && (w.j(a, "number", mg, "opacity"), (0 > a || 1 < a) && w.Ea(a, "0 <= value <= 1", mg, "opacity"), this.vc = a, this.h("opacity", b, a), a = this.g, null !== a && a.na())
    });
    w.defineProperty(mg, {Jc: "isTemporary"}, function () {
        return this.gz
    }, function (a) {
        var b = this.gz;
        b !== a && (w.j(a, "boolean", mg, "isTemporary"), this.gz = a, this.h("isTemporary", b, a))
    });
    w.defineProperty(mg, {visible: "visible"}, function () {
        return this.Iz
    }, function (a) {
        var b = this.Iz;
        if (b !== a) {
            w.j(a, "boolean", mg, "visible");
            this.Iz = a;
            this.h("visible", b, a);
            for (b = this.zb.i; b.next();)b.value.td(a);
            a = this.g;
            null !== a && a.na()
        }
    });
    w.defineProperty(mg, {Sg: "pickable"}, function () {
        return this.rl
    }, function (a) {
        var b = this.rl;
        b !== a && (w.j(a, "boolean", mg, "pickable"), this.rl = a, this.h("pickable", b, a))
    });
    w.defineProperty(mg, {dF: "isBoundsIncluded"}, function () {
        return this.dz
    }, function (a) {
        this.dz !== a && (this.dz = a, null !== this.g && this.g.qc())
    });
    w.defineProperty(mg, {sk: "allowCopy"}, function () {
        return this.Kk
    }, function (a) {
        var b = this.Kk;
        b !== a && (w.j(a, "boolean", mg, "allowCopy"), this.Kk = a, this.h("allowCopy", b, a))
    });
    w.defineProperty(mg, {gn: "allowDelete"}, function () {
        return this.Lk
    }, function (a) {
        var b = this.Lk;
        b !== a && (w.j(a, "boolean", mg, "allowDelete"), this.Lk = a, this.h("allowDelete", b, a))
    });
    w.defineProperty(mg, {Ow: "allowTextEdit"}, function () {
        return this.Uk
    }, function (a) {
        var b = this.Uk;
        b !== a && (w.j(a, "boolean", mg, "allowTextEdit"), this.Uk = a, this.h("allowTextEdit", b, a))
    });
    w.defineProperty(mg, {Lw: "allowGroup"}, function () {
        return this.Mk
    }, function (a) {
        var b = this.Mk;
        b !== a && (w.j(a, "boolean", mg, "allowGroup"), this.Mk = a, this.h("allowGroup", b, a))
    });
    w.defineProperty(mg, {Pw: "allowUngroup"}, function () {
        return this.Vk
    }, function (a) {
        var b = this.Vk;
        b !== a && (w.j(a, "boolean", mg, "allowUngroup"), this.Vk = a, this.h("allowUngroup", b, a))
    });
    w.defineProperty(mg, {At: "allowLink"}, function () {
        return this.Nk
    }, function (a) {
        var b = this.Nk;
        b !== a && (w.j(a, "boolean", mg, "allowLink"), this.Nk = a, this.h("allowLink", b, a))
    });
    w.defineProperty(mg, {hn: "allowRelink"}, function () {
        return this.Pk
    }, function (a) {
        var b = this.Pk;
        b !== a && (w.j(a, "boolean", mg, "allowRelink"), this.Pk = a, this.h("allowRelink", b, a))
    });
    w.defineProperty(mg, {Dl: "allowMove"}, function () {
        return this.Ok
    }, function (a) {
        var b = this.Ok;
        b !== a && (w.j(a, "boolean", mg, "allowMove"), this.Ok = a, this.h("allowMove", b, a))
    });
    w.defineProperty(mg, {Mw: "allowReshape"}, function () {
        return this.Qk
    }, function (a) {
        var b = this.Qk;
        b !== a && (w.j(a, "boolean", mg, "allowReshape"), this.Qk = a, this.h("allowReshape", b, a))
    });
    w.defineProperty(mg, {Bt: "allowResize"}, function () {
        return this.Rk
    }, function (a) {
        var b = this.Rk;
        b !== a && (w.j(a, "boolean", mg, "allowResize"), this.Rk = a, this.h("allowResize", b, a))
    });
    w.defineProperty(mg, {Nw: "allowRotate"}, function () {
        return this.Sk
    }, function (a) {
        var b = this.Sk;
        b !== a && (w.j(a, "boolean", mg, "allowRotate"), this.Sk = a, this.h("allowRotate", b, a))
    });
    w.defineProperty(mg, {tf: "allowSelect"}, function () {
        return this.Tk
    }, function (a) {
        var b = this.Tk;
        b !== a && (w.j(a, "boolean", mg, "allowSelect"), this.Tk = a, this.h("allowSelect", b, a))
    });
    function D(a) {
        function b() {
            window.document.removeEventListener("DOMContentLoaded", b, !1);
            ml(c)
        }

        1 < arguments.length && w.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");
        w.lc(this);
        nl = [];
        this.Rc = !0;
        this.KB = new Qg;
        this.KB.Pc(this);
        this.Cd = 17;
        this.Lr = !1;
        this.sz = "default";
        var c = this;
        null !== window.document.body ? ml(this) : window.document.addEventListener("DOMContentLoaded", b, !1);
        this.$b = new I(mg);
        this.Lb = this.Ib = 0;
        this.gk = this.Mb = this.qf = this.Eb = null;
        this.QF();
        this.Oo =
            null;
        this.PF();
        this.hb = (new z(NaN, NaN)).freeze();
        this.tb = 1;
        this.Hv = (new z(NaN, NaN)).freeze();
        this.Iv = NaN;
        this.Zv = 1E-4;
        this.Xv = 100;
        this.cd = new ia;
        this.Iw = (new z(NaN, NaN)).freeze();
        this.zv = (new A(NaN, NaN, NaN, NaN)).freeze();
        this.qw = (new eb(0, 0, 0, 0)).freeze();
        this.rw = ol;
        this.nw = this.lw = null;
        this.qm = ih;
        this.ro = oc;
        this.el = ih;
        this.Lo = oc;
        this.Jv = this.Gv = vb;
        this.Be = !0;
        this.Hr = !1;
        this.qg = new J(S);
        this.Zk = new ka(W, A);
        this.Co = !0;
        this.Nq = 250;
        this.mo = -1;
        this.dv = (new eb(16, 16, 16, 16)).freeze();
        this.rv = this.Mf = !1;
        this.Go = !0;
        this.Hi = new Af;
        this.Tc = new Af;
        this.Pb = new Af;
        this.gh = this.vi = null;
        this.ht = !1;
        this.Ny = this.Oy = null;
        pl(this);
        this.ep = new J(T);
        this.wl = new J(U);
        this.Yo = new J(W);
        this.zb = new J(S);
        this.Pv = !0;
        this.Dw = ql;
        this.HC = !1;
        this.Fw = Oi;
        this.Iy = this.Ly = this.Ez = null;
        this.kv = "";
        this.jr = "auto";
        this.zi = this.dj = this.Si = this.bw = this.Ti = this.Ui = this.Vi = this.yi = this.Ei = this.wi = null;
        this.nz = !1;
        this.pD = {};
        this.kw = 0;
        this.Zi = [null, null];
        this.Fy = null;
        this.Fq = this.My = this.zz = this.vD = this.cj = !1;
        this.SC = !0;
        this.fz = this.Xd = !1;
        this.ke = null;
        var d = this;
        this.$C = function (a) {
            if (a.ba === d.ba && d.Ua) {
                d.Ua = !1;
                try {
                    var b = a.xc;
                    "" === a.nf && b === Mf && rl(d, a.object, a.propertyName)
                } finally {
                    d.Ua = !0
                }
            }
        };
        this.aD = function (a) {
            sl(d, a)
        };
        this.VD = !0;
        this.dh = -2;
        this.Ai = new ka(Object, S);
        this.Kj = new ka(Object, W);
        this.Em = new ka(Object, Array);
        this.gp = new ka("string", Array);
        this.qz = new I(tl);
        this.Ji = !1;
        this.Lk = this.Kk = this.Tu = this.cf = !0;
        this.Vu = this.Uu = !1;
        this.$u = this.Yu = this.Tk = this.Sk = this.Rk = this.Qk = this.Ok = this.Pk = this.Nk = this.Xu = this.Vk = this.Mk = this.Uk = !0;
        this.Cm = this.PC = !1;
        this.Zu = this.Wu = this.Ev = this.Dv = !0;
        this.tw = this.pw = 16;
        this.vz = this.ow = !1;
        this.Qs = this.sw = null;
        this.wz = this.xz = 0;
        this.ff = (new eb(5)).freeze();
        this.vw = (new J(S)).freeze();
        this.Yv = 999999999;
        this.Fv = (new J(S)).freeze();
        this.fl = this.Am = this.Uj = !0;
        this.cl = this.Tj = !1;
        this.ie = null;
        this.bv = !0;
        this.eh = !1;
        this.GG = new J(W);
        this.FC = new J(ul);
        this.Bd = null;
        this.gD = 1;
        this.yD = 0;
        this.nh = {scale: 1, position: new z, bounds: new A, isScroll: !1};
        this.UD = (new A(NaN, NaN, NaN, NaN)).freeze();
        this.sv = (new A(NaN,
            NaN, NaN, NaN)).freeze();
        this.uv = null;
        this.hw = new J(vl);
        wl(this);
        this.Tv = this.Bv = this.cw = this.kC = this.jC = this.lC = this.$j = this.al = this.Wi = null;
        xl(this);
        this.nd = null;
        this.Av = !1;
        this.uo = null;
        this.ab = new bh;
        this.ab.initializeStandardTools();
        this.Za = this.Ft = this.ab;
        this.ob = new og;
        this.ba = new P;
        this.cj = !0;
        this.Rb = new pg;
        this.cj = !1;
        this.xC = this.Qy = null;
        this.zd = 1;
        this.jk = null;
        var e = w.vfo.split(".");
        !0 !== w.$w.licenseKey && "1" === e[0] && 7 > parseInt(e[1], 10) && (w.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version " +
            w.vfo + ". This license key will do nothing until you upgrade to GoJS 1.7 or later."), w.$w.licenseKey = !0);
        this.jl = 1;
        this.Gm = 0;
        this.UC = new z;
        this.QD = 500;
        this.cv = new z;
        this.Zs = null;
        this.gl = !1;
        this.preventDefault = this.Tx = this.FF = this.GF = this.EF = this.On = this.Ng = this.Pn = this.Mn = this.Nn = this.xB = this.oB = this.pB = this.qB = this.tl = this.Ms = this.sl = this.Ls = null;
        this.dl = new yl;
        void 0 !== a && zl(this, a);
        this.Mv = !1;
        this.dD = 1;
        this.Rc = !1
    }

    w.fa("Diagram", D);
    D.prototype.clear = D.prototype.clear = function () {
        var a = null;
        null !== this.nd && (a = this.nd.U);
        this.ba.clear();
        for (var b = this.$b.length, c = 0; c < b; c++)this.$b.n[c].clear();
        this.qg.clear();
        this.Zk.clear();
        this.ep.clear();
        this.wl.clear();
        this.Yo.clear();
        this.zb.clear();
        this.Ai.clear();
        this.Kj.clear();
        this.Em.clear();
        this.vw.Ra();
        this.vw.clear();
        this.vw.freeze();
        this.Fv.Ra();
        this.Fv.clear();
        this.Fv.freeze();
        $g = this.uo = null;
        ah = "";
        this.sv = (new A(NaN, NaN, NaN, NaN)).freeze();
        null !== a && (this.add(a), this.zb.remove(a));
        this.na()
    };
    D.prototype.reset = D.prototype.reset = function () {
        this.Rc = !0;
        this.clear();
        this.$b = new I(mg);
        this.QF();
        this.PF();
        this.hb = (new z(NaN, NaN)).freeze();
        this.tb = 1;
        this.Hv = (new z(NaN, NaN)).freeze();
        this.Iv = NaN;
        this.Zv = 1E-4;
        this.Xv = 100;
        this.Iw = (new z(NaN, NaN)).freeze();
        this.zv = (new A(NaN, NaN, NaN, NaN)).freeze();
        this.qw = (new eb(0, 0, 0, 0)).freeze();
        this.rw = ol;
        this.nw = this.lw = null;
        this.qm = ih;
        this.ro = oc;
        this.el = ih;
        this.Lo = oc;
        this.Jv = this.Gv = vb;
        this.Nq = 250;
        this.dv = (new eb(16, 16, 16, 16)).freeze();
        this.Pv = !0;
        this.Dw = ql;
        this.Fw = Oi;
        this.jr = "auto";
        this.zi = this.dj = this.Si = this.bw = this.Ti = this.Ui = this.Vi = this.yi = this.Ei = this.wi = null;
        this.Ji = !1;
        this.Lk = this.Kk = this.Tu = this.cf = !0;
        this.Vu = this.Uu = !1;
        this.Zu = this.Wu = this.Ev = this.Dv = this.$u = this.Yu = this.Tk = this.Sk = this.Rk = this.Qk = this.Ok = this.Pk = this.Nk = this.Xu = this.Vk = this.Mk = this.Uk = !0;
        this.tw = this.pw = 16;
        this.ff = (new eb(5)).freeze();
        this.Yv = 999999999;
        this.ie = null;
        xl(this);
        this.nd = null;
        this.ab = new bh;
        this.ab.initializeStandardTools();
        this.Za = this.Ft = this.ab;
        this.ob = new og;
        this.cj = !0;
        wl(this);
        this.Rb = new pg;
        this.cj = !1;
        this.ba = new P;
        this.eh = !1;
        this.Go = !0;
        this.Rc = this.Mf = !1;
        this.na();
        this.gh = this.vi = null;
        pl(this);
        this.kv = ""
    };
    function xl(a) {
        a.Wi = new ka("string", S);
        var b = new T, c = new Ch;
        c.bind(new Vg("text", "", Qf));
        b.add(c);
        a.lC = b;
        a.Wi.add("", b);
        b = new T;
        c = new Ch;
        c.stroke = "brown";
        c.bind(new Vg("text", "", Qf));
        b.add(c);
        a.Wi.add("Comment", b);
        b = new T;
        b.dm = !1;
        b.Pz = !1;
        c = new X;
        c.Cb = "Ellipse";
        c.fill = "black";
        c.stroke = null;
        c.Aa = (new ha(3, 3)).Ga();
        b.add(c);
        a.Wi.add("LinkLabel", b);
        a.al = new ka("string", U);
        b = new U;
        b.ZA = "GROUPPANEL";
        b.type = Al;
        c = new Ch;
        c.font = "bold 12pt sans-serif";
        c.bind(new Vg("text", "", Qf));
        b.add(c);
        c = new C(Bl);
        c.name =
            "GROUPPANEL";
        var d = new X;
        d.Cb = "Rectangle";
        d.fill = "rgba(128,128,128,0.2)";
        d.stroke = "black";
        c.add(d);
        d = new Hj;
        d.padding = (new eb(5, 5, 5, 5)).Ga();
        c.add(d);
        b.add(c);
        a.jC = b;
        a.al.add("", b);
        a.$j = new ka("string", W);
        b = new W;
        c = new X;
        c.Uf = !0;
        b.add(c);
        c = new X;
        c.zq = "Standard";
        c.fill = "black";
        c.stroke = null;
        c.kb = 0;
        b.add(c);
        a.kC = b;
        a.$j.add("", b);
        b = new W;
        c = new X;
        c.Uf = !0;
        c.stroke = "brown";
        b.add(c);
        a.$j.add("Comment", b);
        b = new dh;
        b.type = Bl;
        c = new X;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.kb = 3;
        b.add(c);
        c = new Hj;
        c.margin = (new eb(1.5,
            1.5, 1.5, 1.5)).Ga();
        b.add(c);
        a.cw = b;
        a.Bv = b;
        b = new dh;
        b.type = aj;
        c = new X;
        c.Uf = !0;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.kb = 3;
        b.add(c);
        a.Tv = b
    }

    function ml(a) {
        var b = w.createElement("p");
        b.style.width = "100%";
        b.style.height = "200px";
        b.style.boxSizing = "content-box";
        var c = w.createElement("div");
        c.style.position = "absolute";
        c.style.visibility = "hidden";
        c.style.width = "200px";
        c.style.height = "150px";
        c.style.overflow = "hidden";
        c.style.boxSizing = "content-box";
        c.appendChild(b);
        window.document.body.appendChild(c);
        var d = b.offsetWidth;
        c.style.overflow = "scroll";
        b = b.offsetWidth;
        d === b && (b = c.clientWidth);
        window.document.body.removeChild(c);
        c = d - b;
        0 !== c || w.iF ||
        (c = 11);
        a.Cd = c;
        c = w.createElement("div");
        c.dir = "rtl";
        c.style.cssText = "font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";
        c.textContent = "A";
        window.document.body.appendChild(c);
        d = "reverse";
        0 < c.scrollLeft ? d = "default" : (c.scrollLeft = 1, 0 === c.scrollLeft && (d = "negative"));
        window.document.body.removeChild(c);
        a.sz = d
    }

    D.prototype.fc = function (a) {
        a.De === D ? this.Fl = a : w.Ej(this, a)
    };
    D.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "";
        this.lj && this.lj.id && (b = this.lj.id);
        b = 'Diagram "' + b + '"';
        if (0 >= a)return b;
        for (var c = this.$b.i; c.next();)b += "\n  " + c.value.toString(a - 1);
        return b
    };
    D.fromDiv = function (a) {
        var b = a;
        "string" === typeof a && (b = window.document.getElementById(a));
        return b instanceof HTMLDivElement && b.Z instanceof D ? b.Z : null
    };
    w.defineProperty(D, {lj: "div"}, function () {
        return this.Mb
    }, function (a) {
        null !== a && w.G(a, HTMLDivElement, D, "div");
        if (this.Mb !== a) {
            nl = [];
            var b = this.Mb;
            null !== b ? (b.Z = void 0, b.innerHTML = "", null !== this.Eb && (this.Eb.removeEventListener("touchstart", this.qB, !1), this.Eb.removeEventListener("touchmove", this.pB, !1), this.Eb.removeEventListener("touchend", this.oB, !1), this.Eb.Gd.Z = null), b = this.ab, null !== b && (b.af.each(function (a) {
                a.cancelWaitAfter()
            }), b.Zf.each(function (a) {
                a.cancelWaitAfter()
            }), b.$f.each(function (a) {
                a.cancelWaitAfter()
            })),
                b.cancelWaitAfter(), this.Za.doCancel(), this.qf = this.Eb = null, window.removeEventListener("resize", this.xB, !1), window.removeEventListener("mousemove", this.Nn, !0), window.removeEventListener("mousedown", this.Mn, !0), window.removeEventListener("mouseup", this.Pn, !0), window.removeEventListener("mousewheel", this.Ng, !0), window.removeEventListener("DOMMouseScroll", this.Ng, !0), window.removeEventListener("mouseout", this.On, !0)) : this.eh = !1;
            this.Mb = null;
            if (null !== a) {
                if (b = a.Z)b.lj = null;
                zl(this, a);
                this.Sx()
            }
        }
    });
    function Cl(a) {
        var b = a.Eb;
        b.addEventListener("touchstart", a.qB, !1);
        b.addEventListener("touchmove", a.pB, !1);
        b.addEventListener("touchend", a.oB, !1);
        b.addEventListener("mousemove", a.Nn, !1);
        b.addEventListener("mousedown", a.Mn, !1);
        b.addEventListener("mouseup", a.Pn, !1);
        b.addEventListener("mousewheel", a.Ng, !1);
        b.addEventListener("DOMMouseScroll", a.Ng, !1);
        b.addEventListener("mouseout", a.On, !1);
        b.addEventListener("keydown", a.xI, !1);
        b.addEventListener("keyup", a.yI, !1);
        b.addEventListener("selectstart", function (a) {
            a.preventDefault();
            return !1
        }, !1);
        b.addEventListener("contextmenu", function (a) {
            a.preventDefault();
            return !1
        }, !1);
        b.addEventListener("gesturechange", function (b) {
            a.ab.Xp === tk && b.preventDefault()
        }, !1);
        b.addEventListener("pointerdown", a.EF, !1);
        b.addEventListener("pointermove", a.GF, !1);
        b.addEventListener("pointerleave", a.FF, !1);
        window.addEventListener("resize", a.xB, !1)
    }

    D.prototype.computePixelRatio = function () {
        return null !== this.jk ? this.jk : this.dD
    };
    D.prototype.doMouseMove = function () {
        this.Za.doMouseMove()
    };
    D.prototype.doMouseDown = function () {
        this.Za.doMouseDown()
    };
    D.prototype.doMouseUp = function () {
        this.Za.doMouseUp()
    };
    D.prototype.doMouseWheel = function () {
        this.Za.doMouseWheel()
    };
    D.prototype.doKeyDown = function () {
        this.Za.doKeyDown()
    };
    D.prototype.doKeyUp = function () {
        this.Za.doKeyUp()
    };
    D.prototype.doFocus = function () {
        this.focus()
    };
    D.prototype.focus = D.prototype.focus = function () {
        this.Eb && this.Eb.focus()
    };
    function Ak(a) {
        if (null !== a.Eb) {
            var b = a.Mb;
            if (0 !== b.clientWidth && 0 !== b.clientHeight) {
                var c = a.cl ? a.Cd : 0, d = a.Tj ? a.Cd : 0, e = a.zd;
                a.zd = a.computePixelRatio();
                a.zd !== e && (a.Hr = !0, a.Le());
                if (b.clientWidth !== a.Ib + c || b.clientHeight !== a.Lb + d)a.Am = !0, a.Be = !0, b = a.Rb, null !== b && b.Ax && a.Fl === ih && b.J(), a.Xd || a.Le()
            }
        }
    }

    function wl(a) {
        var b = new mg;
        b.name = "Background";
        a.ut(b);
        b = new mg;
        b.name = "";
        a.ut(b);
        b = new mg;
        b.name = "Foreground";
        a.ut(b);
        b = new mg;
        b.name = "Adornment";
        b.Jc = !0;
        a.ut(b);
        b = new mg;
        b.name = "Tool";
        b.Jc = !0;
        b.dF = !0;
        a.ut(b);
        b = new mg;
        b.name = "Grid";
        b.tf = !1;
        b.Sg = !1;
        b.Jc = !0;
        a.ZG(b, a.Lt("Background"))
    }

    function Dl(a) {
        a.nd = new C(El);
        a.nd.name = "GRID";
        var b = new X;
        b.Cb = "LineH";
        b.stroke = "lightgray";
        b.kb = .5;
        b.interval = 1;
        a.nd.add(b);
        b = new X;
        b.Cb = "LineH";
        b.stroke = "gray";
        b.kb = .5;
        b.interval = 5;
        a.nd.add(b);
        b = new X;
        b.Cb = "LineH";
        b.stroke = "gray";
        b.kb = 1;
        b.interval = 10;
        a.nd.add(b);
        b = new X;
        b.Cb = "LineV";
        b.stroke = "lightgray";
        b.kb = .5;
        b.interval = 1;
        a.nd.add(b);
        b = new X;
        b.Cb = "LineV";
        b.stroke = "gray";
        b.kb = .5;
        b.interval = 5;
        a.nd.add(b);
        b = new X;
        b.Cb = "LineV";
        b.stroke = "gray";
        b.kb = 1;
        b.interval = 10;
        a.nd.add(b);
        b = new S;
        b.add(a.nd);
        b.Wf = "Grid";
        b.eo = 0;
        b.xA = !1;
        b.cF = !1;
        b.Sg = !1;
        b.AA = "GRID";
        a.add(b);
        a.zb.remove(b);
        a.nd.visible = !1
    }

    function Fl() {
        this.Z.isEnabled ? this.Z.HH(this) : Gl(this.Z)
    }

    function Hl(a) {
        this.Z.isEnabled ? (this.Z.vz = !0, this.Z.xz = a.target.scrollTop, this.Z.wz = a.target.scrollLeft) : Gl(this.Z)
    }

    D.prototype.diagramScroll = D.prototype.HH = function (a) {
        if (this.vz && null !== this.Eb) {
            this.ow = !0;
            var b = this.qe, c = this.sb, d = b.width, e = c.width, f = b.height, h = c.height, k = b.right, l = c.right, m = b.bottom, n = c.bottom, p = b.x, q = c.x, b = b.y, c = c.y, r = this.scale, s;
            s = a.scrollLeft;
            if (this.Lr)switch (this.sz) {
                case "negative":
                    s = s + a.scrollWidth - a.clientWidth;
                    break;
                case "reverse":
                    s = a.scrollWidth - s - a.clientWidth
            }
            var u = s;
            e < d || h < f ? (s = w.xb(this.position.x, this.position.y), this.me && this.wz !== u && (s.x = u / r + p, this.wz = u), this.ne && this.xz !==
            a.scrollTop && (s.y = a.scrollTop / r + b, this.xz = a.scrollTop), this.position = s, w.v(s), this.Am = this.ow = !1) : (s = w.K(), a.NG && this.me && (p < q && (this.position = s.l(u + p, this.position.y)), k > l && (this.position = s.l(-(this.sw.scrollWidth - this.Ib) + u - this.Ib / r + k, this.position.y))), a.OG && this.ne && (b < c && (this.position = s.l(this.position.x, a.scrollTop + b)), m > n && (this.position = s.l(this.position.x, -(this.sw.scrollHeight - this.Lb) + a.scrollTop - this.Lb / r + m))), w.v(s), Il(this), this.Am = this.ow = !1, b = this.qe, c = this.sb, k = b.right, l = c.right,
                m = b.bottom, n = c.bottom, p = b.x, q = c.x, b = b.y, c = c.y, e >= d && p >= q && k <= l && (this.Qs.style.width = "1px"), h >= f && b >= c && m <= n && (this.Qs.style.height = "1px"))
        }
    };
    D.prototype.computeBounds = D.prototype.sh = function () {
        0 < this.qg.count && Ai(this);
        return Jl(this)
    };
    function Jl(a) {
        if (a.LE.H()) {
            var b = a.LE.copy();
            b.Jw(a.padding);
            return b
        }
        for (var c = !0, d = a.$b.n, e = d.length, f = 0; f < e; f++) {
            var h = d[f];
            if (h.visible && (!h.Jc || h.dF))for (var h = h.zb.n, k = h.length, l = 0; l < k; l++) {
                var m = h[l];
                m.xA && m.isVisible() && (m = m.Y, m.H() && (c ? (c = !1, b = m.copy()) : b.Gh(m)))
            }
        }
        c && (b = new A(0, 0, 0, 0));
        b.Jw(a.padding);
        return b
    }

    D.prototype.computePartsBounds = function (a, b) {
        void 0 === b && (b = !1);
        for (var c = null, d = a.i; d.next();) {
            var e = d.value;
            !b && e instanceof W || (e.Ze(), null === c ? c = e.Y.copy() : c.Gh(e.Y))
        }
        return null === c ? new A(NaN, NaN, 0, 0) : c
    };
    function Kl(a, b) {
        if ((b || a.eh) && !a.Rc && null !== a.Eb && !a.Pa.kf && a.qe.H()) {
            a.Rc = !0;
            var c = a.qm;
            b && a.el !== ih && (c = a.el);
            var d = c !== ih ? Ll(a, c) : a.scale, c = a.sb.copy(), e = a.Ib / d, f = a.Lb / d, h = null, k = a.Pa;
            k.oc && (h = a.hb.copy());
            a.position.Ra();
            var l = a.ro;
            b && !l.fd() && a.Lo.fd() && (l = a.Lo);
            Ml(a, a.hb, a.qe, e, f, l, b);
            a.position.freeze();
            null !== h && dl(k, h, a.hb);
            e = a.scale;
            a.scale = d;
            a.Rc = !1;
            d = a.sb;
            d.Ic(c) || a.uu(c, d, e, a.scale, !1)
        }
    }

    function Ll(a, b) {
        var c = a.ob.Yw;
        if (null === a.Eb)return c;
        a.Uj && Nl(a, a.sh());
        var d = a.qe;
        if (!d.H())return c;
        var e = d.width, d = d.height, f = a.Ib, h = a.Lb, k = f / e, l = h / d;
        return b === Ol ? (e = Math.min(l, k), e > c && (e = c), e < a.yh && (e = a.yh), e > a.xh && (e = a.xh), e) : b === Pl ? (e = l > k ? (h - a.Cd) / d : (f - a.Cd) / e, e > c && (e = c), e < a.yh && (e = a.yh), e > a.xh && (e = a.xh), e) : a.scale
    }

    D.prototype.zoomToFit = D.prototype.zoomToFit = function () {
        this.scale = Ll(this, Ol)
    };
    D.prototype.zoomToRect = function (a, b) {
        void 0 === b && (b = Ol);
        var c = a.width, d = a.height;
        if (!(0 === c || 0 === d || isNaN(c) && isNaN(d))) {
            var e = 1;
            if (b === Ol || b === Pl)if (isNaN(c))e = this.sb.height * this.scale / d; else if (isNaN(d))e = this.sb.width * this.scale / c; else var e = this.Ib, f = this.Lb, e = b === Pl ? f / d > e / c ? (f - (this.Tj ? this.Cd : 0)) / d : (e - (this.cl ? this.Cd : 0)) / c : Math.min(f / d, e / c);
            this.scale = e;
            this.position = new z(a.x, a.y)
        }
    };
    w.defineProperty(D, {vA: null}, function () {
        return this.Rc
    }, function (a) {
        this.Rc = a
    });
    D.prototype.alignDocument = function (a, b) {
        this.Uj && Nl(this, this.sh());
        var c = this.qe, d = this.sb;
        this.position = new z(c.x + (a.x * c.width + a.offsetX) - (b.x * d.width - b.offsetX), c.y + (a.y * c.height + a.offsetY) - (b.y * d.height - b.offsetY))
    };
    function Ml(a, b, c, d, e, f, h) {
        var k = b.x, l = b.y;
        if (h || a.WA === ol)f.fd() && (d > c.width && (k = c.x + (f.x * c.width + f.offsetX) - (f.x * d - f.offsetX)), e > c.height && (l = c.y + (f.y * c.height + f.offsetY) - (f.y * e - f.offsetY))), f = a.XF, h = d - c.width, d < c.width + f.left + f.right ? (k = Math.min(k + d / 2, c.right + Math.max(h, f.right) - d / 2), k = Math.max(k, c.left - Math.max(h, f.left) + d / 2), k -= d / 2) : k > c.left ? k = c.left : k < c.right - d && (k = c.right - d), d = e - c.height, e < c.height + f.top + f.bottom ? (l = Math.min(l + e / 2, c.bottom + Math.max(d, f.bottom) - e / 2), l = Math.max(l, c.top - Math.max(d,
                f.top) + e / 2), l -= e / 2) : l > c.top ? l = c.top : l < c.bottom - e && (l = c.bottom - e);
        b.x = isFinite(k) ? k : -a.padding.left;
        b.y = isFinite(l) ? l : -a.padding.top;
        null !== a.IF && (a = a.IF(a, b), b.x = a.x, b.y = a.y)
    }

    D.prototype.findPartAt = D.prototype.Nt = function (a, b) {
        var c = b ? Ei(this, a, function (a) {
            return a.U
        }, function (a) {
            return a.canSelect()
        }) : Ei(this, a, function (a) {
            return a.U
        });
        return c instanceof S ? c : null
    };
    D.prototype.findObjectAt = D.prototype.Je = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        Ai(this);
        for (var d = this.$b.Gn; d.next();) {
            var e = d.value;
            if (e.visible && (e = e.Je(a, b, c), null !== e))return e
        }
        return null
    };
    function Ei(a, b, c, d) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        Ai(a);
        for (a = a.$b.Gn; a.next();) {
            var e = a.value;
            if (e.visible && !e.Jc && (e = e.Je(b, c, d), null !== e))return e
        }
        return null
    }

    D.prototype.findObjectsAt = D.prototype.Mt = function (a, b, c, d) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof I || d instanceof J || (d = new J(G));
        Ai(this);
        for (var e = this.$b.Gn; e.next();) {
            var f = e.value;
            f.visible && f.Mt(a, b, c, d)
        }
        return d
    };
    D.prototype.findObjectsIn = D.prototype.yk = function (a, b, c, d, e) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof I || e instanceof J || (e = new J(G));
        Ai(this);
        for (var f = this.$b.Gn; f.next();) {
            var h = f.value;
            h.visible && h.yk(a, b, c, d, e)
        }
        return e
    };
    D.prototype.fA = function (a, b, c, d, e, f) {
        var h = new J(G);
        Ai(this);
        for (var k = this.$b.Gn; k.next();) {
            var l = k.value;
            l.visible && l.fA(a, b, c, d, h, e, f)
        }
        return h
    };
    D.prototype.findObjectsNear = D.prototype.un = function (a, b, c, d, e, f) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e) {
            if (e instanceof I || e instanceof J)f = e;
            e = !0
        }
        f instanceof I || f instanceof J || (f = new J(G));
        Ai(this);
        for (var h = this.$b.Gn; h.next();) {
            var k = h.value;
            k.visible && k.un(a, b, c, d, e, f)
        }
        return f
    };
    D.prototype.acceptEvent = function (a) {
        var b = this.Tc;
        this.Tc = this.Pb;
        this.Pb = b;
        Ql(this, this, a, b, a instanceof MouseEvent);
        return b
    };
    function Ql(a, b, c, d, e) {
        d.g = b;
        d.event = c;
        e ? Rl(a, c, d) : (d.bf = b.Pb.bf, d.ca = b.Pb.ca);
        a = 0;
        c.ctrlKey && (a += 1);
        c.altKey && (a += 2);
        c.shiftKey && (a += 4);
        c.metaKey && (a += 8);
        d.ud = a;
        d.button = c.button;
        void 0 === c.buttons || w.qI || (d.buttons = c.buttons);
        w.Ek && 0 === c.button && c.ctrlKey && (d.button = 2);
        d.Nl = !1;
        d.up = !1;
        d.Fe = 1;
        d.Ml = 0;
        d.Ac = !1;
        d.bubbles = !1;
        d.timestamp = Date.now();
        d.du = !1;
        d.Ug = c.target.Z ? c.target.Z : null;
        d.Pe = null
    }

    function Sl(a, b, c, d, e) {
        d.g = a;
        Rl(a, c, d);
        d.ud = 0;
        d.button = 0;
        d.buttons = 1;
        d.Nl = !0;
        d.up = !1;
        d.Fe = 1;
        d.Ml = 0;
        d.Ac = !1;
        d.bubbles = !0;
        d.event = b;
        d.timestamp = Date.now();
        d.du = e;
        d.Ug = b.target.Z ? b.target.Z : null;
        d.Pe = null;
        a.Hi = d.copy();
        Jh = null
    }

    function Tl(a, b, c, d, e) {
        var f = null;
        d.g = a;
        null !== c ? ((f = window.document.elementFromPoint(c.clientX, c.clientY)) && f.Z ? f = f.Z : (c = b.changedTouches[0], f = a), d.Ug = f, Rl(a, c, d)) : null !== a.Tc ? (d.ca = a.Tc.ca, d.bf = a.Tc.bf, d.Ug = a.Tc.Ug) : null !== a.Hi && (d.ca = a.Hi.ca, d.bf = a.Hi.bf, d.Ug = a.Hi.Ug);
        d.ud = 0;
        d.button = 0;
        d.buttons = 1;
        d.Nl = !1;
        d.up = !1;
        d.Fe = 1;
        d.Ml = 0;
        d.Ac = !1;
        d.bubbles = !1;
        d.event = b;
        d.timestamp = Date.now();
        d.du = e;
        d.Pe = null
    }

    function Ul(a, b) {
        if (a.bubbles)return !0;
        void 0 !== b.stopPropagation && b.stopPropagation();
        (void 0 === b.touches || 2 > b.touches.length) && b.preventDefault();
        b.cancelBubble = !0;
        return !1
    }

    D.prototype.xI = function (a) {
        if (!this.Z.isEnabled)return !1;
        var b = this.Z.Pb;
        Ql(this.Z, this.Z, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.Nl = !0;
        switch (a.which) {
            case 8:
                b.key = "Backspace";
                break;
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del";
                break;
            case 48:
                b.key = "0";
                break;
            case 187:
            case 61:
            case 107:
                b.key =
                    "Add";
                break;
            case 189:
            case 173:
            case 109:
                b.key = "Subtract";
                break;
            case 27:
                b.key = "Esc"
        }
        this.Z.doKeyDown();
        return 187 !== a.which && 189 !== a.which && 48 !== a.which && 107 !== a.which && 109 !== a.which && 61 !== a.which && 173 !== a.which || !0 !== a.ctrlKey ? Ul(b, a) : (a.cancelBubble = !0, a.preventDefault(), a.stopPropagation(), !1)
    };
    D.prototype.yI = function (a) {
        if (!this.Z.isEnabled)return !1;
        var b = this.Z.Pb;
        Ql(this.Z, this.Z, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.up = !0;
        switch (a.which) {
            case 8:
                b.key = "Backspace";
                break;
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del";
                break;
            case 93:
                a.preventDefault()
        }
        this.Z.doKeyUp();
        return Ul(b, a)
    };
    D.prototype.zr = function (a) {
        var b = this.Eb;
        if (null === b)return new z(0, 0);
        var c = this.Ib, d = this.Lb, b = b.getBoundingClientRect(), c = a.clientX - c / b.width * b.left;
        a = a.clientY - d / b.height * b.top;
        return null !== this.cd ? (a = new z(c, a), La(a, this.cd), a) : new z(c, a)
    };
    function Rl(a, b, c) {
        var d = a.Eb, e = a.Ib, f = a.Lb, h = 0, k = 0;
        null !== d && (d = d.getBoundingClientRect(), h = b.clientX - e / d.width * d.left, k = b.clientY - f / d.height * d.top);
        c.bf.l(h, k);
        null !== a.cd ? (b = w.xb(h, k), a.cd.li(b), c.ca.assign(b), w.v(b)) : c.ca.l(h, k)
    }

    function Bf(a, b, c, d) {
        var e = null;
        if (void 0 !== b.targetTouches) {
            if (2 > b.targetTouches.length)return;
            e = b.targetTouches[c]
        } else if (null !== a.Zi[0])e = a.Zi[c]; else return;
        c = a.Eb;
        b = a.Ib;
        a = a.Lb;
        var f = 0, h = 0;
        null !== c && null !== e && (c = c.getBoundingClientRect(), f = e.clientX - b / c.width * c.left, h = e.clientY - a / c.height * c.top);
        d.l(f, h)
    }

    D.prototype.invalidateDocumentBounds = D.prototype.qc = function () {
        this.Uj || (this.Uj = !0, this.Le(!0))
    };
    function al(a) {
        a.Xd || Ai(a);
        a.Uj && Nl(a, a.sh())
    }

    D.prototype.redraw = D.prototype.Sx = function () {
        this.Rc || this.Xd || (this.na(), Vl(this), Il(this), this.qc(), this.Yf())
    };
    D.prototype.isUpdateRequested = function () {
        return this.Mf
    };
    D.prototype.delayInitialization = function (a) {
        void 0 === a && (a = null);
        var b = this.Pa, c = b.isEnabled;
        b.pi();
        b.isEnabled = !1;
        Ki(this);
        this.eh = !1;
        b.isEnabled = c;
        null !== a && w.setTimeout(a, 1)
    };
    D.prototype.requestUpdate = D.prototype.Le = function (a) {
        void 0 === a && (a = !1);
        if (!0 !== this.Mf && !(this.Rc || !1 === a && this.Xd)) {
            this.Mf = !0;
            var b = this;
            requestAnimationFrame(function () {
                b.Mf && b.Yf()
            })
        }
    };
    D.prototype.maybeUpdate = D.prototype.Yf = function () {
        if (!this.Go || this.Mf)this.Go && (this.Go = !1), Ki(this)
    };
    function Wl(a, b) {
        a.Pa.kf || a.Rc || !a.Am || Gl(a) || (b && Ai(a), Kl(a, !1))
    }

    function Ki(a) {
        if (!a.Xd && (a.Mf = !1, null !== a.Mb)) {
            a.Xd = !0;
            var b = a.Pa, c = a.qz;
            if (!b.Ro && 0 !== c.length) {
                for (var d = c.n, e = d.length, f = 0; f < e; f++) {
                    var h = d[f];
                    Xl(h, !1);
                    h.I()
                }
                c.clear()
            }
            c = a.FC;
            0 < c.count && (c.each(function (a) {
                a.uB()
            }), c.clear());
            d = c = !1;
            b.kf && (d = !0, c = a.wb, a.wb = !0);
            b.oc || Ak(a);
            Wl(a, !1);
            null !== a.nd && (a.nd.visible && !a.Av && (Yl(a), a.Av = !0), !a.nd.visible && a.Av && (a.Av = !1));
            Ai(a);
            e = !1;
            if (!a.eh || a.bv)a.eh ? Zl(a, !a.rv) : (a.Tb("Initial Layout"), !1 === b.isEnabled && b.pi(), Zl(a, !1)), e = !0;
            a.rv = !1;
            Ai(a);
            a.zz || b.kf ||
            al(a);
            Wl(a, !0);
            e && (a.eh || $l(a), a.Ba("LayoutCompleted"));
            Ai(a);
            e && !a.eh && (a.eh = !0, a.Fd("Initial Layout"), a.wb || a.oa.clear(), w.setTimeout(function () {
                a.ni = !1
            }, 1));
            am(a);
            zk(b);
            a.se(a.qf);
            d && (a.wb = c);
            a.Xd = !1
        }
    }

    w.u(D, {Fn: null}, function () {
        return this.eh
    });
    function $l(a) {
        var b = a.$b.n;
        a.Bf(b, b.length, a);
        a.el !== ih ? a.scale = Ll(a, a.el) : a.qm !== ih ? a.scale = Ll(a, a.qm) : (b = a.kI, isFinite(b) && 0 < b && (a.scale = b));
        b = a.jI;
        if (b.H())a.position = b; else {
            b = w.K();
            b.Vn(a.qe, a.iI);
            var c = a.sb, c = w.Vg(0, 0, c.width, c.height), d = w.K();
            d.Vn(c, a.lI);
            d.l(b.x - d.x, b.y - d.y);
            a.position = d;
            w.Gb(c);
            w.v(d);
            w.v(b);
            Vl(a);
            Wl(a, !0);
            Kl(a, !0)
        }
        a.Ba("InitialLayoutCompleted");
        Yl(a)
    }

    function Ai(a) {
        if ((a.Xd || !a.Pa.kf) && 0 !== a.qg.count) {
            for (var b = 0; 23 > b; b++) {
                var c = a.qg.i;
                if (null === c || 0 === a.qg.count)break;
                a.qg = new J(S);
                a.uB(c, a.qg)
            }
            a.dg.each(function (a) {
                a instanceof U && 0 !== (a.xa & 65536) !== !1 && (a.xa ^= 65536)
            })
        }
    }

    D.prototype.uB = function (a, b) {
        for (a.reset(); a.next();) {
            var c = a.value;
            !c.de() || c instanceof U || (c.Yl() ? (rk(c, Infinity, Infinity), c.gc()) : b.add(c))
        }
        for (a.reset(); a.next();)c = a.value, c instanceof U && c.isVisible() && em(this, c);
        for (a.reset(); a.next();)c = a.value, c instanceof W && c.isVisible() && (c.Yl() ? (rk(c, Infinity, Infinity), c.gc()) : b.add(c));
        for (a.reset(); a.next();)c = a.value, c instanceof dh && c.isVisible() && (c.Yl() ? (rk(c, Infinity, Infinity), c.gc()) : b.add(c))
    };
    function em(a, b) {
        for (var c = w.lb(), d = w.lb(), e = b.Mc; e.next();) {
            var f = e.value;
            f.isVisible() && (f instanceof U ? (ym(f) || zm(f) || Am(f)) && em(a, f) : f instanceof W ? f.W === b || f.$ === b ? d.push(f) : c.push(f) : (rk(f, Infinity, Infinity), f.gc()))
        }
        for (var e = c.length, h = 0; h < e; h++)f = c[h], rk(f, Infinity, Infinity), f.gc();
        w.va(c);
        rk(b, Infinity, Infinity);
        b.gc();
        e = d.length;
        for (h = 0; h < e; h++)f = d[h], rk(f, Infinity, Infinity), f.gc();
        w.va(d)
    }

    D.prototype.Bf = function (a, b, c, d) {
        var e = this.Pa;
        if (this.fl || e.kf)for (e = 0; e < b; e++)a[e].Bf(c, d)
    };
    D.prototype.se = function (a, b) {
        void 0 === b && (b = null);
        null === this.Mb && w.k("No div specified");
        var c = this.Eb;
        null === c && w.k("No canvas specified");
        var d = this.Pa;
        if (!d.oc && (Bm(this), "0" !== this.Mb.style.opacity)) {
            var e = a !== this.qf, f = this.$b.n, h = f.length, k = this;
            this.Bf(f, h, k);
            if (e)a.Ee(!0), Il(this); else if (!this.Be && null === b && !d.Vj)return;
            var h = this.hb, l = this.tb, m = Math.round(h.x * l) / l, n = Math.round(h.y * l) / l, d = this.cd;
            d.reset();
            1 !== l && d.scale(l);
            0 === h.x && 0 === h.y || d.translate(-m, -n);
            l = this.zd;
            w.Dn ? (c.width = c.width,
                a.Ee(!0), a.scale(l, l)) : (a.setTransform(1, 0, 0, 1, 0, 0), a.scale(l, l), a.clearRect(0, 0, this.Ib, this.Lb));
            a.setTransform(1, 0, 0, 1, 0, 0);
            a.scale(l, l);
            a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
            c = null !== b ? function (c) {
                var d = b;
                if (c.visible && 0 !== c.vc) {
                    var e = c.zb.n, f = e.length;
                    if (0 !== f) {
                        1 !== c.vc && (a.globalAlpha = c.vc);
                        c = c.gw;
                        c.length = 0;
                        for (var h = k.scale, l = 0; l < f; l++) {
                            var m = e[l];
                            if (fl(m) && !d.contains(m)) {
                                if (m instanceof W) {
                                    var n = m;
                                    n.ic && c.push(n);
                                    if (!1 === n.Zg)continue
                                }
                                n = m.Y;
                                1 < n.width * h || 1 < n.height * h ? m.se(a, k) : hl(m,
                                    a)
                            }
                        }
                        a.globalAlpha = 1
                    }
                }
            } : function (b) {
                b.se(a, k)
            };
            Cm(this, a);
            h = f.length;
            for (m = 0; m < h; m++)a.setTransform(1, 0, 0, 1, 0, 0), a.scale(l, l), a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy), c(f[m]);
            this.dl ? this.dl.km(this) && this.uv() : this.zr = function () {
                return new z(0, 0)
            };
            e ? (this.qf.Ee(!0), Il(this)) : this.Be = this.fl = !1
        }
    };
    function Dm(a, b, c, d, e) {
        null === a.Mb && w.k("No div specified");
        var f = a.Eb;
        null === f && w.k("No canvas specified");
        if (!a.Pa.oc) {
            var h = a.qf;
            if (a.Be) {
                Bm(a);
                var k = a.zd;
                w.Dn ? (f.width = f.width, h.Ee(!0)) : (h.setTransform(1, 0, 0, 1, 0, 0), h.clearRect(0, 0, a.Ib * k, a.Lb * k));
                h.ey(!1);
                h.drawImage(a.Qy.Gd, 0 < d ? 0 : Math.round(-d), 0 < e ? 0 : Math.round(-e));
                e = a.hb;
                var f = a.tb, l = Math.round(e.x * f) / f, m = Math.round(e.y * f) / f;
                d = a.cd;
                d.reset();
                1 !== f && d.scale(f);
                0 === e.x && 0 === e.y || d.translate(-l, -m);
                h.save();
                h.beginPath();
                e = c.length;
                for (f = 0; f <
                e; f++)l = c[f], 0 !== l.width && 0 !== l.height && h.rect(Math.floor(l.x), Math.floor(l.y), Math.ceil(l.width), Math.ceil(l.height));
                h.clip();
                h.setTransform(1, 0, 0, 1, 0, 0);
                h.scale(k, k);
                h.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
                c = a.$b.n;
                e = c.length;
                a.Bf(c, e, a);
                Cm(a, h);
                for (f = 0; f < e; f++)il(c[f], h, a, b);
                h.restore();
                h.Ee(!0);
                a.dl ? a.dl.km(a) && a.uv() : a.zr = function () {
                    return new z(0, 0)
                };
                a.fl = !1;
                a.Be = !1;
                a.Tx()
            }
        }
    }

    function Em(a, b, c, d, e, f, h, k, l, m) {
        null === a.Mb && w.k("No div specified");
        null === a.Eb && w.k("No canvas specified");
        void 0 === h && (h = null);
        void 0 === k && (k = null);
        void 0 === l && (l = !1);
        void 0 === m && (m = !1);
        Bm(a);
        a.qf.Ee(!0);
        Il(a);
        a.fz = !0;
        var n = a.tb;
        a.tb = e;
        var p = a.$b.n, q = p.length;
        try {
            var r = new A(f.x, f.y, d.width / e, d.height / e), s = r.copy();
            s.Jw(c);
            Yl(a, s);
            Ai(a);
            a.Bf(p, q, a, r);
            var u = a.zd;
            b.setTransform(1, 0, 0, 1, 0, 0);
            b.scale(u, u);
            b.clearRect(0, 0, d.width, d.height);
            null !== k && "" !== k && (b.fillStyle = k, b.fillRect(0, 0, d.width, d.height));
            var t = w.Ef();
            t.reset();
            t.translate(c.left, c.top);
            t.scale(e);
            0 === f.x && 0 === f.y || t.translate(-f.x, -f.y);
            b.setTransform(t.m11, t.m12, t.m21, t.m22, t.dx, t.dy);
            w.ue(t);
            Cm(a, b);
            var x;
            if (null !== h) {
                var v = new J(S), B = h.i;
                for (B.reset(); B.next();) {
                    var y = B.value;
                    !1 === m && "Grid" === y.layer.name || null === y || v.add(y)
                }
                x = function (c) {
                    var d = l;
                    if (c.visible && 0 !== c.vc && (void 0 === d && (d = !0), d || !c.Jc)) {
                        var d = c.zb.n, e = d.length;
                        if (0 !== e) {
                            1 !== c.vc && (b.globalAlpha = c.vc);
                            c = c.gw;
                            c.length = 0;
                            for (var f = a.scale, h = 0; h < e; h++) {
                                var k = d[h];
                                if (fl(k) &&
                                    v.contains(k)) {
                                    if (k instanceof W) {
                                        var m = k;
                                        m.ic && c.push(m);
                                        if (!1 === m.Zg)continue
                                    }
                                    m = k.Y;
                                    1 < m.width * f || 1 < m.height * f ? k.se(b, a) : hl(k, b)
                                }
                            }
                            b.globalAlpha = 1
                        }
                    }
                }
            } else if (!l && m) {
                var H = a.Bn.U, E = H.layer;
                x = function (c) {
                    c === E ? H.se(b, a) : c.se(b, a, l)
                }
            } else x = function (c) {
                c.se(b, a, l)
            };
            for (c = 0; c < q; c++)x(p[c]);
            a.fz = !1;
            a.dl ? a.dl.km(a) && a.uv() : a.zr = function () {
                return new z(0, 0)
            }
        } finally {
            a.tb = n, a.qf.Ee(!0), Il(a), a.Bf(p, q, a), Yl(a)
        }
    }

    D.prototype.getRenderingHint = D.prototype.oj = function (a) {
        return this.gk[a]
    };
    D.prototype.setRenderingHint = D.prototype.xJ = function (a, b) {
        this.gk[a] = b;
        this.Sx()
    };
    D.prototype.resetRenderingHints = D.prototype.QF = function () {
        this.gk = new sa;
        this.gk.drawShadows = !0;
        this.gk.textGreeking = !0;
        this.gk.viewportOptimizations = w.iF ? !1 : !0;
        this.gk.temporaryPixelRatio = !0;
        this.gk.pictureRatioOptimization = !0
    };
    function Cm(a, b) {
        var c = a.gk;
        null !== c && (void 0 !== c.imageSmoothingEnabled && b.ey(!!c.imageSmoothingEnabled), c = c.defaultFont, void 0 !== c && null !== c && (b.font = c))
    }

    D.prototype.getInputOption = D.prototype.Ut = function (a) {
        return this.Oo[a]
    };
    D.prototype.setInputOption = function (a, b) {
        this.Oo[a] = b
    };
    D.prototype.resetInputOptions = D.prototype.PF = function () {
        this.Oo = new sa;
        this.Oo.extraTouchArea = 10;
        this.Oo.extraTouchThreshold = 10;
        this.Oo.hasGestureZoom = !0
    };
    D.prototype.setProperties = function (a) {
        w.Fu(this, a)
    };
    function am(a) {
        if (0 === a.oa.Fh && 0 !== a.Zk.count) {
            for (; 0 < a.Zk.count;) {
                var b = a.Zk;
                a.Zk = new ka(W, A);
                for (b = b.i; b.next();) {
                    var c = b.key;
                    ej(c, b.value);
                    c.Ke()
                }
            }
            a.na()
        }
    }

    D.prototype.na = function (a) {
        void 0 === a && (a = null);
        if (null === a)this.Be = !0, this.Le(); else {
            var b = this.sb;
            null !== a && a.H() && b.Kg(a) && (this.Be = !0, this.Le())
        }
        for (b = this.hw.i; b.next();)b.value.na(a)
    };
    D.prototype.bF = function (a, b) {
        if (!0 !== this.Be) {
            this.Be = !0;
            var c = !0 === this.oj("temporaryPixelRatio");
            if (!0 === this.oj("viewportOptimizations") && this.WA !== Fm && this.XF.ex(0, 0, 0, 0) && b.width === a.width && b.height === a.height) {
                var d = this.scale, e = w.Df(), f = Math.max(a.x, b.x), h = Math.max(a.y, b.y), k = Math.min(a.x + a.width, b.x + b.width), l = Math.min(a.y + a.height, b.y + b.height);
                e.x = f;
                e.y = h;
                e.width = Math.max(0, k - f) * d;
                e.height = Math.max(0, l - h) * d;
                if (0 < e.width && 0 < e.height) {
                    if (!this.Xd && (this.Mf = !1, null !== this.Mb)) {
                        this.Xd = !0;
                        am(this);
                        this.qe.H() || Nl(this, this.sh());
                        var m = this.Eb;
                        if (null !== m) {
                            var n = this.zd, h = this.Ib * n, k = this.Lb * n, f = this.scale * n, d = Math.round(Math.round(b.x * f) - Math.round(a.x * f)), f = Math.round(Math.round(b.y * f) - Math.round(a.y * f)), l = this.Qy, p = this.xC;
                            l.width !== h && (l.width = h);
                            l.height !== k && (l.height = k);
                            p.clearRect(0, 0, h, k);
                            var l = 190 * this.zd, q = 70 * this.zd, r = Math.max(d, 0), s = Math.max(f, 0), u = Math.floor(h - r), t = Math.floor(k - s);
                            p.ey(!1);
                            p.drawImage(m.Gd, r, s, u, t, 0, 0, u, t);
                            this.dl.km(this) && p.clearRect(0, 0, l, q);
                            var m = w.lb(), p =
                                w.lb(), t = Math.abs(d), u = Math.abs(f), x = 0 === r ? 0 : h - t, r = w.xb(x, 0), t = w.xb(t + x, k);
                            p.push(new A(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            var v = this.cd;
                            v.reset();
                            v.scale(n, n);
                            1 !== this.tb && v.scale(this.tb);
                            n = this.hb;
                            (0 !== n.x || 0 !== n.y) && isFinite(n.x) && isFinite(n.y) && v.translate(-n.x, -n.y);
                            La(r, v);
                            La(t, v);
                            m.push(new A(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            x = 0 === s ? 0 : k - u;
                            r.l(0, x);
                            t.l(h, u + x);
                            p.push(new A(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x -
                                t.x), Math.abs(r.y - t.y)));
                            La(r, v);
                            La(t, v);
                            m.push(new A(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            this.dl.km(this) && (h = 0 < d ? 0 : -d, k = 0 < f ? 0 : -f, r.l(h, k), t.l(l + h, q + k), p.push(new A(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))), La(r, v), La(t, v), m.push(new A(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))));
                            w.v(r);
                            w.v(t);
                            Wl(this, !1);
                            Dm(this, m, p, d, f);
                            w.va(m);
                            w.va(p);
                            this.Xd = !1
                        }
                    }
                } else this.Yf();
                w.Gb(e);
                c && (this.jk = 1, this.Yf(),
                    this.jk = null, this.Tx())
            } else c ? (this.jk = 1, this.Yf(), this.jk = null, this.Tx()) : this.Yf()
        }
    };
    function Vl(a) {
        !1 === a.Am && (a.Am = !0)
    }

    function Il(a) {
        !1 === a.fl && (a.fl = !0)
    }

    function Bm(a) {
        !1 !== a.Hr && (a.Hr = !1, Gm(a, a.Ib, a.Lb))
    }

    function Gm(a, b, c) {
        var d = a.Eb, e = a.zd, f = b * e, e = c * e;
        if (d.width !== f || d.height !== e)d.width = f, d.height = e, d.style.width = b + "px", d.style.height = c + "px", a.Be = !0, a.qf.Ee(!0)
    }

    function Gl(a) {
        var b = a.Eb;
        if (null === b)return !0;
        var c = a.Mb, d = a.Ib, e = a.Lb, f = a.UD.copy();
        if (!f.H())return !0;
        var h = !1, k = a.cl ? a.Cd : 0, l = a.Tj ? a.Cd : 0, m = c.clientWidth || d + k, n = c.clientHeight || e + l;
        if (m !== d + k || n !== e + l)a.cl = !1, a.Tj = !1, l = k = 0, a.Ib = m, a.Lb = n, h = a.Hr = !0;
        a.Am = !1;
        var p = a.sb, c = a.qe, m = c.width, n = c.height, q = p.width, r = p.height, s = c.x, u = p.x, t = c.right, x = p.right + k, v = c.y, B = p.y, y = c.bottom, p = p.bottom + l, H = "1px", E = "1px", c = a.scale;
        a.WA === ol && m < q + k && n < r + l || (a.qA && a.me && (H = 1, s + 1 < u && (H = Math.max((u - s) * c + a.Ib, H)), t > x + 1 &&
        (H = Math.max((t - x) * c + a.Ib, H)), q + k + 1 < m && (H = Math.max((m - q + k) * c + a.Ib, H)), H = H.toString() + "px"), a.rA && a.ne && (k = 1, v + 1 < B && (k = Math.max((B - v) * c + a.Lb, k)), y > p + 1 && (k = Math.max((y - p) * c + a.Lb, k)), r + l + 1 < n && (k = Math.max((n - r + l) * c + a.Lb, k)), E = k.toString() + "px"));
        l = "1px" !== H;
        k = "1px" !== E;
        if (!(l && k || !l && !k)) {
            k && (x -= a.Cd);
            l && (p -= a.Cd);
            a.qA && a.me && (H = 1, s + 1 < u && (H = Math.max((u - s) * c + a.Ib, H)), t > x + 1 && (H = Math.max((t - x) * c + a.Ib, H)), q + 1 < m && (H = Math.max((m - q) * c + a.Ib, H)), H = H.toString() + "px");
            var l = "1px" !== H, V = l !== a.Tj ? a.Lb - a.Cd : a.Lb;
            a.rA &&
            a.ne && (k = 1, v + 1 < B && (k = Math.max((B - v) * c + V, k)), y > p + 1 && (k = Math.max((y - p) * c + V, k)), r + 1 < n && (k = Math.max((n - r) * c + V, k)), E = k.toString() + "px");
            k = "1px" !== E
        }
        if (a.ow && l === a.Tj && k === a.cl)return d === a.Ib && e === a.Lb || a.Yf(), !1;
        l !== a.Tj && (a.Lb = "1px" === H ? a.Lb + a.Cd : Math.max(a.Lb - a.Cd, 1), h = !0);
        a.Tj = l;
        a.Qs.style.width = H;
        k !== a.cl && (a.Ib = "1px" === E ? a.Ib + a.Cd : Math.max(a.Ib - a.Cd, 1), h = !0, a.Lr && (l = w.K(), k ? (b.style.left = a.Cd + "px", a.position = l.l(a.hb.x + a.Cd / a.scale, a.hb.y)) : (b.style.left = "0px", a.position = l.l(a.hb.x - a.Cd / a.scale,
            a.hb.y)), w.v(l)));
        a.cl = k;
        a.Qs.style.height = E;
        b = a.sw;
        l = b.scrollLeft;
        a.qA && a.me && (q + 1 < m ? l = (a.position.x - s) * c : s + 1 < u ? l = b.scrollWidth - b.clientWidth : t > x + 1 && (l = a.position.x * c));
        if (a.Lr)switch (a.sz) {
            case "negative":
                l = -(b.scrollWidth - l - b.clientWidth);
                break;
            case "reverse":
                l = b.scrollWidth - l - b.clientWidth
        }
        b.scrollLeft = l;
        a.rA && a.ne && (r + 1 < n ? b.scrollTop = (a.position.y - v) * c : v + 1 < B ? b.scrollTop = b.scrollHeight - b.clientHeight : y > p + 1 && (b.scrollTop = a.position.y * c));
        h && (a.Hr = !0);
        m = a.Ib;
        n = a.Lb;
        b.style.width = m + (a.cl ? a.Cd : 0) +
            "px";
        b.style.height = n + (a.Tj ? a.Cd : 0) + "px";
        a.vz = !1;
        return d !== m || e !== n || a.Pa.oc ? (p = a.sb, a.uu(f, p, c, a.scale, h), !1) : !0
    }

    D.prototype.add = D.prototype.add = function (a) {
        w.G(a, S, D, "add:part");
        var b = a.g;
        if (b !== this) {
            null !== b && w.k("Cannot add part " + a.toString() + " to " + this.toString() + ". It is already a part of " + b.toString());
            this.Fq && (a.kl = "Tool");
            var c = a.Wf, b = this.Lt(c);
            null === b && (b = this.Lt(""));
            null === b && w.k('Cannot add a Part when unable find a Layer named "' + c + '" and there is no default Layer');
            a.layer !== b && (c = b.$p(99999999, a, a.g === this), 0 <= c && this.Wc(Of, "parts", b, null, a, null, c), b.Jc || this.qc(), a.J(Hm), c = a.Dx, null !==
            c && c(a, null, b))
        }
    };
    D.prototype.$p = function (a) {
        if (a instanceof T) {
            if (this.ep.add(a), a instanceof U) {
                var b = a.Ka;
                null === b ? this.wl.add(a) : b.bp.add(a);
                b = a.Rb;
                null !== b && (b.g = this)
            }
        } else a instanceof W ? this.Yo.add(a) : a instanceof dh || this.zb.add(a);
        var c = this;
        Im(a, function (a) {
            Jm(c, a)
        });
        (a instanceof dh || a instanceof U && null !== a.Kb) && a.I();
        b = a.data;
        null !== b && (a instanceof dh || (a instanceof W ? this.Kj.add(b, a) : this.Ai.add(b, a)), Im(a, function (a) {
            Km(c, a)
        }));
        !0 !== zm(a) && !0 !== Am(a) || this.qg.add(a);
        Lm(a, !0, this);
        Mm(a) ? (a.Y.H() && this.na(jl(a,
            a.Y)), this.qc()) : a.isVisible() && a.Y.H() && this.na(jl(a, a.Y));
        this.Le()
    };
    D.prototype.jf = function (a) {
        a.Ct();
        if (a instanceof T) {
            if (this.ep.remove(a), a instanceof U) {
                var b = a.Ka;
                null === b ? this.wl.remove(a) : b.bp.remove(a);
                b = a.Rb;
                null !== b && (b.g = null)
            }
        } else a instanceof W ? this.Yo.remove(a) : a instanceof dh || this.zb.remove(a);
        var c = this;
        Im(a, function (a) {
            Nm(c, a)
        });
        b = a.data;
        null !== b && (a instanceof dh || (a instanceof W ? this.Kj.remove(b) : this.Ai.remove(b)), Im(a, function (a) {
            Om(c, a)
        }));
        this.qg.remove(a);
        Mm(a) ? (a.Y.H() && this.na(jl(a, a.Y)), this.qc()) : a.isVisible() && a.Y.H() && this.na(jl(a,
            a.Y));
        this.Le()
    };
    D.prototype.remove = D.prototype.remove = function (a) {
        w.G(a, S, D, "remove:part");
        Pm(this, a, !0)
    };
    function Pm(a, b, c) {
        var d = b.layer;
        null !== d && d.g === a && (b.eb = !1, b.Lg = !1, b.J(Qm), c && b.tn(), c = d.jf(-1, b, !1), 0 <= c && a.Wc(Pf, "parts", d, b, null, c, null), a = b.Dx, null !== a && a(b, d, null))
    }

    D.prototype.removeParts = D.prototype.TA = function (a, b) {
        if (w.isArray(a))for (var c = w.Ya(a), d = 0; d < c; d++) {
            var e = w.Da(a, d);
            b && !e.canDelete() || this.remove(e)
        } else for (e = new J(S), e.Hc(a), c = e.i; c.next();)e = c.value, b && !e.canDelete() || this.remove(e)
    };
    D.prototype.copyParts = D.prototype.Np = function (a, b, c) {
        return this.ob.Np(a, b, c)
    };
    D.prototype.moveParts = D.prototype.moveParts = function (a, b, c) {
        w.G(b, z, D, "moveParts:offset");
        var d = this.ab;
        if (null !== d) {
            d = d.re;
            null === d && (d = new hh, d.Pc(this));
            var e = new ka(S);
            if (null !== a)a = a.i; else {
                for (a = this.Hk; a.next();)Mh(d, e, a.value, c);
                for (a = this.dg; a.next();)Mh(d, e, a.value, c);
                a = this.links
            }
            for (; a.next();)Mh(d, e, a.value, c);
            d.moveParts(e, b, c)
        }
    };
    function Rm(a, b, c) {
        w.G(b, mg, D, "addLayer:layer");
        null !== b.g && b.g !== a && w.k("Cannot share a Layer with another Diagram: " + b + " of " + b.g);
        null === c ? null !== b.g && w.k("Cannot add an existing Layer to this Diagram again: " + b) : (w.G(c, mg, D, "addLayer:existingLayer"), c.g !== a && w.k("Existing Layer must be in this Diagram: " + c + " not in " + c.g), b === c && w.k("Cannot move a Layer before or after itself: " + b));
        if (b.g !== a) {
            b = b.name;
            a = a.$b;
            c = a.count;
            for (var d = 0; d < c; d++)a.da(d).name === b && w.k("Cannot add Layer with the name '" +
                b + "'; a Layer with the same name is already present in this Diagram.")
        }
    }

    D.prototype.addLayer = D.prototype.ut = function (a) {
        Rm(this, a, null);
        a.Pc(this);
        var b = this.$b, c = b.count - 1;
        if (!a.Jc)for (; 0 <= c && b.da(c).Jc;)c--;
        b.Ld(c + 1, a);
        null !== this.ke && this.Wc(Of, "layers", this, null, a, null, c + 1);
        this.na();
        this.qc()
    };
    D.prototype.addLayerBefore = D.prototype.ZG = function (a, b) {
        Rm(this, a, b);
        a.Pc(this);
        var c = this.$b, d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.ke && this.Wc(Pf, "layers", this, a, null, d, null));
        for (var e = c.count, f = 0; f < e; f++)if (c.da(f) === b) {
            c.Ld(f, a);
            break
        }
        null !== this.ke && this.Wc(Of, "layers", this, null, a, null, f);
        this.na();
        0 > d && this.qc()
    };
    D.prototype.addLayerAfter = function (a, b) {
        Rm(this, a, b);
        a.Pc(this);
        var c = this.$b, d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.ke && this.Wc(Pf, "layers", this, a, null, d, null));
        for (var e = c.count, f = 0; f < e; f++)if (c.da(f) === b) {
            c.Ld(f + 1, a);
            break
        }
        null !== this.ke && this.Wc(Of, "layers", this, null, a, null, f + 1);
        this.na();
        0 > d && this.qc()
    };
    D.prototype.removeLayer = function (a) {
        w.G(a, mg, D, "removeLayer:layer");
        a.g !== this && w.k("Cannot remove a Layer from another Diagram: " + a + " of " + a.g);
        if ("" !== a.name) {
            var b = this.$b, c = b.indexOf(a);
            if (b.remove(a)) {
                for (b = a.zb.copy().i; b.next();) {
                    var d = b.value, e = d.Wf;
                    d.Wf = e !== a.name ? e : ""
                }
                null !== this.ke && this.Wc(Pf, "layers", this, a, null, c, null);
                this.na();
                this.qc()
            }
        }
    };
    D.prototype.findLayer = D.prototype.Lt = function (a) {
        for (var b = this.Ex; b.next();) {
            var c = b.value;
            if (c.name === a)return c
        }
        return null
    };
    D.prototype.addModelChangedListener = D.prototype.aH = function (a) {
        w.j(a, "function", D, "addModelChangedListener:listener");
        null === this.gh && (this.gh = new I("function"));
        this.gh.add(a);
        this.ba.fn(a)
    };
    D.prototype.removeModelChangedListener = function (a) {
        w.j(a, "function", D, "removeModelChangedListener:listener");
        null !== this.gh && (this.gh.remove(a), 0 === this.gh.count && (this.gh = null));
        this.ba.xu(a)
    };
    D.prototype.addChangedListener = D.prototype.fn = function (a) {
        w.j(a, "function", D, "addChangedListener:listener");
        null === this.vi && (this.vi = new I("function"));
        this.vi.add(a)
    };
    D.prototype.removeChangedListener = D.prototype.xu = function (a) {
        w.j(a, "function", D, "removeChangedListener:listener");
        null !== this.vi && (this.vi.remove(a), 0 === this.vi.count && (this.vi = null))
    };
    D.prototype.Rw = function (a) {
        this.wb || this.oa.XE(a);
        a.xc !== Nf && (this.ni = !0);
        if (null !== this.vi) {
            var b = this.vi, c = b.length;
            if (1 === c)b = b.da(0), b(a); else if (0 !== c)for (var d = b.dc(), e = 0; e < c; e++)b = d[e], b(a)
        }
    };
    D.prototype.raiseChangedEvent = D.prototype.Wc = function (a, b, c, d, e, f, h) {
        void 0 === f && (f = null);
        void 0 === h && (h = null);
        var k = new Lf;
        k.g = this;
        k.xc = a;
        k.propertyName = b;
        k.object = c;
        k.oldValue = d;
        k.zj = f;
        k.newValue = e;
        k.yj = h;
        this.Rw(k)
    };
    D.prototype.raiseChanged = D.prototype.h = function (a, b, c, d, e) {
        this.Wc(Mf, a, this, b, c, d, e)
    };
    w.u(D, {Pa: "animationManager"}, function () {
        return this.KB
    });
    w.u(D, {oa: "undoManager"}, function () {
        return this.ke.oa
    });
    w.defineProperty(D, {wb: "skipsUndoManager"}, function () {
        return this.cj
    }, function (a) {
        w.j(a, "boolean", D, "skipsUndoManager");
        this.cj = a;
        this.ke.cj = a
    });
    w.defineProperty(D, {$z: "delaysLayout"}, function () {
        return this.My
    }, function (a) {
        this.My = a
    });
    D.prototype.ln = function (a, b) {
        if (null !== a && a.g === this) {
            var c = this.Ne;
            try {
                this.Ne = !0;
                var d = a.xc, e;
                if (d === Mf) {
                    var f = a.object, h = a.propertyName, k = a.ka(b);
                    w.Ma(f, h, k);
                    if (f instanceof G) {
                        var l, m = f.U;
                        null !== m && m.ce()
                    }
                    this.ni = !0
                } else if (d === Of) {
                    var n = a.object, p = a.yj, f = a.newValue;
                    if (n instanceof C)if ("number" === typeof p && f instanceof G) {
                        l = f;
                        var q = n;
                        b ? q.jf(p) : q.Ld(p, l);
                        m = n.U;
                        null !== m && m.ce()
                    } else {
                        if ("number" === typeof p && f instanceof Pg) {
                            var r = f, q = n;
                            b ? r.ve ? q.OF(p) : q.LF(p) : (e = r.ve ? q.be(r.index) : q.ae(r.index),
                                e.Mp(r))
                        }
                    } else if (n instanceof mg) {
                        var s = !0 === a.zj;
                        if ("number" === typeof p && f instanceof S) {
                            var m = f, u = n;
                            b ? (m.eb = !1, m.Lg = !1, m.ce(), u.jf(s ? p : -1, m, s)) : u.$p(p, m, s)
                        }
                    } else if (n instanceof D) {
                        if ("number" === typeof p && f instanceof mg) {
                            var t = f;
                            b ? this.$b.Xc(p) : (d = t, d.Pc(this), this.$b.Ld(p, d))
                        }
                    } else w.k("unknown ChangedEvent.Insert object: " + a.toString());
                    this.ni = !0
                } else d === Pf ? (n = a.object, p = a.zj, f = a.oldValue, n instanceof C ? "number" === typeof p && f instanceof G ? (q = n, b ? q.Ld(p, f) : q.jf(p)) : "number" === typeof p && f instanceof Pg && (r = f, q = n, b ? (e = r.ve ? q.be(r.index) : q.ae(r.index), e.Mp(r)) : r.ve ? q.OF(p) : q.LF(p)) : n instanceof mg ? (s = !0 === a.yj, "number" === typeof p && f instanceof S && (m = f, u = n, b ? u.$p(p, m, s) : (m.eb = !1, m.Lg = !1, m.ce(), u.jf(s ? p : -1, m, s)))) : n instanceof D ? "number" === typeof p && f instanceof mg && (t = f, b ? (d = t, d.Pc(this), this.$b.Ld(p, d)) : this.$b.Xc(p)) : w.k("unknown ChangedEvent.Remove object: " + a.toString()), this.ni = !0) : d !== Nf && w.k("unknown ChangedEvent: " + a.toString())
            } finally {
                this.Ne = c
            }
        }
    };
    D.prototype.startTransaction = D.prototype.Tb = function (a) {
        return this.oa.Tb(a)
    };
    D.prototype.commitTransaction = D.prototype.Fd = function (a) {
        return this.oa.Fd(a)
    };
    D.prototype.rollbackTransaction = D.prototype.nq = function () {
        return this.oa.nq()
    };
    D.prototype.updateAllTargetBindings = D.prototype.uG = function (a) {
        void 0 === a && (a = "");
        for (var b = this.Hk; b.next();)b.value.Hb(a);
        for (b = this.dg; b.next();)b.value.Hb(a);
        for (b = this.links; b.next();)b.value.Hb(a)
    };
    D.prototype.updateAllRelationshipsFromData = D.prototype.PJ = function () {
        for (var a = this.ba, b = new J, c = a.cg, d = 0; d < c.length; d++) {
            var e = c[d];
            b.add(e)
        }
        var f = [];
        this.dg.each(function (a) {
            null === a.data || b.contains(a.data) || f.push(a.data)
        });
        this.Hk.each(function (a) {
            null === a.data || b.contains(a.data) || f.push(a.data)
        });
        f.forEach(function (b) {
            vg(a, b, !1)
        });
        for (d = 0; d < c.length; d++) {
            var e = c[d], h = this.vh(e);
            null === h && ug(a, e, !1)
        }
        if (a instanceof P) {
            for (var k = new J, c = a.Mg, d = 0; d < c.length; d++)e = c[d], k.add(e);
            var l = [];
            this.links.each(function (a) {
                null ===
                a.data || k.contains(a.data) || l.push(a.data)
            });
            l.forEach(function (b) {
                Ug(a, b, !1)
            });
            for (d = 0; d < c.length; d++)e = c[d], h = this.Qf(e), null === h && Tg(a, e, !1)
        }
        for (d = this.Hk; d.next();)h = d.value, h.updateRelationshipsFromData();
        for (d = this.dg; d.next();)d.value.updateRelationshipsFromData();
        for (d = this.links; d.next();)h = d.value, h.updateRelationshipsFromData()
    };
    function Sm(a, b, c) {
        if (a.Rc || a.Xd)a.tb = c, c = a.Pa, c.oc && el(c, b, a.tb); else if (a.Rc = !0, null === a.Eb)a.tb = c; else {
            var d = a.sb.copy(), e = a.Ib, f = a.Lb;
            d.width = a.Ib / b;
            d.height = a.Lb / b;
            var h = a.lm.x, k = a.lm.y, l = a.qE;
            isNaN(h) && (l.sj() ? l.qj(Tb) ? h = 0 : l.qj(Ub) && (h = e - 1) : h = l.fd() ? l.x * (e - 1) : e / 2);
            isNaN(k) && (l.sj() ? l.qj(Sb) ? k = 0 : l.qj(Vb) && (k = f - 1) : k = l.fd() ? l.y * (f - 1) : f / 2);
            null !== a.WF && (c = a.WF(a, c));
            c < a.yh && (c = a.yh);
            c > a.xh && (c = a.xh);
            e = w.xb(a.hb.x + h / b - h / c, a.hb.y + k / b - k / c);
            a.position = e;
            w.v(e);
            a.tb = c;
            a.uu(d, a.sb, b, c, !1);
            a.Rc = !1;
            Kl(a,
                !1);
            c = a.Pa;
            c.oc && el(c, b, a.tb);
            a.na();
            Vl(a)
        }
    }

    D.prototype.uu = function (a, b, c, d, e) {
        a.L(b) || (void 0 === e && (e = !1), e || Vl(this), Il(this), d = this.Rb, null === d || !d.Ax || this.Fl !== ih || e || a.width === b.width && a.height === b.height || d.J(), d = this.Za, !0 === this.Cm && d instanceof bh && (this.R.ca = this.rB(this.R.bf), vk(d, this)), this.Rc || this.bF(a, b), Yl(this), this.nh.scale = c, this.nh.position.x = a.x, this.nh.position.y = a.y, this.nh.bounds.set(a), this.nh.isScroll = e, this.Ba("ViewportBoundsChanged", this.nh, a))
    };
    function Yl(a, b) {
        void 0 === b && (b = null);
        var c = a.nd;
        if (null !== c && c.visible) {
            for (var d = w.im(), e = 1, f = 1, h = c.wa.n, k = h.length, l = 0; l < k; l++) {
                var m = h[l], n = m.interval;
                2 > n || (Tm(m.Cb) ? f = f * n / De(f, n) : e = e * n / De(e, n))
            }
            h = c.px;
            d.l(f * h.width, e * h.height);
            h = f = l = k = 0;
            if (null !== b)k = b.width, l = b.height, f = b.x, h = b.y; else {
                e = w.Df();
                f = a.sb;
                e.l(f.x, f.y, f.width, f.height);
                for (h = a.hw.i; h.next();)f = h.value.sb, f.H() && bb(e, f.x, f.y, f.width, f.height);
                if (!e.H()) {
                    w.Gb(e);
                    return
                }
                k = e.width;
                l = e.height;
                f = e.x;
                h = e.y;
                w.Gb(e)
            }
            c.width = k + 2 * d.width;
            c.height =
                l + 2 * d.height;
            e = w.K();
            Ka(f, h, 0, 0, d.width, d.height, e);
            e.offset(-d.width, -d.height);
            w.zk(d);
            c.U.location = e;
            w.v(e)
        }
    }

    D.prototype.clearSelection = D.prototype.Sw = function () {
        var a = 0 < this.selection.count;
        a && this.Ba("ChangingSelection");
        gh(this);
        a && this.Ba("ChangedSelection")
    };
    function gh(a) {
        a = a.selection;
        if (0 < a.count) {
            for (var b = a.dc(), c = b.length, d = 0; d < c; d++)b[d].eb = !1;
            a.Ra();
            a.clear();
            a.freeze()
        }
    }

    D.prototype.select = D.prototype.select = function (a) {
        null !== a && (w.G(a, S, D, "select:part"), a.layer.g === this && (!a.eb || 1 < this.selection.count) && (this.Ba("ChangingSelection"), gh(this), a.eb = !0, this.Ba("ChangedSelection")))
    };
    D.prototype.selectCollection = D.prototype.$F = function (a) {
        this.Ba("ChangingSelection");
        gh(this);
        if (w.isArray(a))for (var b = w.Ya(a), c = 0; c < b; c++) {
            var d = w.Da(a, c);
            d instanceof S || w.k("Diagram.selectCollection given something that is not a Part: " + d);
            d.eb = !0
        } else for (a = a.i; a.next();)d = a.value, d instanceof S || w.k("Diagram.selectCollection given something that is not a Part: " + d), d.eb = !0;
        this.Ba("ChangedSelection")
    };
    D.prototype.clearHighlighteds = D.prototype.jH = function () {
        var a = this.Ul;
        if (0 < a.count) {
            for (var b = a.dc(), c = b.length, d = 0; d < c; d++)b[d].Lg = !1;
            a.Ra();
            a.clear();
            a.freeze()
        }
    };
    D.prototype.highlight = function (a) {
        null !== a && a.layer.g === this && (w.G(a, S, D, "highlight:part"), !a.Lg || 1 < this.Ul.count) && (this.jH(), a.Lg = !0)
    };
    D.prototype.highlightCollection = function (a) {
        for (var b = (new J(S)).Hc(a), c = this.Ul.copy().Vx(b).i; c.next();)a = c.value, a.Lg = !1;
        for (b = b.i; b.next();)a = b.value, a instanceof S || w.k("Diagram.highlightCollection given something that is not a Part: " + a), a.Lg = !0
    };
    D.prototype.scroll = D.prototype.scroll = function (a, b, c) {
        void 0 === c && (c = 1);
        var d = "up" === b || "down" === b, e = 0;
        if ("pixel" === a)e = c; else if ("line" === a)e = c * (d ? this.Du : this.Cu); else if ("page" === a)a = d ? this.sb.height : this.sb.width, a *= this.scale, 0 !== a && (e = Math.max(a - (d ? this.Du : this.Cu), 0), e *= c); else {
            if ("document" === a) {
                e = this.qe;
                d = this.sb;
                c = w.K();
                "up" === b ? this.position = c.l(d.x, e.y) : "left" === b ? this.position = c.l(e.x, d.y) : "down" === b ? this.position = c.l(d.x, e.bottom - d.height) : "right" === b && (this.position = c.l(e.right - d.width,
                    d.y));
                w.v(c);
                return
            }
            w.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: " + a)
        }
        e /= this.scale;
        c = this.position.copy();
        "up" === b ? c.y = this.position.y - e : "down" === b ? c.y = this.position.y + e : "left" === b ? c.x = this.position.x - e : "right" === b ? c.x = this.position.x + e : w.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: " + b);
        this.position = c
    };
    D.prototype.scrollToRect = D.prototype.sJ = function (a) {
        var b = this.sb;
        b.vk(a) || (a = a.Gl, a.x -= b.width / 2, a.y -= b.height / 2, this.position = a)
    };
    D.prototype.centerRect = D.prototype.iH = function (a) {
        var b = this.sb;
        a = a.Gl;
        a.x -= b.width / 2;
        a.y -= b.height / 2;
        this.position = a
    };
    D.prototype.transformDocToView = D.prototype.rG = function (a) {
        var b = this.cd;
        b.reset();
        1 !== this.tb && b.scale(this.tb);
        var c = this.hb;
        (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
        return a.copy().transform(this.cd)
    };
    D.prototype.transformViewToDoc = D.prototype.rB = function (a) {
        var b = this.cd;
        b.reset();
        1 !== this.tb && b.scale(this.tb);
        var c = this.hb;
        (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
        return La(a.copy(), this.cd)
    };
    var ih;
    D.None = ih = w.p(D, "None", 0);
    var Ol;
    D.Uniform = Ol = w.p(D, "Uniform", 1);
    var Pl;
    D.UniformToFill = Pl = w.p(D, "UniformToFill", 2);
    var Oi;
    D.CycleAll = Oi = w.p(D, "CycleAll", 10);
    var Si;
    D.CycleNotDirected = Si = w.p(D, "CycleNotDirected", 11);
    var Ui;
    D.CycleNotDirectedFast = Ui = w.p(D, "CycleNotDirectedFast", 12);
    var Vi;
    D.CycleNotUndirected = Vi = w.p(D, "CycleNotUndirected", 13);
    var Pi;
    D.CycleDestinationTree = Pi = w.p(D, "CycleDestinationTree", 14);
    var Ri;
    D.CycleSourceTree = Ri = w.p(D, "CycleSourceTree", 15);
    var ol;
    D.DocumentScroll = ol = w.p(D, "DocumentScroll", 1);
    var Fm;
    D.InfiniteScroll = Fm = w.p(D, "InfiniteScroll", 2);
    var ql;
    D.TreeParentCollapsed = ql = w.p(D, "TreeParentCollapsed", 21);
    var Um;
    D.AllParentsCollapsed = Um = w.p(D, "AllParentsCollapsed", 22);
    var Vm;
    D.AnyParentsCollapsed = Vm = w.p(D, "AnyParentsCollapsed", 23);
    w.defineProperty(D, {QJ: "validCycle"}, function () {
        return this.Fw
    }, function (a) {
        var b = this.Fw;
        b !== a && (w.mb(a, D, D, "validCycle"), this.Fw = a, this.h("validCycle", b, a))
    });
    w.u(D, {Ex: "layers"}, function () {
        return this.$b.i
    });
    w.defineProperty(D, {xf: "isModelReadOnly"}, function () {
        var a = this.ke;
        return null === a ? !1 : a.cb
    }, function (a) {
        var b = this.ke;
        null !== b && (b.cb = a)
    });
    w.defineProperty(D, {cb: "isReadOnly"}, function () {
        return this.Ji
    }, function (a) {
        var b = this.Ji;
        b !== a && (w.j(a, "boolean", D, "isReadOnly"), this.Ji = a, this.h("isReadOnly", b, a))
    });
    w.defineProperty(D, {isEnabled: "isEnabled"}, function () {
        return this.cf
    }, function (a) {
        var b = this.cf;
        b !== a && (w.j(a, "boolean", D, "isEnabled"), this.cf = a, this.h("isEnabled", b, a))
    });
    w.defineProperty(D, {Mz: "allowClipboard"}, function () {
        return this.Tu
    }, function (a) {
        var b = this.Tu;
        b !== a && (w.j(a, "boolean", D, "allowClipboard"), this.Tu = a, this.h("allowClipboard", b, a))
    });
    w.defineProperty(D, {sk: "allowCopy"}, function () {
        return this.Kk
    }, function (a) {
        var b = this.Kk;
        b !== a && (w.j(a, "boolean", D, "allowCopy"), this.Kk = a, this.h("allowCopy", b, a))
    });
    w.defineProperty(D, {gn: "allowDelete"}, function () {
        return this.Lk
    }, function (a) {
        var b = this.Lk;
        b !== a && (w.j(a, "boolean", D, "allowDelete"), this.Lk = a, this.h("allowDelete", b, a))
    });
    w.defineProperty(D, {zt: "allowDragOut"}, function () {
        return this.Uu
    }, function (a) {
        var b = this.Uu;
        b !== a && (w.j(a, "boolean", D, "allowDragOut"), this.Uu = a, this.h("allowDragOut", b, a))
    });
    w.defineProperty(D, {eE: "allowDrop"}, function () {
        return this.Vu
    }, function (a) {
        var b = this.Vu;
        b !== a && (w.j(a, "boolean", D, "allowDrop"), this.Vu = a, this.h("allowDrop", b, a))
    });
    w.defineProperty(D, {Ow: "allowTextEdit"}, function () {
        return this.Uk
    }, function (a) {
        var b = this.Uk;
        b !== a && (w.j(a, "boolean", D, "allowTextEdit"), this.Uk = a, this.h("allowTextEdit", b, a))
    });
    w.defineProperty(D, {Lw: "allowGroup"}, function () {
        return this.Mk
    }, function (a) {
        var b = this.Mk;
        b !== a && (w.j(a, "boolean", D, "allowGroup"), this.Mk = a, this.h("allowGroup", b, a))
    });
    w.defineProperty(D, {Pw: "allowUngroup"}, function () {
        return this.Vk
    }, function (a) {
        var b = this.Vk;
        b !== a && (w.j(a, "boolean", D, "allowUngroup"), this.Vk = a, this.h("allowUngroup", b, a))
    });
    w.defineProperty(D, {Ep: "allowInsert"}, function () {
        return this.Xu
    }, function (a) {
        var b = this.Xu;
        b !== a && (w.j(a, "boolean", D, "allowInsert"), this.Xu = a, this.h("allowInsert", b, a))
    });
    w.defineProperty(D, {At: "allowLink"}, function () {
        return this.Nk
    }, function (a) {
        var b = this.Nk;
        b !== a && (w.j(a, "boolean", D, "allowLink"), this.Nk = a, this.h("allowLink", b, a))
    });
    w.defineProperty(D, {hn: "allowRelink"}, function () {
        return this.Pk
    }, function (a) {
        var b = this.Pk;
        b !== a && (w.j(a, "boolean", D, "allowRelink"), this.Pk = a, this.h("allowRelink", b, a))
    });
    w.defineProperty(D, {Dl: "allowMove"}, function () {
        return this.Ok
    }, function (a) {
        var b = this.Ok;
        b !== a && (w.j(a, "boolean", D, "allowMove"), this.Ok = a, this.h("allowMove", b, a))
    });
    w.defineProperty(D, {Mw: "allowReshape"}, function () {
        return this.Qk
    }, function (a) {
        var b = this.Qk;
        b !== a && (w.j(a, "boolean", D, "allowReshape"), this.Qk = a, this.h("allowReshape", b, a))
    });
    w.defineProperty(D, {Bt: "allowResize"}, function () {
        return this.Rk
    }, function (a) {
        var b = this.Rk;
        b !== a && (w.j(a, "boolean", D, "allowResize"), this.Rk = a, this.h("allowResize", b, a))
    });
    w.defineProperty(D, {Nw: "allowRotate"}, function () {
        return this.Sk
    }, function (a) {
        var b = this.Sk;
        b !== a && (w.j(a, "boolean", D, "allowRotate"), this.Sk = a, this.h("allowRotate", b, a))
    });
    w.defineProperty(D, {tf: "allowSelect"}, function () {
        return this.Tk
    }, function (a) {
        var b = this.Tk;
        b !== a && (w.j(a, "boolean", D, "allowSelect"), this.Tk = a, this.h("allowSelect", b, a))
    });
    w.defineProperty(D, {fE: "allowUndo"}, function () {
        return this.Yu
    }, function (a) {
        var b = this.Yu;
        b !== a && (w.j(a, "boolean", D, "allowUndo"), this.Yu = a, this.h("allowUndo", b, a))
    });
    w.defineProperty(D, {Qw: "allowZoom"}, function () {
        return this.$u
    }, function (a) {
        var b = this.$u;
        b !== a && (w.j(a, "boolean", D, "allowZoom"), this.$u = a, this.h("allowZoom", b, a))
    });
    w.defineProperty(D, {rA: "hasVerticalScrollbar"}, function () {
        return this.Ev
    }, function (a) {
        var b = this.Ev;
        b !== a && (w.j(a, "boolean", D, "hasVerticalScrollbar"), this.Ev = a, Vl(this), this.na(), this.h("hasVerticalScrollbar", b, a), Kl(this, !1))
    });
    w.defineProperty(D, {qA: "hasHorizontalScrollbar"}, function () {
        return this.Dv
    }, function (a) {
        var b = this.Dv;
        b !== a && (w.j(a, "boolean", D, "hasHorizontalScrollbar"), this.Dv = a, Vl(this), this.na(), this.h("hasHorizontalScrollbar", b, a), Kl(this, !1))
    });
    w.defineProperty(D, {me: "allowHorizontalScroll"}, function () {
        return this.Wu
    }, function (a) {
        var b = this.Wu;
        b !== a && (w.j(a, "boolean", D, "allowHorizontalScroll"), this.Wu = a, this.h("allowHorizontalScroll", b, a), Kl(this, !1))
    });
    w.defineProperty(D, {ne: "allowVerticalScroll"}, function () {
        return this.Zu
    }, function (a) {
        var b = this.Zu;
        b !== a && (w.j(a, "boolean", D, "allowVerticalScroll"), this.Zu = a, this.h("allowVerticalScroll", b, a), Kl(this, !1))
    });
    w.defineProperty(D, {Cu: "scrollHorizontalLineChange"}, function () {
        return this.pw
    }, function (a) {
        var b = this.pw;
        b !== a && (w.j(a, "number", D, "scrollHorizontalLineChange"), 0 > a && w.Ea(a, ">= 0", D, "scrollHorizontalLineChange"), this.pw = a, this.h("scrollHorizontalLineChange", b, a))
    });
    w.defineProperty(D, {Du: "scrollVerticalLineChange"}, function () {
        return this.tw
    }, function (a) {
        var b = this.tw;
        b !== a && (w.j(a, "number", D, "scrollVerticalLineChange"), 0 > a && w.Ea(a, ">= 0", D, "scrollVerticalLineChange"), this.tw = a, this.h("scrollVerticalLineChange", b, a))
    });
    w.defineProperty(D, {R: "lastInput"}, function () {
        return this.Pb
    }, function (a) {
        this.Pb = a
    });
    w.defineProperty(D, {zc: "firstInput"}, function () {
        return this.Hi
    }, function (a) {
        this.Hi = a
    });
    w.defineProperty(D, {bc: "currentCursor"}, function () {
        return this.kv
    }, function (a) {
        "" === a && (a = this.jr);
        var b = this.kv;
        if (b !== a) {
            w.j(a, "string", D, "currentCursor");
            var c = this.Eb, d = this.Mb;
            null !== c && (this.kv = a, c.style.cursor = a, d.style.cursor = a, c.style.cursor === b && (c.style.cursor = "-webkit-" + a, d.style.cursor = "-webkit-" + a, c.style.cursor === b && (c.style.cursor = "-moz-" + a, d.style.cursor = "-moz-" + a, c.style.cursor === b && (c.style.cursor = a, d.style.cursor = a))))
        }
    });
    w.defineProperty(D, {CK: "defaultCursor"}, function () {
        return this.jr
    }, function (a) {
        "" === a && (a = "auto");
        var b = this.jr;
        b !== a && (w.j(a, "string", D, "defaultCursor"), this.jr = a, this.h("defaultCursor", b, a))
    });
    w.defineProperty(D, {click: "click"}, function () {
        return this.wi
    }, function (a) {
        var b = this.wi;
        b !== a && (null !== a && w.j(a, "function", D, "click"), this.wi = a, this.h("click", b, a))
    });
    w.defineProperty(D, {Ht: "doubleClick"}, function () {
        return this.Ei
    }, function (a) {
        var b = this.Ei;
        b !== a && (null !== a && w.j(a, "function", D, "doubleClick"), this.Ei = a, this.h("doubleClick", b, a))
    });
    w.defineProperty(D, {Uz: "contextClick"}, function () {
        return this.yi
    }, function (a) {
        var b = this.yi;
        b !== a && (null !== a && w.j(a, "function", D, "contextClick"), this.yi = a, this.h("contextClick", b, a))
    });
    w.defineProperty(D, {JA: "mouseOver"}, function () {
        return this.Vi
    }, function (a) {
        var b = this.Vi;
        b !== a && (null !== a && w.j(a, "function", D, "mouseOver"), this.Vi = a, this.h("mouseOver", b, a))
    });
    w.defineProperty(D, {IA: "mouseHover"}, function () {
        return this.Ui
    }, function (a) {
        var b = this.Ui;
        b !== a && (null !== a && w.j(a, "function", D, "mouseHover"), this.Ui = a, this.h("mouseHover", b, a))
    });
    w.defineProperty(D, {HA: "mouseHold"}, function () {
        return this.Ti
    }, function (a) {
        var b = this.Ti;
        b !== a && (null !== a && w.j(a, "function", D, "mouseHold"), this.Ti = a, this.h("mouseHold", b, a))
    });
    w.defineProperty(D, {VI: "mouseDragOver"}, function () {
        return this.bw
    }, function (a) {
        var b = this.bw;
        b !== a && (null !== a && w.j(a, "function", D, "mouseDragOver"), this.bw = a, this.h("mouseDragOver", b, a))
    });
    w.defineProperty(D, {GA: "mouseDrop"}, function () {
        return this.Si
    }, function (a) {
        var b = this.Si;
        b !== a && (null !== a && w.j(a, "function", D, "mouseDrop"), this.Si = a, this.h("mouseDrop", b, a))
    });
    w.defineProperty(D, {nB: "toolTip"}, function () {
        return this.dj
    }, function (a) {
        var b = this.dj;
        b !== a && (this.dj = a, this.h("toolTip", b, a))
    });
    w.defineProperty(D, {contextMenu: "contextMenu"}, function () {
        return this.zi
    }, function (a) {
        var b = this.zi;
        b !== a && (this.zi = a, this.h("contextMenu", b, a))
    });
    w.defineProperty(D, {ob: "commandHandler"}, function () {
        return this.Fy
    }, function (a) {
        var b = this.Fy;
        b !== a && (w.G(a, og, D, "commandHandler"), null !== a.g && w.k("Cannot share CommandHandlers between Diagrams: " + a.toString()), null !== b && b.Pc(null), this.Fy = a, a.Pc(this))
    });
    w.defineProperty(D, {ab: "toolManager"}, function () {
        return this.Ez
    }, function (a) {
        var b = this.Ez;
        b !== a && (w.G(a, bh, D, "toolManager"), null !== a.g && w.k("Cannot share ToolManagers between Diagrams: " + a.toString()), null !== b && b.Pc(null), this.Ez = a, a.Pc(this))
    });
    w.defineProperty(D, {Ft: "defaultTool"}, function () {
        return this.Ly
    }, function (a) {
        var b = this.Ly;
        b !== a && (w.G(a, ng, D, "defaultTool"), this.Ly = a, this.Za === b && (this.Za = a))
    });
    w.defineProperty(D, {Za: "currentTool"}, function () {
        return this.Iy
    }, function (a) {
        var b = this.Iy;
        null !== b && (b.sa && b.doDeactivate(), b.cancelWaitAfter(), b.doStop());
        null === a && (a = this.Ft);
        null !== a && (w.G(a, ng, D, "currentTool"), this.Iy = a, a.Pc(this), a.doStart())
    });
    w.u(D, {selection: "selection"}, function () {
        return this.vw
    });
    w.defineProperty(D, {LI: "maxSelectionCount"}, function () {
        return this.Yv
    }, function (a) {
        var b = this.Yv;
        if (b !== a)if (w.j(a, "number", D, "maxSelectionCount"), 0 <= a && !isNaN(a)) {
            if (this.Yv = a, this.h("maxSelectionCount", b, a), !this.oa.fb && (a = this.selection.count - a, 0 < a)) {
                this.Ba("ChangingSelection");
                for (var b = this.selection.dc(), c = 0; c < a; c++)b[c].eb = !1;
                this.Ba("ChangedSelection")
            }
        } else w.Ea(a, ">= 0", D, "maxSelectionCount")
    });
    w.defineProperty(D, {YI: "nodeSelectionAdornmentTemplate"}, function () {
        return this.cw
    }, function (a) {
        var b = this.cw;
        b !== a && (w.G(a, dh, D, "nodeSelectionAdornmentTemplate"), this.cw = a, this.h("nodeSelectionAdornmentTemplate", b, a))
    });
    w.defineProperty(D, {bI: "groupSelectionAdornmentTemplate"}, function () {
        return this.Bv
    }, function (a) {
        var b = this.Bv;
        b !== a && (w.G(a, dh, D, "groupSelectionAdornmentTemplate"), this.Bv = a, this.h("groupSelectionAdornmentTemplate", b, a))
    });
    w.defineProperty(D, {FI: "linkSelectionAdornmentTemplate"}, function () {
        return this.Tv
    }, function (a) {
        var b = this.Tv;
        b !== a && (w.G(a, dh, D, "linkSelectionAdornmentTemplate"), this.Tv = a, this.h("linkSelectionAdornmentTemplate", b, a))
    });
    w.u(D, {Ul: "highlighteds"}, function () {
        return this.Fv
    });
    w.defineProperty(D, {ni: "isModified"}, function () {
        var a = this.oa;
        return a.isEnabled ? null !== a.kj ? !0 : this.Mv && this.dh !== a.pj : this.Mv
    }, function (a) {
        if (this.Mv !== a) {
            w.j(a, "boolean", D, "isModified");
            this.Mv = a;
            var b = this.oa;
            !a && b.isEnabled && (this.dh = b.pj);
            a || Wm(this)
        }
    });
    function Wm(a) {
        var b = a.ni;
        a.VD !== b && (a.VD = b, a.Ba("Modified"))
    }

    w.defineProperty(D, {ba: "model"}, function () {
        return this.ke
    }, function (a) {
        var b = this.ke;
        if (b !== a) {
            w.G(a, F, D, "model");
            this.Za.doCancel();
            null !== b && b.oa !== a.oa && b.oa.jF && w.k("Do not replace a Diagram.model while a transaction is in progress.");
            this.Pa.pi();
            this.Sw();
            this.eh = !1;
            this.Go = !0;
            this.dh = -2;
            this.Mf = !1;
            var c = this.Xd;
            this.Xd = !0;
            this.Pa.Sn("Model");
            null !== b && (null !== this.gh && this.gh.each(function (a) {
                b.xu(a)
            }), b.xu(this.aD), b instanceof P && Xm(this, b.Mg), Xm(this, b.cg));
            this.ke = a;
            a.fn(this.$C);
            Ym(this,
                a.cg);
            a instanceof P && Zm(this, a.Mg);
            a.xu(this.$C);
            a.fn(this.aD);
            null !== this.gh && this.gh.each(function (b) {
                a.fn(b)
            });
            this.Xd = c;
            this.Rc || this.na();
            null !== b && (a.oa.isEnabled = b.oa.isEnabled)
        }
    });
    w.defineProperty(D, {Ua: null}, function () {
        return this.SC
    }, function (a) {
        this.SC = a
    });
    w.u(D, {Hx: null}, function () {
        return this.GG
    });
    function sl(a, b) {
        if (b.ba === a.ba) {
            var c = b.xc, d = b.propertyName;
            if (c === Nf && "S" === d[0])if ("StartingFirstTransaction" === d)c = a.ab, c.af.each(function (b) {
                b.Pc(a)
            }), c.Zf.each(function (b) {
                b.Pc(a)
            }), c.$f.each(function (b) {
                b.Pc(a)
            }), a.Xd || a.eh || (a.rv = !0, a.Go && (a.Mf = !0)); else if ("StartingUndo" === d || "StartingRedo" === d) {
                var e = a.Pa;
                e.kf && !a.wb && e.pi();
                a.Ba("ChangingSelection")
            } else"StartedTransaction" === d && (e = a.Pa, e.kf && !a.wb && e.pi()); else if (a.Ua) {
                a.Ua = !1;
                try {
                    var f = b.nf;
                    if ("" !== f)if (c === Mf) {
                        if ("linkFromKey" === f) {
                            var h =
                                b.object, k = a.Qf(h);
                            if (null !== k) {
                                var l = b.newValue, m = a.Ie(l);
                                k.W = m
                            }
                        } else if ("linkToKey" === f)h = b.object, k = a.Qf(h), null !== k && (l = b.newValue, m = a.Ie(l), k.$ = m); else if ("linkFromPortId" === f) {
                            if (h = b.object, k = a.Qf(h), null !== k) {
                                var n = b.newValue;
                                "string" === typeof n && (k.Jg = n)
                            }
                        } else if ("linkToPortId" === f)h = b.object, k = a.Qf(h), null !== k && (n = b.newValue, "string" === typeof n && (k.Eh = n)); else if ("nodeGroupKey" === f) {
                            var h = b.object, p = a.vh(h);
                            if (null !== p) {
                                var q = b.newValue;
                                if (void 0 !== q) {
                                    var r = a.Ie(q);
                                    p.Ka = r instanceof U ? r :
                                        null
                                } else p.Ka = null
                            }
                        } else if ("linkLabelKeys" === f) {
                            if (h = b.object, k = a.Qf(h), null !== k) {
                                var s = b.oldValue, u = b.newValue;
                                if (w.isArray(s))for (var t = w.Ya(s), x = 0; x < t; x++) {
                                    var v = w.Da(s, x), m = a.Ie(v);
                                    null !== m && (m.Lc = null)
                                }
                                if (w.isArray(u))for (t = w.Ya(u), x = 0; x < t; x++)v = w.Da(u, x), m = a.Ie(v), null !== m && (m.Lc = k)
                            }
                        } else if ("nodeParentKey" === f) {
                            var B = b.object, y = a.Ie(b.newValue), H = a.jx(B);
                            if (null !== H) {
                                var E = H.vn();
                                null !== E ? null === y ? a.remove(E) : a.Od ? E.W = y : E.$ = y : $m(a, y, H)
                            }
                        } else if ("parentLinkCategory" === f) {
                            var B = b.object, H =
                                a.jx(B), V = b.newValue;
                            null !== H && "string" === typeof V && (E = H.vn(), null !== E && (E.rd = V))
                        } else if ("nodeCategory" === f) {
                            var h = b.object, ba = a.vh(h), V = b.newValue;
                            null !== ba && "string" === typeof V && (ba.rd = V)
                        } else if ("linkCategory" === f) {
                            var h = b.object, Q = a.Qf(h), V = b.newValue;
                            null !== Q && "string" === typeof V && (Q.rd = V)
                        } else if ("nodeDataArray" === f) {
                            var $ = b.oldValue;
                            Xm(a, $);
                            var ca = b.newValue;
                            Ym(a, ca)
                        } else"linkDataArray" === f && ($ = b.oldValue, Xm(a, $), ca = b.newValue, Zm(a, ca));
                        a.ni = !0
                    } else c === Of ? (ca = b.newValue, "nodeDataArray" ===
                    f && w.Qa(ca) ? an(a, ca) : "linkDataArray" === f && w.Qa(ca) ? bn(a, ca) : "linkLabelKeys" === f && tg(ca) && (k = a.Qf(b.object), m = a.Ie(ca), null !== k && null !== m && (m.Lc = k)), a.ni = !0) : c === Pf ? ($ = b.oldValue, "nodeDataArray" === f && w.Qa($) ? cn(a, $) : "linkDataArray" === f && w.Qa($) ? cn(a, $) : "linkLabelKeys" === f && tg($) && (m = a.Ie($), null !== m && (m.Lc = null)), a.ni = !0) : c === Nf && ("SourceChanged" === f ? null !== b.object ? rl(a, b.object, b.propertyName) : (a.PJ(), a.uG()) : "ModelDisplaced" === f && a.cm()); else if (c === Mf) {
                        var R = b.propertyName, h = b.object;
                        if (h === a.ba) {
                            if ("nodeKeyProperty" ===
                                R || "nodeCategoryProperty" === R || "linkFromKeyProperty" === R || "linkToKeyProperty" === R || "linkFromPortIdProperty" === R || "linkToPortIdProperty" === R || "linkLabelKeysProperty" === R || "nodeIsGroupProperty" === R || "nodeGroupKeyProperty" === R || "nodeParentKeyProperty" === R || "linkCategoryProperty" === R)a.oa.fb || a.cm()
                        } else rl(a, h, R);
                        a.ni = !0
                    } else if (c === Of || c === Pf)dn(a, b), a.ni = !0; else if (c === Nf) {
                        if ("FinishedUndo" === d || "FinishedRedo" === d)a.oa.Ki = !0, a.Ba("ChangedSelection"), Ai(a), a.oa.Ki = !1;
                        e = a.Pa;
                        "RolledBackTransaction" ===
                        d && e.pi();
                        a.rv = !0;
                        a.Yf();
                        0 === a.oa.Fh && zk(e);
                        "CommittedTransaction" === d && a.oa.hz && (a.dh = Math.min(a.dh, a.oa.pj - 1));
                        var Ra = b.oF;
                        Ra && (Wm(a), a.Hx.clear());
                        !a.nz && Ra && (a.nz = !0, w.setTimeout(function () {
                            a.Za.standardMouseOver();
                            a.nz = !1
                        }, 10))
                    }
                } finally {
                    a.Ua = !0
                }
            }
        }
    }

    function rl(a, b, c) {
        if ("string" === typeof c) {
            var d = a.vh(b);
            if (null !== d)d.Hb(c), a.ba instanceof Zf && (d = a.Qf(b), null !== d && d.Hb(c)); else {
                for (var d = null, e = a.Em.i; e.next();) {
                    for (var f = e.value, h = 0; h < f.length; h++) {
                        var k = f[h].NH(b);
                        null !== k && (null === d && (d = w.lb()), d.push(k))
                    }
                    if (null !== d)break
                }
                if (null !== d) {
                    for (e = 0; e < d.length; e++)d[e].Hb(c);
                    w.va(d)
                }
            }
            b === a.ba.Fk && a.uG(c)
        }
    }

    w.defineProperty(D, {Ne: "skipsModelSourceBindings"}, function () {
        return this.vD
    }, function (a) {
        this.vD = a
    });
    w.defineProperty(D, {Ju: null}, function () {
        return this.zz
    }, function (a) {
        this.zz = a
    });
    function dn(a, b) {
        var c = b.xc === Of, d = c ? b.yj : b.zj, e = c ? b.newValue : b.oldValue, f = a.Em.ka(b.object);
        if (Array.isArray(f))for (var h = 0; h < f.length; h++) {
            var k = f[h];
            if (c)en(k, e, d); else {
                var l = d;
                if (!(0 > l)) {
                    var m = l;
                    fn(k) && m++;
                    k.jf(m);
                    gn(k, m, l)
                }
            }
        }
    }

    function Km(a, b) {
        var c = b.Zj;
        if (w.isArray(c)) {
            var d = a.Em.ka(c);
            if (null === d)d = [], d.push(b), a.Em.add(c, d); else {
                for (c = 0; c < d.length; c++)if (d[c] === b)return;
                d.push(b)
            }
        }
    }

    function Om(a, b) {
        var c = b.Zj;
        if (w.isArray(c)) {
            var d = a.Em.ka(c);
            if (null !== d)for (var e = 0; e < d.length; e++)if (d[e] === b) {
                d.splice(e, 1);
                0 === d.length && a.Em.remove(c);
                break
            }
        }
    }

    function Jm(a, b) {
        for (var c = b.wa.n, d = c.length, e = 0; e < d; e++) {
            var f = c[e];
            f instanceof tl && hn(a, f)
        }
    }

    function hn(a, b) {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement) {
            var d = b.Se;
            null !== d && (d.Io instanceof Event && null !== b.Te && b.Te(b, d.Io), !0 === d.Lv && (null !== b.gi && b.gi(b, d.uz), null !== b.g && b.g.qz.add(b)));
            c = c.src;
            d = a.gp.ka(c);
            if (null === d)d = [], d.push(b), a.gp.add(c, d); else {
                for (c = 0; c < d.length; c++)if (d[c] === b)return;
                d.push(b)
            }
        }
    }

    function Nm(a, b) {
        for (var c = b.wa.n, d = c.length, e = 0; e < d; e++) {
            var f = c[e];
            f instanceof tl && jn(a, f)
        }
    }

    function jn(a, b) {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement) {
            var c = c.src, d = a.gp.ka(c);
            if (null !== d)for (var e = 0; e < d.length; e++)if (d[e] === b) {
                d.splice(e, 1);
                0 === d.length && a.gp.remove(c);
                break
            }
        }
    }

    D.prototype.rebuildParts = D.prototype.cm = function () {
        for (var a = this.MA.i; a.next();) {
            var b = a.value, c = a.key;
            (!b.de() || b instanceof U) && w.k('Invalid node template in Diagram.nodeTemplateMap: template for "' + c + '" must be a Node or a simple Part, not a Group or Link: ' + b)
        }
        for (a = this.pA.i; a.next();)b = a.value, c = a.key, b instanceof U || w.k('Invalid group template in Diagram.groupTemplateMap: template for "' + c + '" must be a Group, not a normal Node or Link: ' + b);
        for (a = this.zA.i; a.next();)b = a.value, c = a.key, b instanceof W || w.k('Invalid link template in Diagram.linkTemplateMap: template for "' + c + '" must be a Link, not a normal Node or simple Part: ' + b);
        a = w.lb();
        for (b = this.selection.i; b.next();)(c = b.value.data) && a.push(c);
        for (var b = w.lb(), d = this.Ul.i; d.next();)(c = d.value.data) && b.push(c);
        c = w.lb();
        for (d = this.dg.i; d.next();) {
            var e = d.value;
            null !== e.data && (c.push(e.data), c.push(e.location))
        }
        for (d = this.links.i; d.next();)e = d.value, null !== e.data && (c.push(e.data), c.push(e.location));
        for (d = this.Hk.i; d.next();)e = d.value, null !==
        e.data && (c.push(e.data), c.push(e.location));
        d = this.ba;
        d instanceof P && Xm(this, d.Mg);
        Xm(this, d.cg);
        Ym(this, d.cg);
        d instanceof P && Zm(this, d.Mg);
        for (d = 0; d < a.length; d++)e = this.vh(a[d]), null !== e && (e.eb = !0);
        for (d = 0; d < b.length; d++)e = this.vh(b[d]), null !== e && (e.Lg = !0);
        for (d = 0; d < c.length; d += 2)e = this.vh(c[d]), null !== e && (e.location = c[d + 1]);
        w.va(a);
        w.va(b);
        w.va(c)
    };
    function Ym(a, b) {
        if (null !== b) {
            for (var c = a.ba, d = c instanceof P, e = w.Ya(b), f = 0; f < e; f++) {
                var h = w.Da(b, f);
                c.Ge(h) ? an(a, h, !1) : d && bn(a, h)
            }
            if (d || c instanceof Zf) {
                for (f = 0; f < e; f++)h = w.Da(b, f), c.Ge(h) && kn(a, h);
                if (d)for (c = a.links; c.next();)ln(c.value)
            }
            mn(a, !1)
        }
    }

    function an(a, b, c) {
        if (void 0 !== b && null !== b && !a.oa.fb && !a.Ai.contains(b)) {
            void 0 === c && (c = !0);
            var d = a.lA(b), e = nn(a, b, d);
            if (null !== e && (fh(e), e = e.copy(), null !== e)) {
                var f = a.Ne;
                a.Ne = !0;
                e.ui = d;
                e.Vd = b;
                a.add(e);
                e.Vd = null;
                e.data = b;
                c && kn(a, b);
                a.Ne = f
            }
        }
    }

    D.prototype.lA = function (a) {
        return this.ba.lA(a)
    };
    var on = !1, pn = !1;

    function nn(a, b, c) {
        var d = !1, e = a.ba;
        e instanceof P && (d = e.wA(b));
        d ? (b = a.pA.ka(c), null === b && (b = a.pA.ka(""), null === b && (pn || (pn = !0, w.trace('No Group template found for category "' + c + '"'), w.trace("  Using default group template")), b = a.jC))) : (b = a.MA.ka(c), null === b && (b = a.MA.ka(""), null === b && (on || (on = !0, w.trace('No Node template found for category "' + c + '"'), w.trace("  Using default node template")), b = a.lC)));
        return b
    }

    function kn(a, b) {
        var c = a.ba;
        if (c instanceof P || c instanceof Zf) {
            var d = c.ub(b);
            if (void 0 !== d) {
                var e = wg(c, d), f = a.vh(b);
                if (null !== e && null !== f) {
                    for (e = e.i; e.next();) {
                        var h = e.value;
                        if (c instanceof P) {
                            var k = c;
                            if (k.Ge(h)) {
                                if (f instanceof U && k.yn(h) === d) {
                                    var l = f, h = a.vh(h);
                                    null !== h && (h.Ka = l)
                                }
                            } else {
                                var m = a.Qf(h);
                                if (null !== m && f instanceof T && (l = f, k.Sl(h) === d && (m.W = l), k.Tl(h) === d && (m.$ = l), h = k.Ak(h), w.isArray(h)))for (k = 0; k < w.Ya(h); k++)if (w.Da(h, k) === d) {
                                    l.Lc = m;
                                    break
                                }
                            }
                        } else c instanceof Zf && (m = c, m.Ge(h) && f instanceof T && (l = f, m.An(h) === d && (h = a.jx(h), $m(a, l, h))))
                    }
                    Ng(c, d)
                }
                c instanceof P ? (c = c.yn(b), void 0 !== c && (c = a.Ie(c), c instanceof U && (f.Ka = c))) : c instanceof Zf && (c = c.An(b), void 0 !== c && f instanceof T && (l = f, f = a.Ie(c), $m(a, f, l)))
            }
        }
    }

    function $m(a, b, c) {
        if (null !== b && null !== c) {
            var d = a.ab.tF, e = b, f = c;
            if (a.Od)for (b = f.fe; b.next();) {
                if (b.value.$ === f)return
            } else for (e = c, f = b, b = e.fe; b.next();)if (b.value.W === e)return;
            if (null === d || !Qi(d, e, f, null, !0))if (d = a.mx(c.data), b = qn(a, d), null !== b && (fh(b), b = b.copy(), null !== b)) {
                var h = a.Ne;
                a.Ne = !0;
                b.ui = d;
                b.Vd = c.data;
                b.W = e;
                b.$ = f;
                a.add(b);
                b.Vd = null;
                b.data = c.data;
                a.Ne = h
            }
        }
    }

    function Zm(a, b) {
        if (null !== b) {
            for (var c = w.Ya(b), d = 0; d < c; d++) {
                var e = w.Da(b, d);
                bn(a, e)
            }
            mn(a, !1)
        }
    }

    function bn(a, b) {
        if (void 0 !== b && null !== b && !a.oa.fb && !a.Kj.contains(b)) {
            var c = a.mx(b), d = qn(a, c);
            if (null !== d && (fh(d), d = d.copy(), null !== d)) {
                var e = a.Ne;
                a.Ne = !0;
                d.ui = c;
                d.Vd = b;
                var c = a.ba, f = c.UH(b);
                "" !== f && (d.Jg = f);
                f = c.Sl(b);
                void 0 !== f && (f = a.Ie(f), f instanceof T && (d.W = f));
                f = c.YH(b);
                "" !== f && (d.Eh = f);
                f = c.Tl(b);
                void 0 !== f && (f = a.Ie(f), f instanceof T && (d.$ = f));
                c = c.Ak(b);
                if (w.isArray(c))for (var f = w.Ya(c), h = 0; h < f; h++) {
                    var k = w.Da(c, h), k = a.Ie(k);
                    null !== k && (k.Lc = d)
                }
                a.add(d);
                d.Vd = null;
                d.data = b;
                a.Ne = e
            }
        }
    }

    D.prototype.mx = function (a) {
        var b = this.ba, c = "";
        b instanceof P ? c = b.mx(a) : b instanceof Zf && (c = b.WH(a));
        return c
    };
    var rn = !1;

    function qn(a, b) {
        var c = a.zA.ka(b);
        null === c && (c = a.zA.ka(""), null === c && (rn || (rn = !0, w.trace('No Link template found for category "' + b + '"'), w.trace("  Using default link template")), c = a.kC));
        return c
    }

    function Xm(a, b) {
        for (var c = w.Ya(b), d = 0; d < c; d++) {
            var e = w.Da(b, d);
            cn(a, e)
        }
    }

    function cn(a, b) {
        if (void 0 !== b && null !== b) {
            var c = a.vh(b);
            if (null !== c) {
                Pm(a, c, !1);
                var d = a.ba;
                if (d instanceof P && c instanceof T) {
                    var e = d.ub(c.data);
                    if (void 0 !== e) {
                        for (var f = c.fe; f.next();)Mg(d, e, f.value.data);
                        c.lf && (f = c.Lc, null !== f && Mg(d, e, f.data));
                        if (c instanceof U)for (c = c.Mc; c.next();)f = c.value.data, d.Ge(f) && Mg(d, e, f)
                    }
                } else if (d instanceof Zf && c instanceof T) {
                    f = a.Qf(c.data);
                    if (null !== f) {
                        f.eb = !1;
                        f.Lg = !1;
                        var h = f.layer;
                        if (null !== h) {
                            var k = h.jf(-1, f, !1);
                            0 <= k && a.Wc(Pf, "parts", h, f, null, k, null);
                            k = f.Dx;
                            null !==
                            k && k(f, h, null)
                        }
                    }
                    f = a.Od;
                    for (c = c.fe; c.next();)h = c.value, h = (f ? h.$ : h.W).data, d.Ge(h) && Mg(d, e, h)
                }
            }
        }
    }

    D.prototype.findPartForKey = D.prototype.OH = function (a) {
        if (null === a || void 0 === a)return null;
        var b = this.ba.te(a);
        return null !== b ? this.Ai.ka(b) : this.ba instanceof P && (b = this.ba.Up(a), null !== b) ? this.Kj.ka(b) : null
    };
    D.prototype.findNodeForKey = D.prototype.Ie = function (a) {
        if (null === a || void 0 === a)return null;
        a = this.ba.te(a);
        if (null === a)return null;
        a = this.Ai.ka(a);
        return a instanceof T ? a : null
    };
    D.prototype.findPartForData = D.prototype.vh = function (a) {
        if (null === a)return null;
        var b = this.Ai.ka(a);
        return null !== b ? b : b = this.Kj.ka(a)
    };
    D.prototype.findNodeForData = D.prototype.jx = function (a) {
        if (null === a)return null;
        a = this.Ai.ka(a);
        return a instanceof T ? a : null
    };
    D.prototype.findLinkForData = D.prototype.Qf = function (a) {
        return null === a ? null : this.Kj.ka(a)
    };
    D.prototype.findNodesByExample = function (a) {
        for (var b = new J(T), c = this.ep.i; c.next();) {
            var d = c.value, e = d.data;
            if (null !== e)for (var f = 0; f < arguments.length; f++) {
                var h = arguments[f];
                if (w.Qa(h) && sn(this, e, h)) {
                    b.add(d);
                    break
                }
            }
        }
        return b.i
    };
    D.prototype.findLinksByExample = function (a) {
        for (var b = new J(W), c = this.Yo.i; c.next();) {
            var d = c.value, e = d.data;
            if (null !== e)for (var f = 0; f < arguments.length; f++) {
                var h = arguments[f];
                if (w.Qa(h) && sn(this, e, h)) {
                    b.add(d);
                    break
                }
            }
        }
        return b.i
    };
    function sn(a, b, c) {
        for (var d in c) {
            var e = b[d], f = c[d];
            if (w.isArray(f)) {
                if (!w.isArray(e) || e.length < f.length)return !1;
                for (var h = 0; h < e.length; h++) {
                    var k = e[h], l = f[h];
                    if (void 0 !== l && !tn(a, k, l))return !1
                }
            } else if (!tn(a, e, f))return !1
        }
        return !0
    }

    function tn(a, b, c) {
        if ("function" === typeof c) {
            if (!c(b))return !1
        } else if (c instanceof RegExp) {
            if (!b || !c.test(b.toString()))return !1
        } else if (w.Qa(b) && w.Qa(c)) {
            if (!sn(a, b, c))return !1
        } else if (b !== c)return !1;
        return !0
    }

    w.defineProperty(D, {nL: "nodeTemplate"}, function () {
        return this.Wi.ka("")
    }, function (a) {
        var b = this.Wi.ka("");
        b !== a && (w.G(a, S, D, "nodeTemplate"), this.Wi.add("", a), this.h("nodeTemplate", b, a), this.oa.fb || this.cm())
    });
    w.defineProperty(D, {MA: "nodeTemplateMap"}, function () {
        return this.Wi
    }, function (a) {
        var b = this.Wi;
        b !== a && (w.G(a, ka, D, "nodeTemplateMap"), this.Wi = a, this.h("nodeTemplateMap", b, a), this.oa.fb || this.cm())
    });
    w.defineProperty(D, {PK: "groupTemplate"}, function () {
        return this.al.ka("")
    }, function (a) {
        var b = this.al.ka("");
        b !== a && (w.G(a, U, D, "groupTemplate"), this.al.add("", a), this.h("groupTemplate", b, a), this.oa.fb || this.cm())
    });
    w.defineProperty(D, {pA: "groupTemplateMap"}, function () {
        return this.al
    }, function (a) {
        var b = this.al;
        b !== a && (w.G(a, ka, D, "groupTemplateMap"), this.al = a, this.h("groupTemplateMap", b, a), this.oa.fb || this.cm())
    });
    w.defineProperty(D, {bL: "linkTemplate"}, function () {
        return this.$j.ka("")
    }, function (a) {
        var b = this.$j.ka("");
        b !== a && (w.G(a, W, D, "linkTemplate"), this.$j.add("", a), this.h("linkTemplate", b, a), this.oa.fb || this.cm())
    });
    w.defineProperty(D, {zA: "linkTemplateMap"}, function () {
        return this.$j
    }, function (a) {
        var b = this.$j;
        b !== a && (w.G(a, ka, D, "linkTemplateMap"), this.$j = a, this.h("linkTemplateMap", b, a), this.oa.fb || this.cm())
    });
    w.defineProperty(D, {sI: null}, function () {
        return this.Cm
    }, function (a) {
        this.Cm = a
    });
    w.defineProperty(D, {$e: "isMouseCaptured"}, function () {
        return this.PC
    }, function (a) {
        var b = this.Eb;
        null !== b && (a ? (this.R.bubbles = !1, b.removeEventListener("mousemove", this.Nn, !1), b.removeEventListener("mousedown", this.Mn, !1), b.removeEventListener("mouseup", this.Pn, !1), b.removeEventListener("mousewheel", this.Ng, !1), b.removeEventListener("DOMMouseScroll", this.Ng, !1), b.removeEventListener("mouseout", this.On, !1), window.addEventListener("mousemove", this.Nn, !0), window.addEventListener("mousedown", this.Mn, !0),
            window.addEventListener("mouseup", this.Pn, !0), window.addEventListener("mousewheel", this.Ng, !0), window.addEventListener("DOMMouseScroll", this.Ng, !0), window.addEventListener("mouseout", this.On, !0), window.addEventListener("selectstart", this.preventDefault, !1)) : (window.removeEventListener("mousemove", this.Nn, !0), window.removeEventListener("mousedown", this.Mn, !0), window.removeEventListener("mouseup", this.Pn, !0), window.removeEventListener("mousewheel", this.Ng, !0), window.removeEventListener("DOMMouseScroll",
            this.Ng, !0), window.removeEventListener("mouseout", this.On, !0), window.removeEventListener("selectstart", this.preventDefault, !1), b.addEventListener("mousemove", this.Nn, !1), b.addEventListener("mousedown", this.Mn, !1), b.addEventListener("mouseup", this.Pn, !1), b.addEventListener("mousewheel", this.Ng, !1), b.addEventListener("DOMMouseScroll", this.Ng, !1), b.addEventListener("mouseout", this.On, !1)), this.PC = a)
    });
    w.defineProperty(D, {position: "position"}, function () {
        return this.hb
    }, function (a) {
        var b = this.hb;
        if (!b.L(a)) {
            w.G(a, z, D, "position");
            var c = this.sb.copy();
            a = a.copy();
            if (!this.Rc && null !== this.Eb) {
                this.Rc = !0;
                var d = this.scale;
                Ml(this, a, this.qe, this.Ib / d, this.Lb / d, this.ro, !1);
                this.Rc = !1
            }
            this.hb = a.S();
            a = this.Pa;
            a.oc && dl(a, b, this.hb);
            this.Rc || this.uu(c, this.sb, this.tb, this.tb, !1)
        }
    });
    w.defineProperty(D, {jI: "initialPosition"}, function () {
        return this.Hv
    }, function (a) {
        this.Hv.L(a) || (w.G(a, z, D, "initialPosition"), this.Hv = a.S())
    });
    w.defineProperty(D, {kI: "initialScale"}, function () {
        return this.Iv
    }, function (a) {
        this.Iv !== a && (w.j(a, "number", D, "initialScale"), this.Iv = a)
    });
    w.defineProperty(D, {Bn: "grid"}, function () {
        null === this.nd && Dl(this);
        return this.nd
    }, function (a) {
        var b = this.nd;
        if (b !== a) {
            null === b && (Dl(this), b = this.nd);
            w.G(a, C, D, "grid");
            a.type !== El && w.k("Diagram.grid must be a Panel of type Panel.Grid");
            var c = b.O;
            null !== c && c.remove(b);
            this.nd = a;
            a.name = "GRID";
            null !== c && c.add(a);
            Yl(this);
            this.na();
            this.h("grid", b, a)
        }
    });
    w.u(D, {sb: "viewportBounds"}, function () {
        var a = this.UD;
        if (null === this.Eb)return a;
        var b = this.hb, c = this.tb;
        a.l(b.x, b.y, Math.max(this.Ib, 0) / c, Math.max(this.Lb, 0) / c);
        return a
    });
    w.defineProperty(D, {LE: "fixedBounds"}, function () {
        return this.zv
    }, function (a) {
        var b = this.zv;
        b.L(a) || (w.G(a, A, D, "fixedBounds"), -Infinity !== a.width && Infinity !== a.height && -Infinity !== a.height || w.k("fixedBounds width/height must not be Infinity"), this.zv = a = a.S(), this.qc(), this.h("fixedBounds", b, a))
    });
    w.defineProperty(D, {XF: "scrollMargin"}, function () {
        return this.qw
    }, function (a) {
        "number" === typeof a ? a = new eb(a) : w.G(a, eb, D, "scrollMargin");
        var b = this.qw;
        b.L(a) || (this.qw = a = a.S(), this.qc(), this.h("scrollMargin", b, a))
    });
    w.defineProperty(D, {WA: "scrollMode"}, function () {
        return this.rw
    }, function (a) {
        var b = this.rw;
        b !== a && (w.mb(a, D, D, "scrollMode"), this.rw = a, a === ol && Kl(this, !1), this.h("scrollMode", b, a))
    });
    w.defineProperty(D, {IF: "positionComputation"}, function () {
        return this.lw
    }, function (a) {
        var b = this.lw;
        b !== a && (null !== a && w.j(a, "function", D, "positionComputation"), this.lw = a, Kl(this, !1), this.h("positionComputation", b, a))
    });
    w.defineProperty(D, {WF: "scaleComputation"}, function () {
        return this.nw
    }, function (a) {
        var b = this.nw;
        b !== a && (null !== a && w.j(a, "function", D, "scaleComputation"), this.nw = a, Sm(this, this.scale, this.scale), this.h("scaleComputation", b, a))
    });
    w.u(D, {qe: "documentBounds"}, function () {
        return this.sv
    });
    function Nl(a, b) {
        a.Uj = !1;
        var c = a.sv;
        c.L(b) || (b = b.S(), a.sv = b, Kl(a, !1), a.Ba("DocumentBoundsChanged", null, c.copy()), Vl(a))
    }

    w.defineProperty(D, {scale: "scale"}, function () {
        return this.tb
    }, function (a) {
        var b = this.tb;
        w.Ed(a, D, "scale");
        b !== a && Sm(this, b, a)
    });
    w.defineProperty(D, {Fl: "autoScale"}, function () {
        return this.qm
    }, function (a) {
        var b = this.qm;
        b !== a && (w.mb(a, D, D, "autoScale"), this.qm = a, this.h("autoScale", b, a), a !== ih && Kl(this, !1))
    });
    w.defineProperty(D, {SK: "initialAutoScale"}, function () {
        return this.el
    }, function (a) {
        var b = this.el;
        b !== a && (w.mb(a, D, D, "initialAutoScale"), this.el = a, this.h("initialAutoScale", b, a))
    });
    w.defineProperty(D, {lI: "initialViewportSpot"}, function () {
        return this.Jv
    }, function (a) {
        var b = this.Jv;
        b !== a && (w.G(a, L, D, "initialViewportSpot"), a.fd() || w.k("initialViewportSpot must be a specific Spot: " + a), this.Jv = a, this.h("initialViewportSpot", b, a))
    });
    w.defineProperty(D, {iI: "initialDocumentSpot"}, function () {
        return this.Gv
    }, function (a) {
        var b = this.Gv;
        b !== a && (w.G(a, L, D, "initialDocumentSpot"), a.fd() || w.k("initialViewportSpot must be a specific Spot: " + a), this.Gv = a, this.h("initialDocumentSpot", b, a))
    });
    w.defineProperty(D, {yh: "minScale"}, function () {
        return this.Zv
    }, function (a) {
        w.Ed(a, D, "minScale");
        var b = this.Zv;
        b !== a && (0 < a ? (this.Zv = a, this.h("minScale", b, a), a > this.scale && (this.scale = a)) : w.Ea(a, "> 0", D, "minScale"))
    });
    w.defineProperty(D, {xh: "maxScale"}, function () {
        return this.Xv
    }, function (a) {
        w.Ed(a, D, "maxScale");
        var b = this.Xv;
        b !== a && (0 < a ? (this.Xv = a, this.h("maxScale", b, a), a < this.scale && (this.scale = a)) : w.Ea(a, "> 0", D, "maxScale"))
    });
    w.defineProperty(D, {lm: "zoomPoint"}, function () {
        return this.Iw
    }, function (a) {
        this.Iw.L(a) || (w.G(a, z, D, "zoomPoint"), this.Iw = a = a.S())
    });
    w.defineProperty(D, {qE: "contentAlignment"}, function () {
        return this.ro
    }, function (a) {
        var b = this.ro;
        b.L(a) || (w.G(a, L, D, "contentAlignment"), this.ro = a = a.S(), this.h("contentAlignment", b, a), Kl(this, !1))
    });
    w.defineProperty(D, {TK: "initialContentAlignment"}, function () {
        return this.Lo
    }, function (a) {
        var b = this.Lo;
        b.L(a) || (w.G(a, L, D, "initialContentAlignment"), this.Lo = a = a.S(), this.h("initialContentAlignment", b, a))
    });
    w.defineProperty(D, {padding: "padding"}, function () {
        return this.ff
    }, function (a) {
        "number" === typeof a ? a = new eb(a) : w.G(a, eb, D, "padding");
        var b = this.ff;
        b.L(a) || (this.ff = a = a.S(), this.qc(), this.h("padding", b, a))
    });
    w.u(D, {dg: "nodes"}, function () {
        return this.ep.i
    });
    w.u(D, {links: "links"}, function () {
        return this.Yo.i
    });
    w.u(D, {Hk: "parts"}, function () {
        return this.zb.i
    });
    D.prototype.findTopLevelNodesAndLinks = function () {
        for (var a = new J(S), b = this.ep.i; b.next();) {
            var c = b.value;
            c.cq && a.add(c)
        }
        for (b = this.Yo.i; b.next();)c = b.value, c.cq && a.add(c);
        return a.i
    };
    D.prototype.findTopLevelGroups = function () {
        return this.wl.i
    };
    w.defineProperty(D, {Rb: "layout"}, function () {
        return this.ie
    }, function (a) {
        var b = this.ie;
        b !== a && (w.G(a, pg, D, "layout"), null !== b && (b.g = null, b.group = null), this.ie = a, a.g = this, a.group = null, this.bv = !0, this.h("layout", b, a), this.Le())
    });
    D.prototype.layoutDiagram = function (a) {
        Ai(this);
        a && mn(this, !0);
        Zl(this, !1)
    };
    function mn(a, b) {
        for (var c = a.wl.i; c.next();)un(a, c.value, b);
        null !== a.Rb && (b ? a.Rb.yf = !1 : a.Rb.J())
    }

    function un(a, b, c) {
        if (null !== b) {
            for (var d = b.bp.i; d.next();)un(a, d.value, c);
            null !== b.Rb && (c ? b.Rb.yf = !1 : b.Rb.J())
        }
    }

    function Zl(a, b) {
        if (!a.My) {
            var c = a.Rb, d = a.Ua;
            a.Ua = !0;
            try {
                var e = a.oa.Fh;
                0 === e && a.Tb("Layout");
                var f = a.Pa;
                1 !== a.oa.Fh || f.kf || f.oc || b || f.Sn("Layout");
                for (var h = a.wl.i; h.next();)vn(a, h.value, b);
                c.yf || b && !c.nF && 0 !== e || (c.doLayout(a), Ai(a), c.yf = !0)
            } finally {
                0 === e && a.Fd("Layout"), a.bv = !c.yf, a.Ua = d
            }
        }
    }

    function vn(a, b, c) {
        if (null !== b) {
            for (var d = b.bp.i; d.next();)vn(a, d.value, c);
            d = b.Rb;
            null === d || d.yf || c && !d.nF || (b.Qn = !b.location.H(), d.doLayout(b), b.J(wn), d.yf = !0, em(a, b))
        }
    }

    w.defineProperty(D, {Od: "isTreePathToChildren"}, function () {
        return this.Pv
    }, function (a) {
        var b = this.Pv;
        if (b !== a && (w.j(a, "boolean", D, "isTreePathToChildren"), this.Pv = a, this.h("isTreePathToChildren", b, a), !this.oa.fb))for (a = this.dg; a.next();)xn(a.value)
    });
    D.prototype.findTreeRoots = function () {
        for (var a = new I(T), b = this.dg; b.next();) {
            var c = b.value;
            c.cq && null === c.vn() && a.add(c)
        }
        return a.i
    };
    w.defineProperty(D, {sB: "treeCollapsePolicy"}, function () {
        return this.Dw
    }, function (a) {
        var b = this.Dw;
        b !== a && (a !== ql && a !== Um && a !== Vm && w.k("Unknown Diagram.treeCollapsePolicy: " + a), this.Dw = a, this.h("treeCollapsePolicy", b, a))
    });
    w.defineProperty(D, {wh: null}, function () {
        return this.HC
    }, function (a) {
        this.HC = a
    });
    function pl(a) {
        function b(a) {
            var b = a.toLowerCase(), h = new I("function");
            c.add(a, h);
            c.add(b, h);
            d.add(a, a);
            d.add(b, a)
        }

        var c = new ka("string", I), d = new ka("string", "string");
        b("AnimationStarting");
        b("AnimationFinished");
        b("BackgroundSingleClicked");
        b("BackgroundDoubleClicked");
        b("BackgroundContextClicked");
        b("ClipboardChanged");
        b("ClipboardPasted");
        b("DocumentBoundsChanged");
        b("ExternalObjectsDropped");
        b("InitialLayoutCompleted");
        b("LayoutCompleted");
        b("LinkDrawn");
        b("LinkRelinked");
        b("LinkReshaped");
        b("Modified");
        b("ObjectSingleClicked");
        b("ObjectDoubleClicked");
        b("ObjectContextClicked");
        b("PartCreated");
        b("PartResized");
        b("PartRotated");
        b("SelectionMoved");
        b("SelectionCopied");
        b("SelectionDeleting");
        b("SelectionDeleted");
        b("SelectionGrouped");
        b("SelectionUngrouped");
        b("ChangingSelection");
        b("ChangedSelection");
        b("SubGraphCollapsed");
        b("SubGraphExpanded");
        b("TextEdited");
        b("TreeCollapsed");
        b("TreeExpanded");
        b("ViewportBoundsChanged");
        a.Oy = c;
        a.Ny = d
    }

    function oa(a, b) {
        var c = a.Ny.ka(b);
        return null !== c ? c : a.Ny.ka(b.toLowerCase())
    }

    function yn(a, b) {
        var c = a.Oy.ka(b);
        if (null !== c)return c;
        c = a.Oy.ka(b.toLowerCase());
        if (null !== c)return c;
        w.k("Unknown DiagramEvent name: " + b);
        return null
    }

    D.prototype.addDiagramListener = D.prototype.Lz = function (a, b) {
        w.j(a, "string", D, "addDiagramListener:name");
        w.j(b, "function", D, "addDiagramListener:listener");
        var c = yn(this, a);
        null !== c && c.add(b)
    };
    D.prototype.removeDiagramListener = D.prototype.MF = function (a, b) {
        w.j(a, "string", D, "removeDiagramListener:name");
        w.j(b, "function", D, "addDiagramListener:listener");
        var c = yn(this, a);
        null !== c && c.remove(b)
    };
    D.prototype.raiseDiagramEvent = D.prototype.Ba = function (a, b, c) {
        var d = yn(this, a), e = new Cf;
        e.g = this;
        a = oa(this, a);
        null !== a && (e.name = a);
        void 0 !== b && (e.jB = b);
        void 0 !== c && (e.OA = c);
        b = d.length;
        if (1 === b)d = d.da(0), d(e); else if (0 !== b)for (c = d.dc(), a = 0; a < b; a++)d = c[a], d(e);
        return e.cancel
    };
    function Ji(a, b) {
        var c = !1;
        a.sb.vk(b) && (c = !0);
        c = a.fA(b, function (a) {
            return a.U
        }, function (a) {
            return a instanceof W
        }, !0, function (a) {
            return a instanceof W
        }, c);
        if (0 !== c.count)for (c = c.i; c.next();) {
            var d = c.value;
            d.Dk && d.Xb()
        }
    }

    D.prototype.isUnoccupied = D.prototype.$l = function (a, b) {
        void 0 === b && (b = null);
        return zn(this, !1, null, b).$l(a.x, a.y, a.width, a.height)
    };
    function zn(a, b, c, d) {
        null === a.Bd && (a.Bd = new An);
        if (a.Bd.Yt || a.Bd.group !== c || a.Bd.iB !== d) {
            if (null === c) {
                b = a.Uj ? Jl(a) : a.qe.copy();
                b.Sf(100, 100);
                a.Bd.initialize(b);
                b = w.Df();
                for (var e = a.dg; e.next();) {
                    var f = e.value, h = f.layer;
                    null !== h && h.visible && !h.Jc && Bn(a, f, d, b)
                }
            } else for (c.Y.H() || c.Ze(), b = c.Y.copy(), b.Sf(20, 20), a.Bd.initialize(b), b = w.Df(), e = c.Mc; e.next();)f = e.value, f instanceof T && Bn(a, f, d, b);
            w.Gb(b);
            a.Bd.group = c;
            a.Bd.iB = d;
            a.Bd.Yt = !1
        } else b && Cn(a.Bd);
        return a.Bd
    }

    function Bn(a, b, c, d) {
        if (b !== c)if (b.isVisible() && b.Pz && !b.lf) {
            c = b.getAvoidableRect(d);
            d = a.Bd.Ip;
            b = a.Bd.Gp;
            for (var e = c.x + c.width, f = c.y + c.height, h = c.x; h < e; h += d) {
                for (var k = c.y; k < f; k += b)Dn(a.Bd, h, k);
                Dn(a.Bd, h, f)
            }
            for (k = c.y; k < f; k += b)Dn(a.Bd, e, k);
            Dn(a.Bd, e, f)
        } else if (b instanceof U)for (b = b.Mc; b.next();)e = b.value, e instanceof T && Bn(a, e, c, d)
    }

    function En(a, b) {
        null === a.Bd || a.Bd.Yt || null !== b && (!b.Pz || b.lf) || (a.Bd.Yt = !0)
    }

    D.prototype.simulatedMouseMove = function (a, b, c) {
        if (null !== Jh) {
            var d = Jh.g;
            c instanceof D || (c = null);
            var e = Kh;
            c !== e && (null !== e && e !== d && null !== e.ab.re && (Ph(e), Jh.ux = !1, e.ab.re.doSimulatedDragLeave()), Kh = c, null !== c && c !== d && null !== c.ab.re && (Vh(), e = c.ab.re, Rh.contains(e) || Rh.add(e), c.ab.re.doSimulatedDragEnter()));
            if (null === c || c === d || !c.eE || c.cb || !c.Ep)return !1;
            d = c.ab.re;
            null !== d && (null !== a ? b = c.zr(a) : null === b && (b = new z), c.Pb.ca = b, c.Pb.Nl = !1, c.Pb.up = !1, d.doSimulatedDragOver());
            return !0
        }
        return !1
    };
    D.prototype.simulatedMouseUp = function (a, b, c, d) {
        if (null !== Jh) {
            null === d && (d = b);
            b = Kh;
            var e = Jh.g;
            if (d !== b) {
                if (null !== b && b !== e && null !== b.ab.re)return Ph(b), Jh.ux = !1, b.ab.re.doSimulatedDragLeave(), !1;
                Kh = d;
                null !== d && null !== d.ab.re && (Vh(), b = d.ab.re, Rh.contains(b) || Rh.add(b), d.ab.re.doSimulatedDragEnter())
            }
            if (null === d)return Jh.doCancel(), !0;
            if (d !== this)return null !== a && (c = d.zr(a)), d.Pb.ca = c, d.Pb.Nl = !1, d.Pb.up = !0, a = d.ab.re, null !== a && a.doSimulatedDrop(), a = Jh, null !== a && (d = a.mayCopy(), a.Ff = d ? "Copy" : "Move", a.stopTool()),
                !0
        }
        return !1
    };
    w.defineProperty(D, {sK: "autoScrollInterval"}, function () {
        return this.Nq
    }, function (a) {
        var b = this.Nq;
        w.Ed(a, D, "scale");
        b !== a && (this.Nq = a, this.h("autoScrollInterval", b, a))
    });
    w.defineProperty(D, {kE: "autoScrollRegion"}, function () {
        return this.dv
    }, function (a) {
        "number" === typeof a ? a = new eb(a) : w.G(a, eb, D, "autoScrollRegion");
        var b = this.dv;
        b.L(a) || (this.dv = a = a.S(), this.qc(), this.h("autoScrollRegion", b, a))
    });
    D.prototype.doAutoScroll = D.prototype.bA = function (a) {
        this.cv.assign(a);
        Fn(this, this.cv).Ic(this.position) ? Ph(this) : Gn(this)
    };
    function Gn(a) {
        -1 === a.mo && (a.mo = w.setTimeout(function () {
            if (-1 !== a.mo) {
                Ph(a);
                var b = a.R.event;
                if (null !== b) {
                    var c = Fn(a, a.cv);
                    c.Ic(a.position) || (a.position = c, a.R.ca = a.rB(a.cv), a.simulatedMouseMove(b, null, b.target.Z) || a.doMouseMove(), a.Uj = !0, Nl(a, a.sh()), a.Be = !0, a.Yf(), Gn(a))
                }
            }
        }, a.Nq))
    }

    function Ph(a) {
        -1 !== a.mo && (w.clearTimeout(a.mo), a.mo = -1)
    }

    function Fn(a, b) {
        var c = a.position, d = a.kE;
        if (0 >= d.top && 0 >= d.left && 0 >= d.right && 0 >= d.bottom)return c;
        var e = a.sb, f = a.scale, e = w.Vg(0, 0, e.width * f, e.height * f), h = w.xb(0, 0);
        if (b.x >= e.x && b.x < e.x + d.left) {
            var k = Math.max(a.Cu, 1), k = k | 0;
            h.x -= k;
            b.x < e.x + d.left / 2 && (h.x -= k);
            b.x < e.x + d.left / 4 && (h.x -= 4 * k)
        } else b.x <= e.x + e.width && b.x > e.x + e.width - d.right && (k = Math.max(a.Cu, 1), k |= 0, h.x += k, b.x > e.x + e.width - d.right / 2 && (h.x += k), b.x > e.x + e.width - d.right / 4 && (h.x += 4 * k));
        b.y >= e.y && b.y < e.y + d.top ? (k = Math.max(a.Du, 1), k |= 0, h.y -= k, b.y < e.y +
        d.top / 2 && (h.y -= k), b.y < e.y + d.top / 4 && (h.y -= 4 * k)) : b.y <= e.y + e.height && b.y > e.y + e.height - d.bottom && (k = Math.max(a.Du, 1), k |= 0, h.y += k, b.y > e.y + e.height - d.bottom / 2 && (h.y += k), b.y > e.y + e.height - d.bottom / 4 && (h.y += 4 * k));
        h.Ic(bd) || (c = new z(c.x + h.x / f, c.y + h.y / f));
        w.Gb(e);
        w.v(h);
        return c
    }

    D.prototype.makeSvg = D.prototype.makeSVG = function (a) {
        void 0 === a && (a = new sa);
        a.context = "svg";
        a = Hn(this, a);
        return null !== a ? a.gm : null
    };
    D.prototype.makeImage = function (a) {
        void 0 === a && (a = new sa);
        var b = (a.document || document).createElement("img");
        b.src = this.GI(a);
        return b
    };
    D.prototype.makeImageData = D.prototype.GI = function (a) {
        void 0 === a && (a = new sa);
        var b = Hn(this, a);
        if (null !== b) {
            var c = a.returnType, c = void 0 === c ? "string" : c.toLowerCase();
            switch (c) {
                case "imagedata":
                    return b.wk.getImageData(0, 0, b.width, b.height);
                case "blob":
                    b = b.Gd;
                    c = a.callback;
                    if ("function" !== typeof c) {
                        w.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');
                        break
                    }
                    if ("function" === typeof b.toBlob)return b.toBlob(c, a.type, a.details), "toBlob";
                    if ("function" === typeof b.msToBlob)return c(b.msToBlob()), "msToBlob";
                    c(null);
                    break;
                default:
                    return b.toDataURL(a.type, a.details)
            }
        }
        return ""
    };
    var In = !1;

    function Hn(a, b) {
        a.Pa.pi();
        a.Yf();
        if (null === a.Eb)return null;
        "object" !== typeof b && w.k("properties argument must be an Object.");
        var c = !1, d = b.size || null, e = b.scale || null;
        void 0 !== b.scale && isNaN(b.scale) && (e = "NaN");
        var f = b.maxSize;
        void 0 === b.maxSize && (c = !0, f = "svg" === b.context ? new ha(Infinity, Infinity) : new ha(2E3, 2E3));
        var h = b.position || null, k = b.parts || null, l = void 0 === b.padding ? 1 : b.padding, m = b.background || null, n = b.omitTemporary;
        void 0 === n && (n = !0);
        var p = b.document || document, q = b.elementFinished || null, r =
            b.showTemporary;
        void 0 === r && (r = !n);
        n = b.showGrid;
        void 0 === n && (n = r);
        null !== d && isNaN(d.width) && isNaN(d.height) && (d = null);
        "number" === typeof l ? l = new eb(l) : l instanceof eb || (l = new eb(0));
        l.left = Math.max(l.left, 0);
        l.right = Math.max(l.right, 0);
        l.top = Math.max(l.top, 0);
        l.bottom = Math.max(l.bottom, 0);
        a.Co = !1;
        a.qf.Ee(!0);
        var s = new Tc(null, p), u = s.wk;
        if (!(d || e || k || h)) {
            s.width = a.Ib + Math.ceil(l.left + l.right);
            s.height = a.Lb + Math.ceil(l.top + l.bottom);
            if ("svg" === b.context)return u = new Lc(s.Gd, p, q), Em(a, u, l, new ha(s.width,
                s.height), a.tb, a.hb, k, m, r, n), a.Co = !0, u;
            Em(a, u, l, new ha(s.width, s.height), a.tb, a.hb, k, m, r, n);
            a.Co = !0;
            return s
        }
        var t = a.ob.Yw, x = new z(0, 0), v = a.qe.copy();
        v.EJ(a.padding);
        if (r)for (var B = !0, B = a.$b.n, y = B.length, H = 0; H < y; H++) {
            var E = B[H];
            if (E.visible && E.Jc)for (var E = E.zb.n, V = E.length, ba = 0; ba < V; ba++) {
                var Q = E[ba];
                Q.xA && Q.isVisible() && (Q = Q.Y, Q.H() && v.Gh(Q))
            }
        }
        x.x = v.x;
        x.y = v.y;
        if (null !== k) {
            var $, B = !0, y = k.i;
            for (y.reset(); y.next();)Q = y.value, Q instanceof S && (E = Q.layer, null !== E && !E.visible || null !== E && !r && E.Jc || !Q.isVisible() ||
            (Q = Q.Y, Q.H() && (B ? (B = !1, $ = Q.copy()) : $.Gh(Q))));
            B && ($ = new A(0, 0, 0, 0));
            v.width = $.width;
            v.height = $.height;
            x.x = $.x;
            x.y = $.y
        }
        null !== h && h.H() && (x = h, e || (e = t));
        B = Q = 0;
        null !== l && (Q = l.left + l.right, B = l.top + l.bottom);
        H = y = 0;
        null !== d && (y = d.width, H = d.height, isFinite(y) && (y = Math.max(0, y - Q)), isFinite(H) && (H = Math.max(0, H - B)));
        $ = h = 0;
        null !== d && null !== e ? ("NaN" === e && (e = t), d.H() ? (h = y, $ = H) : isNaN(H) ? (h = y, $ = v.height * e) : (h = v.width * e, $ = H)) : null !== d ? d.H() ? (e = Math.min(y / v.width, H / v.height), h = y, $ = H) : isNaN(H) ? (e = y / v.width, h = y, $ = v.height *
            e) : (e = H / v.height, h = v.width * e, $ = H) : null !== e ? "NaN" === e && f.H() ? (e = Math.min((f.width - Q) / v.width, (f.height - B) / v.height), e > t ? (e = t, h = v.width, $ = v.height) : (h = f.width, $ = f.height)) : (h = v.width * e, $ = v.height * e) : (e = t, h = v.width, $ = v.height);
        null !== l ? (h += Q, $ += B) : l = new eb(0);
        null !== f && (d = f.width, f = f.height, "svg" !== b.context && c && !In && (h > d || $ > f) && (w.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. (" + Math.ceil(h) + "x" + Math.ceil($) + " vs 2000x2000) Consider increasing the max size."),
            In = !0), isNaN(d) && (d = 2E3), isNaN(f) && (f = 2E3), isFinite(d) && (h = Math.min(h, d)), isFinite(f) && ($ = Math.min($, f)));
        s.width = Math.ceil(h);
        s.height = Math.ceil($);
        if ("svg" === b.context)return u = new Lc(s.Gd, p, q), Em(a, u, l, new ha(Math.ceil(h), Math.ceil($)), e, x, k, m, r, n), a.Co = !0, u;
        Em(a, u, l, new ha(Math.ceil(h), Math.ceil($)), e, x, k, m, r, n);
        a.Co = !0;
        return s
    }

    D.inherit = function (a, b) {
        w.j(a, "function", D, "inherit");
        w.j(b, "function", D, "inherit");
        b.PG && w.k("Cannot inherit from " + w.hf(b));
        w.La(a, b)
    };
    function yl() {
        this.CD = null;
        this.RG = "63ad05bbe23a1786468a4c741b6d2";
        this.Fi = this.RG === this._tk ? !0 : null
    }

    function Jn(a) {
        var b = "f", c = window[w.Gg("76a715b2f73f148a")][w.Gg("72ba13b5")], d = w.Gg;
        if (window[d("7da7")] && window[d("7da7")][d("76a115b6ed251eaf4692")]) {
            a.Fi = !0;
            var e = window[d("7da7")][d("76a115b6ed251eaf4692")], e = d(e).split(d("39e9"));
            if (6 > e.length)return;
            var f = d(e[1]).split(".");
            if ("7da71ca0" !== e[4])return;
            var h = d(w[d("6cae19")]).split(".");
            if (f[0] > h[0] || f[0] === h[0] && f[1] >= h[1]) {
                f = c[d("76ad18b4f73e")];
                for (h = c[d("73a612b6fb191d")](d("35e7")) + 2; h < f; h++)b += c[h];
                f = b[d("73a612b6fb191d")](d(e[2]));
                0 >
                f && d(e[2]) !== d("7da71ca0ad381e90") && (f = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
                0 > f && (f = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
                a.Fi = !(0 <= f && f < b[d("73a612b6fb191d")](d("35")));
                if (!a.Fi)return
            } else return
        }
        f = c[d("76ad18b4f73e")];
        for (h = c[d("73a612b6fb191d")](d("35e7")) + 2; h < f; h++)b += c[h];
        f = b[d("73a612b6fb191d")](d(w.adym));
        0 > f && d(w.adym) !== d("7da71ca0ad381e90") && (f = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
        a.Fi = !(0 <= f && f < b[d("73a612b6fb191d")](d("35")));
        a.Fi && (b = window.document[d("79ba13b2f7333e8846865a7d00")]("div"),
            c = d("02cncncn"), "." === c[0] && (c = c[d("69bd14a0f724128a44")](1)), b[d("79a417a0f0181a8946")] = c, window.document[d("78a712aa")] ? (window.document[d("78a712aa")][d("7bb806b6ed32388c4a875b")](b), c = window[d("7dad0290ec3b0b91578e5b40007031bf")](b)[d("7dad0283f1390b81519f4645156528bf")](d("78a704b7e62456904c9b12701b6532a8")), window.document[d("78a712aa")][d("68ad1bbcf533388c4a875b")](b), c && -1 !== c.indexOf(d(w.nH)) && -1 !== c.indexOf(d(w.oH)) && (a.Fi = !1)) : (a.Fi = null, a.Fi = !1))
    }

    yl.prototype.km = function (a) {
        a.qf.setTransform(a.zd, 0, 0, a.zd, 0, 0);
        null === this.Fi && Jn(this);
        return 0 < this.Fi && this !== this.CD ? !0 : !1
    };
    yl.prototype.t = function () {
        this.CD = null
    };
    function zl(a, b) {
        void 0 !== b && null !== b || w.k("Diagram setup requires an argument DIV.");
        null !== a.Mb && w.k("Diagram has already completed setup.");
        "string" === typeof b ? a.Mb = window.document.getElementById(b) : b instanceof HTMLDivElement ? a.Mb = b : w.k("No DIV or DIV id supplied: " + b);
        null === a.Mb && w.k("Invalid DIV id; could not get element with id: " + b);
        void 0 !== a.Mb.Z && w.k("Invalid div id; div already has a Diagram associated with it.");
        "static" === window.getComputedStyle(a.Mb, null).position && (a.Mb.style.position =
            "relative");
        a.Mb.style["-webkit-tap-highlight-color"] = "rgba(255, 255, 255, 0)";
        a.Mb.style["-ms-touch-action"] = "none";
        a.Mb.innerHTML = "";
        a.Mb.Z = a;
        var c = new Tc(a);
        c.Gd.innerHTML = "This text is displayed if your browser does not support the Canvas HTML element.";
        void 0 !== c.style && (c.style.position = "absolute", c.style.top = "0px", c.style.left = "0px", "rtl" === window.getComputedStyle(a.Mb, null).getPropertyValue("direction") && (a.Lr = !0), c.style.zIndex = "2", c.style.PL = "none", c.style.webkitUserSelect = "none", c.style.MozUserSelect =
            "none");
        a.Ib = a.Mb.clientWidth || 1;
        a.Lb = a.Mb.clientHeight || 1;
        a.Eb = c;
        a.qf = c.wk;
        var d = a.qf;
        a.dD = (window.devicePixelRatio || 1) / (d.webkitBackingStorePixelRatio || d.mozBackingStorePixelRatio || d.msBackingStorePixelRatio || d.oBackingStorePixelRatio || d.backingStorePixelRatio || 1);
        a.zd = a.computePixelRatio();
        Gm(a, a.Ib, a.Lb);
        a.uv = function () {
            return true;
        };
        a.Mb.insertBefore(c.Gd, a.Mb.firstChild);
        c = new Tc(null);
        c.width = 1;
        c.height = 1;
        a.Qy = c;
        a.xC = c.wk;
        var c = w.createElement("div"), e = w.createElement("div");
        c.style.position = "absolute";
        c.style.overflow = "auto";
        c.style.width = a.Ib + "px";
        c.style.height = a.Lb + "px";
        c.style.zIndex = "1";
        e.style.position = "absolute";
        e.style.width = "1px";
        e.style.height = "1px";
        a.Mb.appendChild(c);
        c.appendChild(e);
        c.onscroll = Fl;
        c.onmousedown = Hl;
        c.ontouchstart = Hl;
        c.Z = a;
        c.NG = !0;
        c.OG = !0;
        a.sw = c;
        a.Qs = e;
        a.Tx = w.tE(function () {
            a.jk = null;
            a.na()
        }, 300, !1);
        a.xB = w.tE(function () {
            Ak(a)
        }, 250, !1);
        a.preventDefault = function (a) {
            a.preventDefault();
            return !1
        };
        a.Nn = function (b) {
            if (a.isEnabled) {
                a.Cm = !0;
                var c = a.Tc;
                w.Dn && c.tj ? (b.preventDefault(), b.simulated = !0, a.Zs = b) : (a.Tc = a.Pb, a.Pb = c, Ql(a, a, b, c, !0), a.simulatedMouseMove(b, null, b.target.Z) || (a.doMouseMove(), a.Za.isBeyondDragSize() && (a.jl = 0), Ul(c, b)))
            }
        };
        a.Mn = function (b) {
            if (a.isEnabled) {
                a.Cm = !0;
                var c = a.Tc;
                if (w.Dn && null !== a.Zs)a.Zs = b, b.preventDefault(); else if (w.Dn && 400 > b.timeStamp - a.Gm)b.preventDefault(); else if (a.gl)b.preventDefault(); else {
                    a.Tc = a.Pb;
                    a.Pb = c;
                    Ql(a, a, b, c, !0);
                    c.Nl = !0;
                    c.Fe = b.detail;
                    if (w.gF || w.hF)b.timeStamp - a.Gm < a.QD && !a.Za.isBeyondDragSize() ? a.jl++ :
                        a.jl = 1, a.Gm = b.timeStamp, c.Fe = a.jl;
                    a.Hi = c;
                    !0 === c.ur.simulated ? (b.preventDefault(), b.simulated = !0) : (Jh = null, a.doMouseDown(), a.Hi = a.Hi.copy(), 1 === b.button ? b.preventDefault() : Ul(c, b))
                }
            }
        };
        a.Pn = function (b) {
            if (a.isEnabled)if (a.gl && 2 === b.button)b.preventDefault(); else if (a.gl && 0 === b.button && (a.gl = !1), a.ht)b.preventDefault(); else {
                a.Cm = !0;
                var c = a.Tc;
                if (w.Dn) {
                    if (400 > b.timeStamp - a.Gm) {
                        b.preventDefault();
                        return
                    }
                    a.Gm = b.timeStamp
                }
                if (w.Dn && null !== a.Zs)a.Zs = null, b.preventDefault(); else {
                    a.Tc = a.Pb;
                    a.Pb = c;
                    Ql(a, a, b, c,
                        !0);
                    c.up = !0;
                    c.Fe = b.detail;
                    if (w.gF || w.hF)c.Fe = a.jl;
                    c.bubbles = b.bubbles;
                    b.target.Z && (c.Ug = b.target.Z);
                    a.simulatedMouseUp(b, null, new z, c.Ug) || (a.doMouseUp(), Ph(a), Ul(c, b))
                }
            }
        };
        a.Ng = function (b) {
            if (a.isEnabled) {
                var c = a.Tc;
                a.Tc = a.Pb;
                a.Pb = c;
                Ql(a, a, b, c, !0);
                c.bubbles = !0;
                c.Ml = void 0 !== b.wheelDelta ? b.wheelDelta : -40 * b.detail;
                a.doMouseWheel();
                Ul(c, b)
            }
        };
        a.On = function () {
            if (a.isEnabled) {
                a.Cm = !1;
                var b = a.Za;
                b.cancelWaitAfter();
                b instanceof bh && b.hideToolTip()
            }
        };
        a.qB = function (b) {
            if (a.isEnabled) {
                a.ht = !1;
                a.gl = !0;
                var c =
                    a.Tc;
                a.Tc = a.Pb;
                a.Pb = c;
                Sl(a, b, b.targetTouches[0], c, 1 < b.touches.length);
                a.doMouseDown();
                Ul(c, b)
            }
        };
        a.pB = function (b) {
            if (a.isEnabled) {
                var c = a.Tc;
                a.Tc = a.Pb;
                a.Pb = c;
                var d = null;
                0 < b.changedTouches.length ? d = b.changedTouches[0] : 0 < b.targetTouches.length && (d = b.targetTouches[0]);
                Tl(a, b, d, c, 1 < b.touches.length);
                a.simulatedMouseMove(d ? d : b, null, c.Ug) || a.doMouseMove();
                Ul(c, b)
            }
        };
        a.oB = function (b) {
            if (a.isEnabled)if (a.ht)b.preventDefault(); else {
                var c = a.Tc;
                a.Tc = a.Pb;
                a.Pb = c;
                if (!(1 < b.touches.length)) {
                    var d = null, e = null;
                    0 < b.changedTouches.length ?
                        e = b.changedTouches[0] : 0 < b.targetTouches.length && (e = b.targetTouches[0]);
                    c.g = a;
                    c.Fe = 1;
                    if (null !== e) {
                        d = window.document.elementFromPoint(e.clientX, e.clientY);
                        null !== d && d.Z instanceof D && d.Z !== a && Rl(d.Z, e, c);
                        Rl(a, b.changedTouches[0], c);
                        var m = e.screenX, n = e.screenY, p = a.UC;
                        b.timeStamp - a.Gm < a.QD && !(25 < Math.abs(p.x - m) || 25 < Math.abs(p.y - n)) ? a.jl++ : a.jl = 1;
                        c.Fe = a.jl;
                        a.Gm = b.timeStamp;
                        a.UC.l(m, n)
                    }
                    c.ud = 0;
                    c.button = 0;
                    c.buttons = 1;
                    c.Nl = !1;
                    c.up = !0;
                    c.Ml = 0;
                    c.Ac = !1;
                    c.bubbles = !1;
                    c.event = b;
                    c.timestamp = Date.now();
                    c.Ug = null ===
                    d ? b.target.Z : d.Z ? d.Z : null;
                    c.Pe = null;
                    a.simulatedMouseUp(e ? e : b, null, new z, c.Ug) || a.doMouseUp();
                    Ul(c, b);
                    a.gl = !1
                }
            }
        };
        a.EF = function (b) {
            if ("touch" === b.pointerType) {
                var c = a.pD;
                void 0 === c[b.pointerId] && (a.kw++, c[b.pointerId] = b);
                a.Zi[0] = null;
                a.Zi[1] = null;
                for (var d in c)if (null === a.Zi[0])a.Zi[0] = c[d]; else if (null === a.Zi[1]) {
                    a.Zi[1] = c[d];
                    break
                }
                a.isEnabled && (a.ht = !1, a.gl = !0, c = a.Tc, a.Tc = a.Pb, a.Pb = c, Sl(a, b, b, c, 1 < a.kw), a.doMouseDown(), Ul(c, b))
            }
        };
        a.GF = function (b) {
            if ("touch" === b.pointerType && !(2 > a.kw)) {
                var c = a.Zi;
                c[0].pointerId === b.pointerId && (c[0] = b);
                c[1].pointerId === b.pointerId && (c[1] = b);
                a.isEnabled && (c = a.Tc, a.Tc = a.Pb, a.Pb = c, Tl(a, b, b, c, !0), a.simulatedMouseMove(b, null, c.Ug) || (a.doMouseMove(), Ul(c, b)))
            }
        };
        a.FF = function (b) {
            if ("touch" === b.pointerType) {
                var c = a.pD;
                void 0 !== c[b.pointerId] && (a.kw--, delete c[b.pointerId], c = a.Zi, null !== c[0] && c[0].pointerId === b.pointerId && (c[0] = null), null !== c[1] && c[1].pointerId === b.pointerId && (c[1] = null))
            }
        };
        d.Ee(!0);
        Cl(a)
    }

    function Kn(a) {
        1 < arguments.length && w.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");
        D.call(this, a);
        this.zt = !0;
        this.Dl = !1;
        this.cb = !0;
        this.qE = wb;
        this.Rb = new Ln
    }

    w.La(Kn, D);
    w.fa("Palette", Kn);
    function vl(a) {
        1 < arguments.length && w.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");
        D.call(this, a);
        this.Pa.isEnabled = !1;
        this.Rc = !0;
        this.fk = null;
        this.vv = !0;
        this.xJ("drawShadows", !1);
        var b = new S, c = new X;
        c.stroke = "magenta";
        c.kb = 2;
        c.fill = "transparent";
        c.name = "BOXSHAPE";
        b.dm = !0;
        b.ZA = "BOXSHAPE";
        b.AA = "BOXSHAPE";
        b.TF = "BOXSHAPE";
        b.cursor = "move";
        b.add(c);
        this.rm = b;
        c = new dh;
        c.type = Gj;
        c.zf = Fb;
        var d = new Hj;
        d.Uf = !0;
        c.add(d);
        d = new X;
        d.oh = Fb;
        d.Cb = "Rectangle";
        d.Aa = new ha(64,
            64);
        d.cursor = "se-resize";
        d.alignment = Kb;
        c.add(d);
        b.RF = c;
        this.gn = this.sk = !1;
        this.tf = this.Bt = !0;
        this.kE = new eb(0, 0, 0, 0);
        this.Bz = new Tc(null);
        this.QG = this.Bz.wk;
        this.ab.re = new Mn;
        this.ab.UF = new Nn;
        var e = this;
        this.click = function () {
            var a = e.fk;
            if (null !== a) {
                var b = a.sb, c = e.R.ca;
                a.position = new z(c.x - b.width / 2, c.y - b.height / 2)
            }
        };
        this.BF = function () {
            On(e)
        };
        this.AF = function () {
            null !== e.fk && (e.qc(), e.na())
        };
        this.Fl = Ol;
        this.Rc = !1
    }

    w.La(vl, D);
    w.fa("Overview", vl);
    function Pn(a) {
        a.Rc || a.Xd || !1 !== a.Mf || (a.Mf = !0, requestAnimationFrame(function () {
            if (a.Mf && !a.Xd && (a.Mf = !1, null !== a.Mb)) {
                a.Xd = !0;
                Ai(a);
                a.qe.H() || Nl(a, a.sh());
                null === a.Mb && w.k("No div specified");
                null === a.Eb && w.k("No canvas specified");
                if (a.Be) {
                    var b = a.fk;
                    if (null !== b && !b.Pa.kf && !b.Pa.oc) {
                        var b = a.qf, c = a.Bz;
                        b.setTransform(1, 0, 0, 1, 0, 0);
                        b.clearRect(0, 0, a.Eb.width, a.Eb.height);
                        b.drawImage(c.Gd, 0, 0);
                        c = a.cd;
                        c.reset();
                        1 !== a.scale && c.scale(a.scale);
                        0 === a.position.x && 0 === a.position.y || c.translate(-a.position.x,
                            -a.position.y);
                        b.scale(a.zd, a.zd);
                        b.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
                        for (var c = a.$b.n, d = c.length, e = 0; e < d; e++)c[e].se(b, a);
                        a.fl = !1;
                        a.Be = !1
                    }
                }
                a.Xd = !1
            }
        }))
    }

    vl.prototype.computePixelRatio = function () {
        return 1
    };
    vl.prototype.se = function () {
        null === this.Mb && w.k("No div specified");
        null === this.Eb && w.k("No canvas specified");
        if (this.Be) {
            var a = this.fk;
            if (null !== a && !a.Pa.kf) {
                Bm(this);
                var b = a.Bn;
                (null !== b && b.visible && isNaN(b.width) || isNaN(b.height)) && Yl(a);
                var c = this.Eb, b = this.qf, d = this.Bz, e = this.QG;
                d.width = c.width;
                d.height = c.height;
                b.Ee(!0);
                b.setTransform(1, 0, 0, 1, 0, 0);
                b.clearRect(0, 0, c.width, c.height);
                d = this.cd;
                d.reset();
                1 !== this.scale && d.scale(this.scale);
                0 === this.position.x && 0 === this.position.y || d.translate(-this.position.x,
                    -this.position.y);
                b.scale(this.zd, this.zd);
                b.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
                for (var d = this.vv, f = this.sb, h = a.$b.n, k = h.length, a = 0; a < k; a++) {
                    var l = h[a], m = b, n = f, p = d;
                    if (l.visible && 0 !== l.vc && (void 0 === p && (p = !0), p || !l.Jc)) {
                        1 !== l.vc && (m.globalAlpha = l.vc);
                        for (var p = this.scale, l = l.zb.n, q = l.length, r = 0; r < q; r++) {
                            var s = l[r], u = s.Y;
                            u.Kg(n) && (1 < u.width * p || 1 < u.height * p ? s.se(m, this) : hl(s, m))
                        }
                        m.globalAlpha = 1
                    }
                }
                e.drawImage(c.Gd, 0, 0);
                c = this.$b.n;
                e = c.length;
                for (a = 0; a < e; a++)c[a].se(b, this);
                this.Be = this.fl = !1
            }
        }
    };
    w.defineProperty(vl, {NA: "observed"}, function () {
        return this.fk
    }, function (a) {
        var b = this.fk;
        null !== a && w.G(a, D, vl, "observed");
        a instanceof vl && w.k("Overview.observed Diagram may not be an Overview itself: " + a);
        b !== a && (null !== b && (this.remove(this.rh), b.MF("ViewportBoundsChanged", this.BF), b.MF("DocumentBoundsChanged", this.AF), b.hw.remove(this)), this.fk = a, null !== a && (a.Lz("ViewportBoundsChanged", this.BF), a.Lz("DocumentBoundsChanged", this.AF), a.hw.add(this), this.add(this.rh), On(this)), this.qc(), this.h("observed",
            b, a))
    });
    w.defineProperty(vl, {rh: "box"}, function () {
        return this.rm
    }, function (a) {
        var b = this.rm;
        b !== a && (this.rm = a, this.remove(b), this.add(this.rm), On(this), this.h("box", b, a))
    });
    w.defineProperty(vl, {NK: "drawsTemporaryLayers"}, function () {
        return this.vv
    }, function (a) {
        this.vv !== a && (this.vv = a, this.Sx())
    });
    function On(a) {
        var b = a.rh;
        if (null !== b) {
            var c = a.fk;
            if (null !== c) {
                a.Be = !0;
                var c = c.sb, d = b.Eu, e = w.im();
                e.l(c.width, c.height);
                d.Aa = e;
                w.zk(e);
                a = 2 / a.scale;
                d instanceof X && (d.kb = a);
                b.location = new z(c.x - a / 2, c.y - a / 2)
            }
        }
    }

    vl.prototype.sh = function () {
        var a = this.fk;
        return null === a ? cd : a.qe
    };
    vl.prototype.bF = function () {
        !0 !== this.Be && (this.Be = !0, Pn(this))
    };
    vl.prototype.uu = function (a, b, c, d, e) {
        this.Rc || (Il(this), this.na(), Vl(this), this.qc(), On(this), this.nh.scale = c, this.nh.position.x = a.x, this.nh.position.y = a.y, this.nh.bounds.set(a), this.nh.isScroll = e, this.Ba("ViewportBoundsChanged", this.nh, a))
    };
    function Mn() {
        hh.call(this);
        this.pl = null
    }

    w.La(Mn, hh);
    Mn.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || !a.Dl || !a.tf)return !1;
        var b = a.NA;
        if (null === b)return !1;
        if (null === this.findDraggablePart()) {
            var c = b.sb;
            this.pl = new z(c.width / 2, c.height / 2);
            a = a.zc.ca;
            b.position = new z(a.x - this.pl.x, a.y - this.pl.y)
        }
        return !0
    };
    Mn.prototype.doActivate = function () {
        this.pl = null;
        hh.prototype.doActivate.call(this)
    };
    Mn.prototype.moveParts = function () {
        var a = this.g, b = a.NA;
        if (null !== b) {
            var c = a.rh;
            if (null !== c) {
                if (null === this.pl) {
                    var d = a.zc.ca, c = c.location;
                    this.pl = new z(d.x - c.x, d.y - c.y)
                }
                a = a.R.ca;
                b.position = new z(a.x - this.pl.x, a.y - this.pl.y)
            }
        }
    };
    function Nn() {
        uj.call(this)
    }

    w.La(Nn, uj);
    Nn.prototype.resize = function (a) {
        var b = this.g.NA;
        if (null !== b) {
            var c = b.sb.copy();
            b.position = a.position;
            (c.width !== a.width || c.height !== a.height) && 0 < a.width && 0 < a.height && (b.scale = Math.min(c.width / a.width, c.height / a.height))
        }
    };
    function Qn() {
        this.bg = this.Vc = this.vd = this.Bc = 0
    }

    function ga(a) {
        1 < arguments.length && w.k("Brush constructor can take at most one optional argument, the Brush type.");
        w.lc(this);
        this.Q = !1;
        void 0 === a ? (this.ma = kg, this.po = "black") : "string" === typeof a ? (this.ma = kg, this.po = a) : (this.ma = a, this.po = "black");
        var b = this.ma;
        b === lg ? (this.qp = wb, this.Eo = Jb) : this.Eo = b === $c ? this.qp = Fb : this.qp = sb;
        this.yw = 0;
        this.wv = NaN;
        this.bh = this.jw = this.ah = null;
        this.Gy = this.qo = 0
    }

    w.fa("Brush", ga);
    var kg;
    ga.Solid = kg = w.p(ga, "Solid", 0);
    var lg;
    ga.Linear = lg = w.p(ga, "Linear", 1);
    var $c;
    ga.Radial = $c = w.p(ga, "Radial", 2);
    var Rn;
    ga.Pattern = Rn = w.p(ga, "Pattern", 4);
    var Sn;
    ga.Lab = Sn = w.p(ga, "Lab", 5);
    var Tn;
    ga.HSL = Tn = w.p(ga, "HSL", 6);
    ga.prototype.copy = function () {
        var a = new ga;
        a.ma = this.ma;
        a.po = this.po;
        a.qp = this.qp.S();
        a.Eo = this.Eo.S();
        a.yw = this.yw;
        a.wv = this.wv;
        null !== this.ah && (a.ah = this.ah.copy());
        a.jw = this.jw;
        return a
    };
    g = ga.prototype;
    g.Ga = function () {
        this.freeze();
        Object.freeze(this);
        return this
    };
    g.freeze = function () {
        this.Q = !0;
        null !== this.ah && this.ah.freeze();
        return this
    };
    g.Ra = function () {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        this.Q = !1;
        null !== this.ah && this.ah.Ra();
        return this
    };
    g.fc = function (a) {
        a.De === ga ? this.type = a : w.Ej(this, a)
    };
    g.toString = function () {
        var a = "Brush(";
        if (this.type === kg)a += this.color; else if (a = this.type === lg ? a + "Linear " : this.type === $c ? a + "Radial " : this.type === Rn ? a + "Pattern " : a + "(unknown) ", a += this.start + " " + this.end, null !== this.tk)for (var b = this.tk.i; b.next();)a += " " + b.key + ":" + b.value;
        return a + ")"
    };
    ga.prototype.addColorStop = ga.prototype.addColorStop = function (a, b) {
        this.Q && w.la(this);
        ("number" !== typeof a || !isFinite(a) || 1 < a || 0 > a) && w.Ea(a, "0 <= loc <= 1", ga, "addColorStop:loc");
        w.j(b, "string", ga, "addColorStop:color");
        null === this.ah && (this.ah = new ka("number", "string"));
        this.ah.add(a, b);
        this.ma === kg && (this.type = lg);
        this.bh = null
    };
    w.defineProperty(ga, {type: "type"}, function () {
        return this.ma
    }, function (a) {
        this.Q && w.la(this, a);
        w.mb(a, ga, ga, "type");
        this.ma = a;
        this.start.Nd() && (a === lg ? this.start = wb : a === $c && (this.start = Fb));
        this.end.Nd() && (a === lg ? this.end = Jb : a === $c && (this.end = Fb));
        this.bh = null
    });
    w.defineProperty(ga, {color: "color"}, function () {
        return this.po
    }, function (a) {
        this.Q && w.la(this, a);
        this.po = a;
        this.bh = null
    });
    w.defineProperty(ga, {start: "start"}, function () {
        return this.qp
    }, function (a) {
        this.Q && w.la(this, a);
        w.G(a, L, ga, "start");
        this.qp = a.S();
        this.bh = null
    });
    w.defineProperty(ga, {end: "end"}, function () {
        return this.Eo
    }, function (a) {
        this.Q && w.la(this, a);
        w.G(a, L, ga, "end");
        this.Eo = a.S();
        this.bh = null
    });
    w.defineProperty(ga, {Ku: "startRadius"}, function () {
        return this.yw
    }, function (a) {
        this.Q && w.la(this, a);
        w.Ed(a, ga, "startRadius");
        0 > a && w.Ea(a, ">= zero", ga, "startRadius");
        this.yw = a;
        this.bh = null
    });
    w.defineProperty(ga, {It: "endRadius"}, function () {
        return this.wv
    }, function (a) {
        this.Q && w.la(this, a);
        w.Ed(a, ga, "endRadius");
        0 > a && w.Ea(a, ">= zero", ga, "endRadius");
        this.wv = a;
        this.bh = null
    });
    w.defineProperty(ga, {tk: "colorStops"}, function () {
        return this.ah
    }, function (a) {
        this.Q && w.la(this, a);
        this.ah = a;
        this.bh = null
    });
    w.defineProperty(ga, {pattern: "pattern"}, function () {
        return this.jw
    }, function (a) {
        this.Q && w.la(this, a);
        this.jw = a;
        this.bh = null
    });
    ga.randomColor = function (a, b) {
        void 0 === a && (a = 128);
        void 0 === b && (b = Math.max(a, 255));
        var c = Math.abs(b - a), d = Math.floor(a + Math.random() * c).toString(16), e = Math.floor(a + Math.random() * c).toString(16), c = Math.floor(a + Math.random() * c).toString(16);
        2 > d.length && (d = "0" + d);
        2 > e.length && (e = "0" + e);
        2 > c.length && (c = "0" + c);
        return "#" + d + e + c
    };
    var Un = (new Tc(null)).wk, fa;
    ga.isValidColor = fa = function (a) {
        if ("black" === a)return !0;
        if ("" === a)return !1;
        Un.fillStyle = "#000000";
        var b = Un.fillStyle;
        Un.fillStyle = a;
        if (Un.fillStyle !== b)return !0;
        Un.fillStyle = "#FFFFFF";
        b = Un.fillStyle;
        Un.fillStyle = a;
        return Un.fillStyle !== b
    };
    var Vn = new Qn, Wn = new Qn, Xn = new Qn, Yn = new Qn;
    ga.lighten = function (a) {
        return Zn(a)
    };
    ga.prototype.lightenBy = function (a, b) {
        this.Q && w.la(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a, d = void 0 === b ? Sn : b;
        if (this.type === kg)$n(this.color), this.color = ao(c, d); else if ((this.type === lg || this.type === $c) && null !== this.tk)for (var e = this.tk.i; e.next();)$n(e.value), this.addColorStop(e.key, ao(c, d));
        return this
    };
    var Zn;
    ga.lightenBy = Zn = function (a, b, c) {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? Sn : c;
        $n(a);
        return ao(b, c)
    };
    ga.darken = function (a) {
        return bo(a)
    };
    ga.prototype.darkenBy = function (a, b) {
        this.Q && w.la(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a, d = void 0 === b ? Sn : b;
        if (this.type === kg)$n(this.color), this.color = ao(-c, d); else if ((this.type === lg || this.type === $c) && null !== this.tk)for (var e = this.tk.i; e.next();)$n(e.value), this.addColorStop(e.key, ao(-c, d));
        return this
    };
    var bo;
    ga.darkenBy = bo = function (a, b, c) {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? Sn : c;
        $n(a);
        return ao(-b, c)
    };
    function ao(a, b) {
        switch (b) {
            case Sn:
                var c = 100 * co(Vn.Bc), d = 100 * co(Vn.vd), e = 100 * co(Vn.Vc);
                Xn.Bc = .4124564 * c + .3575761 * d + .1804375 * e;
                Xn.vd = .2126729 * c + .7151522 * d + .072175 * e;
                Xn.Vc = .0193339 * c + .119192 * d + .9503041 * e;
                Xn.bg = Vn.bg;
                c = eo(Xn.Bc / fo[0]);
                d = eo(Xn.vd / fo[1]);
                e = eo(Xn.Vc / fo[2]);
                Yn.Bc = 116 * d - 16;
                Yn.vd = 500 * (c - d);
                Yn.Vc = 200 * (d - e);
                Yn.bg = Xn.bg;
                Yn.Bc = Math.min(100, Math.max(0, Yn.Bc + 100 * a));
                c = (Yn.Bc + 16) / 116;
                d = c - Yn.Vc / 200;
                Xn.Bc = fo[0] * ho(Yn.vd / 500 + c);
                Xn.vd = fo[1] * (Yn.Bc > io * jo ? Math.pow(c, 3) : Yn.Bc / io);
                Xn.Vc = fo[2] * ho(d);
                Xn.bg =
                    Yn.bg;
                c = -.969266 * Xn.Bc + 1.8760108 * Xn.vd + .041556 * Xn.Vc;
                d = .0556434 * Xn.Bc + -.2040259 * Xn.vd + 1.0572252 * Xn.Vc;
                Vn.Bc = 255 * ko((3.2404542 * Xn.Bc + -1.5371385 * Xn.vd + -.4985314 * Xn.Vc) / 100);
                Vn.vd = 255 * ko(c / 100);
                Vn.Vc = 255 * ko(d / 100);
                Vn.bg = Xn.bg;
                Vn.Bc = Math.round(Vn.Bc);
                255 < Vn.Bc ? Vn.Bc = 255 : 0 > Vn.Bc && (Vn.Bc = 0);
                Vn.vd = Math.round(Vn.vd);
                255 < Vn.vd ? Vn.vd = 255 : 0 > Vn.vd && (Vn.vd = 0);
                Vn.Vc = Math.round(Vn.Vc);
                255 < Vn.Vc ? Vn.Vc = 255 : 0 > Vn.Vc && (Vn.Vc = 0);
                return "rgba(" + Vn.Bc + ", " + Vn.vd + ", " + Vn.Vc + ", " + Vn.bg + ")";
            case Tn:
                var e = Vn.Bc / 255, f = Vn.vd /
                    255, h = Vn.Vc / 255, k = Math.max(e, f, h), d = Math.min(e, f, h), l = k - d, d = (k + d) / 2;
                if (0 === l)c = e = 0; else {
                    switch (k) {
                        case e:
                            c = (f - h) / l % 6;
                            break;
                        case f:
                            c = (h - e) / l + 2;
                            break;
                        case h:
                            c = (e - f) / l + 4
                    }
                    c *= 60;
                    0 > c && (c += 360);
                    e = l / (1 - Math.abs(2 * d - 1))
                }
                Wn.Bc = Math.round(c);
                Wn.vd = Math.round(100 * e);
                Wn.Vc = Math.round(100 * d);
                Wn.bg = Vn.bg;
                Wn.Vc = Math.min(100, Math.max(0, Wn.Vc + 100 * a));
                return "hsla(" + Wn.Bc + ", " + Wn.vd + "%, " + Wn.Vc + "%, " + Wn.bg + ")";
            default:
                return w.k("Unknown color space: " + b), "rgba(0, 0, 0, 1)"
        }
    }

    function $n(a) {
        Un.clearRect(0, 0, 1, 1);
        Un.fillStyle = "#000000";
        var b = Un.fillStyle;
        Un.fillStyle = a;
        Un.fillStyle !== b ? (Un.fillRect(0, 0, 1, 1), a = Un.getImageData(0, 0, 1, 1).data, Vn.Bc = a[0], Vn.vd = a[1], Vn.Vc = a[2], Vn.bg = a[3] / 255) : (Un.fillStyle = "#FFFFFF", Un.fillStyle = a, Vn.Bc = 0, Vn.vd = 0, Vn.Vc = 0, Vn.bg = 1)
    }

    function co(a) {
        a /= 255;
        return .04045 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4)
    }

    function ko(a) {
        return .0031308 >= a ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - .055
    }

    var jo = 216 / 24389, io = 24389 / 27, fo = [95.047, 100, 108.883];

    function eo(a) {
        return a > jo ? Math.pow(a, 1 / 3) : (io * a + 16) / 116
    }

    function ho(a) {
        var b = a * a * a;
        return b > jo ? b : (116 * a - 16) / io
    }

    function G() {
        w.lc(this);
        this.P = 4225027;
        this.vc = 1;
        this.lh = null;
        this.Qb = "";
        this.Zb = this.Db = null;
        this.hb = (new z(NaN, NaN)).freeze();
        this.Re = Dd;
        this.Vh = nd;
        this.Uh = Bd;
        this.cd = new ia;
        this.om = new ia;
        this.Qi = new ia;
        this.tb = this.Bo = 1;
        this.gg = 0;
        this.Ag = lo;
        this.Lm = dd;
        this.od = (new A(NaN, NaN, NaN, NaN)).freeze();
        this.mc = (new A(NaN, NaN, NaN, NaN)).freeze();
        this.Sc = (new A(0, 0, NaN, NaN)).freeze();
        this.V = this.As = this.Bs = null;
        this.nm = this.ge = oc;
        this.Ns = 0;
        this.aj = 1;
        this.Uq = 0;
        this.xi = 1;
        this.ct = null;
        this.Rs = -Infinity;
        this.Wm =
            0;
        this.Xm = bd;
        this.Ym = dj;
        this.cr = "";
        this.sc = this.ha = null;
        this.no = -1;
        this.bn = this.jg = this.Yk = this.pp = null;
        this.rz = gj;
        this.Sm = null
    }

    w.ji(G);
    w.fa("GraphObject", G);
    G.prototype.cloneProtected = function (a) {
        a.P = this.P | 6144;
        a.vc = this.vc;
        a.Qb = this.Qb;
        a.Db = this.Db;
        a.Zb = this.Zb;
        a.hb.assign(this.hb);
        a.Re = this.Re.S();
        a.Vh = this.Vh.S();
        a.Uh = this.Uh.S();
        a.Qi = this.Qi.copy();
        a.tb = this.tb;
        a.gg = this.gg;
        a.Ag = this.Ag;
        a.Lm = this.Lm.S();
        a.od.assign(this.od);
        a.mc.assign(this.mc);
        a.Sc.assign(this.Sc);
        a.As = this.As;
        null !== this.V && (a.V = this.V.copy());
        a.ge = this.ge.S();
        a.nm = this.nm.S();
        a.Ns = this.Ns;
        a.aj = this.aj;
        a.Uq = this.Uq;
        a.xi = this.xi;
        a.ct = this.ct;
        a.Rs = this.Rs;
        a.Wm = this.Wm;
        a.Xm = this.Xm.S();
        a.Ym = this.Ym;
        a.cr = this.cr;
        null !== this.ha && (a.ha = this.ha.copy());
        a.sc = this.sc;
        a.no = this.no;
        null !== this.Yk && (a.Yk = w.Hl(this.Yk));
        null !== this.jg && (a.jg = this.jg.copy());
        a.bn = this.bn
    };
    G.prototype.addCopyProperty = G.prototype.YG = function (a) {
        var b = this.Yk;
        if (w.isArray(b))for (var c = 0; c < b.length; c++) {
            if (b[c] === a)return
        } else this.Yk = b = [];
        b.push(a)
    };
    G.prototype.ki = function (a) {
        a.Bs = null;
        a.Sm = null;
        a.I()
    };
    G.prototype.clone = function () {
        var a = new this.constructor;
        this.cloneProtected(a);
        if (null !== this.Yk)for (var b = 0; b < this.Yk.length; b++) {
            var c = this.Yk[b];
            a[c] = this[c]
        }
        return a
    };
    G.prototype.copy = function () {
        return this.clone()
    };
    G.prototype.fc = function (a) {
        a.De === W ? 0 === a.name.indexOf("Orient") ? this.rq = a : w.k("Unknown Link enum value for GraphObject.segmentOrientation property: " + a) : a.De === G ? this.stretch = a : w.Ej(this, a)
    };
    G.prototype.toString = function () {
        return w.hf(Object.getPrototypeOf(this)) + "#" + w.Jd(this)
    };
    var Ij;
    G.None = Ij = w.p(G, "None", 0);
    var lo;
    G.Default = lo = w.p(G, "Default", 0);
    var mo;
    G.Vertical = mo = w.p(G, "Vertical", 4);
    var no;
    G.Horizontal = no = w.p(G, "Horizontal", 5);
    var Ie;
    G.Fill = Ie = w.p(G, "Fill", 3);
    var Kj;
    G.Uniform = Kj = w.p(G, "Uniform", 1);
    var Lj;
    G.UniformToFill = Lj = w.p(G, "UniformToFill", 2);
    var oo;
    G.FlipVertical = oo = w.p(G, "FlipVertical", 1);
    var po;
    G.FlipHorizontal = po = w.p(G, "FlipHorizontal", 2);
    var qo;
    G.FlipBoth = qo = w.p(G, "FlipBoth", 3);
    function ro(a) {
        null === a.ha && (a.ha = new so)
    }

    G.prototype.Kd = function () {
        if (null === this.V) {
            var a = new to;
            a.Rj = sb;
            a.ok = sb;
            a.Pj = 10;
            a.mk = 10;
            a.Oj = uo;
            a.lk = uo;
            a.Qj = 0;
            a.nk = 0;
            this.V = a
        }
    };
    function vo(a, b, c, d, e, f, h) {
        var k = .001, l = f.length;
        a.moveTo(b, c);
        d -= b;
        k = e - c;
        0 === d && (d = .001);
        e = k / d;
        for (var m = Math.sqrt(d * d + k * k), n = 0, p = !0, q = 0 === h ? !1 : !0; .1 <= m;) {
            if (q) {
                k = f[n++ % l];
                for (k -= h; 0 > k;)k += f[n++ % l], p = !p;
                q = !1
            } else k = f[n++ % l];
            k > m && (k = m);
            var r = Math.sqrt(k * k / (1 + e * e));
            0 > d && (r = -r);
            b += r;
            c += e * r;
            p ? a.lineTo(b, c) : a.moveTo(b, c);
            m -= k;
            p = !p
        }
    }

    G.prototype.raiseChangedEvent = G.prototype.Wc = function (a, b, c, d, e, f, h) {
        var k = this.U;
        if (null !== k && (k.Tn(a, b, c, d, e, f, h), wo(this) && c === this && a === Mf && xo(this, k, b), c === k && 0 !== (k.P & 16777216) && null !== k.data))for (a = this.wa.n, c = a.length, d = 0; d < c; d++)e = a[d], e instanceof C && Im(e, function (a) {
            null !== a.data && 0 !== (a.P & 16777216) && a.Hb(b)
        })
    };
    function xo(a, b, c) {
        var d = a.Pl();
        if (null !== d)for (var e = a.sc.i; e.next();) {
            var f = e.value, h = null;
            if (null !== f.yq) {
                h = Yg(f, d, a);
                if (null === h)continue;
                f.ky(a, h, c, null)
            } else if (f.zx) {
                var k = b.g;
                null === k || k.Ne || f.ky(a, k.ba.Fk, c, d)
            } else {
                var l = d.data;
                if (null === l)continue;
                k = b.g;
                null === k || k.Ne || f.ky(a, l, c, d)
            }
            h === a && (k = d.hx(f.hm), null !== k && f.vG(k, h, c))
        }
    }

    G.prototype.hx = function (a) {
        return this.no === a ? this : null
    };
    G.prototype.raiseChanged = G.prototype.h = function (a, b, c) {
        this.Wc(Mf, a, this, b, c)
    };
    function yo(a, b, c, d, e) {
        var f = a.od, h = a.Qi;
        h.reset();
        zo(a, h, b, c, d, e);
        a.Qi = h;
        f.x = b;
        f.y = c;
        f.width = d;
        f.height = e;
        h.cu() || h.sG(f)
    }

    function Ao(a, b, c, d) {
        if (!1 === a.Sg)return !1;
        d.multiply(a.transform);
        return c ? a.Kg(b, d) : a.on(b, d)
    }

    G.prototype.JE = function (a, b, c) {
        if (!1 === this.Sg)return !1;
        var d = this.Ia;
        b = a.uf(b);
        var e = !1;
        c && (e = Ma(a.x, a.y, 0, 0, 0, d.height) < b || Ma(a.x, a.y, 0, d.height, d.width, d.height) < b || Ma(a.x, a.y, d.width, d.height, d.width, 0) < b || Ma(a.x, a.y, d.width, 0, 0, 0) < b);
        c || (e = Ma(a.x, a.y, 0, 0, 0, d.height) < b && Ma(a.x, a.y, 0, d.height, d.width, d.height) < b && Ma(a.x, a.y, d.width, d.height, d.width, 0) < b && Ma(a.x, a.y, d.width, 0, 0, 0) < b);
        return e
    };
    G.prototype.Yg = function () {
        return !0
    };
    G.prototype.containsPoint = G.prototype.Ha = function (a) {
        var b = w.K();
        b.assign(a);
        this.transform.nb(b);
        var c = this.Y;
        if (!c.H())return w.v(b), !1;
        var d = this.g;
        if (null !== d && d.gl) {
            var e = d.Ut("extraTouchThreshold"), f = d.Ut("extraTouchArea"), h = f / 2, k = this.Ia, d = this.nj() * d.scale, l = 1 / d;
            if (k.width * d < e && k.height * d < e)return a = db(c.x - h * l, c.y - h * l, c.width + f * l, c.height + f * l, b.x, b.y), w.v(b), a
        }
        if (this instanceof dh || this instanceof X ? db(c.x - 5, c.y - 5, c.width + 10, c.height + 10, b.x, b.y) : c.Ha(b))return e = !1, e = this.jg && !this.jg.Ha(b) ?
            !1 : null !== this.Zb && c.Ha(b) ? !0 : null !== this.Db && this.Sc.Ha(a) ? !0 : this.uk(a), w.v(b), e;
        w.v(b);
        return !1
    };
    G.prototype.uk = function (a) {
        var b = this.Ia;
        return db(0, 0, b.width, b.height, a.x, a.y)
    };
    G.prototype.containsRect = G.prototype.vk = function (a) {
        if (0 === this.angle)return this.Y.vk(a);
        var b = this.Ia, b = w.Vg(0, 0, b.width, b.height), c = this.transform, d = !1, e = w.xb(a.x, a.y);
        b.Ha(c.li(e)) && (e.l(a.x, a.bottom), b.Ha(c.li(e)) && (e.l(a.right, a.bottom), b.Ha(c.li(e)) && (e.l(a.right, a.y), b.Ha(c.li(e)) && (d = !0))));
        w.v(e);
        w.Gb(b);
        return d
    };
    G.prototype.containedInRect = G.prototype.on = function (a, b) {
        if (void 0 === b)return a.vk(this.Y);
        var c = this.Ia, d = !1, e = w.xb(0, 0);
        a.Ha(b.nb(e)) && (e.l(0, c.height), a.Ha(b.nb(e)) && (e.l(c.width, c.height), a.Ha(b.nb(e)) && (e.l(c.width, 0), a.Ha(b.nb(e)) && (d = !0))));
        w.v(e);
        return d
    };
    G.prototype.intersectsRect = G.prototype.Kg = function (a, b) {
        if (void 0 === b && (b = this.transform, 0 === this.angle))return a.Kg(this.Y);
        var c = this.Ia, d = b, e = w.xb(0, 0), f = w.xb(0, c.height), h = w.xb(c.width, c.height), k = w.xb(c.width, 0), l = !1;
        if (a.Ha(d.nb(e)) || a.Ha(d.nb(f)) || a.Ha(d.nb(h)) || a.Ha(d.nb(k)))l = !0; else {
            var c = w.Vg(0, 0, c.width, c.height), m = w.xb(a.x, a.y);
            c.Ha(d.li(m)) ? l = !0 : (m.l(a.x, a.bottom), c.Ha(d.li(m)) ? l = !0 : (m.l(a.right, a.bottom), c.Ha(d.li(m)) ? l = !0 : (m.l(a.right, a.y), c.Ha(d.li(m)) && (l = !0))));
            w.v(m);
            w.Gb(c);
            !l &&
            (qe(a, e, f) || qe(a, f, h) || qe(a, h, k) || qe(a, k, e)) && (l = !0)
        }
        w.v(e);
        w.v(f);
        w.v(h);
        w.v(k);
        return l
    };
    G.prototype.getDocumentPoint = G.prototype.Wa = function (a, b) {
        void 0 === b && (b = new z);
        if (a instanceof L) {
            a.Nd() && w.k("getDocumentPoint:s Spot must be specific: " + a.toString());
            var c = this.Ia;
            b.l(a.x * c.width + a.offsetX, a.y * c.height + a.offsetY)
        } else b.set(a);
        this.ph.nb(b);
        return b
    };
    G.prototype.getDocumentAngle = G.prototype.xn = function () {
        var a;
        a = this.ph;
        1 === a.m11 && 0 === a.m12 ? a = 0 : (a = 180 * Math.atan2(a.m12, a.m11) / Math.PI, 0 > a && (a += 360));
        return a
    };
    G.prototype.getDocumentScale = G.prototype.nj = function () {
        if (0 !== (this.P & 4096) === !1)return this.Bo;
        var a = this.tb;
        return null !== this.O ? a * this.O.nj() : a
    };
    G.prototype.getLocalPoint = G.prototype.OE = function (a, b) {
        void 0 === b && (b = new z);
        b.assign(a);
        this.ph.li(b);
        return b
    };
    G.prototype.getNearestIntersectionPoint = G.prototype.PE = function (a, b, c) {
        return this.zn(a.x, a.y, b.x, b.y, c)
    };
    g = G.prototype;
    g.zn = function (a, b, c, d, e) {
        var f = this.transform, h = 1 / (f.m11 * f.m22 - f.m12 * f.m21), k = f.m22 * h, l = -f.m12 * h, m = -f.m21 * h, n = f.m11 * h, p = h * (f.m21 * f.dy - f.m22 * f.dx), q = h * (f.m12 * f.dx - f.m11 * f.dy);
        if (null !== this.jn)return f = this.Y, oe(f.left, f.top, f.right, f.bottom, a, b, c, d, e);
        h = a * k + b * m + p;
        a = a * l + b * n + q;
        b = c * k + d * m + p;
        c = c * l + d * n + q;
        e.l(0, 0);
        d = this.Ia;
        c = oe(0, 0, d.width, d.height, h, a, b, c, e);
        e.transform(f);
        return c
    };
    function rk(a, b, c, d, e) {
        if (!1 !== ym(a)) {
            var f = a.margin, h = f.right + f.left, f = f.top + f.bottom;
            b = Math.max(b - h, 0);
            c = Math.max(c - f, 0);
            e = e || 0;
            d = Math.max((d || 0) - h, 0);
            e = Math.max(e - f, 0);
            var h = a.angle, f = 0, f = a.Aa, k = 0;
            a instanceof X && (k = a.kb);
            90 === h || 270 === h ? (b = isFinite(f.height) ? f.height + k : b, c = isFinite(f.width) ? f.width + k : c) : (b = isFinite(f.width) ? f.width + k : b, c = isFinite(f.height) ? f.height + k : c);
            var f = d || 0, k = e || 0, l = a instanceof C;
            switch (Bo(a, !0)) {
                case Ij:
                    k = f = 0;
                    l && (c = b = Infinity);
                    break;
                case Ie:
                    isFinite(b) && b > d && (f = b);
                    isFinite(c) &&
                    c > e && (k = c);
                    break;
                case no:
                    isFinite(b) && b > d && (f = b);
                    k = 0;
                    l && (c = Infinity);
                    break;
                case mo:
                    isFinite(c) && c > e && (k = c), f = 0, l && (b = Infinity)
            }
            var l = a.Af, m = a.zh;
            f > l.width && m.width < l.width && (f = l.width);
            k > l.height && m.height < l.height && (k = l.height);
            d = Math.max(f / a.scale, m.width);
            e = Math.max(k / a.scale, m.height);
            l.width < d && (d = Math.min(m.width, d));
            l.height < e && (e = Math.min(m.height, e));
            b = Math.min(l.width, b);
            c = Math.min(l.height, c);
            b = Math.max(d, b);
            c = Math.max(e, c);
            if (90 === h || 270 === h)f = b, b = c, c = f, f = d, d = e, e = f;
            a.od.Ra();
            a.Ln(b, c,
                d, e);
            a.od.freeze();
            a.od.H() || w.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.od.toString());
            Xl(a, !1)
        }
    }

    g.Ln = function () {
    };
    g.rj = function () {
        return !1
    };
    g.gc = function (a, b, c, d, e) {
        this.Ii();
        var f = w.Df();
        f.assign(this.mc);
        this.mc.Ra();
        if (!1 === zm(this)) {
            var h = this.mc;
            h.x = a;
            h.y = b;
            h.width = c;
            h.height = d
        } else this.hj(a, b, c, d);
        this.mc.freeze();
        this.jg = void 0 === e ? null : e;
        c = !1;
        void 0 !== e ? c = !0 : null !== this.O && (e = this.O.Sc, d = this.za, null !== this.jn && (d = this.mc), c = b + d.height, d = a + d.width, c = !(0 <= a + .05 && d <= e.width + .05 && 0 <= b + .05 && c <= e.height + .05), this instanceof Ch && (a = this.Sc, this.Wv > a.height || this.Oi.ef > a.width)) && (c = !0);
        this.P = c ? this.P | 256 : this.P & -257;
        this.mc.H() ||
        w.k("Non-real actualBounds has been set. Object " + this + ", actualBounds: " + this.mc.toString());
        this.Lx(f, this.mc);
        Co(this, !1);
        w.Gb(f)
    };
    g.hj = function () {
    };
    function Do(a, b, c, d, e) {
        var f = a.Y;
        f.x = b;
        f.y = c;
        f.width = d;
        f.height = e;
        if (!a.Aa.H()) {
            f = a.od;
            c = a.margin;
            b = c.right + c.left;
            var h = c.top + c.bottom;
            c = f.width + b;
            f = f.height + h;
            d += b;
            e += h;
            b = Bo(a, !0);
            c === d && f === e && (b = Ij);
            switch (b) {
                case Ij:
                    if (c > d || f > e)Xl(a, !0), rk(a, c > d ? d : c, f > e ? e : f);
                    break;
                case Ie:
                    Xl(a, !0);
                    rk(a, d, e, 0, 0);
                    break;
                case no:
                    Xl(a, !0);
                    rk(a, d, f, 0, 0);
                    break;
                case mo:
                    Xl(a, !0), rk(a, c, e, 0, 0)
            }
        }
    }

    g.Lx = function (a, b) {
        var c = this.U;
        null !== c && null !== c.g && (c.Eu !== this && c.SF !== this && c.VF !== this || Eo(c, !0), this.na(), Qa(a, b) || (c.Vl(), this.dw(c)))
    };
    g.dw = function (a) {
        null !== this.Pd && (Eo(a, !0), a instanceof T && Fo(a, this))
    };
    w.defineProperty(G, {vq: "shadowVisible"}, function () {
        return this.bn
    }, function (a) {
        var b = this.bn;
        b !== a && (this.bn = a, this.na(), this.h("shadowVisible", b, a))
    });
    G.prototype.se = function (a, b) {
        if (this.visible) {
            var c = this.mc;
            if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y)) {
                var d = this.opacity, e = 1;
                if (1 !== d) {
                    if (0 === d)return;
                    e = a.globalAlpha;
                    a.globalAlpha = e * d
                }
                if (a instanceof Lc)a:{
                    if (this.visible) {
                        var f = null, h = a.Bx;
                        if (this instanceof C && (this.type === Go || this.type === Ho))Io(this, a, b); else {
                            var k = this.mc;
                            if (0 !== k.width && 0 !== k.height && !isNaN(k.x) && !isNaN(k.y)) {
                                var l = this.transform, m = this.O;
                                0 !== (this.P & 4096) === !0 && Jo(this);
                                var c = 0 !== (this.P & 256), n = !1;
                                this instanceof Ch && (a.font = this.font);
                                if (c) {
                                    n = m.Yg() ? m.Ia : m.Y;
                                    if (null !== this.jg)var p = this.jg, q = p.x, r = p.y, s = p.width, p = p.height; else q = Math.max(k.x, n.x), r = Math.max(k.y, n.y), s = Math.min(k.right, n.right) - q, p = Math.min(k.bottom, n.bottom) - r;
                                    if (q > k.width + k.x || k.x > n.width + n.x || r > k.height + k.y || k.y > n.height + n.y)break a;
                                    n = !0;
                                    Nc(a, 1, 0, 0, 1, 0, 0);
                                    a.save();
                                    a.beginPath();
                                    a.rect(q, r, s, p);
                                    a.clip()
                                }
                                if (this.rj()) {
                                    var u = this;
                                    if (!u.isVisible())break a
                                }
                                a.uh.Sb = [1, 0, 0, 1, 0, 0];
                                q = !1;
                                this.rj() && this.Zl && b.oj("drawShadows") && (r = this.an, a.hB(r.x *
                                    b.scale * b.zd, r.y * b.scale * b.zd, u.zg), a.Xn(), a.shadowColor = u.$m);
                                u = !1;
                                this.U && b.oj("drawShadows") && (u = this.U.Zl);
                                !0 === this.vq ? (a.Xn(), !1 === q && u && (Nc(a, 1, 0, 0, 1, 0, 0), a.$a(), q = !0)) : !1 === this.vq && a.Wn();
                                null !== this.Zb && (Ko(this, a, this.Zb, !0, !0), !1 === q && u && (Nc(a, 1, 0, 0, 1, 0, 0), a.$a(), q = !0), this.Zb instanceof ga && this.Zb.type === $c ? (a.beginPath(), a.rect(k.x, k.y, k.width, k.height), a.Hg(this.Zb)) : a.fillRect(k.x, k.y, k.width, k.height));
                                this instanceof C ? Nc(a, l.m11, l.m12, l.m21, l.m22, l.dx, l.dy) : a.uh.Sb = [l.m11, l.m12,
                                    l.m21, l.m22, l.dx, l.dy];
                                null !== this.Db && (!1 === q && u && (Nc(a, 1, 0, 0, 1, 0, 0), a.$a(), q = !0), s = this.Ia, l = k = 0, r = s.width, s = s.height, p = 0, this instanceof X && (s = this.gb.jb, k = s.x, l = s.y, r = s.width, s = s.height, p = this.fi), Ko(this, a, this.Db, !0, !1), this.Db instanceof ga && this.Db.type === $c ? (a.beginPath(), a.rect(k - p / 2, l - p / 2, r + p, s + p), a.Hg(this.Db)) : a.fillRect(k - p / 2, l - p / 2, r + p, s + p));
                                u && (null !== this.Db || null !== this.Zb || null !== m && 0 !== (m.P & 512) || null !== m && (m.type === Bl || m.type === Gj) && m.Hd() !== this) ? (Lo(this, !0), null === this.vq &&
                                a.Wn()) : Lo(this, !1);
                                this.xk(a, b);
                                u && 0 !== (this.P & 512) === !0 && a.Xn();
                                this.rj() && u && a.Wn();
                                c && (a.restore(), n && a.wf.pop());
                                this instanceof C && (f = a.wf.pop());
                                !0 === q && a.wf.pop();
                                null !== a.BE && (null === f && (h === a.Bx ? (Nc(a, 1, 0, 0, 1, 0, 0), f = a.wf.pop()) : f = a.Bx), a.BE(this, f))
                            }
                        }
                    }
                } else {
                    if (this instanceof C && (this.type === Go || this.type === Ho)) {
                        Io(this, a, b);
                        1 !== d && (a.globalAlpha = e);
                        return
                    }
                    this instanceof W && this.lu(!1);
                    f = this.transform;
                    h = this.O;
                    0 !== (this.P & 4096) === !0 && Jo(this);
                    m = 0 !== (this.P & 256);
                    a.Kp && (m = !1);
                    this instanceof Ch && (a.font = this.font);
                    if (m) {
                        n = h.Yg() ? h.Ia : h.Y;
                        null !== this.jg ? (q = this.jg, k = q.x, l = q.y, u = q.width, q = q.height) : (k = Math.max(c.x, n.x), l = Math.max(c.y, n.y), u = Math.min(c.right, n.right) - k, q = Math.min(c.bottom, n.bottom) - l);
                        if (k > c.width + c.x || c.x > n.width + n.x || l > c.height + c.y || c.y > n.height + n.y) {
                            1 !== d && (a.globalAlpha = e);
                            return
                        }
                        a.save();
                        a.beginPath();
                        a.rect(k, l, u, q);
                        a.clip()
                    }
                    if (this.rj()) {
                        if (!this.isVisible()) {
                            1 !== d && (a.globalAlpha = e);
                            return
                        }
                        this.Zl && b.oj("drawShadows") && (n = this.an, a.hB(n.x * b.scale * b.zd, n.y * b.scale *
                            b.zd, this.zg), a.Xn(), a.shadowColor = this.$m)
                    }
                    n = !1;
                    this.U && b.oj("drawShadows") && (n = this.U.Zl);
                    !0 === this.vq ? a.Xn() : !1 === this.vq && a.Wn();
                    null !== this.Zb && (Ko(this, a, this.Zb, !0, !0), this.Zb instanceof ga && this.Zb.type === $c ? (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.Hg(this.Zb)) : a.fillRect(c.x, c.y, c.width, c.height));
                    f.cu() || a.transform(f.m11, f.m12, f.m21, f.m22, f.dx, f.dy);
                    null !== this.Db && (u = this.Ia, k = c = 0, l = u.width, u = u.height, q = 0, this instanceof X && (u = this.gb.jb, c = u.x, k = u.y, l = u.width, u = u.height, q = this.fi),
                        Ko(this, a, this.Db, !0, !1), this.Db instanceof ga && this.Db.type === $c ? (a.beginPath(), a.rect(c - q / 2, k - q / 2, l + q, u + q), a.Hg(this.Db)) : a.fillRect(c - q / 2, k - q / 2, l + q, u + q));
                    n && (null !== this.Db || null !== this.Zb || null !== h && 0 !== (h.P & 512) || null !== h && (h.type === Bl || h.type === Gj) && h.Hd() !== this) ? (Lo(this, !0), null === this.vq && a.Wn()) : Lo(this, !1);
                    this.xk(a, b);
                    n && 0 !== (this.P & 512) === !0 && a.Xn();
                    this.rj() && n && a.Wn();
                    m ? (a.restore(), this instanceof C ? a.Ee(!0) : a.Ee(!1)) : f.cu() || (h = 1 / (f.m11 * f.m22 - f.m12 * f.m21), a.transform(f.m22 * h, -f.m12 *
                        h, -f.m21 * h, f.m11 * h, h * (f.m21 * f.dy - f.m22 * f.dx), h * (f.m12 * f.dx - f.m11 * f.dy)))
                }
                1 !== d && (a.globalAlpha = e)
            }
        }
    };
    function Io(a, b, c) {
        var d = a.mc;
        0 === d.width || 0 === d.height || isNaN(d.x) || isNaN(d.y) || (null !== a.Zb && (Ko(a, b, a.Zb, !0, !0), a.Zb instanceof ga && a.Zb.type === $c ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Hg(a.Zb)) : b.fillRect(d.x, d.y, d.width, d.height)), null !== a.Db && (Ko(a, b, a.Db, !0, !1), a.Db instanceof ga && a.Db.type === $c ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Hg(a.Db)) : b.fillRect(d.x, d.y, d.width, d.height)), a.xk(b, c))
    }

    G.prototype.xk = function () {
    };
    function Ko(a, b, c, d, e) {
        if (null !== c) {
            var f = 1, h = 1;
            if ("string" === typeof c)d ? b.fillStyle = c : b.strokeStyle = c; else if (c.type === kg)d ? b.fillStyle = c.color : b.strokeStyle = c.color; else {
                var k, h = a.Ia, f = h.width, h = h.height;
                if (e)var l = a.Y, f = l.width, h = l.height;
                var m = b instanceof Uc;
                if (m && c.bh && (c.type === Rn || c.qo === f && c.Gy === h))k = c.bh; else {
                    var n = l = 0, p = 0, q = 0, r = 0, s = 0, s = r = 0;
                    e && (l = a.Y, f = l.width, h = l.height, r = l.x, s = l.y);
                    l = c.start.x * f + c.start.offsetX;
                    n = c.start.y * h + c.start.offsetY;
                    p = c.end.x * f + c.end.offsetX;
                    q = c.end.y * h + c.end.offsetY;
                    l += r;
                    p += r;
                    n += s;
                    q += s;
                    if (c.type === lg)k = b.createLinearGradient(l, n, p, q); else if (c.type === $c)s = isNaN(c.It) ? Math.max(f, h) / 2 : c.It, isNaN(c.Ku) ? (r = 0, s = Math.max(f, h) / 2) : r = c.Ku, k = b.createRadialGradient(l, n, r, p, q, s); else if (c.type === Rn)try {
                        k = b.createPattern(c.pattern, "repeat")
                    } catch (u) {
                        k = null
                    } else w.wd(c.type, "Brush type");
                    if (c.type !== Rn && (e = c.tk, null !== e))for (e = e.i; e.next();)k.addColorStop(e.key, e.value);
                    if (m && (c.bh = k, null !== k && (c.qo = f, c.Gy = h), null === k && c.type === Rn && -1 !== c.qo)) {
                        c.qo = -1;
                        var t = a.g;
                        null !== t &&
                        -1 === c.qo && w.setTimeout(function () {
                            t.Sx()
                        }, 600)
                    }
                }
                d ? b.fillStyle = k : b.strokeStyle = k
            }
        }
    }

    G.prototype.isContainedBy = G.prototype.Xl = function (a) {
        if (a instanceof C)a:{
            if (this !== a && null !== a)for (var b = this.O; null !== b;) {
                if (b === a) {
                    a = !0;
                    break a
                }
                b = b.O
            }
            a = !1
        } else a = !1;
        return a
    };
    G.prototype.isVisibleObject = G.prototype.vj = function () {
        if (!this.visible)return !1;
        var a = this.O;
        return null !== a ? a.vj() : !0
    };
    G.prototype.isEnabledObject = G.prototype.au = function () {
        for (var a = this instanceof C ? this : this.O; null !== a && a.isEnabled;)a = a.O;
        return null === a
    };
    w.defineProperty(G, {CE: "enabledChanged"}, function () {
        return null !== this.ha ? this.ha.sr : null
    }, function (a) {
        ro(this);
        var b = this.ha.sr;
        b !== a && (null !== a && w.j(a, "function", G, "enabledChanged"), this.ha.sr = a, this.h("enabledChanged", b, a))
    });
    function Jo(a) {
        if (0 !== (a.P & 2048) === !0) {
            var b = a.cd;
            b.reset();
            if (!a.mc.H() || !a.od.H()) {
                Mo(a, !1);
                return
            }
            b.translate(a.mc.x, a.mc.y);
            b.translate(-a.za.x, -a.za.y);
            var c = a.Ia;
            zo(a, b, c.x, c.y, c.width, c.height);
            Mo(a, !1);
            No(a, !0)
        }
        0 !== (a.P & 4096) === !0 && (b = a.O, null === b ? (a.om.set(a.cd), a.Bo = a.scale, No(a, !1)) : null !== b.ph && (c = a.om, c.reset(), b.Yg() ? c.multiply(b.om) : null !== b.O && c.multiply(b.O.om), c.multiply(a.cd), a.Bo = a.scale * b.Bo, No(a, !1)))
    }

    function zo(a, b, c, d, e, f) {
        1 !== a.scale && b.scale(a.scale);
        if (0 !== a.angle) {
            var h = Fb;
            a.rj() && a.zf.fd() && (h = a.zf);
            var k = w.K();
            if (a instanceof S && a.Xf !== a)for (c = a.Xf, d = c.Ia, k.Hu(d.x, d.y, d.width, d.height, h), c.Qi.nb(k), k.offset(-c.za.x, -c.za.y), h = c.O; null !== h && h !== a;)h.Qi.nb(k), k.offset(-h.za.x, -h.za.y), h = h.O; else k.Hu(c, d, e, f, h);
            b.rotate(a.angle, k.x, k.y);
            w.v(k)
        }
    }

    g = G.prototype;
    g.I = function (a) {
        void 0 === a && (a = !1);
        if (!0 !== ym(this)) {
            Xl(this, !0);
            Co(this, !0);
            var b = this.O;
            null === b || a || b.I()
        }
    };
    g.bq = function () {
        !0 !== ym(this) && (Xl(this, !0), Co(this, !0))
    };
    function Oo(a) {
        if (!1 === zm(a)) {
            var b = a.O;
            null !== b ? b.I() : a.rj() && (b = a.g, null !== b && (b.qg.add(a), a instanceof T && a.Tf(), b.Le()));
            Co(a, !0)
        }
    }

    g.Ii = function () {
        0 !== (this.P & 2048) === !1 && (Mo(this, !0), No(this, !0))
    };
    g.uA = function () {
        No(this, !0)
    };
    g.na = function () {
        var a = this.U;
        null !== a && a.na()
    };
    function Bo(a, b) {
        var c = a.stretch, d = a.O;
        if (null !== d && d.ma === Po)return Qo(a, d.be(a.Yb), d.ae(a.column), b);
        if (null !== d && d.ma === Bl && d.Hd() === a)return Ro(a, Ie, b);
        if (c === lo) {
            if (null !== d) {
                if (d.ma === Gj && d.Hd() === a)return Ro(a, Ie, b);
                c = d.Zd;
                return c === lo ? Ro(a, Ij, b) : Ro(a, c, b)
            }
            return Ro(a, Ij, b)
        }
        return Ro(a, c, b)
    }

    function Qo(a, b, c, d) {
        var e = a.stretch;
        if (e !== lo)return Ro(a, e, d);
        var f = e = null;
        switch (b.stretch) {
            case mo:
                f = !0;
                break;
            case Ie:
                f = !0
        }
        switch (c.stretch) {
            case no:
                e = !0;
                break;
            case Ie:
                e = !0
        }
        b = a.O.Zd;
        null === e && (e = b === no || b === Ie);
        null === f && (f = b === mo || b === Ie);
        return !0 === e && !0 === f ? Ro(a, Ie, d) : !0 === e ? Ro(a, no, d) : !0 === f ? Ro(a, mo, d) : Ro(a, Ij, d)
    }

    function Ro(a, b, c) {
        if (c)return b;
        if (b === Ij)return Ij;
        c = a.Aa;
        if (c.H())return Ij;
        a = a.angle;
        if (!isNaN(c.width))if (90 !== a && 270 !== a) {
            if (b === no)return Ij;
            if (b === Ie)return mo
        } else {
            if (b === mo)return Ij;
            if (b === Ie)return no
        }
        if (!isNaN(c.height))if (90 !== a && 270 !== a) {
            if (b === mo)return Ij;
            if (b === Ie)return no
        } else {
            if (b === no)return Ij;
            if (b === Ie)return mo
        }
        return b
    }

    w.defineProperty(G, {rq: "segmentOrientation"}, function () {
        return this.Ym
    }, function (a) {
        var b = this.Ym;
        b !== a && (this.Ym = a, this.I(), this.h("segmentOrientation", b, a), a === dj && (this.angle = 0))
    });
    w.defineProperty(G, {Me: "segmentIndex"}, function () {
        return this.Rs
    }, function (a) {
        a = Math.round(a);
        var b = this.Rs;
        b !== a && (this.Rs = a, this.I(), this.h("segmentIndex", b, a))
    });
    w.defineProperty(G, {XA: "segmentFraction"}, function () {
        return this.Wm
    }, function (a) {
        isNaN(a) ? a = 0 : 0 > a ? a = 0 : 1 < a && (a = 1);
        var b = this.Wm;
        b !== a && (this.Wm = a, this.I(), this.h("segmentFraction", b, a))
    });
    w.defineProperty(G, {YA: "segmentOffset"}, function () {
        return this.Xm
    }, function (a) {
        var b = this.Xm;
        b.L(a) || (this.Xm = a = a.S(), this.I(), this.h("segmentOffset", b, a))
    });
    w.defineProperty(G, {stretch: "stretch"}, function () {
        return this.Ag
    }, function (a) {
        var b = this.Ag;
        b !== a && (this.Ag = a, this.I(), this.h("stretch", b, a))
    });
    w.defineProperty(G, {name: "name"}, function () {
        return this.Qb
    }, function (a) {
        var b = this.Qb;
        b !== a && (this.Qb = a, null !== this.U && (this.U.Nm = null), this.h("name", b, a))
    });
    w.defineProperty(G, {opacity: "opacity"}, function () {
        return this.vc
    }, function (a) {
        var b = this.vc;
        b !== a && (w.j(a, "number", G, "opacity"), (0 > a || 1 < a) && w.Ea(a, "0 <= value <= 1", G, "opacity"), this.vc = a, this.h("opacity", b, a), a = this.g, b = this.U, null !== a && null !== b && a.na(jl(b, b.Y)))
    });
    w.defineProperty(G, {visible: "visible"}, function () {
        return 0 !== (this.P & 1)
    }, function (a) {
        var b = 0 !== (this.P & 1);
        b !== a && (this.P ^= 1, this.h("visible", b, a), b = this.O, null !== b ? b.I() : this.rj() && this.td(a), this.na(), So(this))
    });
    w.defineProperty(G, {Sg: "pickable"}, function () {
        return 0 !== (this.P & 2)
    }, function (a) {
        var b = 0 !== (this.P & 2);
        b !== a && (this.P ^= 2, this.h("pickable", b, a))
    });
    w.defineProperty(G, {QH: "fromLinkableDuplicates"}, function () {
        return 0 !== (this.P & 4)
    }, function (a) {
        var b = 0 !== (this.P & 4);
        b !== a && (this.P ^= 4, this.h("fromLinkableDuplicates", b, a))
    });
    w.defineProperty(G, {RH: "fromLinkableSelfNode"}, function () {
        return 0 !== (this.P & 8)
    }, function (a) {
        var b = 0 !== (this.P & 8);
        b !== a && (this.P ^= 8, this.h("fromLinkableSelfNode", b, a))
    });
    w.defineProperty(G, {IJ: "toLinkableDuplicates"}, function () {
        return 0 !== (this.P & 16)
    }, function (a) {
        var b = 0 !== (this.P & 16);
        b !== a && (this.P ^= 16, this.h("toLinkableDuplicates", b, a))
    });
    w.defineProperty(G, {JJ: "toLinkableSelfNode"}, function () {
        return 0 !== (this.P & 32)
    }, function (a) {
        var b = 0 !== (this.P & 32);
        b !== a && (this.P ^= 32, this.h("toLinkableSelfNode", b, a))
    });
    w.defineProperty(G, {Uf: "isPanelMain"}, function () {
        return 0 !== (this.P & 64)
    }, function (a) {
        var b = 0 !== (this.P & 64);
        b !== a && (this.P ^= 64, this.I(), this.h("isPanelMain", b, a))
    });
    w.defineProperty(G, {sx: "isActionable"}, function () {
        return 0 !== (this.P & 128)
    }, function (a) {
        var b = 0 !== (this.P & 128);
        b !== a && (this.P ^= 128, this.h("isActionable", b, a))
    });
    w.defineProperty(G, {jn: "areaBackground"}, function () {
        return this.Zb
    }, function (a) {
        var b = this.Zb;
        b !== a && (a instanceof ga && a.freeze(), this.Zb = a, this.na(), this.h("areaBackground", b, a))
    });
    w.defineProperty(G, {background: "background"}, function () {
        return this.Db
    }, function (a) {
        var b = this.Db;
        b !== a && (a instanceof ga && a.freeze(), this.Db = a, this.na(), this.h("background", b, a))
    });
    function Lo(a, b) {
        a.P = b ? a.P | 512 : a.P & -513
    }

    function wo(a) {
        return 0 !== (a.P & 1024)
    }

    function To(a, b) {
        a.P = b ? a.P | 1024 : a.P & -1025
    }

    function Mo(a, b) {
        a.P = b ? a.P | 2048 : a.P & -2049
    }

    function No(a, b) {
        a.P = b ? a.P | 4096 : a.P & -4097
    }

    function ym(a) {
        return 0 !== (a.P & 8192)
    }

    function Xl(a, b) {
        a.P = b ? a.P | 8192 : a.P & -8193
    }

    function zm(a) {
        return 0 !== (a.P & 16384)
    }

    function Co(a, b) {
        a.P = b ? a.P | 16384 : a.P & -16385
    }

    w.u(G, {U: "part"}, function () {
        if (this.rj())return this;
        if (null !== this.Sm)return this.Sm;
        var a;
        for (a = this.O; a;) {
            if (a instanceof S)return this.Sm = a;
            a = a.O
        }
        return null
    });
    w.u(G, {O: "panel"}, function () {
        return this.lh
    });
    G.prototype.em = function (a) {
        this.lh = a
    };
    w.u(G, {layer: "layer"}, function () {
        var a = this.U;
        return null !== a ? a.layer : null
    }, {configurable: !0});
    w.u(G, {g: "diagram"}, function () {
        var a = this.U;
        return null !== a ? a.g : null
    }, {configurable: !0});
    w.defineProperty(G, {position: "position"}, function () {
        return this.hb
    }, function (a) {
        var b = a.x, c = a.y, d = this.hb, e = d.x, f = d.y;
        (e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) ? this.eB() : (a = a.S(), this.dB(a, d) && this.h("position", d, a))
    });
    G.prototype.eB = function () {
    };
    G.prototype.dB = function (a) {
        this.hb = a;
        Oo(this);
        this.Ii();
        return !0
    };
    G.prototype.hy = function (a, b) {
        this.hb.l(a, b);
        this.Ii()
    };
    w.u(G, {Y: "actualBounds"}, function () {
        return this.mc
    });
    w.defineProperty(G, {scale: "scale"}, function () {
        return this.tb
    }, function (a) {
        var b = this.tb;
        b !== a && (0 >= a && w.k("GraphObject.scale for " + this + " must be greater than zero, not: " + a), this.tb = a, this.Ii(), this.I(), this.h("scale", b, a))
    });
    w.defineProperty(G, {angle: "angle"}, function () {
        return this.gg
    }, function (a) {
        var b = this.gg;
        b !== a && (a %= 360, 0 > a && (a += 360), b !== a && (this.gg = a, this.I(), this.Ii(), this.h("angle", b, a)))
    });
    w.defineProperty(G, {Aa: "desiredSize"}, function () {
        return this.Re
    }, function (a) {
        var b = a.width, c = a.height, d = this.Re, e = d.width, f = d.height;
        (e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) || (this.Re = a = a.S(), this.I(), this instanceof X && this.Ke(), this.h("desiredSize", d, a), wo(this) && (a = this.U, null !== a && (xo(this, a, "width"), xo(this, a, "height"))))
    });
    w.defineProperty(G, {width: "width"}, function () {
        return this.Re.width
    }, function (a) {
        var b = this.Re.width;
        b === a || isNaN(b) && isNaN(a) || (b = this.Re, this.Re = a = (new ha(a, this.Re.height)).freeze(), this.I(), this instanceof X && this.Ke(), this.h("desiredSize", b, a), wo(this) && (a = this.U, null !== a && xo(this, a, "width")))
    });
    w.defineProperty(G, {height: "height"}, function () {
        return this.Re.height
    }, function (a) {
        var b = this.Re.height;
        b === a || isNaN(b) && isNaN(a) || (b = this.Re, this.Re = a = (new ha(this.Re.width, a)).freeze(), this.I(), this instanceof X && this.Ke(), this.h("desiredSize", b, a), wo(this) && (a = this.U, null !== a && xo(this, a, "height")))
    });
    w.defineProperty(G, {zh: "minSize"}, function () {
        return this.Vh
    }, function (a) {
        var b = this.Vh;
        b.L(a) || (a = a.copy(), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), a.freeze(), this.Vh = a, this.I(), this.h("minSize", b, a))
    });
    w.defineProperty(G, {Af: "maxSize"}, function () {
        return this.Uh
    }, function (a) {
        var b = this.Uh;
        b.L(a) || (a = a.copy(), isNaN(a.width) && (a.width = Infinity), isNaN(a.height) && (a.height = Infinity), a.freeze(), this.Uh = a, this.I(), this.h("maxSize", b, a))
    });
    w.u(G, {za: "measuredBounds"}, function () {
        return this.od
    });
    w.u(G, {Ia: "naturalBounds"}, function () {
        return this.Sc
    }, {configurable: !0});
    w.defineProperty(G, {margin: "margin"}, function () {
        return this.Lm
    }, function (a) {
        "number" === typeof a && (a = new eb(a));
        var b = this.Lm;
        b.L(a) || (this.Lm = a = a.S(), this.I(), this.h("margin", b, a))
    });
    w.u(G, {transform: null}, function () {
        0 !== (this.P & 2048) === !0 && Jo(this);
        return this.cd
    });
    w.u(G, {ph: null}, function () {
        0 !== (this.P & 4096) === !0 && Jo(this);
        return this.om
    });
    w.defineProperty(G, {alignment: "alignment"}, function () {
        return this.ge
    }, function (a) {
        var b = this.ge;
        b.L(a) || (a.Nd() && !a.Uc() && w.k("GraphObject.alignment for " + this + " must be a real Spot or Spot.Default, not: " + a), this.ge = a = a.S(), Oo(this), this.h("alignment", b, a))
    });
    w.defineProperty(G, {column: "column"}, function () {
        return this.Uq
    }, function (a) {
        a = Math.round(a);
        var b = this.Uq;
        b !== a && (0 > a && w.Ea(a, ">= 0", G, "column"), this.Uq = a, this.I(), this.h("column", b, a))
    });
    w.defineProperty(G, {qH: "columnSpan"}, function () {
        return this.xi
    }, function (a) {
        a = Math.round(a);
        var b = this.xi;
        b !== a && (1 > a && w.Ea(a, ">= 1", G, "columnSpan"), this.xi = a, this.I(), this.h("columnSpan", b, a))
    });
    w.defineProperty(G, {Yb: "row"}, function () {
        return this.Ns
    }, function (a) {
        a = Math.round(a);
        var b = this.Ns;
        b !== a && (0 > a && w.Ea(a, ">= 0", G, "row"), this.Ns = a, this.I(), this.h("row", b, a))
    });
    w.defineProperty(G, {rowSpan: "rowSpan"}, function () {
        return this.aj
    }, function (a) {
        a = Math.round(a);
        var b = this.aj;
        b !== a && (1 > a && w.Ea(a, ">= 1", G, "rowSpan"), this.aj = a, this.I(), this.h("rowSpan", b, a))
    });
    w.defineProperty(G, {iy: "spanAllocation"}, function () {
        return this.ct
    }, function (a) {
        var b = this.ct;
        b !== a && (null !== a && w.j(a, "function", G, "spanAllocation"), this.ct = a, this.I(), this.h("spanAllocation", b, a))
    });
    w.defineProperty(G, {oh: "alignmentFocus"}, function () {
        return this.nm
    }, function (a) {
        var b = this.nm;
        b.L(a) || (!a.Nd() || a.Uc() || a.L(sb) && this instanceof T || w.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: " + a), this.nm = a = a.S(), this.I(), this.h("alignmentFocus", b, a))
    });
    w.defineProperty(G, {Pd: "portId"}, function () {
        return this.As
    }, function (a) {
        var b = this.As;
        if (b !== a) {
            var c = this.U;
            null === c || c instanceof T || (w.k("Cannot set portID on a Link: " + a), c = null);
            null !== b && null !== c && Uo(c, this);
            this.As = a;
            if (null !== a && c) {
                c.Ck = !0;
                null === c.le && Vo(c);
                var d = this.Pd;
                null !== d && c.le.add(d, this)
            }
            this.h("portId", b, a)
        }
    });
    function Wo(a) {
        var b = a.U;
        if (b instanceof T && (null !== a.Pd || a === b.port)) {
            var c = b.g;
            null === c || c.oa.fb || Fo(b, a)
        }
    }

    function So(a) {
        var b = a.g;
        null === b || b.oa.fb || (a instanceof C ? a instanceof T ? a.Tf() : Xo(a, a, function (a) {
            Wo(a)
        }) : Wo(a))
    }

    w.defineProperty(G, {Bb: "toSpot"}, function () {
        return null !== this.V ? this.V.ok : sb
    }, function (a) {
        this.Kd();
        var b = this.V.ok;
        b.L(a) || (a = a.S(), this.V.ok = a, this.h("toSpot", b, a), Wo(this))
    });
    w.defineProperty(G, {jm: "toEndSegmentLength"}, function () {
        return null !== this.V ? this.V.mk : 10
    }, function (a) {
        this.Kd();
        var b = this.V.mk;
        b !== a && (0 > a && w.Ea(a, ">= 0", G, "toEndSegmentLength"), this.V.mk = a, this.h("toEndSegmentLength", b, a), Wo(this))
    });
    w.defineProperty(G, {Lu: "toEndSegmentDirection"}, function () {
        return null !== this.V ? this.V.lk : uo
    }, function (a) {
        this.Kd();
        var b = this.V.lk;
        b !== a && (w.Gt("GraphObject.toEndSegmentDirection", "2.0"), this.V.lk = a, this.h("toEndSegmentDirection", b, a), Wo(this))
    });
    w.defineProperty(G, {Mu: "toShortLength"}, function () {
        return null !== this.V ? this.V.nk : 0
    }, function (a) {
        this.Kd();
        var b = this.V.nk;
        b !== a && (this.V.nk = a, this.h("toShortLength", b, a), Wo(this))
    });
    w.defineProperty(G, {mG: "toLinkable"}, function () {
        return null !== this.V ? this.V.lt : null
    }, function (a) {
        this.Kd();
        var b = this.V.lt;
        b !== a && (this.V.lt = a, this.h("toLinkable", b, a))
    });
    w.defineProperty(G, {KJ: "toMaxLinks"}, function () {
        return null !== this.V ? this.V.mt : Infinity
    }, function (a) {
        this.Kd();
        var b = this.V.mt;
        b !== a && (0 > a && w.Ea(a, ">= 0", G, "toMaxLinks"), this.V.mt = a, this.h("toMaxLinks", b, a))
    });
    w.defineProperty(G, {Ab: "fromSpot"}, function () {
        return null !== this.V ? this.V.Rj : sb
    }, function (a) {
        this.Kd();
        var b = this.V.Rj;
        b.L(a) || (a = a.S(), this.V.Rj = a, this.h("fromSpot", b, a), Wo(this))
    });
    w.defineProperty(G, {Rl: "fromEndSegmentLength"}, function () {
        return null !== this.V ? this.V.Pj : 10
    }, function (a) {
        this.Kd();
        var b = this.V.Pj;
        b !== a && (0 > a && w.Ea(a, ">= 0", G, "fromEndSegmentLength"), this.V.Pj = a, this.h("fromEndSegmentLength", b, a), Wo(this))
    });
    w.defineProperty(G, {St: "fromEndSegmentDirection"}, function () {
        return null !== this.V ? this.V.Oj : uo
    }, function (a) {
        this.Kd();
        var b = this.V.Oj;
        b !== a && (w.Gt("GraphObject.fromEndSegmentDirection", "2.0"), this.V.Oj = a, this.h("fromEndSegmentDirection", b, a), Wo(this))
    });
    w.defineProperty(G, {Tt: "fromShortLength"}, function () {
        return null !== this.V ? this.V.Qj : 0
    }, function (a) {
        this.Kd();
        var b = this.V.Qj;
        b !== a && (this.V.Qj = a, this.h("fromShortLength", b, a), Wo(this))
    });
    w.defineProperty(G, {ME: "fromLinkable"}, function () {
        return null !== this.V ? this.V.vr : null
    }, function (a) {
        this.Kd();
        var b = this.V.vr;
        b !== a && (this.V.vr = a, this.h("fromLinkable", b, a))
    });
    w.defineProperty(G, {jA: "fromMaxLinks"}, function () {
        return null !== this.V ? this.V.wr : Infinity
    }, function (a) {
        this.Kd();
        var b = this.V.wr;
        b !== a && (0 > a && w.Ea(a, ">= 0", G, "fromMaxLinks"), this.V.wr = a, this.h("fromMaxLinks", b, a))
    });
    w.defineProperty(G, {cursor: "cursor"}, function () {
        return this.cr
    }, function (a) {
        var b = this.cr;
        b !== a && (w.j(a, "string", G, "cursor"), this.cr = a, this.h("cursor", b, a))
    });
    w.defineProperty(G, {click: "click"}, function () {
        return null !== this.ha ? this.ha.wi : null
    }, function (a) {
        ro(this);
        var b = this.ha.wi;
        b !== a && (null !== a && w.j(a, "function", G, "click"), this.ha.wi = a, this.h("click", b, a))
    });
    w.defineProperty(G, {Ht: "doubleClick"}, function () {
        return null !== this.ha ? this.ha.Ei : null
    }, function (a) {
        ro(this);
        var b = this.ha.Ei;
        b !== a && (null !== a && w.j(a, "function", G, "doubleClick"), this.ha.Ei = a, this.h("doubleClick", b, a))
    });
    w.defineProperty(G, {Uz: "contextClick"}, function () {
        return null !== this.ha ? this.ha.yi : null
    }, function (a) {
        ro(this);
        var b = this.ha.yi;
        b !== a && (null !== a && w.j(a, "function", G, "contextClick"), this.ha.yi = a, this.h("contextClick", b, a))
    });
    w.defineProperty(G, {nu: "mouseEnter"}, function () {
        return null !== this.ha ? this.ha.ls : null
    }, function (a) {
        ro(this);
        var b = this.ha.ls;
        b !== a && (null !== a && w.j(a, "function", G, "mouseEnter"), this.ha.ls = a, this.h("mouseEnter", b, a))
    });
    w.defineProperty(G, {ou: "mouseLeave"}, function () {
        return null !== this.ha ? this.ha.ms : null
    }, function (a) {
        ro(this);
        var b = this.ha.ms;
        b !== a && (null !== a && w.j(a, "function", G, "mouseLeave"), this.ha.ms = a, this.h("mouseLeave", b, a))
    });
    w.defineProperty(G, {JA: "mouseOver"}, function () {
        return null !== this.ha ? this.ha.Vi : null
    }, function (a) {
        ro(this);
        var b = this.ha.Vi;
        b !== a && (null !== a && w.j(a, "function", G, "mouseOver"), this.ha.Vi = a, this.h("mouseOver", b, a))
    });
    w.defineProperty(G, {IA: "mouseHover"}, function () {
        return null !== this.ha ? this.ha.Ui : null
    }, function (a) {
        ro(this);
        var b = this.ha.Ui;
        b !== a && (null !== a && w.j(a, "function", G, "mouseHover"), this.ha.Ui = a, this.h("mouseHover", b, a))
    });
    w.defineProperty(G, {HA: "mouseHold"}, function () {
        return null !== this.ha ? this.ha.Ti : null
    }, function (a) {
        ro(this);
        var b = this.ha.Ti;
        b !== a && (null !== a && w.j(a, "function", G, "mouseHold"), this.ha.Ti = a, this.h("mouseHold", b, a))
    });
    w.defineProperty(G, {TI: "mouseDragEnter"}, function () {
        return null !== this.ha ? this.ha.js : null
    }, function (a) {
        ro(this);
        var b = this.ha.js;
        b !== a && (null !== a && w.j(a, "function", G, "mouseDragEnter"), this.ha.js = a, this.h("mouseDragEnter", b, a))
    });
    w.defineProperty(G, {UI: "mouseDragLeave"}, function () {
        return null !== this.ha ? this.ha.ks : null
    }, function (a) {
        ro(this);
        var b = this.ha.ks;
        b !== a && (null !== a && w.j(a, "function", G, "mouseDragLeave"), this.ha.ks = a, this.h("mouseDragLeave", b, a))
    });
    w.defineProperty(G, {GA: "mouseDrop"}, function () {
        return null !== this.ha ? this.ha.Si : null
    }, function (a) {
        ro(this);
        var b = this.ha.Si;
        b !== a && (null !== a && w.j(a, "function", G, "mouseDrop"), this.ha.Si = a, this.h("mouseDrop", b, a))
    });
    w.defineProperty(G, {ZD: "actionDown"}, function () {
        return null !== this.ha ? this.ha.Cq : null
    }, function (a) {
        ro(this);
        var b = this.ha.Cq;
        b !== a && (null !== a && w.j(a, "function", G, "actionDown"), this.ha.Cq = a, this.h("actionDown", b, a))
    });
    w.defineProperty(G, {$D: "actionMove"}, function () {
        return null !== this.ha ? this.ha.Dq : null
    }, function (a) {
        ro(this);
        var b = this.ha.Dq;
        b !== a && (null !== a && w.j(a, "function", G, "actionMove"), this.ha.Dq = a, this.h("actionMove", b, a))
    });
    w.defineProperty(G, {aE: "actionUp"}, function () {
        return null !== this.ha ? this.ha.Eq : null
    }, function (a) {
        ro(this);
        var b = this.ha.Eq;
        b !== a && (null !== a && w.j(a, "function", G, "actionUp"), this.ha.Eq = a, this.h("actionUp", b, a))
    });
    w.defineProperty(G, {YD: "actionCancel"}, function () {
        return null !== this.ha ? this.ha.Bq : null
    }, function (a) {
        ro(this);
        var b = this.ha.Bq;
        b !== a && (null !== a && w.j(a, "function", G, "actionCancel"), this.ha.Bq = a, this.h("actionCancel", b, a))
    });
    w.defineProperty(G, {nB: "toolTip"}, function () {
        return null !== this.ha ? this.ha.dj : null
    }, function (a) {
        ro(this);
        var b = this.ha.dj;
        b !== a && (this.ha.dj = a, this.h("toolTip", b, a))
    });
    w.defineProperty(G, {contextMenu: "contextMenu"}, function () {
        return null !== this.ha ? this.ha.zi : null
    }, function (a) {
        ro(this);
        var b = this.ha.zi;
        b !== a && (this.ha.zi = a, this.h("contextMenu", b, a))
    });
    G.prototype.bind = G.prototype.bind = function (a) {
        a.Bg = this;
        var b = this.Pl();
        null !== b && Yo(b) && w.k("Cannot add a Binding to a template that has already been copied: " + a);
        null === this.sc && (this.sc = new I(Vg));
        this.sc.add(a)
    };
    G.prototype.findTemplateBinder = G.prototype.Pl = function () {
        for (var a = this instanceof C ? this : this.O; null !== a;) {
            if (null !== a.Wk)return a;
            a = a.O
        }
        return null
    };
    G.prototype.setProperties = function (a) {
        w.Fu(this, a)
    };
    var Zo;
    G.make = Zo = function (a, b) {
        var c = arguments, d = null, e = null;
        if ("function" === typeof a)e = a; else if ("string" === typeof a) {
            var f = $o.ka(a);
            "function" === typeof f ? (c = w.Hl(arguments), d = f(c), w.Qa(d) || w.k('GraphObject.make invoked object builder "' + a + '", but it did not return an Object')) : e = da[a]
        }
        null === d && (void 0 !== e && null !== e && e.constructor || w.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: " + a), d = new e);
        f = 1;
        if (d instanceof D && 1 < c.length) {
            var h = d, e = c[1];
            if ("string" === typeof e || e instanceof HTMLDivElement)zl(h, e), f++
        }
        for (; f < c.length; f++)e = c[f], void 0 === e ? w.k("Undefined value at argument " + f + " for object being constructed by GraphObject.make: " + d) : ap(d, e);
        return d
    };
    function ap(a, b) {
        if ("string" === typeof b)if (a instanceof Ch)a.text = b; else if (a instanceof X)a.Cb = b; else if (a instanceof tl)a.source = b; else if (a instanceof C) {
            var c = pa(C, b);
            null !== c ? a.type = c : w.k("Unknown Panel type as an argument to GraphObject.make: " + b)
        } else a instanceof ga ? (c = pa(ga, b), null !== c ? a.type = c : w.k("Unknown Brush type as an argument to GraphObject.make: " + b)) : a instanceof Fe ? (c = pa(Fe, b), null !== c ? a.type = c : w.k("Unknown Geometry type as an argument to GraphObject.make: " + b)) : a instanceof yf ?
            (c = pa(yf, b), null !== c ? a.type = c : w.k("Unknown PathSegment type as an argument to GraphObject.make: " + b)) : w.k("Unable to use a string as an argument to GraphObject.make: " + b); else if (b instanceof G)c = b, a instanceof C || w.k("A GraphObject can only be added to a Panel, not to: " + a), a.add(c); else if (b instanceof Pg) {
            var d = b, c = a, e;
            d.ve && c.getRowDefinition ? e = c.getRowDefinition(d.index) : !d.ve && c.getColumnDefinition ? e = c.getColumnDefinition(d.index) : w.k("A RowColumnDefinition can only be added to a Panel, not to: " +
                a);
            e.Mp(d)
        } else if (b instanceof ea)"function" === typeof a.fc ? a.fc(b) : w.Ej(a, b); else if (b instanceof Vg)a instanceof G ? a.bind(b) : a instanceof Pg ? a.bind(b) : w.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: " + a); else if (b instanceof He)a instanceof Fe ? a.cc.add(b) : w.k("A PathFigure can only be added to a Geometry, not to: " + a); else if (b instanceof yf)a instanceof He ? a.vb.add(b) : w.k("A PathSegment can only be added to a PathFigure, not to: " + a); else if (b instanceof pg)a instanceof D ? a.Rb = b : a instanceof U ? a.Rb = b : w.k("A Layout can only be assigned to a Diagram or a Group, not to: " + a); else if (Array.isArray(b))for (c = 0; c < b.length; c++)ap(a, b[c]); else if ("object" === typeof b && null !== b)if (a instanceof ga) {
            e = new sa;
            for (c in b)d = parseFloat(c), isNaN(d) ? e[c] = b[c] : a.addColorStop(d, b[c]);
            w.Fu(a, e)
        } else if (a instanceof Pg) {
            void 0 !== b.row ? (e = b.row, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && w.k("Must specify non-negative integer row for RowColumnDefinition " + b + ", not: " + e), a.ve = !0,
                a.index = e) : void 0 !== b.column && (e = b.column, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && w.k("Must specify non-negative integer column for RowColumnDefinition " + b + ", not: " + e), a.ve = !1, a.index = e);
            e = new sa;
            for (c in b)"row" !== c && "column" !== c && (e[c] = b[c]);
            w.Fu(a, e)
        } else w.Fu(a, b); else w.k('Unknown initializer "' + b + '" for object being constructed by GraphObject.make: ' + a)
    }

    var $o = new ka("string", "function");
    G.getBuilders = function () {
        var a = new ka("string", "function"), b;
        for (b in $o)if (b !== b.toLowerCase()) {
            var c = $o[b];
            "function" === typeof c && a.add(b, c)
        }
        a.freeze();
        return a
    };
    var bp;
    G.defineBuilder = bp = function (a, b) {
        w.j(a, "string", G, "defineBuilder:name");
        w.j(b, "function", G, "defineBuilder:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || w.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        $o.add(a, b)
    };
    var cp;
    G.takeBuilderArgument = cp = function (a, b, c) {
        void 0 === c && (c = null);
        var d = a[1];
        if ("function" === typeof c ? c(d) : "string" === typeof d)return a.splice(1, 1), d;
        if (void 0 === b)throw Error("no " + ("function" === typeof c ? "satisfactory" : "string") + " argument for GraphObject builder " + a[0]);
        return b
    };
    bp("Button", function () {
        var a = new ga(lg);
        a.addColorStop(0, "white");
        a.addColorStop(1, "lightgray");
        var b = new ga(lg);
        b.addColorStop(0, "white");
        b.addColorStop(1, "dodgerblue");
        a = Zo(C, Bl, {
            sx: !0,
            CE: function (a, b) {
                var e = a.sd("ButtonBorder");
                null !== e && (e.fill = b ? a._buttonFillNormal : a._buttonFillDisabled)
            },
            _buttonFillNormal: a,
            _buttonStrokeNormal: "gray",
            _buttonFillOver: b,
            _buttonStrokeOver: "blue",
            _buttonFillDisabled: "darkgray"
        }, Zo(X, {
            name: "ButtonBorder", Cb: "Rectangle", A: new L(0, 0, 2.761423749153968, 2.761423749153968),
            B: new L(1, 1, -2.761423749153968, -2.761423749153968), fill: a, stroke: "gray"
        }));
        a.nu = function (a, b) {
            if (b.au()) {
                var e = b.sd("ButtonBorder");
                if (e instanceof X) {
                    var f = b._buttonFillOver;
                    b._buttonFillNormal = e.fill;
                    e.fill = f;
                    f = b._buttonStrokeOver;
                    b._buttonStrokeNormal = e.stroke;
                    e.stroke = f
                }
            }
        };
        a.ou = function (a, b) {
            if (b.au()) {
                var e = b.sd("ButtonBorder");
                e instanceof X && (e.fill = b._buttonFillNormal, e.stroke = b._buttonStrokeNormal)
            }
        };
        return a
    });
    bp("TreeExpanderButton", function () {
        var a = Zo("Button", {
            _treeExpandedFigure: "MinusLine",
            _treeCollapsedFigure: "PlusLine"
        }, Zo(X, {name: "ButtonIcon", Cb: "MinusLine", Aa: yd}, (new Vg("figure", "isTreeExpanded", function (a, c) {
            var d = c.O;
            return a ? d._treeExpandedFigure : d._treeCollapsedFigure
        })).Kx()), {visible: !1}, (new Vg("visible", "isTreeLeaf", function (a) {
            return !a
        })).Kx());
        a.click = function (a, c) {
            var d = c.U;
            d instanceof dh && (d = d.Nf);
            if (d instanceof T) {
                var e = d.g;
                if (null !== e) {
                    e = e.ob;
                    if (d.gd) {
                        if (!e.canCollapseTree(d))return
                    } else if (!e.canExpandTree(d))return;
                    a.Ac = !0;
                    d.gd ? e.collapseTree(d) : e.expandTree(d)
                }
            }
        };
        return a
    });
    bp("SubGraphExpanderButton", function () {
        var a = Zo("Button", {
            _subGraphExpandedFigure: "MinusLine",
            _subGraphCollapsedFigure: "PlusLine"
        }, Zo(X, {
            name: "ButtonIcon",
            Cb: "MinusLine",
            Aa: yd
        }, (new Vg("figure", "isSubGraphExpanded", function (a, c) {
            var d = c.O;
            return a ? d._subGraphExpandedFigure : d._subGraphCollapsedFigure
        })).Kx()));
        a.click = function (a, c) {
            var d = c.U;
            d instanceof dh && (d = d.Nf);
            if (d instanceof U) {
                var e = d.g;
                if (null !== e) {
                    e = e.ob;
                    if (d.we) {
                        if (!e.canCollapseSubGraph(d))return
                    } else if (!e.canExpandSubGraph(d))return;
                    a.Ac = !0;
                    d.we ? e.collapseSubGraph(d) : e.expandSubGraph(d)
                }
            }
        };
        return a
    });
    bp("ContextMenuButton", function () {
        var a = Zo("Button");
        a.stretch = no;
        var b = a.sd("ButtonBorder");
        b instanceof X && (b.Cb = "Rectangle", b.A = new L(0, 0, 2, 3), b.B = new L(1, 1, -2, -2));
        return a
    });
    bp("PanelExpanderButton", function (a) {
        var b = cp(a, "COLLAPSIBLE"), c = Zo("Button", {
            _buttonExpandedFigure: "TriangleUp",
            _buttonCollapsedFigure: "TriangleDown"
        }, Zo(X, "TriangleUp", {name: "ButtonIcon", Aa: new ha(6, 4)}, (new Vg("figure", "visible", function (a) {
            return a ? c._buttonExpandedFigure : c._buttonCollapsedFigure
        })).Kx(b)));
        a = c.sd("ButtonBorder");
        a instanceof X && (a.stroke = null, a.fill = "transparent");
        c.click = function (a, c) {
            var f = c.g;
            if (null !== f && !f.cb) {
                var h = c.Pl();
                null === h && (h = c.U);
                null !== h && (h = h.sd(b), null !== h &&
                (f.Tb("Collapse/Expand Panel"), h.visible = !h.visible, f.Fd("Collapse/Expand Panel")))
            }
        };
        return c
    });
    bp("CheckBoxButton", function (a) {
        var b = cp(a);
        a = Zo("Button", {
            "ButtonBorder.fill": "white",
            "ButtonBorder.stroke": "gray",
            width: 14,
            height: 14
        }, Zo(X, {
            name: "ButtonIcon",
            SH: "M0 4 L3 9 9 0",
            kb: 2,
            stretch: Ie,
            kA: Kj,
            visible: !1
        }, "" !== b ? (new Vg("visible", b)).HI() : []));
        a.click = function (a, d) {
            var e = a.g;
            if (!(null === e || e.cb || "" !== b && e.ba.cb)) {
                a.Ac = !0;
                var f = d.sd("ButtonIcon");
                e.Tb("checkbox");
                f.visible = !f.visible;
                "function" === typeof d._doClick && d._doClick(a, d);
                e.Fd("checkbox")
            }
        };
        return a
    });
    bp("CheckBox", function (a) {
        a = cp(a);
        a = Zo("CheckBoxButton", a, {name: "Button", margin: new eb(0, 1, 0, 0)});
        var b = Zo(C, "Horizontal", a, {
            sx: !0,
            margin: 1,
            _buttonFillNormal: a._buttonFillNormal,
            _buttonStrokeNormal: a._buttonStrokeNormal,
            _buttonFillOver: a._buttonFillOver,
            _buttonStrokeOver: a._buttonStrokeOver,
            _buttonFillDisabled: a._buttonFillDisabled,
            nu: a.nu,
            ou: a.ou,
            click: a.click,
            _buttonClick: a.click
        });
        a.nu = null;
        a.ou = null;
        a.click = null;
        return b
    });
    function so() {
        this.sr = this.zi = this.dj = this.Bq = this.Eq = this.Dq = this.Cq = this.Si = this.ks = this.js = this.Ti = this.Ui = this.Vi = this.ms = this.ls = this.yi = this.Ei = this.wi = null
    }

    so.prototype.copy = function () {
        var a = new so;
        a.wi = this.wi;
        a.Ei = this.Ei;
        a.yi = this.yi;
        a.ls = this.ls;
        a.ms = this.ms;
        a.Vi = this.Vi;
        a.Ui = this.Ui;
        a.Ti = this.Ti;
        a.js = this.js;
        a.ks = this.ks;
        a.Si = this.Si;
        a.Cq = this.Cq;
        a.Dq = this.Dq;
        a.Eq = this.Eq;
        a.Bq = this.Bq;
        a.dj = this.dj;
        a.zi = this.zi;
        a.sr = this.sr;
        return a
    };
    function C(a) {
        G.call(this);
        void 0 === a ? this.ma = Nj : (w.mb(a, C, C, "type"), this.ma = a);
        this.wa = new I(G);
        this.ff = dd;
        this.ma === El && (this.En = !0);
        this.gr = oc;
        this.Ci = lo;
        this.ma === Po && dp(this);
        this.Cp = Kj;
        this.Er = Ad;
        this.Fr = bd;
        this.Br = 0;
        this.Ar = 100;
        this.Dr = 10;
        this.Cr = 0;
        this.Wk = this.Vd = this.Sj = this.xm = this.zm = null;
        this.Rr = NaN;
        this.sg = this.Zj = null;
        this.To = "category";
        this.rg = null;
        this.fj = new A(NaN, NaN, NaN, NaN);
        this.kk = this.Os = this.dn = null;
        this.Hj = ""
    }

    w.La(C, G);
    w.ji(C);
    w.fa("Panel", C);
    function dp(a) {
        a.Lj = dd;
        a.Mh = 1;
        a.Bi = null;
        a.um = null;
        a.Lh = 1;
        a.Kh = null;
        a.tm = null;
        a.Yd = [];
        a.Td = [];
        a.Vm = ep;
        a.sm = ep;
        a.ej = 0;
        a.Ni = 0
    }

    C.prototype.cloneProtected = function (a) {
        G.prototype.cloneProtected.call(this, a);
        a.ma = this.ma;
        a.ff = this.ff.S();
        a.gr = this.gr.S();
        a.Ci = this.Ci;
        if (a.ma === Po) {
            a.Lj = this.Lj.S();
            a.Mh = this.Mh;
            a.Bi = this.Bi;
            a.um = this.um;
            a.Lh = this.Lh;
            a.Kh = this.Kh;
            a.tm = this.tm;
            var b = [];
            if (0 < this.Yd.length)for (var c = this.Yd, d = c.length, e = 0; e < d; e++)if (void 0 !== c[e]) {
                var f = c[e].copy();
                f.em(a);
                b[e] = f
            }
            a.Yd = b;
            b = [];
            if (0 < this.Td.length)for (c = this.Td, d = c.length, e = 0; e < d; e++)void 0 !== c[e] && (f = c[e].copy(), f.em(a), b[e] = f);
            a.Td = b;
            a.Vm = this.Vm;
            a.sm = this.sm;
            a.ej = this.ej;
            a.Ni = this.Ni
        }
        a.Cp = this.Cp;
        a.Er = this.Er.S();
        a.Fr = this.Fr.S();
        a.Br = this.Br;
        a.Ar = this.Ar;
        a.Dr = this.Dr;
        a.Cr = this.Cr;
        a.zm = this.zm;
        a.Sj = this.Sj;
        a.Vd = this.Vd;
        a.Wk = this.Wk;
        a.Rr = this.Rr;
        a.Zj = this.Zj;
        a.sg = this.sg;
        a.To = this.To;
        a.fj.assign(this.fj);
        a.Hj = this.Hj;
        null !== this.Os && (a.Os = this.Os)
    };
    C.prototype.ki = function (a) {
        G.prototype.ki.call(this, a);
        a.wa = this.wa;
        for (var b = a.wa.n, c = b.length, d = 0; d < c; d++)b[d].lh = a;
        a.dn = null
    };
    C.prototype.copy = function () {
        var a = G.prototype.copy.call(this);
        if (null !== a) {
            for (var b = this.wa.n, c = b.length, d = 0; d < c; d++) {
                var e = b[d].copy(), f = a;
                e.em(f);
                e.Sm = null;
                var h = f.wa, k = h.count;
                h.Ld(k, e);
                h = f.U;
                if (null !== h) {
                    h.Nm = null;
                    null !== e.Pd && h instanceof T && (h.Ck = !0);
                    var l = f.g;
                    null !== l && l.oa.fb || h.Wc(Of, "elements", f, null, e, null, k)
                }
            }
            return a
        }
        return null
    };
    C.prototype.fc = function (a) {
        a.De === C ? this.type = a : G.prototype.fc.call(this, a)
    };
    C.prototype.toString = function () {
        return "Panel(" + this.type + ")#" + w.Jd(this)
    };
    var Nj;
    C.Position = Nj = w.p(C, "Position", 0);
    C.Horizontal = w.p(C, "Horizontal", 1);
    var Al;
    C.Vertical = Al = w.p(C, "Vertical", 2);
    var Gj;
    C.Spot = Gj = w.p(C, "Spot", 3);
    var Bl;
    C.Auto = Bl = w.p(C, "Auto", 4);
    var Po;
    C.Table = Po = w.p(C, "Table", 5);
    C.Viewbox = w.p(C, "Viewbox", 6);
    var Go;
    C.TableRow = Go = w.p(C, "TableRow", 7);
    var Ho;
    C.TableColumn = Ho = w.p(C, "TableColumn", 8);
    var aj;
    C.Link = aj = w.p(C, "Link", 9);
    var El;
    C.Grid = El = w.p(C, "Grid", 10);
    var fp;
    C.Graduated = fp = w.p(C, "Graduated", 11);
    w.defineProperty(C, {type: "type"}, function () {
        return this.ma
    }, function (a) {
        var b = this.ma;
        b !== a && (b !== Go && b !== Ho || w.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: " + a), this.ma = a, this.ma === El ? this.En = !0 : this.ma === Po && dp(this), this.I(), this.h("type", b, a))
    });
    w.u(C, {elements: "elements"}, function () {
        return this.wa.i
    });
    w.u(C, {Ia: "naturalBounds"}, function () {
        return this.Sc
    });
    w.defineProperty(C, {padding: "padding"}, function () {
        return this.ff
    }, function (a) {
        "number" === typeof a ? (0 > a && w.Ea(a, ">= 0", C, "padding"), a = new eb(a)) : (w.G(a, eb, C, "padding"), 0 > a.left && w.Ea(a.left, ">= 0", C, "padding:value.left"), 0 > a.right && w.Ea(a.right, ">= 0", C, "padding:value.right"), 0 > a.top && w.Ea(a.top, ">= 0", C, "padding:value.top"), 0 > a.bottom && w.Ea(a.bottom, ">= 0", C, "padding:value.bottom"));
        var b = this.ff;
        b.L(a) || (this.ff = a = a.S(), this.I(), this.h("padding", b, a))
    });
    w.defineProperty(C, {Ll: "defaultAlignment"}, function () {
        return this.gr
    }, function (a) {
        var b = this.gr;
        b.L(a) || (this.gr = a = a.S(), this.I(), this.h("defaultAlignment", b, a))
    });
    w.defineProperty(C, {Zd: "defaultStretch"}, function () {
        return this.Ci
    }, function (a) {
        var b = this.Ci;
        b !== a && (w.mb(a, G, C, "defaultStretch"), this.Ci = a, this.I(), this.h("defaultStretch", b, a))
    });
    w.defineProperty(C, {IK: "defaultSeparatorPadding"}, function () {
        return void 0 === this.Lj ? dd : this.Lj
    }, function (a) {
        if (void 0 !== this.Lj) {
            "number" === typeof a && (a = new eb(a));
            var b = this.Lj;
            b.L(a) || (this.Lj = a = a.S(), this.I(), this.h("defaultSeparatorPadding", b, a))
        }
    });
    w.defineProperty(C, {GK: "defaultRowSeparatorStroke"}, function () {
        return void 0 === this.Bi ? null : this.Bi
    }, function (a) {
        var b = this.Bi;
        b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.Bi = a, this.na(), this.h("defaultRowSeparatorStroke", b, a))
    });
    w.defineProperty(C, {HK: "defaultRowSeparatorStrokeWidth"}, function () {
        return void 0 === this.Mh ? 1 : this.Mh
    }, function (a) {
        if (void 0 !== this.Mh) {
            var b = this.Mh;
            b !== a && isFinite(a) && 0 <= a && (this.Mh = a, this.I(), this.h("defaultRowSeparatorStrokeWidth", b, a))
        }
    });
    w.defineProperty(C, {FK: "defaultRowSeparatorDashArray"}, function () {
        return void 0 === this.um ? null : this.um
    }, function (a) {
        if (void 0 !== this.um) {
            var b = this.um;
            if (b !== a) {
                null === a || Array.isArray(a) || w.wd(a, "Array", C, "defaultRowSeparatorDashArray:value");
                if (null !== a) {
                    for (var c = a.length, d = 0, e = 0; e < c; e++) {
                        var f = a[e];
                        "number" === typeof f && 0 <= f && isFinite(f) || w.k("defaultRowSeparatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
                        d += f
                    }
                    if (0 === d) {
                        if (null === b)return;
                        a = null
                    }
                }
                this.um = a;
                this.na();
                this.h("defaultRowSeparatorDashArray", b, a)
            }
        }
    });
    w.defineProperty(C, {AK: "defaultColumnSeparatorStroke"}, function () {
        return void 0 === this.Kh ? null : this.Kh
    }, function (a) {
        if (void 0 !== this.Kh) {
            var b = this.Kh;
            b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.Kh = a, this.na(), this.h("defaultColumnSeparatorStroke", b, a))
        }
    });
    w.defineProperty(C, {BK: "defaultColumnSeparatorStrokeWidth"}, function () {
        return void 0 === this.Lh ? 1 : this.Lh
    }, function (a) {
        if (void 0 !== this.Lh) {
            var b = this.Lh;
            b !== a && isFinite(a) && 0 <= a && (this.Lh = a, this.I(), this.h("defaultColumnSeparatorStrokeWidth", b, a))
        }
    });
    w.defineProperty(C, {zK: "defaultColumnSeparatorDashArray"}, function () {
        return void 0 === this.tm ? null : this.tm
    }, function (a) {
        if (void 0 !== this.tm) {
            var b = this.tm;
            if (b !== a) {
                null === a || Array.isArray(a) || w.wd(a, "Array", C, "defaultColumnSeparatorDashArray:value");
                if (null !== a) {
                    for (var c = a.length, d = 0, e = 0; e < c; e++) {
                        var f = a[e];
                        "number" === typeof f && 0 <= f && isFinite(f) || w.k("defaultColumnSeparatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
                        d += f
                    }
                    if (0 === d) {
                        if (null === b)return;
                        a = null
                    }
                }
                this.tm =
                    a;
                this.na();
                this.h("defaultColumnSeparatorDashArray", b, a)
            }
        }
    });
    w.defineProperty(C, {SL: "viewboxStretch"}, function () {
        return this.Cp
    }, function (a) {
        var b = this.Cp;
        b !== a && (w.mb(a, G, C, "viewboxStretch"), this.Cp = a, this.I(), this.h("viewboxStretch", b, a))
    });
    w.defineProperty(C, {px: "gridCellSize"}, function () {
        return this.Er
    }, function (a) {
        var b = this.Er;
        if (!b.L(a)) {
            w.G(a, ha, C, "gridCellSize");
            a.H() && 0 !== a.width && 0 !== a.height || w.k("Invalid Panel.gridCellSize: " + a);
            this.Er = a.S();
            var c = this.g;
            null !== c && this === c.Bn && Yl(c);
            this.na();
            this.h("gridCellSize", b, a)
        }
    });
    w.defineProperty(C, {VE: "gridOrigin"}, function () {
        return this.Fr
    }, function (a) {
        var b = this.Fr;
        if (!b.L(a)) {
            w.G(a, z, C, "gridOrigin");
            a.H() || w.k("Invalid Panel.gridOrigin: " + a);
            this.Fr = a.S();
            var c = this.g;
            null !== c && this === c.Bn && Yl(c);
            this.na();
            this.h("gridOrigin", b, a)
        }
    });
    w.defineProperty(C, {Bk: "graduatedMin"}, function () {
        return this.Br
    }, function (a) {
        w.Ed(a, C, "graduatedMin");
        var b = this.Br;
        b !== a && (this.Br = a, this.I(), this.h("graduatedMin", b, a), wo(this) && (a = this.U, null !== a && xo(this, a, "graduatedRange")))
    });
    w.defineProperty(C, {nA: "graduatedMax"}, function () {
        return this.Ar
    }, function (a) {
        w.Ed(a, C, "graduatedMax");
        var b = this.Ar;
        b !== a && (this.Ar = a, this.I(), this.h("graduatedMax", b, a), wo(this) && (a = this.U, null !== a && xo(this, a, "graduatedRange")))
    });
    w.u(C, {ox: "graduatedRange"}, function () {
        return this.nA - this.Bk
    });
    w.defineProperty(C, {oA: "graduatedTickUnit"}, function () {
        return this.Dr
    }, function (a) {
        w.Ed(a, C, "graduatedTickUnit");
        var b = this.Dr;
        b !== a && 0 < a && (this.Dr = a, this.I(), this.h("graduatedTickUnit", b, a))
    });
    w.defineProperty(C, {UE: "graduatedTickBase"}, function () {
        return this.Cr
    }, function (a) {
        w.Ed(a, C, "graduatedTickBase");
        var b = this.Cr;
        b !== a && (this.Cr = a, this.I(), this.h("graduatedTickBase", b, a))
    });
    g = C.prototype;
    g.dw = function (a) {
        G.prototype.dw.call(this, a);
        for (var b = this.wa.n, c = b.length, d = 0; d < c; d++)b[d].dw(a)
    };
    g.xk = function (a, b) {
        if (this.ma === El) {
            var c = this.nj() * b.scale;
            0 >= c && (c = 1);
            var d = this.px, e = d.width, d = d.height, f = this.Ia, h = f.width, f = f.height, k = Math.ceil(h / e), l = Math.ceil(f / d), m = this.VE;
            a.save();
            a.beginPath();
            a.rect(0, 0, h, f);
            a.clip();
            for (var n = [], p = this.wa.n, q = p.length, r = 0; r < q; r++) {
                var s = p[r], u = [];
                n.push(u);
                if (s.visible)for (var s = Tm(s.Cb), t = r + 1; t < q; t++) {
                    var x = p[t];
                    x.visible && Tm(x.Cb) === s && (x = x.interval, 2 <= x && u.push(x))
                }
            }
            p = this.wa.n;
            q = p.length;
            for (r = 0; r < q; r++) {
                var v = p[r];
                if (v.visible && (u = v.interval, !(2 >
                    e * u * c))) {
                    var s = n[r], t = !1, B = !0, y = v.jG;
                    null !== y && (t = !0, B = a.dA(y, v.sf));
                    if ("LineV" === v.Cb) {
                        a.lineWidth = v.kb;
                        Ko(this, a, v.stroke, !1, !1);
                        a.beginPath();
                        for (var H = x = Math.floor(-m.x / e); H <= x + k; H++) {
                            var E = H * e + m.x;
                            0 <= E && E < h && gp(H, u, s) && (t && !B ? vo(a, E, 0, E, f, y, v.sf) : (a.moveTo(E, 0), a.lineTo(E, f)))
                        }
                        a.stroke()
                    } else if ("LineH" === v.Cb) {
                        a.lineWidth = v.kb;
                        Ko(this, a, v.stroke, !1, !1);
                        a.beginPath();
                        for (H = x = Math.floor(-m.y / d); H <= x + l; H++)E = H * d + m.y, 0 <= E && E <= f && gp(H, u, s) && (t && !B ? vo(a, 0, E, h, E, y, v.sf) : (a.moveTo(0, E), a.lineTo(h, E)));
                        a.stroke()
                    } else if ("BarV" === v.Cb)for (Ko(this, a, v.fill, !0, !1), v = v.width, isNaN(v) && (v = e), H = x = Math.floor(-m.x / e); H <= x + k; H++)E = H * e + m.x, 0 <= E && E < h && gp(H, u, s) && a.fillRect(E, 0, v, f); else if ("BarH" === v.Cb)for (Ko(this, a, v.fill, !0, !1), v = v.height, isNaN(v) && (v = d), H = x = Math.floor(-m.y / d); H <= x + l; H++)E = H * d + m.y, 0 <= E && E <= f && gp(H, u, s) && a.fillRect(0, E, h, v);
                    t && a.aA()
                }
            }
            a.restore();
            a.Ee(!1)
        } else if (this.ma === fp) {
            e = this.Ia;
            c = e.width;
            e = e.height;
            a.save();
            a.beginPath();
            a.rect(-1, -1, c + 1, e + 1);
            a.clip();
            c = this.Hd();
            c.se(a, b);
            e = this.nj() *
                b.scale;
            0 >= e && (e = 1);
            d = c.Y;
            h = this.wa.n;
            f = this.zm;
            k = h.length;
            for (l = 0; l < k; l++)if (q = h[l], m = f[l], n = m.length, q.visible && q !== c && 0 !== m.length)if (q instanceof X) {
                if (!(2 > this.oA * q.interval * e))for (r = q.za, u = q.kb * q.scale, s = q.oh, s.Nd() && (s = wb), p = 0; p < n; p++) {
                    var t = q, x = m[p][0], H = d, v = m[p][1], B = r, y = u, E = s, V = t.cd;
                    V.reset();
                    V.translate(x.x + H.x, x.y + H.y);
                    V.rotate(v + t.angle, 0, 0);
                    V.translate(-B.width * E.x + E.offsetX + y / 2, -B.height * E.y + E.offsetY + y / 2);
                    V.scale(t.scale, t.scale);
                    Mo(t, !1);
                    t.om.set(t.cd);
                    t.Bo = t.scale;
                    No(t, !1);
                    q.se(a,
                        b);
                    q.cd.reset()
                }
            } else if (q instanceof Ch)for (null === this.kk && (this.kk = new Ch), r = this.kk, Ep(q, r), p = 0; p < n; p++)x = m[p], 3 < x.length && (s = x[6], r.Dd = x[2], r.gg = x[3], r.je = x[4], r.Oi = x[5], r.Sc = x[8], r.gc(s.x, s.y, s.width, s.height), q = r, u = d, t = x[7], x = x[8], H = q.cd, H.reset(), H.translate(s.x + u.x, s.y + u.y), H.translate(-t.x, -t.y), zo(q, H, x.x, x.y, x.width, x.height), Mo(q, !1), q.om.set(q.cd), q.Bo = q.scale, No(q, !1), r.se(a, b));
            a.restore();
            a.Ee(!0)
        } else {
            this.ma === Po && (a.lineCap = "butt", Fp(this, a, !0, this.Yd, !0), Fp(this, a, !1, this.Td,
                !0), Gp(this, a, !0, this.Yd), Gp(this, a, !1, this.Td), Fp(this, a, !0, this.Yd, !1), Fp(this, a, !1, this.Td, !1));
            (c = this.Zt) && a.save();
            e = this.Hd();
            d = this.wa.n;
            h = d.length;
            for (f = 0; f < h; f++)k = d[f], c && k === e && (a.Kp = !0), k.se(a, b), c && k === e && (a.Kp = !1);
            c && (a.restore(), a.Ee(!0))
        }
    };
    function Ep(a, b) {
        b.P = a.P | 6144;
        b.vc = a.vc;
        b.Db = a.Db;
        b.Zb = a.Zb;
        b.Re = a.Re.S();
        b.Vh = a.Vh.S();
        b.Uh = a.Uh.S();
        b.Qi = a.Qi.copy();
        b.tb = a.tb;
        b.gg = a.gg;
        b.Ag = a.Ag;
        b.Lm = a.Lm.S();
        b.ge = a.ge.S();
        b.nm = a.nm.S();
        b.Wm = a.Wm;
        b.Xm = a.Xm.S();
        b.Ym = a.Ym;
        null !== a.jg && (b.jg = a.jg.copy());
        b.bn = a.bn;
        a instanceof Ch && (b.Dd = a.Dd, b.pc = a.pc, b.lg = a.lg, b.ul = a.ul, b.kg = a.kg, b.yl = a.yl, b.Dm = a.Dm, b.Yj = a.Yj, b.Xj = a.Xj, b.Xi = a.Xi, b.qk = a.qk, b.wm = null, b.bi = a.bi, b.ci = a.ci, b.fh = a.fh, b.Wo = a.Wo, b.pg = a.pg, b.og = a.og, b.ng = a.ng, b.ym = a.ym)
    }

    function Gp(a, b, c, d) {
        for (var e = d.length, f = a.Y, h = c ? a.be(0) : a.ae(0), k = 0; k < e; k++) {
            var l = d[k];
            if (void 0 !== l && l !== h && 0 !== l.Ja) {
                if (c) {
                    if (l.position > f.height)continue
                } else if (l.position > f.width)continue;
                var m = l.tq;
                isNaN(m) && (m = c ? a.Mh : a.Lh);
                var n = l.sq;
                null === n && (n = c ? a.Bi : a.Kh);
                0 !== m && null !== n && (Ko(a, b, n, !1, !1), b.beginPath(), n = l.position + m, c ? n > f.height && (m -= n - f.height) : n > f.width && (m -= n - f.width), l = l.position + m / 2, b.lineWidth = m, n = a.padding, c ? (l += n.top, m = n.left, n = f.width - n.right, b.moveTo(m, l), b.lineTo(n, l)) : (l +=
                    n.left, m = n.top, n = f.height - n.bottom, b.moveTo(l, m), b.lineTo(l, n)), b.stroke())
            }
        }
    }

    function Fp(a, b, c, d, e) {
        for (var f = d.length, h = a.Y, k = 0; k < f; k++) {
            var l = d[k];
            if (void 0 !== l && null !== l.background && l.Zz !== e && 0 !== l.Ja) {
                var m = c ? h.height : h.width;
                if (!(l.position > m)) {
                    var n = l.Xe(), p = l.tq;
                    isNaN(p) && (p = c ? a.Mh : a.Lh);
                    var q = l.sq;
                    null === q && (q = c ? a.Bi : a.Kh);
                    null === q && (p = 0);
                    n -= p;
                    p = l.position + p;
                    n += l.Ja;
                    p + n > m && (n = m - p);
                    0 >= n || (m = a.padding, Ko(a, b, l.background, !0, !1), c ? b.fillRect(m.left, p + m.top, h.width - (m.left + m.right), n) : b.fillRect(p + m.left, m.top, n, h.height - (m.top + m.bottom)))
                }
            }
        }
    }

    function gp(a, b, c) {
        if (0 !== a % b)return !1;
        b = c.length;
        for (var d = 0; d < b; d++)if (0 === a % c[d])return !1;
        return !0
    }

    function Tm(a) {
        return "LineV" === a || "BarV" === a
    }

    g.zn = function (a, b, c, d, e) {
        var f = this.Yg(), h = this.transform, k = 1 / (h.m11 * h.m22 - h.m12 * h.m21), l = h.m22 * k, m = -h.m12 * k, n = -h.m21 * k, p = h.m11 * k, q = k * (h.m21 * h.dy - h.m22 * h.dx), r = k * (h.m12 * h.dx - h.m11 * h.dy);
        if (null !== this.jn)return h = this.Y, oe(h.left, h.top, h.right, h.bottom, a, b, c, d, e);
        if (null !== this.background)f = a * l + b * n + q, k = a * m + b * p + r, a = c * l + d * n + q, l = c * m + d * p + r, e.l(0, 0), c = this.Ia, c = oe(0, 0, c.width, c.height, f, k, a, l, e), e.transform(h); else {
            f || (l = 1, n = m = 0, p = 1, r = q = 0);
            k = a * l + b * n + q;
            a = a * m + b * p + r;
            l = c * l + d * n + q;
            d = c * m + d * p + r;
            e.l(l, d);
            m = (l -
                k) * (l - k) + (d - a) * (d - a);
            c = !1;
            p = this.wa.n;
            r = p.length;
            n = w.K();
            q = null;
            b = Infinity;
            var s = null;
            this.Zt && (s = w.K(), q = this.Hd(), (c = q.zn(k, a, l, d, s)) && (b = (k - s.x) * (k - s.x) + (a - s.y) * (a - s.y)));
            for (var u = 0; u < r; u++) {
                var t = p[u];
                t.visible && t !== q && t.zn(k, a, l, d, n) && (c = !0, t = (k - n.x) * (k - n.x) + (a - n.y) * (a - n.y), t < m && (m = t, e.set(n)))
            }
            this.Zt && (b > m && e.set(s), w.v(s));
            w.v(n);
            f && e.transform(h)
        }
        return c
    };
    g.I = function (a) {
        G.prototype.I.call(this, a);
        if (this.ma === Bl || this.ma === aj)a = this.Hd(), null !== a && a.I(!0);
        a = this.wa.n;
        for (var b = a.length, c = 0; c < b; c++) {
            var d = a[c];
            if (!d.Aa.H()) {
                var e = Bo(d, !1);
                (d instanceof Hj || d instanceof C || d instanceof Ch || e !== Ij) && d.I(!0)
            }
        }
    };
    g.bq = function () {
        if (!1 === ym(this)) {
            Xl(this, !0);
            Co(this, !0);
            for (var a = this.wa.n, b = a.length, c = 0; c < b; c++)a[c].bq()
        }
    };
    g.Ii = function () {
        if (0 !== (this.P & 2048) === !1) {
            Mo(this, !0);
            No(this, !0);
            for (var a = this.wa.n, b = a.length, c = 0; c < b; c++)a[c].uA()
        }
    };
    g.uA = function () {
        No(this, !0);
        for (var a = this.wa.n, b = a.length, c = 0; c < b; c++)a[c].uA()
    };
    g.Ln = function (a, b, c, d) {
        var e = this.fj;
        e.width = 0;
        e.height = 0;
        var f = this.Aa, h = this.zh;
        void 0 === c && (c = h.width, d = h.height);
        c = Math.max(c, h.width);
        d = Math.max(d, h.height);
        var k = this.Af;
        isNaN(f.width) || (a = Math.min(f.width, k.width));
        isNaN(f.height) || (b = Math.min(f.height, k.height));
        a = Math.max(c, a);
        b = Math.max(d, b);
        var l = this.padding;
        a = Math.max(a - l.left - l.right, 0);
        b = Math.max(b - l.top - l.bottom, 0);
        var m = this.wa.n;
        if (0 !== m.length) {
            var n = this.ma.Qb;
            switch (n) {
                case "Position":
                    var p = a, q = b, r = c, s = d, u = m.length;
                    e.x = 0;
                    e.y =
                        0;
                    e.width = 0;
                    e.height = 0;
                    for (var t = Hp(this), x = 0; x < u; x++) {
                        var v = m[x];
                        if (v.visible || v === t) {
                            var B = v.margin, y = B.right + B.left, H = B.top + B.bottom;
                            rk(v, p, q, r, s);
                            var E = v.za, V = Math.max(E.width + y, 0), ba = Math.max(E.height + H, 0), Q = v.position.x, $ = v.position.y;
                            isFinite(Q) || (Q = 0);
                            isFinite($) || ($ = 0);
                            if (v instanceof X) {
                                var ca = v;
                                if (ca.fF)var R = ca.kb / 2, Q = Q - R, $ = $ - R
                            }
                            bb(e, Q, $, V, ba)
                        }
                    }
                    break;
                case "Vertical":
                    for (var Ra = a, hb = c, qa = m.length, Ja = w.lb(), za = Hp(this), Pb = 0; Pb < qa; Pb++) {
                        var Lb = m[Pb];
                        if (Lb.visible || Lb === za) {
                            var ae = Bo(Lb, !1);
                            if (ae !== Ij && ae !== mo)Ja.push(Lb); else {
                                var pd = Lb.margin, rc = pd.right + pd.left, xg = pd.top + pd.bottom;
                                rk(Lb, Ra, Infinity, hb, 0);
                                var Df = Lb.za, Wa = Math.max(Df.width + rc, 0), lb = Math.max(Df.height + xg, 0);
                                e.width = Math.max(e.width, Wa);
                                e.height += lb
                            }
                        }
                    }
                    var na = Ja.length;
                    if (0 !== na) {
                        this.Aa.width ? Ra = Math.min(this.Aa.width, this.Af.width) : 0 !== e.width && (Ra = Math.min(e.width, this.Af.width));
                        for (Pb = 0; Pb < na; Pb++)if (Lb = Ja[Pb], Lb.visible || Lb === za)pd = Lb.margin, rc = pd.right + pd.left, xg = pd.top + pd.bottom, rk(Lb, Ra, Infinity, hb, 0), Df = Lb.za,
                            Wa = Math.max(Df.width + rc, 0), lb = Math.max(Df.height + xg, 0), e.width = Math.max(e.width, Wa), e.height += lb;
                        w.va(Ja)
                    }
                    break;
                case "Horizontal":
                    for (var la = b, ib = d, jb = m.length, fb = w.lb(), se = Hp(this), Ed = 0; Ed < jb; Ed++) {
                        var tb = m[Ed];
                        if (tb.visible || tb === se) {
                            var Le = Bo(tb, !1);
                            if (Le !== Ij && Le !== no)fb.push(tb); else {
                                var ed = tb.margin, ag = ed.right + ed.left, Ef = ed.top + ed.bottom;
                                rk(tb, Infinity, la, 0, ib);
                                var yg = tb.za, kb = Math.max(yg.width + ag, 0), wc = Math.max(yg.height + Ef, 0);
                                e.width += kb;
                                e.height = Math.max(e.height, wc)
                            }
                        }
                    }
                    var qd = fb.length;
                    if (0 !== qd) {
                        this.Aa.height ? la = Math.min(this.Aa.height, this.Af.height) : 0 !== e.height && (la = Math.min(e.height, this.Af.height));
                        for (Ed = 0; Ed < qd; Ed++)if (tb = fb[Ed], tb.visible || tb === se)ed = tb.margin, ag = ed.right + ed.left, Ef = ed.top + ed.bottom, rk(tb, Infinity, la, 0, ib), yg = tb.za, kb = Math.max(yg.width + ag, 0), wc = Math.max(yg.height + Ef, 0), e.width += kb, e.height = Math.max(e.height, wc);
                        w.va(fb)
                    }
                    break;
                case "Spot":
                    a:{
                        var bg = a, Bb = b, Mb = c, te = d, zg = m.length, Fd = this.Hd(), mb = Fd.margin, Jc = 0, Ff = 0, Me = mb.right + mb.left, Wh = mb.top + mb.bottom;
                        rk(Fd, bg, Bb, Mb, te);
                        for (var Sa = Fd.za, cb = Sa.width, xc = Sa.height, sc = Math.max(cb + Me, 0), Vc = Math.max(xc + Wh, 0), jh = this.Zt, Ya = w.Vg(-mb.left, -mb.top, sc, Vc), xb = !0, ub = Hp(this), yc = 0; yc < zg; yc++) {
                            var yb = m[yc];
                            if (yb !== Fd && (yb.visible || yb === ub)) {
                                mb = yb.margin;
                                Jc = mb.right + mb.left;
                                Ff = mb.top + mb.bottom;
                                rk(yb, bg, Bb, 0, 0);
                                var Sa = yb.za, sc = Math.max(Sa.width + Jc, 0), Vc = Math.max(Sa.height + Ff, 0), ob = yb.alignment;
                                ob.Uc() && (ob = this.Ll);
                                ob.fd() || (ob = Fb);
                                var Gb = yb.oh;
                                Gb.Uc() && (Gb = Fb);
                                var be = null;
                                yb instanceof C && "" !== yb.Hj && (yb.gc(0,
                                    0, Sa.width, Sa.height), be = yb.sd(yb.Hj), be === yb && (be = null));
                                var Cb, Qb;
                                if (null !== be) {
                                    for (var fd = be.Ia, Xh = be.margin, Nb = w.xb(Gb.x * fd.width + Gb.offsetX - Xh.left, Gb.y * fd.height + Gb.offsetY - Xh.top); be !== yb;)be.transform.nb(Nb), be = be.O;
                                    Cb = ob.x * cb + ob.offsetX - Nb.x;
                                    Qb = ob.y * xc + ob.offsetY - Nb.y;
                                    w.v(Nb)
                                } else Cb = ob.x * cb + ob.offsetX - (Gb.x * Sa.width - Gb.offsetX) - mb.left, Qb = ob.y * xc + ob.offsetY - (Gb.y * Sa.height - Gb.offsetY) - mb.top;
                                xb ? (xb = !1, e.x = Cb, e.y = Qb, e.width = sc, e.height = Vc) : bb(e, Cb, Qb, sc, Vc)
                            }
                        }
                        xb ? e.assign(Ya) : jh ? e.$E(Ya.x,
                            Ya.y, Ya.width, Ya.height) : bb(e, Ya.x, Ya.y, Ya.width, Ya.height);
                        w.Gb(Ya);
                        var Ob = Fd.stretch;
                        Ob === lo && (Ob = Bo(Fd, !1));
                        switch (Ob) {
                            case Ij:
                                break a;
                            case Ie:
                                if (!isFinite(bg) && !isFinite(Bb))break a;
                                break;
                            case no:
                                if (!isFinite(bg))break a;
                                break;
                            case mo:
                                if (!isFinite(Bb))break a
                        }
                        Sa = Fd.za;
                        cb = Sa.width;
                        xc = Sa.height;
                        sc = Math.max(cb + Me, 0);
                        Vc = Math.max(xc + Wh, 0);
                        mb = Fd.margin;
                        Ya = w.Vg(-mb.left, -mb.top, sc, Vc);
                        for (yc = 0; yc < zg; yc++)yb = m[yc], yb === Fd || !yb.visible && yb !== ub || (mb = yb.margin, Jc = mb.right + mb.left, Ff = mb.top + mb.bottom, Sa =
                            yb.za, sc = Math.max(Sa.width + Jc, 0), Vc = Math.max(Sa.height + Ff, 0), ob = yb.alignment, ob.Uc() && (ob = this.Ll), ob.fd() || (ob = Fb), Gb = yb.oh, Gb.Uc() && (Gb = Fb), xb ? (xb = !1, e.x = ob.x * cb + ob.offsetX - (Gb.x * Sa.width - Gb.offsetX) - mb.left, e.y = ob.y * xc + ob.offsetY - (Gb.y * Sa.height - Gb.offsetY) - mb.top, e.width = sc, e.height = Vc) : bb(e, ob.x * cb + ob.offsetX - (Gb.x * Sa.width - Gb.offsetX) - mb.left, ob.y * xc + ob.offsetY - (Gb.y * Sa.height - Gb.offsetY) - mb.top, sc, Vc));
                        xb ? e.assign(Ya) : jh ? e.$E(Ya.x, Ya.y, Ya.width, Ya.height) : bb(e, Ya.x, Ya.y, Ya.width, Ya.height);
                        w.Gb(Ya)
                    }
                    break;
                case "Auto":
                    var zc = a, Wc = b, rd = c, Ag = d, Yh = m.length, pb = this.Hd(), Xc = pb.margin, Zh = zc, Ne = Wc, ec = Xc.right + Xc.left, ue = Xc.top + Xc.bottom;
                    rk(pb, zc, Wc, rd, Ag);
                    var Wb = pb.za, Ac = 0, sd = null;
                    pb instanceof X && (sd = pb, Ac = sd.kb * sd.scale);
                    var fc = Math.max(Wb.width + ec, 0), Ta = Math.max(Wb.height + ue, 0), gc = Ip(pb), $h = gc.x * fc + gc.offsetX, bf = gc.y * Ta + gc.offsetY, Gd = Jp(pb), Oe = Gd.x * fc + Gd.offsetX, kh = Gd.y * Ta + Gd.offsetY;
                    isFinite(zc) && (Zh = Math.max(Math.abs($h - Oe) - Ac, 0));
                    isFinite(Wc) && (Ne = Math.max(Math.abs(bf - kh) - Ac, 0));
                    var Hd =
                        w.im();
                    Hd.l(0, 0);
                    for (var lh = Hp(this), jj = 0; jj < Yh; jj++) {
                        var mh = m[jj];
                        if (mh !== pb && (mh.visible || mh === lh)) {
                            var Xc = mh.margin, Dk = Xc.right + Xc.left, zb = Xc.top + Xc.bottom;
                            rk(mh, Zh, Ne, 0, 0);
                            Wb = mh.za;
                            fc = Math.max(Wb.width + Dk, 0);
                            Ta = Math.max(Wb.height + zb, 0);
                            Hd.l(Math.max(fc, Hd.width), Math.max(Ta, Hd.height))
                        }
                    }
                    if (1 === Yh)e.width = fc, e.height = Ta, w.zk(Hd); else {
                        var gc = Ip(pb), Gd = Jp(pb), ce = 0, gd = 0;
                        Gd.x !== gc.x && Gd.y !== gc.y && (ce = Hd.width / Math.abs(Gd.x - gc.x), gd = Hd.height / Math.abs(Gd.y - gc.y));
                        w.zk(Hd);
                        Ac = 0;
                        null !== sd && (Ac = sd.kb *
                            sd.scale, Jj(sd) === Kj && (ce = gd = Math.max(ce, gd)));
                        var ce = ce + (Math.abs(gc.offsetX) + Math.abs(Gd.offsetX) + Ac), gd = gd + (Math.abs(gc.offsetY) + Math.abs(Gd.offsetY) + Ac), Pe = pb.stretch;
                        Pe === lo && (Pe = Bo(pb, !1));
                        switch (Pe) {
                            case Ij:
                                Ag = rd = 0;
                                break;
                            case Ie:
                                isFinite(zc) && (ce = zc);
                                isFinite(Wc) && (gd = Wc);
                                break;
                            case no:
                                isFinite(zc) && (ce = zc);
                                Ag = 0;
                                break;
                            case mo:
                                rd = 0, isFinite(Wc) && (gd = Wc)
                        }
                        pb.bq();
                        rk(pb, ce, gd, rd, Ag);
                        e.width = pb.za.width + ec;
                        e.height = pb.za.height + ue
                    }
                    break;
                case "Table":
                    for (var ai = a, bi = b, kj = c, lj = d, Db = m.length, nh = w.lb(),
                             oh = w.lb(), ma = 0; ma < Db; ma++) {
                        var aa = m[ma], de = aa instanceof C ? aa : null;
                        if (null === de || de.type !== Go && de.type !== Ho || !aa.visible)nh.push(aa); else {
                            oh.push(de);
                            for (var cg = de.wa.n, ci = cg.length, hc = 0; hc < ci; hc++) {
                                var di = cg[hc];
                                de.type === Go ? di.Yb = aa.Yb : de.type === Ho && (di.column = aa.column);
                                nh.push(di)
                            }
                        }
                    }
                    Db = nh.length;
                    0 === Db && (this.be(0), this.ae(0));
                    for (var ic = [], ma = 0; ma < Db; ma++)aa = nh[ma], Xl(aa, !0), Co(aa, !0), ic[aa.Yb] || (ic[aa.Yb] = []), ic[aa.Yb][aa.column] || (ic[aa.Yb][aa.column] = []), ic[aa.Yb][aa.column].push(aa);
                    w.va(nh);
                    for (var cf = w.lb(), Qe = w.lb(), df = w.lb(), ve = {count: 0}, we = {count: 0}, Yc = ai, Id = bi, ph = this.Yd, Db = ph.length, ma = 0; ma < Db; ma++) {
                        var Z = ph[ma];
                        void 0 !== Z && (Z.Ja = 0)
                    }
                    ph = this.Td;
                    Db = ph.length;
                    for (ma = 0; ma < Db; ma++)Z = ph[ma], void 0 !== Z && (Z.Ja = 0);
                    for (var ef = ic.length, dg = 0, ma = 0; ma < ef; ma++)ic[ma] && (dg = Math.max(dg, ic[ma].length));
                    for (var qh = Math.min(this.ej, ef - 1), rh = Math.min(this.Ni, dg - 1), Jd = 0, ef = ic.length, Ek = Hp(this), ma = 0; ma < ef; ma++)if (ic[ma])for (var dg = ic[ma].length, qb = this.be(ma), hc = qb.Ja = 0; hc < dg; hc++)if (ic[ma][hc]) {
                        var Ua =
                            this.ae(hc);
                        void 0 === cf[hc] && (Ua.Ja = 0, cf[hc] = !0);
                        for (var bm = ic[ma][hc], Fk = bm.length, mj = 0; mj < Fk; mj++)if (aa = bm[mj], aa.visible || aa === Ek) {
                            var ei = 1 < aa.aj || 1 < aa.xi;
                            ei && (ma < qh || hc < rh || Qe.push(aa));
                            var tc = aa.margin, xe = tc.right + tc.left, td = tc.top + tc.bottom, Kc = Qo(aa, qb, Ua, !1), Gk = aa.Aa, cm = !isNaN(Gk.height), dm = !isNaN(Gk.width) && cm;
                            ei || Kc === Ij || dm || ma < qh || hc < rh || (void 0 !== ve[hc] || Kc !== Ie && Kc !== no || (ve[hc] = -1, ve.count++), void 0 !== we[ma] || Kc !== Ie && Kc !== mo || (we[ma] = -1, we.count++), df.push(aa));
                            rk(aa, Infinity, Infinity,
                                0, 0);
                            if (!(ma < qh || hc < rh)) {
                                var Gf = aa.za, Rb = Math.max(Gf.width + xe, 0), Kd = Math.max(Gf.height + td, 0);
                                if (1 === aa.aj && (Kc === Ij || Kc === no)) {
                                    var Z = this.be(ma), Ld = Z.Xe(), Jd = Math.max(Kd - Z.Ja, 0);
                                    Jd + Ld > Id && (Jd = Math.max(Id - Ld, 0));
                                    var Bc = 0 === Z.Ja;
                                    Z.Ja += Jd;
                                    Id = Math.max(Id - (Jd + (Bc ? Ld : 0)), 0)
                                }
                                1 !== aa.xi || Kc !== Ij && Kc !== mo || (Z = this.ae(hc), Ld = Z.Xe(), Jd = Math.max(Rb - Z.Ja, 0), Jd + Ld > Yc && (Jd = Math.max(Yc - Ld, 0)), Bc = 0 === Z.Ja, Z.Ja += Jd, Yc = Math.max(Yc - (Jd + (Bc ? Ld : 0)), 0));
                                ei && aa.bq()
                            }
                        }
                    }
                    w.va(cf);
                    for (var ee = 0, ud = 0, Db = this.Lp, ma = 0; ma < Db; ma++) {
                        var Bg =
                            this.Td[ma];
                        void 0 !== Bg && (ee += Bg.Sa, 0 !== Bg.Sa && (ee += Bg.Xe()))
                    }
                    Db = this.qq;
                    for (ma = 0; ma < Db; ma++) {
                        var nj = this.Yd[ma];
                        void 0 !== nj && (ud += nj.Sa, 0 !== nj.Sa && (ud += nj.Xe()))
                    }
                    for (var Yc = Math.max(ai - ee, 0), sh = Id = Math.max(bi - ud, 0), th = Yc, Db = df.length, ma = 0; ma < Db; ma++) {
                        var aa = df[ma], qb = this.be(aa.Yb), Ua = this.ae(aa.column), fi = aa.za, tc = aa.margin, xe = tc.right + tc.left, td = tc.top + tc.bottom;
                        ve[aa.column] = 0 === Ua.Ja && void 0 !== ve[aa.column] ? Math.max(fi.width + xe, ve[aa.column]) : null;
                        we[aa.Yb] = 0 === qb.Ja && void 0 !== we[aa.Yb] ? Math.max(fi.height +
                            td, we[aa.Yb]) : null
                    }
                    var gi = 0, eg = 0, jc;
                    for (jc in we)"count" !== jc && (gi += we[jc]);
                    for (jc in ve)"count" !== jc && (eg += ve[jc]);
                    for (var Va = w.im(), ma = 0; ma < Db; ma++)if (aa = df[ma], aa.visible || aa === Ek) {
                        var qb = this.be(aa.Yb), Ua = this.ae(aa.column), Md = 0;
                        isFinite(Ua.width) ? Md = Ua.width : (Md = isFinite(Yc) && null !== ve[aa.column] ? 0 === eg ? Ua.Ja + Yc : ve[aa.column] / eg * th : null !== ve[aa.column] ? Yc : Ua.Ja || Yc, Md = Math.max(0, Md - Ua.Xe()));
                        var Nd = 0;
                        isFinite(qb.height) ? Nd = qb.height : (Nd = isFinite(Id) && null !== we[aa.Yb] ? 0 === gi ? qb.Ja + Id : we[aa.Yb] /
                        gi * sh : null !== we[aa.Yb] ? Id : qb.Ja || Id, Nd = Math.max(0, Nd - qb.Xe()));
                        Va.l(Math.max(Ua.xj, Math.min(Md, Ua.mf)), Math.max(qb.xj, Math.min(Nd, qb.mf)));
                        Kc = Qo(aa, qb, Ua, !1);
                        switch (Kc) {
                            case no:
                                Va.height = Math.max(Va.height, qb.Ja + Id);
                                break;
                            case mo:
                                Va.width = Math.max(Va.width, Ua.Ja + Yc)
                        }
                        tc = aa.margin;
                        xe = tc.right + tc.left;
                        td = tc.top + tc.bottom;
                        aa.bq();
                        rk(aa, Va.width, Va.height, Ua.xj, qb.xj);
                        Gf = aa.za;
                        Rb = Math.max(Gf.width + xe, 0);
                        Kd = Math.max(Gf.height + td, 0);
                        isFinite(Yc) && (Rb = Math.min(Rb, Va.width));
                        isFinite(Id) && (Kd = Math.min(Kd,
                            Va.height));
                        var ff = 0, ff = qb.Ja;
                        qb.Ja = Math.max(qb.Ja, Kd);
                        Jd = qb.Ja - ff;
                        Id = Math.max(Id - Jd, 0);
                        ff = Ua.Ja;
                        Ua.Ja = Math.max(Ua.Ja, Rb);
                        Jd = Ua.Ja - ff;
                        Yc = Math.max(Yc - Jd, 0)
                    }
                    w.va(df);
                    for (var Hf = w.im(), Db = Qe.length, ma = 0; ma < Db; ma++)if (aa = Qe[ma], aa.visible || aa === Ek) {
                        qb = this.be(aa.Yb);
                        Ua = this.ae(aa.column);
                        Va.l(Math.max(Ua.xj, Math.min(ai, Ua.mf)), Math.max(qb.xj, Math.min(bi, qb.mf)));
                        Kc = Qo(aa, qb, Ua, !1);
                        switch (Kc) {
                            case Ie:
                                0 !== Ua.Ja && (Va.width = Math.min(Va.width, Ua.Ja));
                                0 !== qb.Ja && (Va.height = Math.min(Va.height, qb.Ja));
                                break;
                            case no:
                                0 !== Ua.Ja && (Va.width = Math.min(Va.width, Ua.Ja));
                                break;
                            case mo:
                                0 !== qb.Ja && (Va.height = Math.min(Va.height, qb.Ja))
                        }
                        isFinite(Ua.width) && (Va.width = Ua.width);
                        isFinite(qb.height) && (Va.height = qb.height);
                        Hf.l(0, 0);
                        for (var nb = 1; nb < aa.aj && !(aa.Yb + nb >= this.qq); nb++)Z = this.be(aa.Yb + nb), Hf.height += Math.max(Z.xj, isNaN(Z.gf) ? Z.mf : Math.min(Z.gf, Z.mf));
                        for (nb = 1; nb < aa.xi && !(aa.column + nb >= this.Lp); nb++)Z = this.ae(aa.column + nb), Hf.width += Math.max(Z.xj, isNaN(Z.gf) ? Z.mf : Math.min(Z.gf, Z.mf));
                        Va.width += Hf.width;
                        Va.height +=
                            Hf.height;
                        tc = aa.margin;
                        xe = tc.right + tc.left;
                        td = tc.top + tc.bottom;
                        rk(aa, Va.width, Va.height, kj, lj);
                        for (var Gf = aa.za, Rb = Math.max(Gf.width + xe, 0), Kd = Math.max(Gf.height + td, 0), gf = 0, nb = 0; nb < aa.aj && !(aa.Yb + nb >= this.qq); nb++)Z = this.be(aa.Yb + nb), gf += Z.total || 0;
                        if (gf < Kd) {
                            var hd = Kd - gf, Cg = Kd - gf;
                            if (null !== aa.iy)for (var hf = aa.iy, nb = 0; nb < aa.aj && !(0 >= hd) && !(aa.Yb + nb >= this.qq); nb++) {
                                var Z = this.be(aa.Yb + nb), Cc = Z.Sa || 0, hi = hf(aa, Z, Cg);
                                Z.Ja = Math.min(Z.mf, Cc + hi);
                                Z.Sa !== Cc && (hd -= Z.Sa - Cc)
                            }
                            for (; 0 < hd;) {
                                Cc = Z.Sa || 0;
                                isNaN(Z.height) &&
                                Z.mf > Cc && (Z.Ja = Math.min(Z.mf, Cc + hd), Z.Sa !== Cc && (hd -= Z.Sa - Cc));
                                if (0 === Z.index)break;
                                Z = this.be(Z.index - 1)
                            }
                        }
                        for (var Re = 0, nb = 0; nb < aa.xi && !(aa.column + nb >= this.Lp); nb++)Z = this.ae(aa.column + nb), Re += Z.total || 0;
                        if (Re < Rb) {
                            hd = Rb - Re;
                            Cg = Rb - Re;
                            if (null !== aa.iy)for (hf = aa.iy, nb = 0; nb < aa.xi && !(0 >= hd) && !(aa.column + nb >= this.Lp); nb++)Z = this.ae(aa.column + nb), Cc = Z.Sa || 0, hi = hf(aa, Z, Cg), Z.Ja = Math.min(Z.mf, Cc + hi), Z.Sa !== Cc && (hd -= Z.Sa - Cc);
                            for (; 0 < hd;) {
                                Cc = Z.Sa || 0;
                                isNaN(Z.width) && Z.mf > Cc && (Z.Ja = Math.min(Z.mf, Cc + hd), Z.Sa !== Cc &&
                                (hd -= Z.Sa - Cc));
                                if (0 === Z.index)break;
                                Z = this.ae(Z.index - 1)
                            }
                        }
                    }
                    w.va(Qe);
                    w.zk(Hf);
                    w.zk(Va);
                    for (var Dg = 0, Eg = 0, Kc = Bo(this, !0), oj = this.Aa, Hk = this.Af, ye = ud = ee = 0, Zc = 0, Db = this.Lp, ma = 0; ma < Db; ma++)void 0 !== this.Td[ma] && (Z = this.ae(ma), isFinite(Z.width) ? (ye += Z.width, ye += Z.Xe()) : Kp(Z) === Lp ? (ye += Z.Sa, ye += Z.Xe()) : 0 !== Z.Sa && (ee += Z.Sa, ee += Z.Xe()));
                    var Dg = isFinite(oj.width) ? Math.min(oj.width, Hk.width) : Kc !== Ij && isFinite(ai) ? ai : ee, Dg = Math.max(Dg, this.zh.width), Dg = Math.max(Dg - ye, 0), Ik = Math.max(Dg / ee, 1);
                    isFinite(Ik) || (Ik =
                        1);
                    for (ma = 0; ma < Db; ma++)void 0 !== this.Td[ma] && (Z = this.ae(ma), isFinite(Z.width) || Kp(Z) === Lp || (Z.Ja = Z.Sa * Ik), Z.position = e.width, 0 !== Z.Sa && (e.width += Z.Sa, e.width += Z.Xe()));
                    Db = this.qq;
                    for (ma = 0; ma < Db; ma++)void 0 !== this.Yd[ma] && (Z = this.be(ma), isFinite(Z.height) ? (Zc += Z.height, Zc += Z.Xe()) : Kp(Z) === Lp ? (Zc += Z.Sa, Zc += Z.Xe()) : 0 !== Z.Sa && (ud += Z.Sa, 0 !== Z.Sa && (ud += Z.Xe())));
                    var Eg = isFinite(oj.height) ? Math.min(oj.height, Hk.height) : Kc !== Ij && isFinite(bi) ? bi : ud, Eg = Math.max(Eg, this.zh.height), Eg = Math.max(Eg - Zc, 0), uh = Math.max(Eg /
                        ud, 1);
                    isFinite(uh) || (uh = 1);
                    for (ma = 0; ma < Db; ma++)void 0 !== this.Yd[ma] && (Z = this.be(ma), isFinite(Z.height) || Kp(Z) === Lp || (Z.Ja = Z.Sa * uh), Z.position = e.height, 0 !== Z.Sa && (e.height += Z.Sa, 0 !== Z.Sa && (e.height += Z.Xe())));
                    Db = oh.length;
                    for (ma = 0; ma < Db; ma++) {
                        var id = oh[ma];
                        id.type === Go ? (Md = e.width, Z = this.be(id.Yb), Nd = Z.Ja) : (Z = this.ae(id.column), Md = Z.Ja, Nd = e.height);
                        id.od.l(0, 0, Md, Nd);
                        Xl(id, !1);
                        ic[id.Yb] || (ic[id.Yb] = []);
                        ic[id.Yb][id.column] || (ic[id.Yb][id.column] = []);
                        ic[id.Yb][id.column].push(id)
                    }
                    w.va(oh);
                    this.Os = ic;
                    break;
                case "Viewbox":
                    var pj = a, fm = b, ht = c, it = d;
                    1 < m.length && w.k("Viewbox Panel cannot contain more than one GraphObject.");
                    var jf = m[0];
                    jf.tb = 1;
                    jf.bq();
                    rk(jf, Infinity, Infinity, ht, it);
                    var Jk = jf.za, gm = jf.margin, jt = gm.right + gm.left, kt = gm.top + gm.bottom;
                    if (isFinite(pj) || isFinite(fm)) {
                        var aw = jf.scale, hm = Jk.width, im = Jk.height, lt = Math.max(pj - jt, 0), mt = Math.max(fm - kt, 0), Kk = 1;
                        this.Cp === Kj ? 0 !== hm && 0 !== im && (Kk = Math.min(lt / hm, mt / im)) : 0 !== hm && 0 !== im && (Kk = Math.max(lt / hm, mt / im));
                        0 === Kk && (Kk = 1E-4);
                        jf.tb *= Kk;
                        aw !== jf.scale &&
                        (Xl(jf, !0), rk(jf, Infinity, Infinity, ht, it))
                    }
                    Jk = jf.za;
                    e.width = isFinite(pj) ? pj : Math.max(Jk.width + jt, 0);
                    e.height = isFinite(fm) ? fm : Math.max(Jk.height + kt, 0);
                    break;
                case "Link":
                    var nt = m.length;
                    if (this instanceof dh || this instanceof W) {
                        var ji = null;
                        this instanceof W && (ji = this);
                        this instanceof dh && (ji = this.Nf);
                        if (ji instanceof W) {
                            var Lk = ji;
                            if (0 === nt) {
                                var jm = this.Ia;
                                Pa(jm, 0, 0);
                                var ze = this.za;
                                ze.l(0, 0, 0, 0)
                            } else {
                                var km = this instanceof dh ? null : ji.path, Fg = ji.Un, kf = this.fj;
                                kf.assign(Fg);
                                kf.x = 0;
                                kf.y = 0;
                                var vh = Lk.points,
                                    ki = ji.qa;
                                this.lu(!1);
                                var ot = Fg.width, pt = Fg.height;
                                this.Ri.l(Fg.x, Fg.y);
                                null === this.$g && (this.$g = new I(A));
                                this.$g.clear();
                                null !== km && (Mp(km, ot, pt, this), ze = km.za, kf.Gh(ze), this.$g.add(ze));
                                for (var Gg = w.Ef(), Mk = w.K(), Hg = w.K(), hp = 0; hp < nt; hp++) {
                                    var Xb = m[hp];
                                    if (Xb !== km)if (Xb.Uf && Xb instanceof X)Mp(Xb, ot, pt, this), ze = Xb.za, kf.Gh(ze), this.$g.add(ze); else if (2 > ki)rk(Xb, Infinity, Infinity), ze = Xb.za, kf.Gh(ze), this.$g.add(ze); else {
                                        var vd = Xb.Me, rt = Xb.XA, ip = Xb.oh;
                                        ip.Nd() && (ip = Fb);
                                        var fg = Xb.rq, bw = Xb.YA, Nk = 0, Ok = 0,
                                            lm = 0;
                                        if (vd < -ki || vd >= ki) {
                                            var st = Lk.wF, If = Lk.vF;
                                            fg !== dj && (lm = Lk.computeAngle(Xb, fg, If), Xb.gg = lm);
                                            Nk = st.x - Fg.x;
                                            Ok = st.y - Fg.y
                                        } else {
                                            var Od, lf;
                                            if (0 <= vd)Od = vh.da(vd), lf = vd < ki - 1 ? vh.da(vd + 1) : Od; else {
                                                var li = ki + vd;
                                                Od = vh.da(li);
                                                lf = 0 < li ? vh.da(li - 1) : Od
                                            }
                                            if (Od.Ic(lf)) {
                                                var mi, ni;
                                                0 <= vd ? (mi = 0 < vd ? vh.da(vd - 1) : Od, ni = vd < ki - 2 ? vh.da(vd + 2) : lf) : (mi = li < ki - 1 ? vh.da(li + 1) : Od, ni = 1 < li ? vh.da(li - 2) : lf);
                                                var tt = mi.uf(Od), ut = lf.uf(ni), If = tt > ut + 10 ? 0 <= vd ? mi.yc(Od) : Od.yc(mi) : ut > tt + 10 ? 0 <= vd ? lf.yc(ni) : ni.yc(lf) : 0 <= vd ? mi.yc(ni) : ni.yc(mi)
                                            } else If =
                                                0 <= vd ? Od.yc(lf) : lf.yc(Od);
                                            fg !== dj && (lm = Lk.computeAngle(Xb, fg, If), Xb.gg = lm);
                                            Nk = Od.x + (lf.x - Od.x) * rt - Fg.x;
                                            Ok = Od.y + (lf.y - Od.y) * rt - Fg.y
                                        }
                                        rk(Xb, Infinity, Infinity);
                                        var ze = Xb.za, jm = Xb.Ia, Pk = 0;
                                        Xb instanceof X && (Pk = Xb.kb);
                                        var oi = jm.width + Pk, qj = jm.height + Pk;
                                        Gg.reset();
                                        Gg.translate(-ze.x, -ze.y);
                                        Gg.scale(Xb.scale, Xb.scale);
                                        Gg.rotate(fg === dj ? Xb.angle : If, oi / 2, qj / 2);
                                        fg !== Np && fg !== Op || Gg.rotate(90, oi / 2, qj / 2);
                                        fg !== Pp && fg !== Qp || Gg.rotate(-90, oi / 2, qj / 2);
                                        fg === Rp && (45 < If && 135 > If || 225 < If && 315 > If) && Gg.rotate(-If, oi / 2, qj /
                                            2);
                                        var vj = new A(0, 0, oi, qj);
                                        Mk.Vn(vj, ip);
                                        Gg.nb(Mk);
                                        var cw = -Mk.x + Pk / 2, dw = -Mk.y + Pk / 2;
                                        Hg.assign(bw);
                                        isNaN(Hg.x) && (Hg.x = 0 <= vd ? oi / 2 + 3 : -(oi / 2 + 3));
                                        isNaN(Hg.y) && (Hg.y = -(qj / 2 + 3));
                                        Hg.rotate(If);
                                        Nk += Hg.x;
                                        Ok += Hg.y;
                                        vj.set(ze);
                                        vj.x = Nk + cw;
                                        vj.y = Ok + dw;
                                        this.$g.add(vj);
                                        kf.Gh(vj)
                                    }
                                }
                                if (this instanceof W)for (var vt = this.Vf; vt.next();)rk(vt.value, Infinity, Infinity);
                                this.fj = kf;
                                var jp = this.Ri;
                                jp.l(jp.x + kf.x, jp.y + kf.y);
                                Pa(e, kf.width || 0, kf.height || 0);
                                w.ue(Gg);
                                w.v(Mk);
                                w.v(Hg)
                            }
                        }
                    }
                    break;
                case "Grid":
                    break;
                case "Graduated":
                    var ew =
                        a, fw = b, gw = c, hw = d, Ig = this.Hd();
                    this.xm = [];
                    var wj = Ig.margin, iw = wj.right + wj.left, jw = wj.top + wj.bottom;
                    rk(Ig, ew, fw, gw, hw);
                    var wt = Ig.za, kw = wt.height, lw = Math.max(wt.width + iw, 0), mw = Math.max(kw + jw, 0), xt = new A(-wj.left, -wj.top, lw, mw);
                    this.xm.push(xt);
                    e.assign(xt);
                    for (var Rk = Ig.vf, yt = Ig.kb, kp = Rk.gA, xj = Rk.lx, pi = Rk.hA, nw = kp.length, lp = 0, mp = 0, yj = w.lb(), np = 0; np < nw; np++) {
                        for (var op = kp[np], zt = [], mp = lp = 0, ow = op.length, zj = 0; zj < ow; zj += 2) {
                            var At = op[zj], Bt = op[zj + 1];
                            if (0 !== zj) {
                                var wd = 180 * Math.atan2(Bt - mp, At - lp) / Math.PI;
                                0 >
                                wd && (wd += 360);
                                zt.push(wd)
                            }
                            lp = At;
                            mp = Bt
                        }
                        yj.push(zt)
                    }
                    var Ct;
                    if (null === this.Sj) {
                        for (var Dt = [], pp = this.wa.n, Et = pp.length, qp = 0; qp < Et; qp++) {
                            var Sk = pp[qp], Ft = [];
                            Dt.push(Ft);
                            if (Sk.visible)for (var pw = Sk.interval, rp = 0; rp < Et; rp++) {
                                var Tk = pp[rp];
                                if (Tk.visible && Sk !== Tk && !(Sk instanceof X && !(Tk instanceof X) || Sk instanceof Ch && !(Tk instanceof Ch))) {
                                    var Gt = Tk.interval;
                                    Gt > pw && Ft.push(Gt)
                                }
                            }
                        }
                        this.Sj = Dt
                    }
                    Ct = this.Sj;
                    var Ht = this.wa.n, qw = Ht.length, wh = 0, It = 0, Jt = pi;
                    this.zm = [];
                    for (var mm = [], nm = 0; nm < qw; nm++) {
                        var xh = Ht[nm], mm =
                            [];
                        if (xh.visible && xh !== Ig) {
                            var Kt = xh.interval, Lt = this.oA;
                            if (!(2 > Lt * Kt * pi / this.ox)) {
                                var fe = this.UE, Mt = Ct[nm], qi = xj[0][0], Jf = 0, xd = 0, It = pi * xh.TE - 1E-4, Jt = pi * xh.RE + 1E-4, Aj = Lt * Kt;
                                if (fe < this.Bk)var ri = (this.Bk - fe) / Aj, ri = 0 === ri % 1 ? ri : Math.floor(ri + 1), fe = fe + ri * Aj; else fe > this.Bk + Aj && (ri = Math.floor((fe - this.Bk) / Aj), fe -= ri * Aj);
                                for (; fe <= this.nA;) {
                                    var sp;
                                    a:{
                                        for (var rw = Mt.length, tp = 0; tp < rw; tp++)if (Xa((fe - this.UE) % (Mt[tp] * this.oA), 0)) {
                                            sp = !1;
                                            break a
                                        }
                                        sp = !0
                                    }
                                    if (sp && (wh = (fe - this.Bk) * pi / this.ox, wh > pi && (wh = pi), It <= wh &&
                                        wh <= Jt)) {
                                        for (var wd = yj[Jf][xd], Bj = xj[Jf][xd]; Jf < xj.length;) {
                                            for (; wh > qi && xd < xj[Jf].length - 1;)xd++, wd = yj[Jf][xd], Bj = xj[Jf][xd], qi += Bj;
                                            if (wh <= qi)break;
                                            Jf++;
                                            xd = 0;
                                            wd = yj[Jf][xd];
                                            Bj = xj[Jf][xd];
                                            qi += Bj
                                        }
                                        var Pd = kp[Jf], Nt = Pd[2 * xd], Ot = Pd[2 * xd + 1], om = (wh - (qi - Bj)) / Bj, up = new z(Nt + (Pd[2 * xd + 2] - Nt) * om + yt / 2 - Rk.jb.x, Ot + (Pd[2 * xd + 3] - Ot) * om + yt / 2 - Rk.jb.y);
                                        up.scale(Ig.scale, Ig.scale);
                                        var gg = wd, Cj = yj[Jf];
                                        1E-4 > om ? 0 < xd ? gg = Cj[xd - 1] : Xa(Pd[0], Pd[Pd.length - 2]) && Xa(Pd[1], Pd[Pd.length - 1]) && (gg = Cj[Cj.length - 1]) : .9999 < om && (xd + 1 < Cj.length ?
                                            gg = Cj[xd + 1] : Xa(Pd[0], Pd[Pd.length - 2]) && Xa(Pd[1], Pd[Pd.length - 1]) && (gg = Cj[0]));
                                        wd !== gg && (180 < Math.abs(wd - gg) && (wd < gg ? wd += 360 : gg += 360), wd = (wd + gg) / 2 % 360);
                                        if (xh instanceof Ch) {
                                            var vp = "", vp = null !== xh.SE ? xh.SE(fe) : (+fe.toFixed(2)).toString();
                                            "" !== vp && mm.push([up, wd, vp])
                                        } else mm.push([up, wd])
                                    }
                                    fe += Aj
                                }
                            }
                        }
                        this.zm.push(mm)
                    }
                    w.va(yj);
                    for (var sw = this.zm, tw = m.length, pm = 0; pm < tw; pm++) {
                        var si = m[pm], wp = sw[pm];
                        if (si.visible && si !== Ig && 0 !== wp.length) {
                            if (si instanceof X) {
                                var yh = si, Pt = wp, uw = e, xp = yh.oh;
                                xp.Nd() && (xp = wb);
                                var vw =
                                    yh.angle;
                                yh.gg = 0;
                                rk(yh, Infinity, Infinity);
                                yh.gg = vw;
                                var Qt = yh.za, yp = Qt.width, zp = Qt.height, Rt = w.Vg(0, 0, yp, zp), ge = w.K();
                                ge.Vn(Rt, xp);
                                w.Gb(Rt);
                                for (var qm = -ge.x, rm = -ge.y, ti = new A, ww = Pt.length, sm = 0; sm < ww; sm++)for (var Ap = Pt[sm], St = Ap[0].x, Tt = Ap[0].y, Ut = Ap[1], tm = 0; 4 > tm; tm++) {
                                    switch (tm) {
                                        case 0:
                                            ge.l(qm, rm);
                                            break;
                                        case 1:
                                            ge.l(qm + yp, rm);
                                            break;
                                        case 2:
                                            ge.l(qm, rm + zp);
                                            break;
                                        case 3:
                                            ge.l(qm + yp, rm + zp)
                                    }
                                    ge.rotate(Ut + yh.angle);
                                    ge.offset(St, Tt);
                                    0 === sm && 0 === tm ? ti.l(ge.x, ge.y, 0, 0) : ti.ri(ge);
                                    ge.offset(-St, -Tt);
                                    ge.rotate(-Ut -
                                        yh.angle)
                                }
                                w.v(ge);
                                this.xm.push(ti);
                                bb(uw, ti.x, ti.y, ti.width, ti.height)
                            } else if (si instanceof Ch) {
                                var Uk = si, Vt = wp, xw = e;
                                null === this.kk && (this.kk = new Ch);
                                var Kf = this.kk;
                                Ep(Uk, Kf);
                                var Bp = Uk.oh;
                                Bp.Nd() && (Bp = wb);
                                for (var zh = Uk.rq, yw = Uk.YA, ui = null, um = 0, vm = 0, Jg = 0, Cp = 0, zw = Vt.length, wm = 0; wm < zw; wm++) {
                                    var hg = Vt[wm], um = hg[0].x, vm = hg[0].y, Jg = hg[1];
                                    zh !== dj && (Cp = Uk.computeAngle(zh, Jg), Kf.gg = Cp);
                                    Kf.text = hg[2];
                                    rk(Kf, Infinity, Infinity);
                                    var Ah = Kf.za, Dj = Kf.Ia, Ej = Dj.width, Fj = Dj.height, Kg = w.Ef();
                                    Kg.reset();
                                    Kg.translate(-Ah.x,
                                        -Ah.y);
                                    Kg.scale(Kf.scale, Kf.scale);
                                    Kg.rotate(zh === dj ? Kf.angle : Jg, Ej / 2, Fj / 2);
                                    zh !== Np && zh !== Op || Kg.rotate(90, Ej / 2, Fj / 2);
                                    zh !== Pp && zh !== Qp || Kg.rotate(-90, Ej / 2, Fj / 2);
                                    zh === Rp && (45 < Jg && 135 > Jg || 225 < Jg && 315 > Jg) && Kg.rotate(-Jg, Ej / 2, Fj / 2);
                                    var Wt = w.Vg(0, 0, Ej, Fj), Vk = w.K();
                                    Vk.Vn(Wt, Bp);
                                    Kg.nb(Vk);
                                    var Aw = -Vk.x, Bw = -Vk.y, Lg = w.K();
                                    Lg.assign(yw);
                                    isNaN(Lg.x) && (Lg.x = Ej / 2 + 3);
                                    isNaN(Lg.y) && (Lg.y = -(Fj / 2 + 3));
                                    Lg.rotate(Jg);
                                    var um = um + (Lg.x + Aw), vm = vm + (Lg.y + Bw), Dp = new A(um, vm, Ah.width, Ah.height), Cw = new A(Ah.x, Ah.y, Ah.width, Ah.height),
                                        Dw = new A(Dj.x, Dj.y, Dj.width, Dj.height), Xt = new Sp;
                                    Xt.Mp(Kf.Oi);
                                    hg.push(Cp);
                                    hg.push(Kf.je);
                                    hg.push(Xt);
                                    hg.push(Dp);
                                    hg.push(Cw);
                                    hg.push(Dw);
                                    0 === wm ? ui = Dp.copy() : ui.Gh(Dp);
                                    w.v(Lg);
                                    w.v(Vk);
                                    w.Gb(Wt);
                                    w.ue(Kg)
                                }
                                this.xm.push(ui);
                                bb(xw, ui.x, ui.y, ui.width, ui.height)
                            }
                            Xl(si, !1)
                        }
                    }
                    break;
                case "TableRow":
                case "TableColumn":
                    w.k(this.toString() + " is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
                    break;
                default:
                    w.k("Unknown panel type: " + n)
            }
        }
        var mf = e.width, nf = e.height,
            xm = this.padding, Ew = xm.top + xm.bottom, mf = mf + (xm.left + xm.right), nf = nf + Ew;
        isFinite(f.width) && (mf = f.width);
        isFinite(f.height) && (nf = f.height);
        mf = Math.min(k.width, mf);
        nf = Math.min(k.height, nf);
        mf = Math.max(h.width, mf);
        nf = Math.max(h.height, nf);
        mf = Math.max(c, mf);
        nf = Math.max(d, nf);
        e.width = mf;
        e.height = nf;
        Pa(this.Sc, mf, nf);
        yo(this, 0, 0, mf, nf)
    };
    C.prototype.findMainElement = C.prototype.Hd = function () {
        if (null === this.dn) {
            var a = this.wa.n, b = a.length;
            if (0 === b)return null;
            for (var c = 0; c < b; c++) {
                var d = a[c];
                if (!0 === d.Uf)return this.dn = d
            }
            this.dn = a[0]
        }
        return this.dn
    };
    function Hp(a) {
        return null !== a.U ? a.U.Xf : null
    }

    C.prototype.hj = function (a, b, c, d) {
        var e = this.fj, f = this.wa.n, h = w.Vg(0, 0, 0, 0);
        if (0 === f.length) {
            var k = this.Y;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d
        } else {
            if (!this.Aa.H()) {
                var l = Bo(this, !0), m = this.od, n = m.width, p = m.height, q = this.margin, r = q.left + q.right, s = q.top + q.bottom;
                n === c && p === d && (l = Ij);
                switch (l) {
                    case Ij:
                        if (n > c || p > d)this.I(), rk(this, n > c ? c : n, p > d ? d : p);
                        break;
                    case Ie:
                        this.I(!0);
                        rk(this, c + r, d + s, 0, 0);
                        break;
                    case no:
                        this.I(!0);
                        rk(this, c + r, p + s, 0, 0);
                        break;
                    case mo:
                        this.I(!0), rk(this, n + r, d + s, 0, 0)
                }
            }
            k = this.Y;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d;
            var u = this.ma.Qb;
            switch (u) {
                case "Position":
                    for (var t = f.length, x = e.x - this.padding.left, v = e.y - this.padding.top, B = 0; B < t; B++) {
                        var y = f[B], H = y.za, E = y.margin, V = y.position.x, ba = y.position.y;
                        h.x = isNaN(V) ? -x : V - x;
                        h.y = isNaN(ba) ? -v : ba - v;
                        if (y instanceof X) {
                            var Q = y;
                            if (Q.fF) {
                                var $ = Q.kb / 2;
                                h.x -= $;
                                h.y -= $
                            }
                        }
                        h.x += E.left;
                        h.y += E.top;
                        h.width = H.width;
                        h.height = H.height;
                        y.visible && y.gc(h.x, h.y, h.width, h.height)
                    }
                    break;
                case "Vertical":
                    for (var ca = f.length, R = this.padding.left, Ra = this.mF, hb = Ra ? e.height : this.padding.top,
                             qa = 0; qa < ca; qa++) {
                        var Ja = R, za = f[qa];
                        if (za.visible) {
                            var Pb = za.za, Lb = za.margin, ae = Lb.left + Lb.right, pd = R + this.padding.right, rc = Pb.width, xg = Bo(za, !1);
                            if (isNaN(za.Aa.width) && xg === Ie || xg === no)rc = Math.max(e.width - ae - pd, 0);
                            var Df = rc + ae + pd, Wa = za.alignment;
                            Wa.Uc() && (Wa = this.Ll);
                            Wa.fd() || (Wa = Fb);
                            Ra && (hb -= Pb.height + Lb.bottom + Lb.top);
                            za.gc(Ja + Wa.offsetX + Lb.left + (e.width * Wa.x - Df * Wa.x), hb + Wa.offsetY + Lb.top, rc, Pb.height);
                            Ra || (hb += Pb.height + Lb.bottom + Lb.top)
                        }
                    }
                    break;
                case "Horizontal":
                    for (var lb = f.length, na = this.padding.top,
                             la = this.mF, ib = la ? e.width : this.padding.left, jb = 0; jb < lb; jb++) {
                        var fb = na, se = f[jb];
                        if (se.visible) {
                            var Ed = se.za, tb = se.margin, Le = tb.top + tb.bottom, ed = na + this.padding.bottom, ag = Ed.height, Ef = Bo(se, !1);
                            if (isNaN(se.Aa.height) && Ef === Ie || Ef === mo)ag = Math.max(e.height - Le - ed, 0);
                            var yg = ag + Le + ed, kb = se.alignment;
                            kb.Uc() && (kb = this.Ll);
                            kb.fd() || (kb = Fb);
                            la && (ib -= Ed.width + tb.left + tb.right);
                            se.gc(ib + kb.offsetX + tb.left, fb + kb.offsetY + tb.top + (e.height * kb.y - yg * kb.y), Ed.width, ag);
                            la || (ib += Ed.width + tb.left + tb.right)
                        }
                    }
                    break;
                case "Spot":
                    var wc =
                        f.length, qd = this.Hd(), bg = qd.za, Bb = bg.width, Mb = bg.height, te = this.padding, zg = te.left, Fd = te.top;
                    h.x = zg - e.x;
                    h.y = Fd - e.y;
                    qd.gc(h.x, h.y, Bb, Mb);
                    for (var mb = 0; mb < wc; mb++) {
                        var Jc = f[mb];
                        if (Jc !== qd) {
                            var Ff = Jc.za, Me = Ff.width, Wh = Ff.height, Sa = Jc.alignment;
                            Sa.Uc() && (Sa = this.Ll);
                            Sa.fd() || (Sa = Fb);
                            var cb = Jc.oh;
                            cb.Uc() && (cb = Fb);
                            var xc = null;
                            Jc instanceof C && "" !== Jc.Hj && (xc = Jc.sd(Jc.Hj), xc === Jc && (xc = null));
                            if (null !== xc) {
                                for (var sc = xc.Ia, Vc = w.xb(cb.x * sc.width + cb.offsetX, cb.y * sc.height + cb.offsetY); xc !== Jc;)xc.transform.nb(Vc),
                                    xc = xc.O;
                                h.x = Sa.x * Bb + Sa.offsetX - Vc.x;
                                h.y = Sa.y * Mb + Sa.offsetY - Vc.y;
                                w.v(Vc)
                            } else h.x = Sa.x * Bb + Sa.offsetX - (cb.x * Me - cb.offsetX), h.y = Sa.y * Mb + Sa.offsetY - (cb.y * Wh - cb.offsetY);
                            h.x -= e.x;
                            h.y -= e.y;
                            Jc.visible && Jc.gc(zg + h.x, Fd + h.y, Me, Wh)
                        }
                    }
                    break;
                case "Auto":
                    var jh = f.length, Ya = this.Hd(), xb = Ya.za, ub = w.Df();
                    ub.l(0, 0, 1, 1);
                    var yc = Ya.margin, yb = yc.left, ob = yc.top, Gb = this.padding, be = Gb.left, Cb = Gb.top;
                    h.x = yb;
                    h.y = ob;
                    h.width = xb.width;
                    h.height = xb.height;
                    Ya.gc(be + h.x, Cb + h.y, h.width, h.height);
                    var Qb = Ip(Ya), fd = Jp(Ya), Xh = 0 + Qb.y * xb.height +
                        Qb.offsetY, Nb = 0 + fd.x * xb.width + fd.offsetX, Ob = 0 + fd.y * xb.height + fd.offsetY;
                    ub.x = 0 + Qb.x * xb.width + Qb.offsetX;
                    ub.y = Xh;
                    bb(ub, Nb, Ob, 0, 0);
                    ub.x += yb + be;
                    ub.y += ob + Cb;
                    for (var zc = 0; zc < jh; zc++) {
                        var Wc = f[zc];
                        if (Wc !== Ya) {
                            var rd = Wc.za, yc = Wc.margin, Ag = Math.max(rd.width + yc.right + yc.left, 0), Yh = Math.max(rd.height + yc.top + yc.bottom, 0), pb = Wc.alignment;
                            pb.Uc() && (pb = this.Ll);
                            pb.fd() || (pb = Fb);
                            h.x = ub.width * pb.x + pb.offsetX - Ag * pb.x + yc.left + ub.x;
                            h.y = ub.height * pb.y + pb.offsetY - Yh * pb.y + yc.top + ub.y;
                            h.width = ub.width;
                            h.height = ub.height;
                            Wc.visible && (db(ub.x, ub.y, ub.width, ub.height, h.x, h.y, rd.width, rd.height) ? Wc.gc(h.x, h.y, rd.width, rd.height) : Wc.gc(h.x, h.y, rd.width, rd.height, new A(ub.x, ub.y, ub.width, ub.height)))
                        }
                    }
                    w.Gb(ub);
                    break;
                case "Table":
                    for (var Xc = f.length, Zh = this.padding, Ne = Zh.left, ec = Zh.top, ue = this.Os, Wb = 0, Ac = 0, sd = ue.length, fc = 0, Ta = 0; Ta < sd; Ta++)ue[Ta] && (fc = Math.max(fc, ue[Ta].length));
                    for (var gc = Math.min(this.ej, sd - 1); gc !== sd && (void 0 === this.Yd[gc] || 0 === this.Yd[gc].Sa);)gc++;
                    for (var gc = Math.min(gc, sd - 1), $h = -this.Yd[gc].hb, bf =
                        Math.min(this.Ni, fc - 1); bf !== fc && (void 0 === this.Td[bf] || 0 === this.Td[bf].Sa);)bf++;
                    for (var bf = Math.min(bf, fc - 1), Gd = -this.Td[bf].hb, Oe = w.im(), Ta = 0; Ta < sd; Ta++)if (ue[Ta]) {
                        var fc = ue[Ta].length, kh = this.be(Ta), Ac = kh.hb + $h + ec;
                        0 !== kh.Sa && (Ac += kh.oE());
                        for (var Hd = 0; Hd < fc; Hd++)if (ue[Ta][Hd]) {
                            var lh = this.ae(Hd), Wb = lh.hb + Gd + Ne;
                            0 !== lh.Sa && (Wb += lh.oE());
                            for (var jj = ue[Ta][Hd], mh = jj.length, Dk = 0; Dk < mh; Dk++) {
                                var zb = jj[Dk], ce = zb.za, gd = zb instanceof C ? zb : null;
                                if (null === gd || gd.type !== Go && gd.type !== Ho) {
                                    Oe.l(0, 0);
                                    for (var Pe =
                                        1; Pe < zb.rowSpan && !(Ta + Pe >= this.qq); Pe++) {
                                        var ai = this.be(Ta + Pe);
                                        Oe.height += ai.total
                                    }
                                    for (Pe = 1; Pe < zb.qH && !(Hd + Pe >= this.Lp); Pe++) {
                                        var bi = this.ae(Hd + Pe);
                                        Oe.width += bi.total
                                    }
                                    var kj = lh.Sa + Oe.width, lj = kh.Sa + Oe.height;
                                    h.x = Wb;
                                    h.y = Ac;
                                    h.width = kj;
                                    h.height = lj;
                                    var Db = Wb, nh = Ac, oh = kj, ma = lj;
                                    Wb + kj > e.width && (oh = Math.max(e.width - Wb, 0));
                                    Ac + lj > e.height && (ma = Math.max(e.height - Ac, 0));
                                    var aa = zb.alignment, de = 0, cg = 0, ci = 0, hc = 0;
                                    if (aa.Uc()) {
                                        aa = this.Ll;
                                        aa.fd() || (aa = Fb);
                                        var de = aa.x, cg = aa.y, ci = aa.offsetX, hc = aa.offsetY, di = lh.alignment,
                                            ic = kh.alignment;
                                        di.fd() && (de = di.x, ci = di.offsetX);
                                        ic.fd() && (cg = ic.y, hc = ic.offsetY)
                                    } else de = aa.x, cg = aa.y, ci = aa.offsetX, hc = aa.offsetY;
                                    if (isNaN(de) || isNaN(cg))cg = de = .5, hc = ci = 0;
                                    var cf = ce.width, Qe = ce.height, df = zb.margin, ve = df.left + df.right, we = df.top + df.bottom, Yc = Qo(zb, kh, lh, !1);
                                    !isNaN(zb.Aa.width) || Yc !== Ie && Yc !== no || (cf = Math.max(kj - ve, 0));
                                    !isNaN(zb.Aa.height) || Yc !== Ie && Yc !== mo || (Qe = Math.max(lj - we, 0));
                                    var Id = zb.Af, ph = zb.zh, cf = Math.min(Id.width, cf), Qe = Math.min(Id.height, Qe), cf = Math.max(ph.width, cf), Qe = Math.max(ph.height,
                                        Qe), Z = Qe + we;
                                    h.x += h.width * de - (cf + ve) * de + ci + df.left;
                                    h.y += h.height * cg - Z * cg + hc + df.top;
                                    zb.visible && (db(Db, nh, oh, ma, h.x, h.y, ce.width, ce.height) ? zb.gc(h.x, h.y, cf, Qe) : zb.gc(h.x, h.y, cf, Qe, new A(Db, nh, oh, ma)))
                                } else {
                                    zb.Ii();
                                    zb.mc.Ra();
                                    var ef = zb.mc;
                                    ef.x = gd.type === Go ? Ne : Wb;
                                    ef.y = gd.type === Ho ? ec : Ac;
                                    ef.width = ce.width;
                                    ef.height = ce.height;
                                    zb.mc.freeze();
                                    Co(zb, !1)
                                }
                            }
                        }
                    }
                    w.zk(Oe);
                    for (Ta = 0; Ta < Xc; Ta++)zb = f[Ta], gd = zb instanceof C ? zb : null, null === gd || gd.type !== Go && gd.type !== Ho || (ef = zb.mc, zb.Sc.Ra(), zb.Sc.l(0, 0, ef.width, ef.height),
                        zb.Sc.freeze());
                    break;
                case "Viewbox":
                    var dg = f[0], qh = dg.za, rh = dg.margin, Jd = rh.top + rh.bottom, Ek = Math.max(qh.width + (rh.right + rh.left), 0), qb = Math.max(qh.height + Jd, 0), Ua = dg.alignment;
                    Ua.Uc() && (Ua = this.Ll);
                    Ua.fd() || (Ua = Fb);
                    h.x = e.width * Ua.x - Ek * Ua.x + Ua.offsetX;
                    h.y = e.height * Ua.y - qb * Ua.y + Ua.offsetY;
                    h.width = qh.width;
                    h.height = qh.height;
                    dg.gc(h.x, h.y, h.width, h.height);
                    break;
                case "Link":
                    var bm = f.length;
                    if (this instanceof dh || this instanceof W) {
                        var Fk = null;
                        this instanceof W && (Fk = this);
                        this instanceof dh && (Fk = this.Nf);
                        var mj = Fk, ei = this instanceof dh ? null : mj.path;
                        if (null !== this.$g) {
                            var tc = this.$g.n, xe = 0;
                            if (null !== ei && xe < this.$g.count) {
                                var td = tc[xe];
                                xe++;
                                ei.gc(td.x - this.fj.x, td.y - this.fj.y, td.width, td.height)
                            }
                            for (var Kc = 0; Kc < bm; Kc++) {
                                var Gk = f[Kc];
                                Gk !== ei && xe < this.$g.count && (td = tc[xe], xe++, Gk.gc(td.x - this.fj.x, td.y - this.fj.y, td.width, td.height))
                            }
                        }
                        var cm = mj.points, dm = cm.count;
                        if (2 <= dm && this instanceof W)for (var Gf = this.Vf; Gf.next();) {
                            var Rb = Gf.value, Kd = dm, Ld = cm, Bc = Rb.Me, ee = Rb.XA, ud = Rb.oh, Bg = Rb.rq, nj = Rb.YA, sh = 0, th =
                                0, fi = 0;
                            if (Bc < -Kd || Bc >= Kd) {
                                var gi = this.wF, eg = this.vF;
                                Bg !== dj && (fi = this.computeAngle(Rb, Bg, eg), Rb.angle = fi);
                                sh = gi.x;
                                th = gi.y
                            } else {
                                var jc = void 0, Va = void 0;
                                if (0 <= Bc)jc = Ld.n[Bc], Va = Bc < Kd - 1 ? Ld.n[Bc + 1] : jc; else var Md = Kd + Bc, jc = Ld.n[Md], Va = 0 < Md ? Ld.n[Md - 1] : jc;
                                if (jc.Ic(Va)) {
                                    var Nd = void 0, ff = void 0;
                                    0 <= Bc ? (Nd = 0 < Bc ? Ld.n[Bc - 1] : jc, ff = Bc < Kd - 2 ? Ld.n[Bc + 2] : Va) : (Nd = Md < Kd - 1 ? Ld.n[Md + 1] : jc, ff = 1 < Md ? Ld.n[Md - 2] : Va);
                                    var Hf = Nd.uf(jc), nb = Va.uf(ff), eg = Hf > nb + 10 ? 0 <= Bc ? Nd.yc(jc) : jc.yc(Nd) : nb > Hf + 10 ? 0 <= Bc ? Va.yc(ff) : ff.yc(Va) : 0 <= Bc ? Nd.yc(ff) :
                                        ff.yc(Nd)
                                } else eg = 0 <= Bc ? jc.yc(Va) : Va.yc(jc);
                                Bg !== dj && (fi = this.computeAngle(Rb, Bg, eg), Rb.angle = fi);
                                sh = jc.x + (Va.x - jc.x) * ee;
                                th = jc.y + (Va.y - jc.y) * ee
                            }
                            if (ud.L(sb))Rb.location = new z(sh, th); else {
                                ud.Nd() && (ud = Fb);
                                var gf = w.Ef();
                                gf.reset();
                                gf.scale(Rb.scale, Rb.scale);
                                gf.rotate(Rb.angle, 0, 0);
                                var hd = Rb.Ia, Cg = w.Vg(0, 0, hd.width, hd.height), hf = w.K();
                                hf.Vn(Cg, ud);
                                gf.nb(hf);
                                var Cc = -hf.x, hi = -hf.y, Re = nj.copy();
                                isNaN(Re.x) && (Re.x = 0 <= Bc ? hf.x + 3 : -(hf.x + 3));
                                isNaN(Re.y) && (Re.y = -(hf.y + 3));
                                Re.rotate(eg);
                                sh += Re.x;
                                th += Re.y;
                                gf.sG(Cg);
                                var Cc = Cc + Cg.x, hi = hi + Cg.y, Dg = w.xb(sh + Cc, th + hi);
                                Rb.move(Dg);
                                w.v(Dg);
                                w.v(hf);
                                w.Gb(Cg);
                                w.ue(gf)
                            }
                        }
                        this.lu(!1)
                    }
                    break;
                case "Grid":
                    break;
                case "Graduated":
                    if (null !== this.xm) {
                        var Eg = this.Hd(), oj = this.zm, Hk = this.xm, ye = 0, Zc = Hk[ye];
                        ye++;
                        Eg.gc(Zc.x - e.x, Zc.y - e.y, Zc.width, Zc.height);
                        for (var Ik = f.length, uh = 0; uh < Ik; uh++) {
                            var id = f[uh], pj = oj[uh];
                            id.visible && id !== Eg && 0 !== pj.length && (Zc = Hk[ye], ye++, id.gc(Zc.x - e.x, Zc.y - e.y, Zc.width, Zc.height))
                        }
                        this.xm = null
                    }
                    break;
                case "TableRow":
                case "TableColumn":
                    w.k(this.toString() + " is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");
                    break;
                default:
                    w.k("Unknown panel type: " + u)
            }
            w.Gb(h)
        }
    };
    C.prototype.uk = function (a) {
        var b = this.Ia, c = Hp(this);
        if (db(0, 0, b.width, b.height, a.x, a.y)) {
            for (var b = this.wa.n, d = b.length, e = w.xb(0, 0); d--;) {
                var f = b[d];
                if (f.visible || f === c)if (La(e.set(a), f.transform), f.Ha(e))return w.v(e), !0
            }
            w.v(e);
            return null === this.Db && null === this.Zb ? !1 : !0
        }
        return !1
    };
    C.prototype.hx = function (a) {
        if (this.no === a)return this;
        for (var b = this.wa.n, c = b.length, d = 0; d < c; d++) {
            var e = b[d].hx(a);
            if (null !== e)return e
        }
        return null
    };
    function Xo(a, b, c) {
        c(a, b);
        if (b instanceof C) {
            b = b.wa.n;
            for (var d = b.length, e = 0; e < d; e++)Xo(a, b[e], c)
        }
    }

    function Im(a, b) {
        Tp(a, a, b)
    }

    function Tp(a, b, c) {
        c(b);
        b = b.wa.n;
        for (var d = b.length, e = 0; e < d; e++) {
            var f = b[e];
            f instanceof C && Tp(a, f, c)
        }
    }

    C.prototype.walkVisualTree = C.prototype.RJ = function (a) {
        Up(this, this, a)
    };
    function Up(a, b, c) {
        c(b);
        if (b instanceof C) {
            b = b.wa.n;
            for (var d = b.length, e = 0; e < d; e++)Up(a, b[e], c)
        }
    }

    C.prototype.findInVisualTree = C.prototype.Kt = function (a) {
        return Vp(this, this, a)
    };
    function Vp(a, b, c) {
        if (c(b))return b;
        if (b instanceof C) {
            b = b.wa.n;
            for (var d = b.length, e = 0; e < d; e++) {
                var f = Vp(a, b[e], c);
                if (null !== f)return f
            }
        }
        return null
    }

    C.prototype.findObject = C.prototype.sd = function (a) {
        if (this.name === a)return this;
        for (var b = this.wa.n, c = b.length, d = 0; d < c; d++) {
            var e = b[d];
            if (e.name === a)return e;
            if (e instanceof C)if (null === e.Zj && null === e.sg) {
                if (e = e.sd(a), null !== e)return e
            } else if (fn(e) && (e = e.wa.first(), null !== e && (e = e.sd(a), null !== e)))return e
        }
        return null
    };
    function Wp(a) {
        a = a.wa.n;
        for (var b = a.length, c = 0, d = 0; d < b; d++) {
            var e = a[d];
            if (e instanceof C)c = Math.max(c, Wp(e)); else if (e instanceof X) {
                a:{
                    if (null !== !e.Lf)switch (e.Fo) {
                        case "None":
                        case "Square":
                        case "Ellipse":
                        case "Circle":
                        case "LineH":
                        case "LineV":
                        case "FramedRectangle":
                        case "RoundedRectangle":
                        case "Line1":
                        case "Line2":
                        case "Border":
                        case "Cube1":
                        case "Cube2":
                        case "Junction":
                        case "Cylinder1":
                        case "Cylinder2":
                        case "Cylinder3":
                        case "Cylinder4":
                        case "PlusLine":
                        case "XLine":
                        case "ThinCross":
                        case "ThickCross":
                            e =
                                0;
                            break a
                    }
                    e = e.fi / 2 * e.cn * e.nj()
                }
                c = Math.max(c, e)
            }
        }
        return c
    }

    g = C.prototype;
    g.Yg = function () {
        return !(this.type === Go || this.type === Ho)
    };
    g.Je = function (a, b, c) {
        if (!1 === this.Sg)return null;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (zm(this))return null;
        var d = this.Ia, e = 1 / this.nj(), f = this.Yg(), h = f ? a : La(w.xb(a.x, a.y), this.transform), k = this.g, l = 10, m = 5;
        null !== k && (l = k.Ut("extraTouchArea"), m = l / 2);
        if (db(-(m * e), -(m * e), d.width + l * e, d.height + l * e, h.x, h.y)) {
            if (!this.En) {
                var e = this.wa.n, n = e.length, k = w.K(), m = (l = this.Zt) ? this.Hd() : null;
                if (l && (m.Yg() ? La(k.set(a), m.transform) : k.set(a), !m.Ha(k)))return w.v(k), f || w.v(h), null;
                for (var p = Hp(this); n--;) {
                    var q =
                        e[n];
                    if (q.visible || q === p)if (q.Yg() ? La(k.set(a), q.transform) : k.set(a), !l || q !== m) {
                        var r = null;
                        q instanceof C ? r = q.Je(k, b, c) : !0 === q.Sg && q.Ha(k) && (r = q);
                        if (null !== r && (null !== b && (r = b(r)), null !== r && (null === c || c(r))))return w.v(k), f || w.v(h), r
                    }
                }
                w.v(k)
            }
            if (null === this.background && null === this.jn)return f || w.v(h), null;
            a = db(0, 0, d.width, d.height, h.x, h.y) ? this : null;
            f || w.v(h);
            return a
        }
        f || w.v(h);
        return null
    };
    g.Mt = function (a, b, c, d) {
        if (!1 === this.Sg)return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof I || d instanceof J || (d = new I(G));
        var e = this.Ia, f = this.Yg(), h = f ? a : La(w.xb(a.x, a.y), this.transform);
        if (db(0, 0, e.width, e.height, h.x, h.y)) {
            if (!this.En) {
                for (var e = this.wa.n, k = e.length, l = w.K(), m = Hp(this); k--;) {
                    var n = e[k];
                    if (n.visible || n === m) {
                        n.Yg() ? La(l.set(a), n.transform) : l.set(a);
                        var p = n, n = n instanceof C ? n : null;
                        (null !== n ? n.Mt(l, b, c, d) : p.Ha(l)) && !1 !== p.Sg && (null !== b && (p = b(p)), null === p || null !== c && !c(p) ||
                        d.add(p))
                    }
                }
                w.v(l)
            }
            f || w.v(h);
            return null !== this.background || null !== this.jn
        }
        f || w.v(h);
        return !1
    };
    g.yk = function (a, b, c, d, e, f) {
        if (!1 === this.Sg)return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = f;
        void 0 === f && (h = w.Ef(), h.reset());
        h.multiply(this.transform);
        if (this.on(a, h))return Xp(this, b, c, e), void 0 === f && w.ue(h), !0;
        if (this.Kg(a, h)) {
            if (!this.En)for (var k = Hp(this), l = this.wa.n, m = l.length; m--;) {
                var n = l[m];
                if (n.visible || n === k) {
                    var p = n.Y, q = this.Ia;
                    if (!(p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height)) {
                        p = n;
                        n = n instanceof C ? n : null;
                        q = w.Ef();
                        q.set(h);
                        if (null !== n ? n.yk(a, b, c, d, e, q) : Ao(p, a, d,
                                q))null !== b && (p = b(p)), null === p || null !== c && !c(p) || e.add(p);
                        w.ue(q)
                    }
                }
            }
            void 0 === f && w.ue(h);
            return d
        }
        void 0 === f && w.ue(h);
        return !1
    };
    function Xp(a, b, c, d) {
        for (var e = a.wa.n, f = e.length; f--;) {
            var h = e[f];
            if (h.visible) {
                var k = h.Y, l = a.Ia;
                k.x > l.width || k.y > l.height || 0 > k.x + k.width || 0 > k.y + k.height || (h instanceof C && Xp(h, b, c, d), null !== b && (h = b(h)), null === h || null !== c && !c(h) || d.add(h))
            }
        }
    }

    g.un = function (a, b, c, d, e, f) {
        if (!1 === this.Sg)return !1;
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        var h = this.Ia, k = this.Yg(), l = k ? a : La(w.xb(a.x, a.y), this.transform), m = k ? b : La(w.xb(b.x, b.y), this.transform), n = l.uf(m), p = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height || Ma(l.x, l.y, 0, 0, 0, h.height) < n || Ma(l.x, l.y, 0, h.height, h.width, h.height) < n || Ma(l.x, l.y, h.width, h.height, h.width, 0) < n || Ma(l.x, l.y, h.width, 0, 0, 0) < n, h = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height && Ma(l.x, l.y, 0, 0, 0, h.height) < n && Ma(l.x, l.y, 0, h.height, h.width, h.height) <
            n && Ma(l.x, l.y, h.width, h.height, h.width, 0) < n && Ma(l.x, l.y, h.width, 0, 0, 0) < n;
        k || (w.v(l), w.v(m));
        if (p) {
            if (!this.En) {
                for (var k = w.K(), l = w.K(), m = Hp(this), n = this.wa.n, q = n.length; q--;) {
                    var r = n[q];
                    if (r.visible || r === m) {
                        var s = r.Y, u = this.Ia;
                        s.x > u.width || s.y > u.height || 0 > s.x + s.width || 0 > s.y + s.height || (r.Yg() ? (s = r.transform, La(k.set(a), s), La(l.set(b), s)) : (k.set(a), l.set(b)), s = r, r = r instanceof C ? r : null, null !== r ? !r.un(k, l, c, d, e, f) : !s.JE(k, l, e)) || (null !== c && (s = c(s)), null === s || null !== d && !d(s) || f.add(s))
                    }
                }
                w.v(k);
                w.v(l)
            }
            return e ?
                p : h
        }
        return !1
    };
    function Ip(a) {
        var b = null;
        a instanceof X && (b = a.A, b === oc && (b = null), a = a.vf, null !== a && null === b && (b = a.A));
        null === b && (b = vb);
        return b
    }

    function Jp(a) {
        var b = null;
        a instanceof X && (b = a.B, b === oc && (b = null), a = a.vf, null !== a && null === b && (b = a.B));
        null === b && (b = Kb);
        return b
    }

    C.prototype.add = C.prototype.add = function (a) {
        w.G(a, G, C, "add:element");
        this.Ld(this.wa.count, a)
    };
    C.prototype.elt = C.prototype.da = function (a) {
        return this.wa.da(a)
    };
    C.prototype.insertAt = C.prototype.Ld = function (a, b) {
        b instanceof S && w.k("Cannot add a Part to a Panel: " + b);
        if (this === b || this.Xl(b))this === b && w.k("Cannot make a Panel contain itself: " + this.toString()), w.k("Cannot make a Panel indirectly contain itself: " + this.toString() + " already contains " + b.toString());
        var c = b.O;
        null !== c && c !== this && w.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: " + b.toString() + ", already contained by " + c.toString() + ", cannot be shared by this Panel: " +
            this.toString());
        this.ma !== El || b instanceof X || w.k("Can only add Shapes to a Grid Panel, not: " + b);
        this.ma !== fp || b instanceof X || b instanceof Ch || w.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: " + b);
        b.em(this);
        b.Sm = null;
        if (null !== this.eq) {
            var d = b.data;
            null !== d && "object" === typeof d && (null === this.rg && (this.rg = new ka(Object, C)), this.rg.add(d, b))
        }
        var e = this.wa, d = -1;
        if (c === this) {
            for (var f = -1, h = this.wa.n, k = h.length, l = 0; l < k; l++)if (h[l] === b) {
                f = l;
                break
            }
            if (-1 !== f) {
                if (f === a || f + 1 >= e.count &&
                    a >= e.count)return;
                e.Xc(f);
                d = f
            } else w.k("element " + b.toString() + " has panel " + c.toString() + " but is not contained by it.")
        }
        if (0 > a || a > e.count)a = e.count;
        e.Ld(a, b);
        this.I();
        b.I();
        null !== b.Pd ? this.Ck = !0 : b instanceof C && !0 === b.Ck && (this.Ck = !0);
        this.Sj = null;
        c = this.U;
        null !== c && (c.Nm = null, c.bk = NaN, this.Ck && c instanceof T && (c.Ck = !0), c.Ck && c instanceof T && (c.le = null), e = this.g, null !== e && e.oa.fb || (-1 !== d && c.Wc(Pf, "elements", this, b, null, d, null), c.Wc(Of, "elements", this, null, b, null, a), this.au() || Yp(this, b, !1)))
    };
    w.defineProperty(C, {Ck: null}, function () {
        return 0 !== (this.P & 8388608)
    }, function (a) {
        0 !== (this.P & 8388608) !== a && (this.P ^= 8388608)
    });
    function Zp(a, b) {
        a.P = b ? a.P | 16777216 : a.P & -16777217
    }

    C.prototype.remove = C.prototype.remove = function (a) {
        w.G(a, G, C, "remove:element");
        for (var b = this.wa.n, c = b.length, d = -1, e = 0; e < c; e++)if (b[e] === a) {
            d = e;
            break
        }
        -1 !== d && this.jf(d)
    };
    C.prototype.removeAt = C.prototype.Xc = function (a) {
        0 <= a && this.jf(a)
    };
    C.prototype.jf = function (a) {
        var b = this.wa, c = b.da(a);
        c.Sm = null;
        c.em(null);
        if (null !== this.rg) {
            var d = c.data;
            "object" === typeof d && this.rg.remove(d)
        }
        b.Xc(a);
        Xl(this, !1);
        this.I();
        this.dn === c && (this.dn = null);
        this.Sj = null;
        b = this.U;
        null !== b && (b.Nm = null, b.bk = NaN, b.ce(), d = this.g, null !== d && d.oa.fb || b.Wc(Pf, "elements", this, c, null, a, null))
    };
    w.u(C, {qq: "rowCount"}, function () {
        return void 0 === this.Yd ? 0 : this.Yd.length
    });
    C.prototype.getRowDefinition = C.prototype.be = function (a) {
        0 > a && w.Ea(a, ">= 0", C, "getRowDefinition:idx");
        a = Math.round(a);
        var b = this.Yd;
        if (void 0 === b[a]) {
            var c = new Pg;
            c.em(this);
            c.ve = !0;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    C.prototype.removeRowDefinition = C.prototype.OF = function (a) {
        0 > a && w.Ea(a, ">= 0", C, "removeRowDefinition:idx");
        a = Math.round(a);
        var b = this.Yd;
        this.Wc(Pf, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.I()
    };
    w.u(C, {Lp: "columnCount"}, function () {
        return void 0 === this.Td ? 0 : this.Td.length
    });
    C.prototype.getColumnDefinition = C.prototype.ae = function (a) {
        0 > a && w.Ea(a, ">= 0", C, "getColumnDefinition:idx");
        a = Math.round(a);
        var b = this.Td;
        if (void 0 === b[a]) {
            var c = new Pg;
            c.em(this);
            c.ve = !1;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    C.prototype.removeColumnDefinition = C.prototype.LF = function (a) {
        0 > a && w.Ea(a, ">= 0", C, "removeColumnDefinition:idx");
        a = Math.round(a);
        var b = this.Td;
        this.Wc(Pf, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.I()
    };
    w.defineProperty(C, {rJ: "rowSizing"}, function () {
        return void 0 === this.Vm ? ep : this.Vm
    }, function (a) {
        if (void 0 !== this.Vm) {
            var b = this.Vm;
            b !== a && (a !== ep && a !== Lp && w.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.Vm = a, this.I(), this.h("rowSizing", b, a))
        }
    });
    w.defineProperty(C, {pH: "columnSizing"}, function () {
        return void 0 === this.sm ? ep : this.sm
    }, function (a) {
        if (void 0 !== this.sm) {
            var b = this.sm;
            b !== a && (a !== ep && a !== Lp && w.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.sm = a, this.I(), this.h("columnSizing", b, a))
        }
    });
    w.defineProperty(C, {OL: "topIndex"}, function () {
        return void 0 === this.ej ? 0 : this.ej
    }, function (a) {
        if (void 0 !== this.ej) {
            var b = this.ej;
            b !== a && ((!isFinite(a) || 0 > a) && w.k("Panel.topIndex must be greater than zero and a real number, not: " + a), this.ej = a, this.I(), this.h("topIndex", b, a))
        }
    });
    w.defineProperty(C, {aL: "leftIndex"}, function () {
        return void 0 === this.Ni ? 0 : this.Ni
    }, function (a) {
        if (void 0 !== this.Ni) {
            var b = this.Ni;
            b !== a && ((!isFinite(a) || 0 > a) && w.k("Panel.leftIndex must be greater than zero and a real number, not: " + a), this.Ni = a, this.I(), this.h("leftIndex", b, a))
        }
    });
    C.prototype.findRowForLocalY = function (a) {
        if (0 > a)return -1;
        if (this.type !== Po)return NaN;
        for (var b = 0, c = this.Yd, d = c.length, e = this.ej; e < d; e++) {
            var f = c[e];
            if (void 0 !== f && (b += f.total, a < b))return e
        }
        return -1
    };
    C.prototype.findColumnForLocalX = function (a) {
        if (0 > a)return -1;
        if (this.type !== Po)return NaN;
        for (var b = 0, c = this.Td, d = c.length, e = this.Ni; e < d; e++) {
            var f = c[e];
            if (void 0 !== f && (b += f.total, a < b))return e
        }
        return -1
    };
    C.prototype.graduatedPointForValue = function (a, b) {
        void 0 === b && (b = new z(NaN, NaN));
        if (this.type !== fp)return b.l(NaN, NaN), b;
        a = Math.min(Math.max(a, this.Bk), this.nA);
        var c = (a - this.Bk) / this.ox, d = this.Hd();
        d.vf.XH(c, b);
        c = w.Ef();
        c.set(d.transform);
        b.transform(c);
        w.ue(c);
        return b
    };
    C.prototype.graduatedValueForPoint = function (a) {
        if (this.type !== fp)return NaN;
        var b = this.Hd(), c = b.vf, d = w.Ef();
        d.set(b.transform);
        d.qx();
        a.transform(d);
        w.ue(d);
        return c.TH(a) * this.ox + this.Bk
    };
    w.defineProperty(C, {data: "data"}, function () {
        return this.Vd
    }, function (a) {
        var b = this.Vd;
        if (b !== a) {
            var c = this instanceof S && !(this instanceof dh);
            c && w.j(a, "object", C, "data");
            fh(this);
            this.Vd = a;
            var d = this.g;
            null !== d && (c ? this instanceof W ? (null !== b && d.Kj.remove(b), null !== a && d.Kj.add(a, this)) : this instanceof S && (null !== b && d.Ai.remove(b), null !== a && d.Ai.add(a, this)) : (c = this.O, null !== c && null !== c.rg && (null !== b && c.rg.remove(b), null !== a && c.rg.add(a, this))));
            this.h("data", b, a);
            null !== d && d.oa.fb || null !== a && this.Hb()
        }
    });
    w.defineProperty(C, {fu: "itemIndex"}, function () {
        return this.Rr
    }, function (a) {
        var b = this.Rr;
        b !== a && (this.Rr = a, this.h("itemIndex", b, a))
    });
    function Yo(a) {
        a = a.Wk;
        return null !== a && a.Q
    }

    function fh(a) {
        var b = a.Wk;
        if (null === b)null !== a.data && w.k("Template cannot have .data be non-null: " + a), a.Wk = b = new I(Vg); else if (b.Q)return;
        var c = new I(G);
        Zp(a, !1);
        Xo(a, a, function (a, d) {
            var e = d.sc;
            if (null !== e)for (To(d, !1), e = e.i; e.next();) {
                var f = e.value;
                f.mode === Xg && To(d, !0);
                var h = f.yq;
                null !== h && ("/" === h && Zp(a, !0), h = Yg(f, a, d), null !== h && (c.add(h), null === h.pp && (h.pp = new I(Vg)), h.pp.add(f)));
                b.add(f)
            }
            if (d instanceof C && d.type === Po) {
                if (0 < d.Yd.length)for (e = d.Yd, f = e.length, h = 0; h < f; h++) {
                    var k = e[h];
                    if (void 0 !==
                        k && null !== k.sc)for (var l = k.sc.i; l.next();) {
                        var t = l.value;
                        t.Bg = k;
                        t.it = 2;
                        t.xp = k.index;
                        b.add(t)
                    }
                }
                if (0 < d.Td.length)for (e = d.Td, f = e.length, h = 0; h < f; h++)if (k = e[h], void 0 !== k && null !== k.sc)for (l = k.sc.i; l.next();)t = l.value, t.Bg = k, t.it = 1, t.xp = k.index, b.add(t)
            }
        });
        for (var d = c.i; d.next();) {
            var e = d.value;
            if (null !== e.pp) {
                To(e, !0);
                for (var f = e.pp.i; f.next();) {
                    var h = f.value;
                    null === e.sc && (e.sc = new I(Vg));
                    e.sc.add(h)
                }
            }
            e.pp = null
        }
        for (d = b.i; d.next();)if (e = d.value, f = e.Bg, null !== f) {
            e.Bg = null;
            var k = e.jy, l = k.indexOf(".");
            0 < l &&
            f instanceof C && (h = k.substring(0, l), k = k.substr(l + 1), l = f.sd(h), null !== l ? (f = l, e.jy = k) : w.trace('Warning: unable to find GraphObject named "' + h + '" for Binding: ' + e.toString()));
            f instanceof Pg ? (e.hm = w.Jd(f.O), f.O.no = e.hm) : (e.hm = w.Jd(f), f.no = e.hm)
        }
        b.freeze();
        a instanceof S && a.de() && a.Ze()
    }

    C.prototype.copyTemplate = function () {
        var a = this.copy();
        a.RJ(function (a) {
            a instanceof C && (a.Wk = null, a.Vd = null);
            var c = a.sc;
            null !== c && (a.sc = null, c.each(function (c) {
                a.bind(c.copy())
            }))
        });
        return a
    };
    C.prototype.updateTargetBindings = C.prototype.Hb = function (a) {
        var b = this.Wk;
        if (null !== b)for (void 0 === a && (a = ""), b = b.i; b.next();) {
            var c = b.value, d = c.gG;
            if ("" === a || "" === d || d === a)if (d = c.jy, null !== c.uH || "" !== d) {
                var d = this.data, e = c.yq;
                if (null !== e)d = "" === e ? this : "/" === e ? this : "." === e ? this : ".." === e ? this : this.sd(e); else {
                    var f = this.g;
                    null !== f && c.zx && (d = f.ba.Fk)
                }
                if (null !== d) {
                    var f = this, h = c.hm;
                    if (-1 !== h) {
                        if (f = this.hx(h), null === f)continue
                    } else null !== c.Bg && (f = c.Bg);
                    "/" === e ? d = f.U : "." === e ? d = f : ".." === e && (d = f.O);
                    e = c.it;
                    if (0 !== e) {
                        if (!(f instanceof C))continue;
                        h = f;
                        1 === e ? f = h.ae(c.xp) : 2 === e && (f = h.be(c.xp))
                    }
                    void 0 !== f && c.vG(f, d)
                }
            }
        }
    };
    w.defineProperty(C, {eq: "itemArray"}, function () {
        return this.Zj
    }, function (a) {
        var b = this.Zj;
        if (b !== a) {
            var c = this.g;
            null !== c && null !== b && Om(c, this);
            this.Zj = a;
            null !== c && null !== a && Km(c, this);
            this.h("itemArray", b, a);
            null !== c && c.oa.fb || this.SA()
        }
    });
    function fn(a) {
        return a.type === Gj || a.type === Bl || a.type === aj || a.type === Po && 0 < a.wa.length && (a = a.wa.da(0), a.Uf && a instanceof C && (a.type === Go || a.type === Ho)) ? !0 : !1
    }

    C.prototype.rebuildItemElements = C.prototype.SA = function () {
        var a = 0;
        for (fn(this) && (a = 1); this.wa.length > a;)this.jf(this.wa.length - 1);
        a = this.eq;
        if (null !== a)for (var b = w.Ya(a), c = 0; c < b; c++)en(this, w.Da(a, c), c)
    };
    C.prototype.findItemPanelForData = C.prototype.NH = function (a) {
        if (void 0 === a || null === a || null === this.rg)return null;
        w.j(a, "object", C, "findItemPanelForData");
        return this.rg.ka(a)
    };
    function en(a, b, c) {
        if (!(void 0 === b || null === b || 0 > c)) {
            var d;
            d = $p(a, b);
            var e = a.wI, f = null;
            null !== e && (f = e.ka(d));
            null === f && (aq || (aq = !0, w.trace('No item template Panel found for category "' + d + '" on ' + a), w.trace("  Using default item template."), d = new C, e = new Ch, e.bind(new Vg("text", "", Qf)), d.add(e), bq = d), f = bq);
            d = f;
            null !== d && (fh(d), d = d.copy(), 0 !== (d.P & 16777216) && (e = a.Pl(), null !== e && Zp(e, !0)), "object" === typeof b && (null === a.rg && (a.rg = new ka(Object, C)), a.rg.add(b, d)), e = c, fn(a) && e++, a.Ld(e, d), d.Vd = b, gn(a, e,
                c), d.Vd = null, d.data = b)
        }
    }

    function gn(a, b, c) {
        for (a = a.wa; b < a.length;) {
            var d = a.da(b);
            if (d instanceof C) {
                var e = b, f = c;
                d.type === Go ? d.Yb = e : d.type === Ho && (d.column = e);
                d.fu = f
            }
            b++;
            c++
        }
    }

    w.defineProperty(C, {ZK: "itemTemplate"}, function () {
        return null === this.sg ? null : this.sg.ka("")
    }, function (a) {
        if (null === this.sg) {
            if (null === a)return;
            this.sg = new ka("string", C)
        }
        var b = this.sg.ka("");
        b !== a && (w.G(a, C, C, "itemTemplate"), (a instanceof S || a.Uf) && w.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: " + a), this.sg.add("", a), this.h("itemTemplate", b, a), a = this.g, null !== a && a.oa.fb || this.SA())
    });
    w.defineProperty(C, {wI: "itemTemplateMap"}, function () {
        return this.sg
    }, function (a) {
        var b = this.sg;
        if (b !== a) {
            w.G(a, ka, C, "itemTemplateMap");
            for (var c = a.i; c.next();) {
                var d = c.value;
                (d instanceof S || d.Uf) && w.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: " + d)
            }
            this.sg = a;
            this.h("itemTemplateMap", b, a);
            a = this.g;
            null !== a && a.oa.fb || this.SA()
        }
    });
    w.defineProperty(C, {YK: "itemCategoryProperty"}, function () {
        return this.To
    }, function (a) {
        var b = this.To;
        b !== a && ("string" !== typeof a && "function" !== typeof a && w.wd(a, "string or function", C, "itemCategoryProperty"), this.To = a, this.h("itemCategoryProperty", b, a))
    });
    function $p(a, b) {
        if (null === b)return "";
        var c = a.To, d = "";
        if ("function" === typeof c)d = c(b); else if ("string" === typeof c && "object" === typeof b) {
            if ("" === c)return "";
            d = w.rb(b, c)
        } else return "";
        if (void 0 === d)return "";
        if ("string" === typeof d)return d;
        w.k("Panel.getCategoryForItemData found a non-string category for " + b + ": " + d);
        return ""
    }

    var aq = !1, bq = null;
    w.defineProperty(C, {En: "isAtomic"}, function () {
        return 0 !== (this.P & 1048576)
    }, function (a) {
        var b = 0 !== (this.P & 1048576);
        b !== a && (w.j(a, "boolean", C, "isAtomic"), this.P ^= 1048576, this.h("isAtomic", b, a))
    });
    w.defineProperty(C, {Zt: "isClipping"}, function () {
        return 0 !== (this.P & 2097152)
    }, function (a) {
        var b = 0 !== (this.P & 2097152);
        b !== a && (w.j(a, "boolean", C, "isClipping"), this.P ^= 2097152, this.I(), this.h("isClipping", b, a))
    });
    w.defineProperty(C, {mF: "isOpposite"}, function () {
        return 0 !== (this.P & 33554432)
    }, function (a) {
        var b = 0 !== (this.P & 33554432);
        b !== a && (w.j(a, "boolean", C, "isOpposite"), this.P ^= 33554432, this.I(), this.h("isOpposite", b, a))
    });
    w.defineProperty(C, {isEnabled: "isEnabled"}, function () {
        return 0 !== (this.P & 4194304)
    }, function (a) {
        var b = 0 !== (this.P & 4194304);
        if (b !== a) {
            w.j(a, "boolean", C, "isEnabled");
            var c = null === this.O || this.O.au();
            this.P ^= 4194304;
            this.h("isEnabled", b, a);
            b = this.g;
            null !== b && b.oa.fb || c && Yp(this, this, a)
        }
    });
    function Yp(a, b, c) {
        var d = b.CE;
        null !== d && d(b, c);
        if (b instanceof C) {
            b = b.wa.n;
            for (var d = b.length, e = 0; e < d; e++) {
                var f = b[e];
                c && f instanceof C && !f.isEnabled || Yp(a, f, c)
            }
        }
    }

    w.defineProperty(C, {VJ: "alignmentFocusName"}, function () {
        return this.Hj
    }, function (a) {
        var b = this.Hj;
        b !== a && (this.Hj = a, this.I(), this.h("alignmentFocusName", b, a))
    });
    function Pg() {
        w.lc(this);
        this.lh = null;
        this.Ov = !0;
        this.tc = 0;
        this.gf = NaN;
        this.dk = 0;
        this.ck = Infinity;
        this.ge = oc;
        this.hb = this.Sa = 0;
        this.sc = null;
        this.$s = cq;
        this.Ag = lo;
        this.Vs = this.hk = null;
        this.Ws = NaN;
        this.Db = this.Xh = null;
        this.br = !1
    }

    w.fa("RowColumnDefinition", Pg);
    Pg.prototype.copy = function () {
        var a = new Pg;
        a.Ov = this.Ov;
        a.tc = this.tc;
        a.gf = this.gf;
        a.dk = this.dk;
        a.ck = this.ck;
        a.ge = this.ge;
        a.Sa = this.Sa;
        a.hb = this.hb;
        a.Ag = this.Ag;
        a.$s = this.$s;
        a.hk = null === this.hk ? null : this.hk.S();
        a.Vs = this.Vs;
        a.Ws = this.Ws;
        a.Xh = null;
        null !== this.Xh && (a.Xh = w.Hl(this.Xh));
        a.Db = this.Db;
        a.br = this.br;
        a.sc = this.sc;
        return a
    };
    Pg.prototype.Mp = function (a) {
        w.G(a, Pg, Pg, "copyFrom:pd");
        a.ve ? this.height = a.height : this.width = a.width;
        this.xj = a.xj;
        this.mf = a.mf;
        this.alignment = a.alignment;
        this.stretch = a.stretch;
        this.Iu = a.Iu;
        this.hk = null === a.hk ? null : a.hk.S();
        this.sq = a.sq;
        this.tq = a.tq;
        this.Xh = null;
        a.Xh && (this.Xh = w.Hl(a.Xh));
        this.background = a.background;
        this.Zz = a.Zz;
        this.sc = a.sc
    };
    Pg.prototype.fc = function (a) {
        a.De === Pg ? this.Iu = a : w.Ej(this, a)
    };
    Pg.prototype.toString = function () {
        return "RowColumnDefinition " + (this.ve ? "(Row " : "(Column ") + this.index + ") #" + w.Jd(this)
    };
    var cq;
    Pg.Default = cq = w.p(Pg, "Default", 0);
    var Lp;
    Pg.None = Lp = w.p(Pg, "None", 1);
    var ep;
    Pg.ProportionalExtra = ep = w.p(Pg, "ProportionalExtra", 2);
    Pg.prototype.em = function (a) {
        this.lh = a
    };
    Pg.prototype.computeEffectiveSpacingTop = Pg.prototype.oE = function () {
        var a = 0;
        if (0 !== this.index) {
            var b = this.lh, c = this.sq;
            null === c && null !== b && (c = this.ve ? b.Bi : b.Kh);
            null !== c && (a = this.tq, isNaN(a) && (a = null !== b ? this.ve ? b.Mh : b.Lh : 0))
        }
        b = this.aG;
        if (null === b)if (b = this.lh, null !== b)b = b.Lj; else return a;
        return a + (this.ve ? b.top : b.left)
    };
    Pg.prototype.computeEffectiveSpacing = Pg.prototype.Xe = function () {
        var a = 0;
        if (0 !== this.index) {
            var b = this.lh, c = this.sq;
            null === c && null !== b && (c = this.ve ? b.Bi : b.Kh);
            null !== c && (a = this.tq, isNaN(a) && (a = null !== b ? this.ve ? b.Mh : b.Lh : 0))
        }
        b = this.aG;
        if (null === b)if (b = this.lh, null !== b)b = b.Lj; else return a;
        return a + (this.ve ? b.top + b.bottom : b.left + b.right)
    };
    Pg.prototype.bd = function (a, b, c, d, e) {
        var f = this.lh;
        if (null !== f && (f.Wc(Mf, a, this, b, c, d, e), null !== this.sc && (b = f.g, null !== b && !b.Ne && (f = f.Pl(), null !== f && (b = f.data, null !== b)))))for (c = this.sc.i; c.next();)c.value.ky(this, b, a, f)
    };
    w.u(Pg, {O: "panel"}, function () {
        return this.lh
    });
    w.defineProperty(Pg, {ve: "isRow"}, function () {
        return this.Ov
    }, function (a) {
        this.Ov = a
    });
    w.defineProperty(Pg, {index: "index"}, function () {
        return this.tc
    }, function (a) {
        this.tc = a
    });
    w.defineProperty(Pg, {height: "height"}, function () {
        return this.gf
    }, function (a) {
        var b = this.gf;
        b !== a && (0 > a && w.Ea(a, ">= 0", Pg, "height"), this.gf = a, this.Ja = this.Sa, null !== this.O && this.O.I(), this.bd("height", b, a))
    });
    w.defineProperty(Pg, {width: "width"}, function () {
        return this.gf
    }, function (a) {
        var b = this.gf;
        b !== a && (0 > a && w.Ea(a, ">= 0", Pg, "width"), this.gf = a, this.Ja = this.Sa, null !== this.O && this.O.I(), this.bd("width", b, a))
    });
    w.defineProperty(Pg, {xj: "minimum"}, function () {
        return this.dk
    }, function (a) {
        var b = this.dk;
        b !== a && ((0 > a || !isFinite(a)) && w.Ea(a, ">= 0", Pg, "minimum"), this.dk = a, this.Ja = this.Sa, null !== this.O && this.O.I(), this.bd("minimum", b, a))
    });
    w.defineProperty(Pg, {mf: "maximum"}, function () {
        return this.ck
    }, function (a) {
        var b = this.ck;
        b !== a && (0 > a && w.Ea(a, ">= 0", Pg, "maximum"), this.ck = a, this.Ja = this.Sa, null !== this.O && this.O.I(), this.bd("maximum", b, a))
    });
    w.defineProperty(Pg, {alignment: "alignment"}, function () {
        return this.ge
    }, function (a) {
        var b = this.ge;
        b.L(a) || (this.ge = a.S(), null !== this.O && this.O.I(), this.bd("alignment", b, a))
    });
    w.defineProperty(Pg, {stretch: "stretch"}, function () {
        return this.Ag
    }, function (a) {
        var b = this.Ag;
        b !== a && (this.Ag = a, null !== this.O && this.O.I(), this.bd("stretch", b, a))
    });
    w.defineProperty(Pg, {aG: "separatorPadding"}, function () {
        return this.hk
    }, function (a) {
        "number" === typeof a && (a = new eb(a));
        var b = this.hk;
        null !== a && null !== b && b.L(a) || (null !== a && (a = a.S()), this.hk = a, null !== this.O && this.O.I(), this.bd("separatorPadding", b, a))
    });
    w.defineProperty(Pg, {sq: "separatorStroke"}, function () {
        return this.Vs
    }, function (a) {
        var b = this.Vs;
        b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.Vs = a, null !== this.O && this.O.I(), this.bd("separatorStroke", b, a))
    });
    w.defineProperty(Pg, {tq: "separatorStrokeWidth"}, function () {
        return this.Ws
    }, function (a) {
        var b = this.Ws;
        b !== a && (this.Ws = a, null !== this.O && this.O.I(), this.bd("separatorStrokeWidth", b, a))
    });
    w.defineProperty(Pg, {CL: "separatorDashArray"}, function () {
        return this.Xh
    }, function (a) {
        var b = this.Xh;
        if (b !== a) {
            null === a || Array.isArray(a) || w.wd(a, "Array", Pg, "separatorDashArray:value");
            if (null !== a) {
                for (var c = a.length, d = 0, e = 0; e < c; e++) {
                    var f = a[e];
                    "number" === typeof f && 0 <= f && isFinite(f) || w.k("separatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
                    d += f
                }
                if (0 === d) {
                    if (null === b)return;
                    a = null
                }
            }
            this.Xh = a;
            null !== this.O && this.O.na();
            this.bd("separatorDashArray", b, a)
        }
    });
    w.defineProperty(Pg, {background: "background"}, function () {
        return this.Db
    }, function (a) {
        var b = this.Db;
        b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.Db = a, null !== this.O && this.O.na(), this.bd("background", b, a))
    });
    w.defineProperty(Pg, {Zz: "coversSeparators"}, function () {
        return this.br
    }, function (a) {
        var b = this.br;
        b !== a && (w.j(a, "boolean", Pg, "coversSeparators"), this.br = a, null !== this.O && this.O.na(), this.bd("coversSeparators", b, a))
    });
    w.defineProperty(Pg, {Iu: "sizing"}, function () {
        return this.$s
    }, function (a) {
        var b = this.$s;
        b !== a && (this.$s = a, null !== this.O && this.O.I(), this.bd("sizing", b, a))
    });
    function Kp(a) {
        if (a.Iu === cq) {
            var b = a.lh;
            return a.ve ? b.rJ : b.pH
        }
        return a.Iu
    }

    w.defineProperty(Pg, {Ja: "actual"}, function () {
        return this.Sa
    }, function (a) {
        this.Sa = isNaN(this.gf) ? Math.max(Math.min(this.ck, a), this.dk) : Math.max(Math.min(this.ck, this.gf), this.dk)
    });
    w.defineProperty(Pg, {total: "total"}, function () {
        return this.Sa + this.Xe()
    }, function (a) {
        this.Sa = isNaN(this.gf) ? Math.max(Math.min(this.ck, a), this.dk) : Math.max(Math.min(this.ck, this.gf), this.dk);
        this.Sa = Math.max(0, this.Sa - this.Xe())
    });
    w.defineProperty(Pg, {position: "position"}, function () {
        return this.hb
    }, function (a) {
        this.hb = a
    });
    Pg.prototype.bind = Pg.prototype.bind = function (a) {
        a.Bg = this;
        var b = this.O;
        if (null !== b) {
            var c = b.Pl();
            null !== c && Yo(c) && w.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: " + a + " on " + b)
        }
        null === this.sc && (this.sc = new I(Vg));
        this.sc.add(a)
    };
    function X() {
        G.call(this);
        this.Lf = this.gb = null;
        this.Fo = "None";
        this.yr = lo;
        this.pc = this.yd = "black";
        this.fi = 1;
        this.sp = "butt";
        this.vp = "miter";
        this.cn = 10;
        this.tp = null;
        this.sf = 0;
        this.ei = this.di = oc;
        this.xs = this.ws = NaN;
        this.Ir = !1;
        this.zs = null;
        this.Ho = this.zp = "None";
        this.pg = 1;
        this.og = 0;
        this.ng = 1
    }

    w.La(X, G);
    w.fa("Shape", X);
    X.prototype.cloneProtected = function (a) {
        G.prototype.cloneProtected.call(this, a);
        a.gb = this.gb;
        a.Fo = this.Fo;
        a.yr = this.yr;
        a.Lf = this.Lf;
        a.yd = this.yd;
        a.pc = this.pc;
        a.fi = this.fi;
        a.sp = this.sp;
        a.vp = this.vp;
        a.cn = this.cn;
        null !== this.tp && (a.tp = w.Hl(this.tp));
        a.sf = this.sf;
        a.di = this.di.S();
        a.ei = this.ei.S();
        a.ws = this.ws;
        a.xs = this.xs;
        a.Ir = this.Ir;
        a.zs = this.zs;
        a.zp = this.zp;
        a.Ho = this.Ho;
        a.pg = this.pg;
        a.og = this.og;
        a.ng = this.ng
    };
    X.prototype.fc = function (a) {
        a === Ij || a === Kj || a === Lj || a === lo ? this.kA = a : G.prototype.fc.call(this, a)
    };
    X.prototype.toString = function () {
        return "Shape(" + ("None" !== this.Cb ? this.Cb : "None" !== this.zq ? this.zq : this.iA) + ")#" + w.Jd(this)
    };
    function dq(a, b, c, d) {
        var e = c.length;
        if (!(4 > e)) {
            for (var f = d.za, h = Math.max(1, f.width), f = f.height, k = c[0], l = c[1], m = 0, n = 0, p = 0, q = 0, r = 0, s = 0, u = q = 0, t = w.lb(), x = 2; x < e; x += 2)m = c[x], n = c[x + 1], p = m - k, q = n - l, 0 === p && (p = .001), r = q / p, s = Math.atan2(q, p), q = Math.sqrt(p * p + q * q), t.push([p, s, r, q]), u += q, k = m, l = n;
            k = c[0];
            l = c[1];
            p = d.za.width;
            d instanceof X && (p -= d.kb);
            1 > p && (p = 1);
            for (var e = c = p, m = h / 2, n = 0 === m ? !1 : !0, x = 0, q = t[x], p = q[0], s = q[1], r = q[2], q = q[3], v = 0; .1 <= u;) {
                0 === v && (n ? (e = c, e -= m, u -= m, n = !1) : e = c, 0 === e && (e = 1));
                if (e > u) {
                    w.va(t);
                    return
                }
                e >
                q ? (v = e - q, e = q) : v = 0;
                var B = Math.sqrt(e * e / (1 + r * r));
                0 > p && (B = -B);
                k += B;
                l += r * B;
                a.translate(k, l);
                a.rotate(s);
                a.translate(-(h / 2), -(f / 2));
                0 === v && d.xk(a, b);
                a.translate(h / 2, f / 2);
                a.rotate(-s);
                a.translate(-k, -l);
                u -= e;
                q -= e;
                if (0 !== v) {
                    x++;
                    if (x === t.length) {
                        w.va(t);
                        return
                    }
                    q = t[x];
                    p = q[0];
                    s = q[1];
                    r = q[2];
                    q = q[3];
                    e = v
                }
            }
            w.va(t)
        }
    }

    X.prototype.xk = function (a, b) {
        if (null !== this.pc || null !== this.yd) {
            null !== this.yd && Ko(this, a, this.yd, !0, !1);
            null !== this.pc && Ko(this, a, this.pc, !1, !1);
            var c = this.fi;
            if (0 === c) {
                var d = this.U;
                d instanceof dh && d.type === aj && "Selection" === d.rd && d.qb instanceof X && d.Nf.Hd() === d.qb && (c = d.qb.kb)
            }
            a.lineWidth = c;
            a.lineJoin = this.vp;
            a.lineCap = this.sp;
            a.miterLimit = this.cn;
            var e = !1;
            this.U && b.oj("drawShadows") && (e = this.U.Zl);
            var f = !0;
            null !== this.pc && null === this.yd && (f = !1);
            var d = !1, h = !0, k = this.jG;
            null !== k && (d = !0, h = a.dA(k,
                this.sf));
            var l = this.gb;
            if (null !== l) {
                if (l.ma === Je)a.beginPath(), d && !h ? vo(a, l.wc, l.Gc, l.yb, l.Fb, k, this.sf) : (a.moveTo(l.wc, l.Gc), a.lineTo(l.yb, l.Fb)), null !== this.yd && a.Hg(this.yd), 0 !== c && null !== this.pc && a.Cj(); else if (l.ma === Ke) {
                    var m = l.wc, n = l.Gc, p = l.yb, q = l.Fb, l = Math.min(m, p), r = Math.min(n, q), m = Math.abs(p - m), n = Math.abs(q - n);
                    null !== this.yd && (a.beginPath(), a.rect(l, r, m, n), a.Hg(this.yd));
                    if (null !== this.pc) {
                        var s = p = 0, u = 0;
                        f && e && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY =
                            0, a.shadowBlur = 0);
                        d && !h ? (h = w.lb(), h.push(l), h.push(r), h.push(l + m), h.push(r), h.push(l + m), h.push(r + n), h.push(l), h.push(r + n), h.push(l), h.push(r), a.beginPath(), eq(a, h, k, this.sf), a.Cj(), w.va(h)) : 0 !== c && (a.beginPath(), a.rect(l, r, m, n), a.Cj());
                        f && e && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u)
                    }
                } else if (l.ma === Se)m = l.wc, n = l.Gc, p = l.yb, q = l.Fb, l = Math.abs(p - m) / 2, r = Math.abs(q - n) / 2, m = Math.min(m, p) + l, n = Math.min(n, q) + r, a.beginPath(), a.moveTo(m, n - r), a.bezierCurveTo(m + ad * l, n - r, m + l, n - ad * r, m + l, n), a.bezierCurveTo(m +
                    l, n + ad * r, m + ad * l, n + r, m, n + r), a.bezierCurveTo(m - ad * l, n + r, m - l, n + ad * r, m - l, n), a.bezierCurveTo(m - l, n - ad * r, m - ad * l, n - r, m, n - r), a.closePath(), null !== this.yd && a.Hg(this.yd), d && !h && (h = w.lb(), $d(m, n - r, m + ad * l, n - r, m + l, n - ad * r, m + l, n, .5, h), $d(m + l, n, m + l, n + ad * r, m + ad * l, n + r, m, n + r, .5, h), $d(m, n + r, m - ad * l, n + r, m - l, n + ad * r, m - l, n, .5, h), $d(m - l, n, m - l, n - ad * r, m - ad * l, n - r, m, n - r, .5, h), a.beginPath(), eq(a, h, k, this.sf), w.va(h)), 0 !== c && null !== this.pc && (f && e ? (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY =
                    0, a.shadowBlur = 0, a.Cj(), a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u) : a.Cj()); else if (l.ma === Ge) {
                    r = l.Nj;
                    n = r.length;
                    for (q = 0; q < n; q++) {
                        m = r.n[q];
                        a.beginPath();
                        a.moveTo(m.ia, m.ga);
                        for (var p = m.vb.n, s = p.length, t = null, u = 0; u < s; u++) {
                            var x = p[u];
                            switch (x.ma) {
                                case of:
                                    a.moveTo(x.D, x.F);
                                    break;
                                case Ue:
                                    a.lineTo(x.D, x.F);
                                    break;
                                case pf:
                                    a.bezierCurveTo(x.Ad, x.Ve, x.mh, x.yg, x.yb, x.Fb);
                                    break;
                                case qf:
                                    a.quadraticCurveTo(x.Ad, x.Ve, x.yb, x.Fb);
                                    break;
                                case rf:
                                    if (x.radiusX === x.radiusY)t = Math.PI / 180, a.arc(x.Ad, x.Ve, x.radiusX,
                                        x.ye * t, (x.ye + x.of) * t, 0 > x.of); else {
                                        var t = tf(x, m), v = t.length;
                                        if (0 === v) {
                                            a.lineTo(x.ja, x.ra);
                                            break
                                        }
                                        for (var B = 0; B < v; B++) {
                                            var y = t[B];
                                            0 === B && a.lineTo(y[0], y[1]);
                                            a.bezierCurveTo(y[2], y[3], y[4], y[5], y[6], y[7])
                                        }
                                    }
                                    break;
                                case sf:
                                    B = v = 0;
                                    if (null !== t && t.type === rf) {
                                        t = tf(t, m);
                                        y = t.length;
                                        if (0 === y) {
                                            a.lineTo(x.ja, x.ra);
                                            break
                                        }
                                        t = t[y - 1] || null;
                                        null !== t && (v = t[6], B = t[7])
                                    } else v = null !== t ? t.D : m.ia, B = null !== t ? t.F : m.ga;
                                    t = uf(x, m, v, B);
                                    v = t.length;
                                    if (0 === v) {
                                        a.lineTo(x.ja, x.ra);
                                        break
                                    }
                                    for (B = 0; B < v; B++)y = t[B], a.bezierCurveTo(y[2], y[3],
                                        y[4], y[5], y[6], y[7]);
                                    break;
                                default:
                                    w.k("Segment not of valid type: " + x.ma)
                            }
                            x.Ph && a.closePath();
                            t = x
                        }
                        e ? (u = s = p = 0, m.Qo ? (!0 === m.Bm && null !== this.yd ? (a.Hg(this.yd), f = !0) : f = !1, 0 !== c && null !== this.pc && (f && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), d && !h || a.Cj(), f && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (f && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), !0 === m.Bm && null !== this.yd &&
                        a.Hg(this.yd), 0 !== c && null !== this.pc && (d && !h || a.Cj()), f && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (!0 === m.Bm && null !== this.yd && a.Hg(this.yd), 0 === c || null === this.pc || d && !h || a.Cj())
                    }
                    if (d && !h)for (c = f, f = l.Nj, h = f.length, l = 0; l < h; l++) {
                        r = f.n[l];
                        a.beginPath();
                        n = w.lb();
                        n.push(r.ia);
                        n.push(r.ga);
                        q = r.ia;
                        m = r.ga;
                        p = q;
                        s = m;
                        u = r.vb.n;
                        x = u.length;
                        for (t = 0; t < x; t++) {
                            v = u[t];
                            switch (v.ma) {
                                case of:
                                    eq(a, n, k, this.sf);
                                    n.length = 0;
                                    n.push(v.D);
                                    n.push(v.F);
                                    q = v.D;
                                    m = v.F;
                                    p = q;
                                    s = m;
                                    break;
                                case Ue:
                                    n.push(v.D);
                                    n.push(v.F);
                                    q = v.D;
                                    m = v.F;
                                    break;
                                case pf:
                                    $d(q, m, v.Ad, v.Ve, v.mh, v.yg, v.yb, v.Fb, .5, n);
                                    q = v.D;
                                    m = v.F;
                                    break;
                                case qf:
                                    ke(q, m, v.Ad, v.Ve, v.yb, v.Fb, .5, n);
                                    q = v.D;
                                    m = v.F;
                                    break;
                                case rf:
                                    B = tf(v, r);
                                    y = B.length;
                                    if (0 === y) {
                                        n.push(v.ja);
                                        n.push(v.ra);
                                        q = v.ja;
                                        m = v.ra;
                                        break
                                    }
                                    for (var H = 0; H < y; H++) {
                                        var E = B[H];
                                        $d(q, m, E[2], E[3], E[4], E[5], E[6], E[7], .5, n);
                                        q = E[6];
                                        m = E[7]
                                    }
                                    break;
                                case sf:
                                    B = uf(v, r, q, m);
                                    y = B.length;
                                    if (0 === y) {
                                        n.push(v.ja);
                                        n.push(v.ra);
                                        q = v.ja;
                                        m = v.ra;
                                        break
                                    }
                                    for (H = 0; H < y; H++)E = B[H], $d(q, m, E[2], E[3], E[4], E[5], E[6], E[7], .5, n), q = E[6], m = E[7];
                                    break;
                                default:
                                    w.k("Segment not of valid type: " +
                                        v.ma)
                            }
                            v.Ph && (n.push(p), n.push(s), eq(a, n, k, this.sf))
                        }
                        eq(a, n, k, this.sf);
                        w.va(n);
                        null !== this.pc && (q = n = r = 0, c && e && (r = a.shadowOffsetX, n = a.shadowOffsetY, q = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), a.Cj(), c && e && (a.shadowOffsetX = r, a.shadowOffsetY = n, a.shadowBlur = q))
                    }
                }
                d && a.aA();
                if (null !== this.Nx) {
                    d = this.Nx;
                    rk(d, Infinity, Infinity);
                    k = d.za;
                    d.gc(0, 0, k.width, k.height);
                    c = this.vf;
                    a.save();
                    a.beginPath();
                    k = w.lb();
                    if (c.type === Je)k.push(c.ia), k.push(c.ga), k.push(c.D), k.push(c.F), dq(a, b, k, d); else if (c.type ===
                        Ge)for (h = c.cc.i; h.next();) {
                        l = h.value;
                        k.length = 0;
                        k.push(l.ia);
                        k.push(l.ga);
                        f = l.ia;
                        r = l.ga;
                        n = f;
                        q = r;
                        m = l.vb.n;
                        p = m.length;
                        for (s = 0; s < p; s++) {
                            u = m[s];
                            switch (u.ma) {
                                case of:
                                    dq(a, b, k, d);
                                    k.length = 0;
                                    k.push(u.D);
                                    k.push(u.F);
                                    f = u.D;
                                    r = u.F;
                                    n = f;
                                    q = r;
                                    break;
                                case Ue:
                                    k.push(u.D);
                                    k.push(u.F);
                                    f = u.D;
                                    r = u.F;
                                    break;
                                case pf:
                                    $d(f, r, u.Ad, u.Ve, u.mh, u.yg, u.yb, u.Fb, .5, k);
                                    f = u.D;
                                    r = u.F;
                                    break;
                                case qf:
                                    ke(f, r, u.Ad, u.Ve, u.yb, u.Fb, .5, k);
                                    f = u.D;
                                    r = u.F;
                                    break;
                                case rf:
                                    c = tf(u, l);
                                    e = c.length;
                                    if (0 === e) {
                                        k.push(u.ja);
                                        k.push(u.ra);
                                        f = u.ja;
                                        r = u.ra;
                                        break
                                    }
                                    for (x =
                                             0; x < e; x++)t = c[x], $d(f, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), f = t[6], r = t[7];
                                    break;
                                case sf:
                                    c = uf(u, l, f, r);
                                    e = c.length;
                                    if (0 === e) {
                                        k.push(u.ja);
                                        k.push(u.ra);
                                        f = u.ja;
                                        r = u.ra;
                                        break
                                    }
                                    for (x = 0; x < e; x++)t = c[x], $d(f, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), f = t[6], r = t[7];
                                    break;
                                default:
                                    w.k("Segment not of valid type: " + u.ma)
                            }
                            u.Ph && (k.push(n), k.push(q), dq(a, b, k, d))
                        }
                        dq(a, b, k, d)
                    } else if (c.type === Ke)k.push(c.ia), k.push(c.ga), k.push(c.D), k.push(c.ga), k.push(c.D), k.push(c.F), k.push(c.ia), k.push(c.F), k.push(c.ia), k.push(c.ga),
                        dq(a, b, k, d); else if (c.type === Se) {
                        h = new He;
                        h.ia = c.D;
                        h.ga = (c.ga + c.F) / 2;
                        f = new yf(rf);
                        f.ye = 0;
                        f.of = 360;
                        f.ja = (c.ia + c.D) / 2;
                        f.ra = (c.ga + c.F) / 2;
                        f.radiusX = Math.abs(c.ia - c.D) / 2;
                        f.radiusY = Math.abs(c.ga - c.F) / 2;
                        h.add(f);
                        c = tf(f, h);
                        e = c.length;
                        if (0 === e)k.push(f.ja), k.push(f.ra); else for (f = h.ia, r = h.ga, x = 0; x < e; x++)t = c[x], $d(f, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), f = t[6], r = t[7];
                        dq(a, b, k, d)
                    }
                    w.va(k);
                    a.restore();
                    a.Ee(!1)
                }
            }
        }
    };
    function eq(a, b, c, d) {
        var e = b.length;
        if (!(4 > e)) {
            var f = .001, h = c.length, k = b[0], l = b[1];
            if (4 === e)vo(a, k, l, b[2], b[3], c, d); else {
                a.moveTo(k, l);
                for (var m = f = 0, n = 0, p = 0, q = 0, r = p = 0, s = w.lb(), u = 2; u < e; u += 2)f = b[u], m = b[u + 1], n = f - k, p = m - l, 0 === n && (n = .001), q = p / n, p = Math.sqrt(n * n + p * p), s.push([n, q, p]), r += p, k = f, l = m;
                k = b[0];
                l = b[1];
                b = 0;
                for (var e = !0, f = c[b % h], m = 0 !== d, u = 0, p = s[u], n = p[0], q = p[1], p = p[2], t = 0; .1 <= r;) {
                    0 === t && (f = c[b % h], b++, m && (d %= f, f -= d, m = !1));
                    f > r && (f = r);
                    f > p ? (t = f - p, f = p) : t = 0;
                    var x = Math.sqrt(f * f / (1 + q * q));
                    0 > n && (x = -x);
                    k += x;
                    l +=
                        q * x;
                    e ? a.lineTo(k, l) : a.moveTo(k, l);
                    r -= f;
                    p -= f;
                    if (0 !== t) {
                        u++;
                        if (u === s.length) {
                            w.va(s);
                            return
                        }
                        p = s[u];
                        n = p[0];
                        q = p[1];
                        p = p[2];
                        f = t
                    } else e = !e
                }
                w.va(s)
            }
        }
    }

    X.prototype.getDocumentPoint = X.prototype.Wa = function (a, b) {
        void 0 === b && (b = new z);
        if (a instanceof L) {
            a.Nd() && w.k("getDocumentPoint Spot must be a real, specific Spot, not: " + a.toString());
            var c = this.Ia, d = this.kb;
            b.l(a.x * (c.width + d) - d / 2 + c.x + a.offsetX, a.y * (c.height + d) - d / 2 + c.y + a.offsetY)
        } else b.set(a);
        this.ph.nb(b);
        return b
    };
    X.prototype.uk = function (a, b) {
        var c = this.vf;
        if (null === c || null === this.fill && null === this.stroke)return !1;
        var d = c.jb, e = this.kb / 2;
        c.type !== Je || b || (e += 2);
        var f = w.Df();
        f.assign(d);
        f.Sf(e + 2, e + 2);
        if (!f.Ha(a))return w.Gb(f), !1;
        d = e + 1E-4;
        if (c.type === Je) {
            if (null === this.stroke)return !1;
            d = (c.D - c.ia) * (a.x - c.ia) + (c.F - c.ga) * (a.y - c.ga);
            if (0 > (c.ia - c.D) * (a.x - c.D) + (c.ga - c.F) * (a.y - c.F) || 0 > d)return !1;
            w.Gb(f);
            return Xd(c.ia, c.ga, c.D, c.F, e, a.x, a.y)
        }
        if (c.type === Ke) {
            var h = c.ia, k = c.ga, l = c.D, m = c.F;
            f.x = Math.min(h, l);
            f.y = Math.min(k,
                m);
            f.width = Math.abs(l - h);
            f.height = Math.abs(m - k);
            if (null === this.fill) {
                f.Sf(-d, -d);
                if (f.Ha(a))return w.Gb(f), !1;
                f.Sf(d, d)
            }
            null !== this.stroke && f.Sf(e, e);
            e = f.Ha(a);
            w.Gb(f);
            return e
        }
        if (c.type === Se) {
            var h = c.ia, k = c.ga, l = c.D, m = c.F, c = Math.min(h, l), n = Math.min(k, m), h = Math.abs(l - h) / 2, k = Math.abs(m - k) / 2, c = a.x - (c + h), n = a.y - (n + k);
            if (null === this.fill) {
                h -= d;
                k -= d;
                if (0 >= h || 0 >= k || 1 >= c * c / (h * h) + n * n / (k * k))return w.Gb(f), !1;
                h += d;
                k += d
            }
            null !== this.stroke && (h += e, k += e);
            w.Gb(f);
            return 0 >= h || 0 >= k ? !1 : 1 >= c * c / (h * h) + n * n / (k * k)
        }
        if (c.type ===
            Ge)return w.Gb(f), null === this.fill ? wf(c, a.x, a.y, e) : c.Ha(a, e, 1 < this.kb, b);
        w.k("Unknown Geometry type: " + c.type);
        return !1
    };
    X.prototype.Ln = function (a, b, c, d) {
        var e = this.Aa, f = this.fi;
        a = Math.max(a, 0);
        b = Math.max(b, 0);
        var h;
        if (null !== this.Lf)h = this.vf.jb; else {
            var k = this.Cb, l = Td[k];
            if (void 0 === l) {
                var m = fq[k];
                "string" === typeof m && (m = fq[m]);
                "function" === typeof m ? (l = m(null, 100, 100), Td[k] = l) : w.k("Unsupported Figure: " + k)
            }
            h = l.jb
        }
        var k = h.width, l = h.height, m = h.width, n = h.height;
        switch (Bo(this, !0)) {
            case Ij:
                d = c = 0;
                break;
            case Ie:
                m = Math.max(a - f, 0);
                n = Math.max(b - f, 0);
                break;
            case no:
                m = Math.max(a - f, 0);
                d = 0;
                break;
            case mo:
                c = 0, n = Math.max(b - f, 0)
        }
        isFinite(e.width) &&
        (m = e.width);
        isFinite(e.height) && (n = e.height);
        e = this.Af;
        h = this.zh;
        c = Math.max(c, h.width) - f;
        d = Math.max(d, h.height) - f;
        m = Math.min(e.width, m);
        n = Math.min(e.height, n);
        m = isFinite(m) ? Math.max(c, m) : Math.max(k, c);
        n = isFinite(n) ? Math.max(d, n) : Math.max(l, d);
        c = Jj(this);
        switch (c) {
            case Ij:
                break;
            case Ie:
                k = m;
                l = n;
                break;
            case Kj:
                c = Math.min(m / k, n / l);
                isFinite(c) || (c = 1);
                k *= c;
                l *= c;
                break;
            default:
                w.k(c + " is not a valid geometryStretch.")
        }
        null !== this.Lf ? (k = Math.max(k, .01), l = Math.max(l, .01), h = null !== this.Lf ? this.Lf : this.gb, e = k,
            d = l, c = h.copy(), h = h.jb, e /= h.width, d /= h.height, isFinite(e) || (e = 1), isFinite(d) || (d = 1), 1 === e && 1 === d || c.scale(e, d), this.gb = c) : null !== this.gb && Xa(this.gb.Po, a - f) && Xa(this.gb.No, b - f) || (this.gb = X.makeGeometry(this, k, l));
        h = this.gb.jb;
        Infinity === a || Infinity === b ? yo(this, h.x - f / 2, h.y - f / 2, 0 === a && 0 === k ? 0 : h.width + f, 0 === b && 0 === l ? 0 : h.height + f) : yo(this, -(f / 2), -(f / 2), m + f, n + f)
    };
    function Mp(a, b, c, d) {
        if (!1 !== ym(a)) {
            a.od.Ra();
            var e = a.fi;
            0 === e && d instanceof dh && d.type === aj && d.qb instanceof X && (e = d.qb.kb);
            e *= a.tb;
            d instanceof W && null !== d.gb ? (b = d.gb.jb, yo(a, b.x - e / 2, b.y - e / 2, b.width + e, b.height + e)) : yo(a, -(e / 2), -(e / 2), b + e, c + e);
            a.od.freeze();
            a.od.H() || w.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.od.toString());
            Xl(a, !1)
        }
    }

    function Jj(a) {
        var b = a.kA;
        return null !== a.Lf ? b === lo ? Ie : b : b === lo ? Td[a.Cb].Zd : b
    }

    X.prototype.hj = function (a, b, c, d) {
        Do(this, a, b, c, d)
    };
    X.prototype.getNearestIntersectionPoint = X.prototype.PE = function (a, b, c) {
        return this.zn(a.x, a.y, b.x, b.y, c)
    };
    X.prototype.zn = function (a, b, c, d, e) {
        var f = this.transform, h = 1 / (f.m11 * f.m22 - f.m12 * f.m21), k = f.m22 * h, l = -f.m12 * h, m = -f.m21 * h, n = f.m11 * h, p = h * (f.m21 * f.dy - f.m22 * f.dx), q = h * (f.m12 * f.dx - f.m11 * f.dy), f = a * k + b * m + p, h = a * l + b * n + q, k = c * k + d * m + p, l = c * l + d * n + q, m = this.kb / 2, p = this.gb;
        null === p && (rk(this, Infinity, Infinity), p = this.gb);
        q = p.jb;
        n = !1;
        if (p.type === Je)if (1.5 >= this.kb)n = ne(p.wc, p.Gc, p.yb, p.Fb, f, h, k, l, e); else {
            var r = 0, s = 0;
            p.wc === p.yb ? (r = m, s = 0) : (b = (p.Fb - p.Gc) / (p.yb - p.wc), s = m / Math.sqrt(1 + b * b), r = s * b);
            d = w.lb();
            b = new z;
            ne(p.wc +
                r, p.Gc + s, p.yb + r, p.Fb + s, f, h, k, l, b) && d.push(b);
            b = new z;
            ne(p.wc - r, p.Gc - s, p.yb - r, p.Fb - s, f, h, k, l, b) && d.push(b);
            b = new z;
            ne(p.wc + r, p.Gc + s, p.wc - r, p.Gc - s, f, h, k, l, b) && d.push(b);
            b = new z;
            ne(p.yb + r, p.Fb + s, p.yb - r, p.Fb - s, f, h, k, l, b) && d.push(b);
            b = d.length;
            if (0 === b)return w.va(d), !1;
            n = !0;
            s = Infinity;
            for (r = 0; r < b; r++) {
                var k = d[r], u = (k.x - f) * (k.x - f) + (k.y - h) * (k.y - h);
                u < s && (s = u, e.x = k.x, e.y = k.y)
            }
            w.va(d)
        } else if (p.type === Ke)b = q.x - m, n = oe(b, q.y - m, q.x + q.width + m, q.y + q.height + m, f, h, k, l, e); else if (p.type === Se)a:if (b = q.copy().Sf(m,
                m), 0 === b.width)n = ne(b.x, b.y, b.x, b.y + b.height, f, h, k, l, e); else if (0 === b.height)n = ne(b.x, b.y, b.x + b.width, b.y, f, h, k, l, e); else {
            a = b.width / 2;
            var t = b.height / 2;
            d = b.x + a;
            b = b.y + t;
            c = 9999;
            f !== k && (c = (h - l) / (f - k));
            if (9999 > Math.abs(c)) {
                n = h - b - c * (f - d);
                if (0 > a * a * c * c + t * t - n * n) {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(a * a * c * c + t * t - n * n);
                k = (-(a * a * c * n) + a * t * m) / (t * t + a * a * c * c) + d;
                a = (-(a * a * c * n) - a * t * m) / (t * t + a * a * c * c) + d;
                l = c * (k - d) + n + b;
                b = c * (a - d) + n + b;
                d = Math.abs((f - k) * (f - k)) + Math.abs((h - l) * (h - l));
                h = Math.abs((f - a) * (f - a)) + Math.abs((h - b) * (h -
                        b));
                d < h ? (e.x = k, e.y = l) : (e.x = a, e.y = b)
            } else {
                k = t * t;
                l = f - d;
                k -= k / (a * a) * l * l;
                if (0 > k) {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(k);
                l = b + m;
                b -= m;
                d = Math.abs(l - h);
                h = Math.abs(b - h);
                d < h ? (e.x = f, e.y = l) : (e.x = f, e.y = b)
            }
            n = !0
        } else if (p.type === Ge) {
            var x = 0, v = 0, B = u = 0, q = w.K(), r = k - f, s = l - h, s = r * r + s * s;
            e.x = k;
            e.y = l;
            for (r = 0; r < p.cc.count; r++)for (var y = p.cc.n[r], H = y.vb, x = y.ia, v = y.ga, E = x, V = v, ba = 0; ba < H.count; ba++) {
                var Q = H.n[ba], $ = Q.type, u = Q.D, B = Q.F, ca = !1;
                switch ($) {
                    case of:
                        E = u;
                        V = B;
                        break;
                    case Ue:
                        ca = gq(x, v, u, B, f, h, k, l, q);
                        break;
                    case pf:
                        var ca =
                            Q.rc, $ = Q.Oc, R = Q.Ah, Ra = Q.Bh, ca = le(x, v, ca, $, R, Ra, u, B, f, h, k, l, .5, q);
                        break;
                    case qf:
                        ca = (x + 2 * Q.rc) / 3;
                        $ = (v + 2 * Q.Oc) / 3;
                        R = (2 * Q.rc + u) / 3;
                        Ra = (2 * Q.rc + u) / 3;
                        ca = le(x, v, ca, $, R, Ra, u, B, f, h, k, l, .5, q);
                        break;
                    case rf:
                    case sf:
                        $ = Q.type === rf ? tf(Q, y) : uf(Q, y, x, v);
                        R = $.length;
                        if (0 === R) {
                            ca = gq(x, v, Q.ja, Q.ra, f, h, k, l, q);
                            break
                        }
                        for (B = 0; B < R; B++)t = $[B], 0 === B && gq(x, v, t[0], t[1], f, h, k, l, q) && (u = hq(f, h, q, s, e), u < s && (s = u, n = !0)), le(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], f, h, k, l, .5, q) && (u = hq(f, h, q, s, e), u < s && (s = u, n = !0));
                        u = t[6];
                        B = t[7];
                        break;
                    default:
                        w.k("Unknown Segment type: " +
                            $)
                }
                x = u;
                v = B;
                ca && (u = hq(f, h, q, s, e), u < s && (s = u, n = !0));
                Q.tx && (u = E, B = V, gq(x, v, u, B, f, h, k, l, q) && (u = hq(f, h, q, s, e), u < s && (s = u, n = !0)))
            }
            f = c - a;
            h = d - b;
            b = Math.sqrt(f * f + h * h);
            0 !== b && (f /= b, h /= b);
            e.x -= f * m;
            e.y -= h * m;
            w.v(q)
        } else w.k("Unknown Geometry type: " + p.type);
        if (!n)return !1;
        this.transform.nb(e);
        return !0
    };
    function hq(a, b, c, d, e) {
        a = c.x - a;
        b = c.y - b;
        b = a * a + b * b;
        return b < d ? (e.x = c.x, e.y = c.y, b) : d
    }

    function gq(a, b, c, d, e, f, h, k, l) {
        var m = !1, n = (e - h) * (b - d) - (f - k) * (a - c);
        if (0 === n)return !1;
        l.x = ((e * k - f * h) * (a - c) - (e - h) * (a * d - b * c)) / n;
        l.y = ((e * k - f * h) * (b - d) - (f - k) * (a * d - b * c)) / n;
        (a > c ? a - c : c - a) < (b > d ? b - d : d - b) ? (e = b < d ? b : d, a = b < d ? d : b, (l.y > e || Xa(l.y, e)) && (l.y < a || Xa(l.y, a)) && (m = !0)) : (e = a < c ? a : c, a = a < c ? c : a, (l.x > e || Xa(l.x, e)) && (l.x < a || Xa(l.x, a)) && (m = !0));
        return m
    }

    X.prototype.containedInRect = X.prototype.on = function (a, b) {
        if (void 0 === b)return a.vk(this.Y);
        var c = this.gb;
        null === c && (rk(this, Infinity, Infinity), c = this.gb);
        var c = c.jb, d = this.kb / 2, e = !1, f = w.K();
        f.l(c.x - d, c.y - d);
        a.Ha(b.nb(f)) && (f.l(c.x - d, c.bottom + d), a.Ha(b.nb(f)) && (f.l(c.right + d, c.bottom + d), a.Ha(b.nb(f)) && (f.l(c.right + d, c.y - d), a.Ha(b.nb(f)) && (e = !0))));
        w.v(f);
        return e
    };
    X.prototype.intersectsRect = X.prototype.Kg = function (a, b) {
        if (this.on(a, b) || void 0 === b && (b = this.transform, a.vk(this.Y)))return !0;
        var c = w.Ef();
        c.set(b);
        c.qx();
        var d = a.left, e = a.right, f = a.top, h = a.bottom, k = w.K();
        k.l(d, f);
        c.nb(k);
        if (this.uk(k, !0))return w.v(k), !0;
        k.l(e, f);
        c.nb(k);
        if (this.uk(k, !0))return w.v(k), !0;
        k.l(d, h);
        c.nb(k);
        if (this.uk(k, !0))return w.v(k), !0;
        k.l(e, h);
        c.nb(k);
        if (this.uk(k, !0))return w.v(k), !0;
        var l = w.K(), m = w.K();
        c.set(b);
        c.yF(this.transform);
        c.qx();
        l.x = e;
        l.y = f;
        l.transform(c);
        k.x = d;
        k.y =
            f;
        k.transform(c);
        var n = !1;
        iq(this, k, l, m) ? n = !0 : (k.x = e, k.y = h, k.transform(c), iq(this, k, l, m) ? n = !0 : (l.x = d, l.y = h, l.transform(c), iq(this, k, l, m) ? n = !0 : (k.x = d, k.y = f, k.transform(c), iq(this, k, l, m) && (n = !0))));
        w.v(k);
        w.ue(c);
        w.v(l);
        w.v(m);
        return n
    };
    function iq(a, b, c, d) {
        if (!a.PE(b, c, d))return !1;
        a = b.x;
        b = b.y;
        var e = c.x;
        c = c.y;
        var f = d.x;
        d = d.y;
        if (a === e) {
            var h = 0;
            a = 0;
            b < c ? (h = b, a = c) : (h = c, a = b);
            return d >= h && d <= a
        }
        a < e ? (h = a, a = e) : h = e;
        return f >= h && f <= a
    }

    X.prototype.JE = function (a, b, c) {
        function d(a, b) {
            for (var c = a.length, d = 0; d < c; d += 2)if (b.Sp(a[d], a[d + 1]) > e)return !0;
            return !1
        }

        if (c && null !== this.fill && this.uk(a, !0))return !0;
        var e = a.uf(b);
        b = e;
        1.5 < this.kb && (e = this.kb / 2 + Math.sqrt(e), e *= e);
        var f = this.gb;
        if (null === f && (rk(this, Infinity, Infinity), f = this.gb, null === f))return !1;
        if (!c) {
            var h = f.jb, k = h.x, l = h.y, m = h.x + h.width, h = h.y + h.height;
            if (Na(a.x, a.y, k, l) <= e && Na(a.x, a.y, m, l) <= e && Na(a.x, a.y, k, h) <= e && Na(a.x, a.y, m, h) <= e)return !0
        }
        k = f.wc;
        l = f.Gc;
        m = f.yb;
        h = f.Fb;
        if (f.type ===
            Je) {
            if (c = Ma(a.x, a.y, k, l, m, h), f = (k - m) * (a.x - m) + (l - h) * (a.y - h), c <= (0 <= (m - k) * (a.x - k) + (h - l) * (a.y - l) && 0 <= f ? e : b))return !0
        } else {
            if (f.type === Ke)return b = !1, c && (b = Ma(a.x, a.y, k, l, k, h) <= e || Ma(a.x, a.y, k, l, m, l) <= e || Ma(a.x, a.y, m, l, m, h) <= e || Ma(a.x, a.y, k, h, m, h) <= e), b;
            if (f.type === Se) {
                b = a.x - (k + m) / 2;
                var f = a.y - (l + h) / 2, n = Math.abs(m - k) / 2, p = Math.abs(h - l) / 2;
                if (0 === n || 0 === p)return c = Ma(a.x, a.y, k, l, m, h), c <= e ? !0 : !1;
                if (c) {
                    if (a = Ee(n, p, b, f), a * a <= e)return !0
                } else return Na(b, f, -n, 0) >= e || Na(b, f, 0, -p) >= e || Na(b, f, 0, p) >= e || Na(b, f, n, 0) >=
                e ? !1 : !0
            } else if (f.type === Ge) {
                h = f.jb;
                k = h.x;
                l = h.y;
                m = h.x + h.width;
                h = h.y + h.height;
                if (a.x > m && a.x < k && a.y > h && a.y < l && Ma(a.x, a.y, k, l, k, h) > e && Ma(a.x, a.y, k, l, m, l) > e && Ma(a.x, a.y, m, h, k, h) > e && Ma(a.x, a.y, m, h, m, l) > e)return !1;
                b = Math.sqrt(e);
                if (c) {
                    if (null === this.fill ? wf(f, a.x, a.y, b) : f.Ha(a, b, !0))return !0
                } else {
                    c = f.cc;
                    for (b = 0; b < c.count; b++) {
                        k = c.n[b];
                        n = k.ia;
                        p = k.ga;
                        if (a.Sp(n, p) > e)return !1;
                        l = k.vb.n;
                        m = l.length;
                        for (h = 0; h < m; h++) {
                            var q = l[h];
                            switch (q.type) {
                                case of:
                                case Ue:
                                    n = q.D;
                                    p = q.F;
                                    if (a.Sp(n, p) > e)return !1;
                                    break;
                                case pf:
                                    f = w.lb();
                                    $d(n, p, q.rc, q.Oc, q.Ah, q.Bh, q.D, q.F, .8, f);
                                    n = d(f, a);
                                    w.va(f);
                                    if (n)return !1;
                                    n = q.D;
                                    p = q.F;
                                    if (a.Sp(n, p) > e)return !1;
                                    break;
                                case qf:
                                    f = w.lb();
                                    ke(n, p, q.rc, q.Oc, q.D, q.F, .8, f);
                                    n = d(f, a);
                                    w.va(f);
                                    if (n)return !1;
                                    n = q.D;
                                    p = q.F;
                                    if (a.Sp(n, p) > e)return !1;
                                    break;
                                case rf:
                                case sf:
                                    var r = q.type === rf ? tf(q, k) : uf(q, k, n, p), s = r.length;
                                    if (0 === s) {
                                        n = q.ja;
                                        p = q.ra;
                                        if (a.Sp(n, p) > e)return !1;
                                        break
                                    }
                                    q = null;
                                    f = w.lb();
                                    for (b = 0; b < s; b++)if (q = r[b], f.length = 0, $d(q[0], q[1], q[2], q[3], q[4], q[5], q[6], q[7], .8, f), d(f, a))return w.va(f), !1;
                                    w.va(f);
                                    null !== q && (n =
                                        q[6], p = q[7]);
                                    break;
                                default:
                                    w.k("Unknown Segment type: " + q.type)
                            }
                        }
                    }
                    return !0
                }
            }
        }
        return !1
    };
    w.defineProperty(X, {vf: "geometry"}, function () {
        return null !== this.gb ? this.gb : this.Lf
    }, function (a) {
        var b = this.gb;
        if (b !== a) {
            this.Lf = null !== a ? this.gb = a.freeze() : this.gb = null;
            var c = this.U;
            null !== c && (c.bk = NaN);
            this.I();
            this.h("geometry", b, a);
            wo(this) && (a = this.U, null !== a && xo(this, a, "geometryString"))
        }
    });
    w.defineProperty(X, {SH: "geometryString"}, function () {
        return null === this.vf ? "" : this.vf.toString()
    }, function (a) {
        a = We(a);
        var b = a.normalize();
        this.vf = a;
        this.position = a = w.xb(-b.x, -b.y);
        w.v(a)
    });
    w.defineProperty(X, {fF: "isGeometryPositioned"}, function () {
        return this.Ir
    }, function (a) {
        var b = this.Ir;
        b !== a && (this.Ir = a, this.I(), this.h("isGeometryPositioned", b, a))
    });
    X.prototype.Ke = function () {
        this.gb = null
    };
    w.defineProperty(X, {fill: "fill"}, function () {
        return this.yd
    }, function (a) {
        var b = this.yd;
        b !== a && (a instanceof ga && a.freeze(), this.yd = a, this.na(), this.h("fill", b, a))
    });
    w.defineProperty(X, {stroke: "stroke"}, function () {
        return this.pc
    }, function (a) {
        var b = this.pc;
        b !== a && (a instanceof ga && a.freeze(), this.pc = a, this.na(), this.h("stroke", b, a))
    });
    w.defineProperty(X, {kb: "strokeWidth"}, function () {
        return this.fi
    }, function (a) {
        var b = this.fi;
        if (b !== a)if (0 <= a) {
            this.fi = a;
            this.I();
            var c = this.U;
            null !== c && (c.bk = NaN);
            this.h("strokeWidth", b, a)
        } else w.Ea(a, "value >= 0", X, "strokeWidth:value")
    });
    w.defineProperty(X, {HL: "strokeCap"}, function () {
        return this.sp
    }, function (a) {
        var b = this.sp;
        b !== a && ("string" !== typeof a || "butt" !== a && "round" !== a && "square" !== a ? w.Ea(a, '"butt", "round", or "square"', X, "strokeCap") : (this.sp = a, this.na(), this.h("strokeCap", b, a)))
    });
    w.defineProperty(X, {JL: "strokeJoin"}, function () {
        return this.vp
    }, function (a) {
        var b = this.vp;
        b !== a && ("string" !== typeof a || "miter" !== a && "bevel" !== a && "round" !== a ? w.Ea(a, '"miter", "bevel", or "round"', X, "strokeJoin") : (this.vp = a, this.na(), this.h("strokeJoin", b, a)))
    });
    w.defineProperty(X, {KL: "strokeMiterLimit"}, function () {
        return this.cn
    }, function (a) {
        var b = this.cn;
        if (b !== a)if (1 <= a) {
            this.cn = a;
            this.na();
            var c = this.U;
            null !== c && (c.bk = NaN);
            this.h("strokeMiterLimit", b, a)
        } else w.Ea(a, "value >= 1", X, "strokeWidth:value")
    });
    w.defineProperty(X, {jG: "strokeDashArray"}, function () {
        return this.tp
    }, function (a) {
        var b = this.tp;
        if (b !== a) {
            null === a || Array.isArray(a) || w.wd(a, "Array", X, "strokeDashArray:value");
            if (null !== a) {
                for (var c = a.length, d = 0, e = 0; e < c; e++) {
                    var f = a[e];
                    "number" === typeof f && 0 <= f && isFinite(f) || w.k("strokeDashArray:value " + f + " at index " + e + " must be a positive number or zero.");
                    d += f
                }
                if (0 === d) {
                    if (null === b)return;
                    a = null
                }
            }
            this.tp = a;
            this.na();
            this.h("strokeDashArray", b, a)
        }
    });
    w.defineProperty(X, {IL: "strokeDashOffset"}, function () {
        return this.sf
    }, function (a) {
        var b = this.sf;
        b !== a && 0 <= a && (this.sf = a, this.na(), this.h("strokeDashOffset", b, a))
    });
    w.defineProperty(X, {Cb: "figure"}, function () {
        return this.Fo
    }, function (a) {
        var b = this.Fo;
        if (b !== a) {
            var c = fq[a];
            "function" === typeof c ? c = a : (c = fq[a.toLowerCase()]) || w.k("Unknown Shape.figure: " + a);
            b !== c && (a = this.U, null !== a && (a.bk = NaN), this.Fo = c, this.Lf = null, this.Ke(), this.I(), this.h("figure", b, c))
        }
    });
    w.defineProperty(X, {zq: "toArrow"}, function () {
        return this.zp
    }, function (a) {
        var b = this.zp;
        !0 === a ? a = "Standard" : !1 === a && (a = "");
        if (b !== a) {
            var c = jq(a);
            null === c ? w.k("Unknown Shape.toArrow: " + a) : b !== c && (this.zp = c, this.Lf = null, this.Ke(), this.I(), kq(this), this.h("toArrow", b, c))
        }
    });
    w.defineProperty(X, {iA: "fromArrow"}, function () {
        return this.Ho
    }, function (a) {
        var b = this.Ho;
        !0 === a ? a = "Standard" : !1 === a && (a = "");
        if (b !== a) {
            var c = jq(a);
            null === c ? w.k("Unknown Shape.fromArrow: " + a) : b !== c && (this.Ho = c, this.Lf = null, this.Ke(), this.I(), kq(this), this.h("fromArrow", b, c))
        }
    });
    function kq(a) {
        var b = a.g;
        null !== b && b.oa.fb || (a.rq = lq, "None" !== a.zp ? (a.Me = -1, a.oh = Fc) : "None" !== a.Ho && (a.Me = 0, a.oh = new L(1 - Fc.x, Fc.y)))
    }

    w.defineProperty(X, {A: "spot1"}, function () {
        return this.di
    }, function (a) {
        w.G(a, L, X, "spot1");
        var b = this.di;
        b.L(a) || (this.di = a = a.S(), this.I(), this.h("spot1", b, a))
    });
    w.defineProperty(X, {B: "spot2"}, function () {
        return this.ei
    }, function (a) {
        w.G(a, L, X, "spot2");
        var b = this.ei;
        b.L(a) || (this.ei = a = a.S(), this.I(), this.h("spot2", b, a))
    });
    w.defineProperty(X, {Cc: "parameter1"}, function () {
        return this.ws
    }, function (a) {
        var b = this.ws;
        b !== a && (this.ws = a, this.Ke(), this.I(), this.h("parameter1", b, a))
    });
    w.defineProperty(X, {vu: "parameter2"}, function () {
        return this.xs
    }, function (a) {
        var b = this.xs;
        b !== a && (this.xs = a, this.Ke(), this.I(), this.h("parameter2", b, a))
    });
    w.u(X, {Ia: "naturalBounds"}, function () {
        if (null !== this.gb)return this.Sc.assign(this.gb.jb), this.Sc;
        var a = this.Aa;
        return new A(0, 0, a.width, a.height)
    });
    w.defineProperty(X, {Nx: "pathPattern"}, function () {
        return this.zs
    }, function (a) {
        var b = this.zs;
        b !== a && (this.zs = a, this.na(), this.h("pathPattern", b, a))
    });
    w.defineProperty(X, {xL: "pathObject"}, function () {
        return this.Nx
    }, function (a) {
        this.Nx = a
    });
    w.defineProperty(X, {kA: "geometryStretch"}, function () {
        return this.yr
    }, function (a) {
        var b = this.yr;
        b !== a && (w.mb(a, G, X, "geometryStretch"), this.yr = a, this.h("geometryStretch", b, a))
    });
    w.defineProperty(X, {interval: "interval"}, function () {
        return this.pg
    }, function (a) {
        var b = this.pg;
        a = Math.floor(a);
        if (b !== a && 0 <= a) {
            this.pg = a;
            var c = this.g;
            null !== c && this.O === c.Bn && Yl(c);
            this.I();
            c = this.O;
            null !== c && c.type === fp && (c.Sj = null);
            this.h("interval", b, a)
        }
    });
    w.defineProperty(X, {TE: "graduatedStart"}, function () {
        return this.og
    }, function (a) {
        var b = this.og;
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.og = a, this.I(), this.h("graduatedStart", b, a))
    });
    w.defineProperty(X, {RE: "graduatedEnd"}, function () {
        return this.ng
    }, function (a) {
        var b = this.ng;
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.ng = a, this.I(), this.h("graduatedEnd", b, a))
    });
    X.makeGeometry = function (a, b, c) {
        var d = null;
        if ("None" !== a.zq)d = Ud[a.zq]; else if ("None" !== a.iA)d = Ud[a.iA]; else {
            var e = fq[a.Cb];
            "string" === typeof e && (e = fq[e]);
            void 0 === e && w.k("Unknown Shape.figure: " + a.Cb);
            d = e(a, b, c);
            d.Po = b;
            d.No = c
        }
        null === d && (e = fq.Rectangle, "function" === typeof e && (d = e(a, b, c)));
        return d
    };
    X.getFigureGenerators = function () {
        var a = new ka("string", "function"), b;
        for (b in fq)if (b !== b.toLowerCase()) {
            var c = fq[b];
            "function" === typeof c && a.add(b, c)
        }
        a.freeze();
        return a
    };
    X.defineFigureGenerator = function (a, b) {
        w.j(a, "string", X, "defineFigureGenerator:name");
        "string" === typeof b ? "" !== b && fq[b] || w.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: " + b) : w.j(b, "function", X, "defineFigureGenerator:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || w.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        fq[a] = b;
        fq[c] = a
    };
    X.getArrowheadGeometries = function () {
        var a = new ka("string", Fe), b;
        for (b in mq)if (void 0 === Ud[b]) {
            var c = We(mq[b], !1);
            Ud[b] = c;
            c = b.toLowerCase();
            c !== b && (Ud[c] = b)
        }
        for (b in Ud)b !== b.toLowerCase() && (c = Ud[b], c instanceof Fe && a.add(b, c));
        a.freeze();
        return a
    };
    X.defineArrowheadGeometry = function (a, b) {
        w.j(a, "string", X, "defineArrowheadGeometry:name");
        var c = null;
        "string" === typeof b ? (w.j(b, "string", X, "defineArrowheadGeometry:pathstr"), c = We(b, !1)) : (w.G(b, Fe, X, "defineArrowheadGeometry:pathstr"), c = b);
        var d = a.toLowerCase();
        "" !== a && "none" !== d && a !== d || w.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: " + a);
        Ud[a] = c;
        Ud[d] = a
    };
    function Ch() {
        G.call(this);
        this.Dd = "";
        this.pc = "black";
        this.lg = "13px sans-serif";
        this.ul = "start";
        this.kg = Ij;
        this.yl = uc;
        this.Dm = !0;
        this.Xj = this.Yj = !1;
        this.Xi = nq;
        this.qk = oq;
        this.Wv = this.je = 0;
        this.wm = this.jz = this.kz = null;
        this.Oi = new Sp;
        this.rr = !1;
        this.Te = this.Sq = this.jt = this.vl = this.kt = null;
        this.ci = this.bi = 0;
        this.fh = Infinity;
        this.Wo = 0;
        this.pg = 1;
        this.og = 0;
        this.ng = 1;
        this.ym = null
    }

    w.La(Ch, G);
    w.fa("TextBlock", Ch);
    var pq = /[ \u200b\u00ad]/;
    Ch.prototype.cloneProtected = function (a) {
        G.prototype.cloneProtected.call(this, a);
        a.Dd = this.Dd;
        a.pc = this.pc;
        a.lg = this.lg;
        a.ul = this.ul;
        a.kg = this.kg;
        a.yl = this.yl;
        a.Dm = this.Dm;
        a.Yj = this.Yj;
        a.Xj = this.Xj;
        a.Xi = this.Xi;
        a.qk = this.qk;
        a.je = this.je;
        a.Wv = this.Wv;
        a.kz = this.kz;
        a.jz = this.jz;
        a.wm = this.wm;
        a.Oi.Mp(this.Oi);
        a.rr = this.rr;
        a.kt = this.kt;
        a.vl = this.vl;
        a.jt = this.jt;
        a.Sq = this.Sq;
        a.Te = this.Te;
        a.bi = this.bi;
        a.ci = this.ci;
        a.fh = this.fh;
        a.Wo = this.Wo;
        a.pg = this.pg;
        a.og = this.og;
        a.ng = this.ng;
        a.ym = this.ym
    };
    Ch.prototype.fc = function (a) {
        a.De === Ch ? this.xG = a : G.prototype.fc.call(this, a)
    };
    Ch.prototype.toString = function () {
        return 22 < this.Dd.length ? 'TextBlock("' + this.Dd.substring(0, 20) + '"...)' : 'TextBlock("' + this.Dd + '")'
    };
    var qq = new sa, rq = 0, sq = new sa, tq = 0, uq = "...", vq = "", wq = (new Tc(null)).wk;
    Ch.getEllipsis = function () {
        return uq
    };
    Ch.setEllipsis = function (a) {
        uq = a;
        sq = new sa;
        tq = 0
    };
    var xq;
    Ch.None = xq = w.p(Ch, "None", 0);
    var yq;
    Ch.WrapFit = yq = w.p(Ch, "WrapFit", 1);
    var oq;
    Ch.WrapDesiredSize = oq = w.p(Ch, "WrapDesiredSize", 2);
    var nq;
    Ch.OverflowClip = nq = w.p(Ch, "OverflowClip", 0);
    var zq;
    Ch.OverflowEllipsis = zq = w.p(Ch, "OverflowEllipsis", 1);
    Ch.prototype.I = function () {
        G.prototype.I.call(this);
        this.jz = this.kz = null
    };
    w.defineProperty(Ch, {font: "font"}, function () {
        return this.lg
    }, function (a) {
        var b = this.lg;
        b !== a && (this.lg = a, this.wm = null, this.I(), this.h("font", b, a))
    });
    Ch.isValidFont = function (a) {
        var b = wq.font;
        if (a === b || "10px sans-serif" === a)return !0;
        wq.font = "10px sans-serif";
        var c;
        wq.font = a;
        var d = wq.font;
        if ("10px sans-serif" !== d)return wq.font = b, !0;
        wq.font = "19px serif";
        c = wq.font;
        wq.font = a;
        d = wq.font;
        wq.font = b;
        return d !== c
    };
    w.defineProperty(Ch, {text: "text"}, function () {
        return this.Dd
    }, function (a) {
        var b = this.Dd;
        a = null !== a && void 0 !== a ? a.toString() : "";
        b !== a && (this.Dd = a, this.I(), this.h("text", b, a))
    });
    w.defineProperty(Ch, {textAlign: "textAlign"}, function () {
        return this.ul
    }, function (a) {
        var b = this.ul;
        b !== a && ("start" === a || "end" === a || "left" === a || "right" === a || "center" === a ? (this.ul = a, this.na(), this.h("textAlign", b, a)) : w.Ea(a, '"start", "end", "left", "right", or "center"', Ch, "textAlign"))
    });
    w.defineProperty(Ch, {Pt: "flip"}, function () {
        return this.kg
    }, function (a) {
        var b = this.kg;
        b !== a && (w.mb(a, G, Ch, "flip"), this.kg = a, this.na(), this.h("flip", b, a))
    });
    w.defineProperty(Ch, {QL: "verticalAlignment"}, function () {
        return this.yl
    }, function (a) {
        var b = this.yl;
        b.L(a) || (a.Nd() && w.k("TextBlock.verticalAlignment for " + this + " must be a real Spot, not:" + a), this.yl = a = a.S(), Oo(this), this.h("verticalAlignment", b, a))
    });
    w.u(Ch, {Ia: "naturalBounds"}, function () {
        if (!this.Sc.H()) {
            var a = Aq(this, this.Dd, this.Oi, 999999).width, b = Bq(this, a, this.Oi), c = this.Aa;
            isNaN(c.width) || (a = c.width);
            isNaN(c.height) || (b = c.height);
            Pa(this.Sc, a, b)
        }
        return this.Sc
    });
    w.defineProperty(Ch, {yx: "isMultiline"}, function () {
        return this.Dm
    }, function (a) {
        var b = this.Dm;
        b !== a && (this.Dm = a, this.I(), this.h("isMultiline", b, a))
    });
    w.defineProperty(Ch, {XK: "isUnderline"}, function () {
        return this.Yj
    }, function (a) {
        var b = this.Yj;
        b !== a && (this.Yj = a, this.na(), this.h("isUnderline", b, a))
    });
    w.defineProperty(Ch, {WK: "isStrikethrough"}, function () {
        return this.Xj
    }, function (a) {
        var b = this.Xj;
        b !== a && (this.Xj = a, this.na(), this.h("isStrikethrough", b, a))
    });
    w.defineProperty(Ch, {xG: "wrap"}, function () {
        return this.qk
    }, function (a) {
        var b = this.qk;
        b !== a && (this.qk = a, this.I(), this.h("wrap", b, a))
    });
    w.defineProperty(Ch, {overflow: "overflow"}, function () {
        return this.Xi
    }, function (a) {
        var b = this.Xi;
        b !== a && (this.Xi = a, this.I(), this.h("overflow", b, a))
    });
    w.defineProperty(Ch, {stroke: "stroke"}, function () {
        return this.pc
    }, function (a) {
        var b = this.pc;
        b !== a && (a instanceof ga && a.freeze(), this.pc = a, this.na(), this.h("stroke", b, a))
    });
    w.u(Ch, {BI: "lineCount"}, function () {
        return this.je
    });
    w.defineProperty(Ch, {cA: "editable"}, function () {
        return this.rr
    }, function (a) {
        var b = this.rr;
        b !== a && (this.rr = a, this.h("editable", b, a))
    });
    w.defineProperty(Ch, {lG: "textEditor"}, function () {
        return this.kt
    }, function (a) {
        var b = this.kt;
        b !== a && (this.kt = a, this.h("textEditor", b, a))
    });
    w.defineProperty(Ch, {eA: "errorFunction"}, function () {
        return this.Te
    }, function (a) {
        var b = this.Te;
        b !== a && (null !== a && w.j(a, "function", Ch, "errorFunction"), this.Te = a, this.h("errorFunction", b, a))
    });
    w.defineProperty(Ch, {interval: "interval"}, function () {
        return this.pg
    }, function (a) {
        var b = this.pg;
        a = Math.floor(a);
        if (b !== a && 0 <= a) {
            this.pg = a;
            this.I();
            var c = this.O;
            null !== c && c.type === fp && (c.Sj = null);
            this.h("interval", b, a)
        }
    });
    w.defineProperty(Ch, {TE: "graduatedStart"}, function () {
        return this.og
    }, function (a) {
        var b = this.og;
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.og = a, this.I(), this.h("graduatedStart", b, a))
    });
    w.defineProperty(Ch, {RE: "graduatedEnd"}, function () {
        return this.ng
    }, function (a) {
        var b = this.ng;
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.ng = a, this.I(), this.h("graduatedEnd", b, a))
    });
    w.defineProperty(Ch, {SE: "graduatedFunction"}, function () {
        return this.ym
    }, function (a) {
        var b = this.ym;
        b !== a && (null !== a && w.j(a, "function", Ch, "graduatedFunction"), this.ym = a, this.I(), this.h("graduatedFunction", b, a))
    });
    Ch.prototype.xk = function (a, b) {
        if (null !== this.pc && 0 !== this.Dd.length && null !== this.lg) {
            var c = this.Ia.width, d = this.Ia.height, e = Cq(this), f = a.textAlign = this.ul, h = b.Lr;
            "start" === f && (f = h ? "right" : "left");
            "end" === f && (f = h ? "left" : "right");
            Ko(this, a, this.pc, !0, !1);
            (this.Yj || this.Xj) && Ko(this, a, this.pc, !1, !1);
            var k = 0, h = !1, l = w.xb(0, 0);
            this.ph.nb(l);
            var m = w.xb(0, e);
            this.ph.nb(m);
            var n = l.uf(m);
            w.v(l);
            w.v(m);
            l = b.scale;
            8 > n * l * l && (h = !0);
            b.qf !== a && (h = !1);
            !1 === b.oj("textGreeking") && (h = !1);
            n = this.bi;
            l = this.ci;
            switch (this.Pt) {
                case po:
                    a.translate(c,
                        0);
                    a.scale(-1, 1);
                    break;
                case oo:
                    a.translate(0, d);
                    a.scale(1, -1);
                    break;
                case qo:
                    a.translate(c, d), a.scale(-1, -1)
            }
            var m = this.je, p = (n + e + l) * m;
            d > p && (k = this.yl, k = k.y * d - k.y * p + k.offsetY);
            for (var p = this.Oi, q = 0; q < m; q++) {
                var r = p.pf[q], s = p.Qe[q];
                r > c && (r = c);
                var k = k + n, u = s, s = a, t = k, x = c, v = e, B = f, y = 0;
                h ? ("left" === B ? y = 0 : "right" === B ? y = x - r : "center" === B && (y = (x - r) / 2), s.fillRect(0 + y, t + .25 * v, r, 1)) : ("left" === B ? y = 0 : "right" === B ? y = x : "center" === B && (y = x / 2), s.fillText(u, 0 + y, t + v - .25 * v), u = v / 20 | 0, 0 === u && (u = 1), "right" === B ? y -= r : "center" ===
                B && (y -= r / 2), this.Yj && (s.beginPath(), s.lineWidth = u, s.moveTo(0 + y, t + v - .2 * v), s.lineTo(0 + y + r, t + v - .2 * v), s.stroke()), this.Xj && (s.beginPath(), s.lineWidth = u, t = t + v - v / 2.2 | 0, 0 !== u % 2 && (t += .5), s.moveTo(0 + y, t), s.lineTo(0 + y + r, t), s.stroke()));
                k += e + l
            }
            switch (this.Pt) {
                case po:
                    a.scale(-1, 1);
                    a.translate(-c, 0);
                    break;
                case oo:
                    a.scale(1, -1);
                    a.translate(0, -d);
                    break;
                case qo:
                    a.scale(-1, -1), a.translate(-c, -d)
            }
        }
    };
    Ch.prototype.computeAngle = function (a, b) {
        var c = 0;
        switch (a) {
            default:
            case dj:
                c = 0;
                break;
            case lq:
                c = b;
                break;
            case Np:
                c = b + 90;
                break;
            case Pp:
                c = b - 90;
                break;
            case Dq:
                c = b + 180;
                break;
            case Eq:
                c = Be(b);
                90 < c && 270 > c && (c -= 180);
                break;
            case Op:
                c = Be(b + 90);
                90 < c && 270 > c && (c -= 180);
                break;
            case Qp:
                c = Be(b - 90);
                90 < c && 270 > c && (c -= 180);
                break;
            case Rp:
                c = Be(b);
                if (45 < c && 135 > c || 225 < c && 315 > c)return 0;
                90 < c && 270 > c && (c -= 180)
        }
        return Be(c)
    };
    Ch.prototype.Ln = function (a, b, c, d) {
        this.Wo = a;
        var e = this.Oi;
        e.reset();
        var f = 0, h = 0;
        if (isNaN(this.Aa.width)) {
            f = this.Dd.replace(/\r\n/g, "\n").replace(/\r/g, "\n");
            if (0 === f.length)f = 0; else if (this.yx) {
                for (var k = h = 0, l = !1; !l;) {
                    var m = f.indexOf("\n", k);
                    -1 === m && (m = f.length, l = !0);
                    k = Fq(f.substr(k, m - k).replace(/^\s+|\s+$/g, ""), this.lg);
                    k > h && (h = k);
                    k = m + 1
                }
                f = h
            } else h = f.indexOf("\n", 0), 0 <= h && (f = f.substr(0, h)), f = k = Fq(f, this.lg);
            f = Math.min(f, a / this.scale);
            f = Math.max(8, f)
        } else f = this.Aa.width;
        null !== this.O && (f = Math.min(f,
            this.O.Af.width), f = Math.max(f, this.O.zh.width));
        h = Bq(this, f, e);
        m = h = isNaN(this.Aa.height) ? Math.min(h, b / this.scale) : this.Aa.height;
        if (0 !== e.ef && 1 !== e.Qe.length && this.Xi === zq && (b = this.lg, l = this.Xi === zq ? Gq(b) : 0, k = this.bi + this.ci, k = Math.max(0, Cq(this) + k), m = Math.min(this.JI - 1, Math.max(Math.floor(m / k + .01) - 1, 0)), !(m + 1 >= e.Qe.length))) {
            k = e.Qe[m];
            for (a = Math.max(1, a - l); Fq(k, b) > a && 1 < k.length;)k = k.substr(0, k.length - 1);
            k += uq;
            a = Fq(k, b);
            e.Qe[m] = k;
            e.Qe = e.Qe.slice(0, m + 1);
            e.pf[m] = a;
            e.pf = e.pf.slice(0, m + 1);
            e.gj = e.Qe.length;
            e.ef = Math.max(e.ef, a);
            this.je = e.gj
        }
        if (this.xG === yq || isNaN(this.Aa.width))f = e.ef, isNaN(this.Aa.width) && (f = Math.max(8, f));
        f = Math.max(c, f);
        h = Math.max(d, h);
        Pa(this.Sc, f, h);
        yo(this, 0, 0, f, h)
    };
    Ch.prototype.hj = function (a, b, c, d) {
        Do(this, a, b, c, d)
    };
    function Aq(a, b, c, d) {
        b = b.replace(/^\s+|\s+$/g, "");
        var e = 0, f = 0, h = 0, k = a.lg, f = a.bi + a.ci, l = Math.max(0, Cq(a) + f), h = a.Xi === zq ? Gq(k) : 0;
        if (a.je >= a.fh)return new ha(0, l);
        if (a.qk === xq) {
            c.gj = 1;
            f = Fq(b, k);
            if (0 === h || f <= d)return c.ef = f, c.pf.push(c.ef), c.Qe.push(b), new ha(f, l);
            var m = Hq(b);
            b = b.substr(m.length);
            for (var n = Hq(b), f = Fq(m + n, k); 0 < n.length && f <= d;)m += n, b = b.substr(n.length), n = Hq(b), f = Fq((m + n).replace(/^\s+|\s+$/g, ""), k);
            m += n.replace(/^\s+|\s+$/g, "");
            for (d = Math.max(1, d - h); Fq(m, k) > d && 1 < m.length;)m = m.substr(0,
                m.length - 1);
            m += uq;
            h = Fq(m, k);
            c.pf.push(h);
            c.ef = h;
            c.Qe.push(m);
            return new ha(h, l)
        }
        var p = 0;
        0 === b.length && (p = 1, c.pf.push(0), c.Qe.push(b));
        for (; 0 < b.length;) {
            m = Hq(b);
            for (b = b.substr(m.length); Fq(m, k) > d;) {
                n = 1;
                f = Fq(m.substr(0, n), k);
                for (h = 0; f <= d;)n++, h = f, f = Fq(m.substr(0, n), k);
                1 === n ? (c.pf[a.je + p] = f, e = Math.max(e, f)) : (c.pf[a.je + p] = h, e = Math.max(e, h));
                n--;
                1 > n && (n = 1);
                c.Qe[a.je + p] = m.substr(0, n);
                p++;
                m = m.substr(n);
                if (a.je + p > a.fh)break
            }
            n = Hq(b);
            for (f = Fq(m + n, k); 0 < n.length && f <= d;)m += n, b = b.substr(n.length), n = Hq(b), f = Fq((m +
            n).replace(/^\s+|\s+$/g, ""), k);
            m = m.replace(/^\s+|\s+$/g, "");
            if ("" !== m && ("\u00ad" === m[m.length - 1] && (m = m.substring(0, m.length - 1) + "\u2010"), 0 === n.length ? (c.pf.push(f), e = Math.max(e, f)) : (h = Fq(m, k), c.pf.push(h), e = Math.max(e, h)), c.Qe.push(m), p++, a.je + p > a.fh))break
        }
        c.gj = Math.min(a.fh, p);
        c.ef = Math.max(c.ef, e);
        return new ha(c.ef, l * c.gj)
    }

    function Hq(a) {
        for (var b = a.length, c = 0; c < b && !pq.test(a.charAt(c));)c++;
        for (; c < b && pq.test(a.charAt(c));)c++;
        return c >= b ? a : a.substr(0, c)
    }

    function Fq(a, b) {
        vq !== b && (vq = wq.font = b);
        return wq.measureText(a).width
    }

    function Cq(a) {
        if (null !== a.wm)return a.wm;
        var b = a.lg;
        vq !== b && (vq = wq.font = b);
        var c = 0;
        void 0 !== qq[b] && 5E3 > rq ? c = qq[b] : (c = 1.3 * wq.measureText("M").width, qq[b] = c, rq++);
        return a.wm = c
    }

    function Gq(a) {
        vq !== a && (vq = wq.font = a);
        var b = 0;
        void 0 !== sq[a] && 5E3 > tq ? b = sq[a] : (b = wq.measureText(uq).width, sq[a] = b, tq++);
        return b
    }

    function Bq(a, b, c) {
        var d = a.Dd.replace(/\r\n/g, "\n").replace(/\r/g, "\n"), e = a.bi + a.ci, e = Math.max(0, Cq(a) + e);
        if (0 === d.length)return c.ef = 0, a.je = 1, e;
        if (!a.yx) {
            var f = d.indexOf("\n", 0);
            0 <= f && (d = d.substr(0, f))
        }
        for (var f = 0, h = a.je = 0, k = -1, l = !1; !l;)k = d.indexOf("\n", h), -1 === k && (k = d.length, l = !0), h <= k && (h = d.substr(h, k - h), a.qk !== xq ? (c.gj = 0, h = Aq(a, h, c, b), f += h.height, a.je += c.gj) : (Aq(a, h, c, b), f += e, a.je++), a.je === a.fh && (l = !0)), h = k + 1;
        return a.Wv = f
    }

    w.defineProperty(Ch, {lB: "textValidation"}, function () {
        return this.vl
    }, function (a) {
        var b = this.vl;
        b !== a && (null !== a && w.j(a, "function", Ch, "textValidation"), this.vl = a, this.h("textValidation", b, a))
    });
    w.defineProperty(Ch, {kG: "textEdited"}, function () {
        return this.jt
    }, function (a) {
        var b = this.jt;
        b !== a && (null !== a && w.j(a, "function", Ch, "textEdited"), this.jt = a, this.h("textEdited", b, a))
    });
    w.defineProperty(Ch, {EL: "spacingAbove"}, function () {
        return this.bi
    }, function (a) {
        var b = this.bi;
        b !== a && (this.bi = a, this.h("spacingAbove", b, a))
    });
    w.defineProperty(Ch, {FL: "spacingBelow"}, function () {
        return this.ci
    }, function (a) {
        var b = this.ci;
        b !== a && (this.ci = a, this.h("spacingBelow", b, a))
    });
    w.defineProperty(Ch, {JI: "maxLines"}, function () {
        return this.fh
    }, function (a) {
        var b = this.fh;
        b !== a && (a = Math.floor(a), 0 >= a && w.Ea(a, "> 0", Ch, "maxLines"), this.fh = a, this.h("maxLines", b, a), this.I())
    });
    w.u(Ch, {iL: "metrics"}, function () {
        return this.Oi
    });
    w.defineProperty(Ch, {uK: "choices"}, function () {
        return this.Sq
    }, function (a) {
        var b = this.Sq;
        b !== a && (null === a || Array.isArray(a) || w.wd(a, "Array", Ch, "choices:value"), this.Sq = a, this.h("choices", b, a))
    });
    function Sp() {
        this.ef = this.gj = 0;
        this.pf = [];
        this.Qe = []
    }

    Sp.prototype.reset = function () {
        this.ef = this.gj = 0;
        this.pf = [];
        this.Qe = []
    };
    Sp.prototype.Mp = function (a) {
        this.gj = a.gj;
        this.ef = a.ef;
        this.pf = w.Hl(a.pf);
        this.Qe = w.Hl(a.Qe)
    };
    w.u(Sp, {qK: "arrSize"}, function () {
        return this.pf
    });
    w.u(Sp, {rK: "arrText"}, function () {
        return this.Qe
    });
    w.u(Sp, {hL: "maxLineWidth"}, function () {
        return this.ef
    });
    function tl() {
        G.call(this);
        this.Se = null;
        this.bt = "";
        this.ik = Qd;
        this.Ko = Ie;
        this.gi = this.Te = null;
        this.Jo = Fb;
        this.kg = Ij;
        this.wp = null;
        this.ez = !1;
        this.yv = !0;
        this.Uv = !1;
        this.np = null
    }

    w.La(tl, G);
    w.fa("Picture", tl);
    tl.prototype.cloneProtected = function (a) {
        G.prototype.cloneProtected.call(this, a);
        a.element = this.Se;
        a.bt = this.bt;
        a.ik = this.ik.S();
        a.Ko = this.Ko;
        a.kg = this.kg;
        a.Te = this.Te;
        a.gi = this.gi;
        a.Jo = this.Jo.S();
        a.yv = this.yv;
        a.np = this.np
    };
    tl.prototype.fc = function (a) {
        a === Ij || a === Kj || a === Lj ? this.hI = a : G.prototype.fc.call(this, a)
    };
    tl.prototype.toString = function () {
        return "Picture(" + this.source + ")#" + w.Jd(this)
    };
    var Iq = new sa, Jq = 0, nl = [];

    function Kq() {
        var a = nl;
        if (0 === a.length)for (var b = window.document.getElementsByTagName("canvas"), c = b.length, d = 0; d < c; d++) {
            var e = b[d];
            e.parentElement && e.parentElement.Z && a.push(e.parentElement.Z)
        }
        return a
    }

    var Lq;
    tl.clearCache = Lq = function (a) {
        void 0 === a && (a = "");
        w.j(a, "string", tl, "clearCache:url");
        "" !== a ? Iq[a] && (delete Iq[a], Jq--) : (Iq = new sa, Jq = 0)
    };
    w.defineProperty(tl, {element: "element"}, function () {
        return this.Se
    }, function (a) {
        var b = this.Se;
        if (b !== a) {
            null === a || a instanceof HTMLImageElement || a instanceof HTMLVideoElement || a instanceof HTMLCanvasElement || w.k("Picture.element must be an instance of Image, Canvas, or Video, not: " + a);
            this.ez = a instanceof HTMLCanvasElement;
            this.Se = a;
            if (null !== a)if (a instanceof HTMLCanvasElement || !0 === a.complete)a.Io instanceof Event && null !== this.Te && this.Te(this, a.Io), !0 === a.Lv && null !== this.gi && this.gi(this, a.uz),
                a.Lv = !0, this.Aa.H() || (Xl(this, !1), this.I()); else {
                var c = this;
                a.CC || (a.addEventListener("load", function (b) {
                    Mq(a, b);
                    c.Aa.H() || (Xl(c, !1), c.I())
                }), a.addEventListener("error", function (b) {
                    Nq(a, b)
                }), a.CC = !0)
            }
            this.h("element", b, a);
            this.na()
        }
    });
    w.defineProperty(tl, {source: "source"}, function () {
        return this.bt
    }, function (a) {
        var b = this.bt;
        if (b !== a) {
            w.j(a, "string", tl, "source");
            this.bt = a;
            var c = Iq, d = this.g;
            if (void 0 !== c[a])var e = c[a].Fp[0].source; else {
                30 < Jq && (Lq(), c = Iq);
                var e = w.createElement("img"), f = this;
                e.addEventListener("load", function (a) {
                    Mq(e, a);
                    f.Aa.H() || (Xl(f, !1), f.I())
                });
                e.addEventListener("error", function (a) {
                    Nq(e, a)
                });
                e.CC = !0;
                var h = this.np;
                null !== h && (e.crossOrigin = h(this));
                e.src = a;
                c[a] = new Oq(e);
                Jq++
            }
            null !== d && jn(d, this);
            this.element = e;
            null !== d && hn(d, this);
            this.I();
            this.na();
            this.h("source", b, a)
        }
    });
    function Mq(a, b) {
        a.Lv = !0;
        a.Io = !1;
        for (var c = null, d = Kq(), e = d.length, f = 0; f < e; f++) {
            var h = d[f], k = h.gp.ka(a.src);
            if (null !== k)for (e = k.length, f = 0; f < e; f++)c = k[f], h.qz.add(c), h.Le(), null === a.uz && (a.uz = b, null !== c.gi && c.gi(c, b))
        }
    }

    function Nq(a, b) {
        a.Io = b;
        for (var c = null, d = Kq(), e = d.length, f = 0; f < e; f++)if (c = d[f].gp.ka(a.src), null !== c) {
            for (var e = c.length, h = w.lb(), f = 0; f < e; f++)h.push(c[f]);
            for (f = 0; f < e; f++)c = h[f], null !== c.Te && c.Te(c, b);
            w.va(h)
        }
    }

    w.defineProperty(tl, {DL: "sourceCrossOrigin"}, function () {
        return this.np
    }, function (a) {
        if (this.np !== a && (null !== a && w.j(a, "function", tl, "sourceCrossOrigin"), this.np = a, null !== this.element)) {
            var b = this.element.src;
            null === a && "string" === typeof b ? this.element.crossOrigin = null : null !== a && (this.element.crossOrigin = a(this));
            this.element.src = b
        }
    });
    w.defineProperty(tl, {Bj: "sourceRect"}, function () {
        return this.ik
    }, function (a) {
        var b = this.ik;
        b.L(a) || (w.G(a, A, tl, "sourceRect"), this.ik = a = a.S(), this.na(), this.h("sourceRect", b, a))
    });
    w.defineProperty(tl, {hI: "imageStretch"}, function () {
        return this.Ko
    }, function (a) {
        var b = this.Ko;
        b !== a && (w.mb(a, G, tl, "imageStretch"), this.Ko = a, this.na(), this.h("imageStretch", b, a))
    });
    w.defineProperty(tl, {Pt: "flip"}, function () {
        return this.kg
    }, function (a) {
        var b = this.kg;
        b !== a && (w.mb(a, G, tl, "flip"), this.kg = a, this.na(), this.h("flip", b, a))
    });
    w.defineProperty(tl, {QK: "imageAlignment"}, function () {
        return this.Jo
    }, function (a) {
        w.G(a, L, tl, "imageAlignment");
        var b = this.Jo;
        b.L(a) || (this.Jo = a = a.S(), this.I(), this.h("imageAlignment", b, a))
    });
    w.defineProperty(tl, {eA: "errorFunction"}, function () {
        return this.Te
    }, function (a) {
        var b = this.Te;
        b !== a && (null !== a && w.j(a, "function", tl, "errorFunction"), this.Te = a, this.h("errorFunction", b, a))
    });
    w.defineProperty(tl, {NL: "successFunction"}, function () {
        return this.gi
    }, function (a) {
        var b = this.gi;
        b !== a && (null !== a && w.j(a, "function", tl, "successFunction"), this.gi = a, this.h("successFunction", b, a))
    });
    tl.prototype.xk = function (a, b) {
        var c = this.Se;
        if (null !== c) {
            var d = c.src;
            null !== d && "" !== d || w.k('Element has no source ("src") attribute: ' + c);
            if (!(c.Io instanceof Event) && !0 === c.Lv) {
                var d = this.Ia, e = 0, f = 0, h = this.ez, k = h ? +c.width : c.naturalWidth, h = h ? +c.height : c.naturalHeight;
                void 0 === k && c.videoWidth && (k = c.videoWidth);
                void 0 === h && c.videoHeight && (h = c.videoHeight);
                k = k || d.width;
                h = h || d.height;
                if (0 !== k && 0 !== h) {
                    var l = k, m = h;
                    this.Bj.H() && (e = this.ik.x, f = this.ik.y, k = this.ik.width, h = this.ik.height);
                    var n = k, p = h, q = this.Ko,
                        r = this.Jo;
                    switch (q) {
                        case Ij:
                            if (this.Bj.H())break;
                            n >= d.width && (e = e + r.offsetX + (n * r.x - d.width * r.x));
                            p >= d.height && (f = f + r.offsetY + (p * r.y - d.height * r.y));
                            k = Math.min(d.width, n);
                            h = Math.min(d.height, p);
                            break;
                        case Ie:
                            n = d.width;
                            p = d.height;
                            break;
                        case Kj:
                        case Lj:
                            var s = 0;
                            q === Kj ? (s = Math.min(d.height / p, d.width / n), n *= s, p *= s) : q === Lj && (s = Math.max(d.height / p, d.width / n), n *= s, p *= s, n >= d.width && (e = (e + r.offsetX + (n * r.x - d.width * r.x) / n) * k), p >= d.height && (f = (f + r.offsetY + (p * r.y - d.height * r.y) / p) * h), k *= 1 / (n / d.width), h *= 1 / (p / d.height),
                                n = d.width, p = d.height)
                    }
                    var q = this.nj() * b.scale, u = k * h / (n * q * p * q), s = Iq[this.source], q = null;
                    if (void 0 !== s && 16 < u) {
                        2 > s.Fp.length && (Pq(s, 4, l, m), Pq(s, 16, l, m));
                        for (var l = s.Fp, m = l.length, q = l[0], t = 0; t < m; t++)if (l[t].kq * l[t].kq < u)q = l[t]; else break
                    }
                    if (!b.Co) {
                        if (null === this.wp)if (null === this.Se)this.wp = !1; else {
                            l = (new Tc(null)).wk;
                            l.drawImage(this.Se, 0, 0);
                            try {
                                l.getImageData(0, 0, 1, 1).data[3] && (this.wp = !1), this.wp = !1
                            } catch (x) {
                                this.wp = !0
                            }
                        }
                        if (this.wp)return
                    }
                    l = 0;
                    n < d.width && (l = r.offsetX + (d.width * r.x - n * r.x));
                    m = 0;
                    p < d.height &&
                    (m = r.offsetY + (d.height * r.y - p * r.y));
                    switch (this.Pt) {
                        case po:
                            a.translate(Math.min(d.width, n), 0);
                            a.scale(-1, 1);
                            break;
                        case oo:
                            a.translate(0, Math.min(d.height, p));
                            a.scale(1, -1);
                            break;
                        case qo:
                            a.translate(Math.min(d.width, n), Math.min(d.height, p)), a.scale(-1, -1)
                    }
                    if (b.oj("pictureRatioOptimization") && !b.fz && void 0 !== s && null !== q && 1 !== q.kq) {
                        a.save();
                        s = q.kq;
                        try {
                            a.drawImage(q.source, e / s, f / s, Math.min(q.source.width, k / s), Math.min(q.source.height, h / s), l, m, Math.min(d.width, n), Math.min(d.height, p))
                        } catch (v) {
                            this.yv = !1
                        }
                        a.restore()
                    } else try {
                        a.drawImage(c, e, f, k, h, l, m, Math.min(d.width, n), Math.min(d.height, p))
                    } catch (B) {
                        this.yv = !1
                    }
                    switch (this.Pt) {
                        case po:
                            a.scale(-1, 1);
                            a.translate(-Math.min(d.width, n), 0);
                            break;
                        case oo:
                            a.scale(1, -1);
                            a.translate(0, -Math.min(d.height, p));
                            break;
                        case qo:
                            a.scale(-1, -1), a.translate(-Math.min(d.width, n), -Math.min(d.height, p))
                    }
                }
            }
        }
    };
    w.u(tl, {Ia: "naturalBounds"}, function () {
        return this.Sc
    });
    tl.prototype.Ln = function (a, b, c, d) {
        var e = this.Aa, f = Bo(this, !0), h = this.Se, k = this.ez;
        if (k || !this.Uv && h && h.complete)this.Uv = !0;
        null === h && (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        isFinite(e.width) || f === Ie || f === no ? (isFinite(a) || (a = this.Bj.H() ? this.Bj.width : k ? +h.width : h.naturalWidth), c = 0) : null !== h && !1 !== this.Uv && (a = this.Bj.H() ? this.Bj.width : k ? +h.width : h.naturalWidth);
        isFinite(e.height) || f === Ie || f === mo ? (isFinite(b) || (b = this.Bj.H() ? this.Bj.height : k ? +h.height : h.naturalHeight), d = 0) : null !== h && !1 !== this.Uv && (b =
            this.Bj.H() ? this.Bj.height : k ? +h.height : h.naturalHeight);
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        e = this.Af;
        f = this.zh;
        c = Math.max(c, f.width);
        d = Math.max(d, f.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        null === h || h.complete || (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        Pa(this.Sc, a, b);
        yo(this, 0, 0, a, b)
    };
    tl.prototype.hj = function (a, b, c, d) {
        Do(this, a, b, c, d)
    };
    function Oq(a) {
        this.Fp = [new Qq(a, 1)]
    }

    function Pq(a, b, c, d) {
        var e = new Tc(null), f = e.wk, h = 1 / b;
        e.width = c / b;
        e.height = d / b;
        b = new Qq(e.Gd, b);
        c = a.Fp[a.Fp.length - 1];
        f.setTransform(h * c.kq, 0, 0, h * c.kq, 0, 0);
        f.drawImage(c.source, 0, 0);
        a.Fp.push(b)
    }

    function Qq(a, b) {
        this.source = a;
        this.kq = b
    }

    function ja() {
        this.o = new Fe;
        this.Ub = null
    }

    g = ja.prototype;
    g.reset = function () {
        this.o = new Fe;
        this.Ub = null
    };
    function M(a, b, c, d, e, f) {
        null === a.o && w.k("StreamGeometryContext has been closed");
        void 0 !== e && !0 === e ? (null === a.Ub && w.k("Need to call beginFigure first"), d = new yf(of), d.D = b, d.F = c, a.Ub.vb.add(d)) : (a.Ub = new He, a.Ub.ia = b, a.Ub.ga = c, a.Ub.bu = d, a.o.cc.add(a.Ub));
        void 0 !== f && (a.Ub.Qo = f)
    }

    function O(a) {
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Ub && w.k("Need to call beginFigure first");
        var b = a.Ub.vb.length;
        0 < b && a.Ub.vb.da(b - 1).close()
    }

    function Ze(a) {
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Ub && w.k("Need to call beginFigure first");
        0 < a.Ub.vb.length && (a.Ub.bu = !0)
    }

    g.$a = function (a) {
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Ub && w.k("Need to call beginFigure first");
        this.Ub.Zl = a
    };
    g.moveTo = function (a, b, c) {
        void 0 === c && (c = !1);
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Ub && w.k("Need to call beginFigure first");
        var d = new yf(of);
        d.D = a;
        d.F = b;
        c && d.close();
        this.Ub.vb.add(d)
    };
    g.lineTo = function (a, b, c) {
        void 0 === c && (c = !1);
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Ub && w.k("Need to call beginFigure first");
        var d = new yf(Ue);
        d.D = a;
        d.F = b;
        c && d.close();
        this.Ub.vb.add(d)
    };
    function N(a, b, c, d, e, f, h, k) {
        void 0 === k && (k = !1);
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Ub && w.k("Need to call beginFigure first");
        var l = new yf(pf);
        l.rc = b;
        l.Oc = c;
        l.Ah = d;
        l.Bh = e;
        l.D = f;
        l.F = h;
        k && l.close();
        a.Ub.vb.add(l)
    }

    function Xe(a, b, c, d, e) {
        var f;
        void 0 === f && (f = !1);
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Ub && w.k("Need to call beginFigure first");
        var h = new yf(qf);
        h.rc = b;
        h.Oc = c;
        h.D = d;
        h.F = e;
        f && h.close();
        a.Ub.vb.add(h)
    }

    g.arcTo = function (a, b, c, d, e, f, h) {
        void 0 === f && (f = 0);
        void 0 === h && (h = !1);
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Ub && w.k("Need to call beginFigure first");
        var k = new yf(rf);
        k.ye = a;
        k.of = b;
        k.ja = c;
        k.ra = d;
        k.radiusX = e;
        k.radiusY = 0 !== f ? f : e;
        h && k.close();
        this.Ub.vb.add(k)
    };
    function Ye(a, b, c, d, e, f, h, k) {
        var l;
        void 0 === l && (l = !1);
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Ub && w.k("Need to call beginFigure first");
        b = new yf(sf, h, k, b, c, d, e, f);
        l && b.close();
        a.Ub.vb.add(b)
    }

    function Rq(a) {
        a = Sq(a);
        var b = w.lb();
        b[0] = a[0];
        for (var c = 1, d = 1; d < a.length;)b[c] = a[d], b[c + 1] = a[d], b[c + 2] = a[d + 1], d += 2, c += 3;
        w.va(a);
        return b
    }

    function Sq(a) {
        var b = Tq(a), c = w.lb(), d = Math.floor(b.length / 2), e = b.length - 1;
        a = 0 === a % 2 ? 2 : 1;
        for (var f = 0; f < e; f++) {
            var h = b[f], k = b[f + 1], l = b[(d + f - 1) % e], m = b[(d + f + a) % e];
            c[2 * f] = h;
            c[2 * f + 1] = pe(h.x, h.y, l.x, l.y, k.x, k.y, m.x, m.y, new z)
        }
        c[c.length] = c[0];
        w.va(b);
        return c
    }

    function Tq(a) {
        for (var b = w.lb(), c = 1.5 * Math.PI, d = 0, e = 0; e < a; e++)d = 2 * Math.PI / a * e + c, b[e] = new z(.5 + .5 * Math.cos(d), .5 + .5 * Math.sin(d));
        b.push(b[0]);
        return b
    }

    var fq = {
        None: "Rectangle", Rectangle: function (a, b, c) {
            a = new Fe;
            a.type = Ke;
            a.ia = 0;
            a.ga = 0;
            a.D = b;
            a.F = c;
            return a
        }, Square: function (a, b, c) {
            a = new Fe;
            a.Zd = Kj;
            a.type = Ke;
            a.ia = 0;
            a.ga = 0;
            a.D = Math.min(b, c);
            a.F = Math.min(b, c);
            return a
        }, Ellipse: function (a, b, c) {
            a = new Fe;
            a.type = Se;
            a.ia = 0;
            a.ga = 0;
            a.D = b;
            a.F = c;
            a.A = Rd;
            a.B = Sd;
            return a
        }, Circle: function (a, b, c) {
            a = new Fe;
            a.Zd = Kj;
            a.type = Se;
            a.ia = 0;
            a.ga = 0;
            a.D = Math.min(b, c);
            a.F = Math.min(b, c);
            a.A = Rd;
            a.B = Sd;
            return a
        }, Connector: "Ellipse", TriangleRight: function (a, b, c) {
            a = new Fe;
            var d = new He,
                e = new yf;
            e.D = b;
            e.F = .5 * c;
            d.vb.add(e);
            b = new yf;
            b.D = 0;
            b.F = c;
            d.vb.add(b.close());
            a.cc.add(d);
            a.A = new L(0, .25);
            a.B = new L(.5, .75);
            return a
        }, TriangleDown: function (a, b, c) {
            a = new Fe;
            var d = new He, e = new yf;
            e.D = b;
            e.F = 0;
            d.vb.add(e);
            e = new yf;
            e.D = .5 * b;
            e.F = c;
            d.vb.add(e.close());
            a.cc.add(d);
            a.A = new L(.25, 0);
            a.B = new L(.75, .5);
            return a
        }, TriangleLeft: function (a, b, c) {
            a = new Fe;
            var d = new He;
            d.ia = b;
            d.ga = c;
            var e = new yf;
            e.D = 0;
            e.F = .5 * c;
            d.vb.add(e);
            c = new yf;
            c.D = b;
            c.F = 0;
            d.vb.add(c.close());
            a.cc.add(d);
            a.A = new L(.5, .25);
            a.B = new L(1,
                .75);
            return a
        }, TriangleUp: function (a, b, c) {
            a = new Fe;
            var d = new He;
            d.ia = b;
            d.ga = c;
            var e = new yf;
            e.D = 0;
            e.F = c;
            d.vb.add(e);
            c = new yf;
            c.D = .5 * b;
            c.F = 0;
            d.vb.add(c.close());
            a.cc.add(d);
            a.A = new L(.25, .5);
            a.B = new L(.75, 1);
            return a
        }, Line1: function (a, b, c) {
            a = new Fe;
            a.type = Je;
            a.ia = 0;
            a.ga = 0;
            a.D = b;
            a.F = c;
            return a
        }, Line2: function (a, b, c) {
            a = new Fe;
            a.type = Je;
            a.ia = b;
            a.ga = 0;
            a.D = 0;
            a.F = c;
            return a
        }, MinusLine: "LineH", LineH: function (a, b, c) {
            a = new Fe;
            a.type = Je;
            a.ia = 0;
            a.ga = c / 2;
            a.D = b;
            a.F = c / 2;
            return a
        }, LineV: function (a, b, c) {
            a = new Fe;
            a.type =
                Je;
            a.ia = b / 2;
            a.ga = 0;
            a.D = b / 2;
            a.F = c;
            return a
        }, BarH: "Rectangle", BarV: "Rectangle", Curve1: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            N(a, ad * b, 0, 1 * b, (1 - ad) * c, b, c);
            b = a.o;
            w.q(a);
            return b
        }, Curve2: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            N(a, 0, ad * c, (1 - ad) * b, c, b, c);
            b = a.o;
            w.q(a);
            return b
        }, Curve3: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, 0, !1);
            N(a, 1 * b, ad * c, ad * b, 1 * c, 0, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, Curve4: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, 0, !1);
            N(a, (1 - ad) * b, 0, 0, (1 - ad) * c, 0, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, Alternative: "Triangle", Merge: "Triangle",
        Triangle: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0 * c, !0);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(1 * b, 1 * c, !0);
            b = a.o;
            b.A = new L(.25, .5);
            b.B = new L(.75, 1);
            w.q(a);
            return b
        }, Decision: "Diamond", Diamond: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !0);
            a.lineTo(0, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, .5 * c, !0);
            b = a.o;
            b.A = new L(.25, .25);
            b.B = new L(.75, .75);
            w.q(a);
            return b
        }, Pentagon: function (a, b, c) {
            var d = Tq(5);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 5 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.2, .22);
            b.B = new L(.8,
                .9);
            w.q(a);
            return b
        }, DataTransmission: "Hexagon", Hexagon: function (a, b, c) {
            var d = Tq(6);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 6 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.07, .25);
            b.B = new L(.93, .75);
            w.q(a);
            return b
        }, Heptagon: function (a, b, c) {
            var d = Tq(7);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 7 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.2, .15);
            b.B = new L(.8, .85);
            w.q(a);
            return b
        }, Octagon: function (a, b, c) {
            var d = Tq(8);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 8 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.15, .15);
            b.B = new L(.85, .85);
            w.q(a);
            return b
        }, Nonagon: function (a, b, c) {
            var d = Tq(9);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 9 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.17, .13);
            b.B = new L(.82, .82);
            w.q(a);
            return b
        }, Decagon: function (a, b, c) {
            var d = Tq(10);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 10 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.16, .16);
            b.B = new L(.84, .84);
            w.q(a);
            return b
        },
        Dodecagon: function (a, b, c) {
            var d = Tq(12);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 12 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.16, .16);
            b.B = new L(.84, .84);
            w.q(a);
            return b
        }, FivePointedStar: function (a, b, c) {
            var d = Sq(5);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 10 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.312, .383);
            b.B = new L(.693, .765);
            w.q(a);
            return b
        }, SixPointedStar: function (a, b, c) {
            var d = Sq(6);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 12 > e; e++)a.lineTo(d[e].x *
                b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.17, .251);
            b.B = new L(.833, .755);
            w.q(a);
            return b
        }, SevenPointedStar: function (a, b, c) {
            var d = Sq(7);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 14 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.363, .361);
            b.B = new L(.641, .709);
            w.q(a);
            return b
        }, EightPointedStar: function (a, b, c) {
            var d = Sq(8);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 16 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.252, .255);
            b.B = new L(.75, .75);
            w.q(a);
            return b
        }, NinePointedStar: function (a,
                                      b, c) {
            var d = Sq(9);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 18 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.355, .361);
            b.B = new L(.645, .651);
            w.q(a);
            return b
        }, TenPointedStar: function (a, b, c) {
            var d = Sq(10);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 20 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.281, .261);
            b.B = new L(.723, .748);
            w.q(a);
            return b
        }, FivePointedBurst: function (a, b, c) {
            var d = Rq(5);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)N(a, d[e].x *
                b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.312, .383);
            b.B = new L(.693, .765);
            w.q(a);
            return b
        }, SixPointedBurst: function (a, b, c) {
            var d = Rq(6);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)N(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.17, .251);
            b.B = new L(.833, .755);
            w.q(a);
            return b
        }, SevenPointedBurst: function (a, b, c) {
            var d = Rq(7);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)N(a, d[e].x *
                b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.363, .361);
            b.B = new L(.641, .709);
            w.q(a);
            return b
        }, EightPointedBurst: function (a, b, c) {
            var d = Rq(8);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)N(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.252, .255);
            b.B = new L(.75, .75);
            w.q(a);
            return b
        }, NinePointedBurst: function (a, b, c) {
            var d = Rq(9);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)N(a, d[e].x *
                b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.355, .361);
            b.B = new L(.645, .651);
            w.q(a);
            return b
        }, TenPointedBurst: function (a, b, c) {
            var d = Rq(10);
            a = w.s();
            M(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)N(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            w.va(d);
            O(a);
            b = a.o;
            b.A = new L(.281, .261);
            b.B = new L(.723, .748);
            w.q(a);
            return b
        }, Cloud: function (a, b, c) {
            a = w.s();
            M(a, .08034461 * b, .1944299 * c, !0);
            N(a, -.09239631 * b, .07836421 * c, .1406031 * b, -.0542823 * c, .2008615 *
                b, .05349299 * c);
            N(a, .2450511 * b, -.00697547 * c, .3776197 * b, -.01112067 * c, .4338609 * b, .074219 * c);
            N(a, .4539471 * b, 0, .6066018 * b, -.02526587 * c, .6558228 * b, .07004196 * c);
            N(a, .6914277 * b, -.01904177 * c, .8921095 * b, -.01220843 * c, .8921095 * b, .08370865 * c);
            N(a, 1.036446 * b, .04105738 * c, 1.020377 * b, .3022052 * c, .9147671 * b, .3194596 * c);
            N(a, 1.04448 * b, .360238 * c, .992256 * b, .5219009 * c, .9082935 * b, .562044 * c);
            N(a, 1.032337 * b, .5771781 * c, 1.018411 * b, .8120651 * c, .9212406 * b, .8217117 * c);
            N(a, 1.028411 * b, .9571472 * c, .8556702 * b, 1.052487 * c, .7592566 * b, .9156953 *
                c);
            N(a, .7431877 * b, 1.009325 * c, .5624123 * b, 1.021761 * c, .5101666 * b, .9310455 * c);
            N(a, .4820677 * b, 1.031761 * c, .3030112 * b, 1.002796 * c, .2609328 * b, .9344623 * c);
            N(a, .2329994 * b, 1.01518 * c, .03213784 * b, 1.01518 * c, .08034461 * b, .870098 * c);
            N(a, -.02812061 * b, .9032597 * c, -.01205169 * b, .6835638 * c, .06829292 * b, .6545475 * c);
            N(a, -.01812061 * b, .6089503 * c, -.00606892 * b, .4555777 * c, .06427569 * b, .4265613 * c);
            N(a, -.01606892 * b, .3892545 * c, -.01205169 * b, .1944299 * c, .08034461 * b, .1944299 * c);
            O(a);
            b = a.o;
            b.A = new L(.1, .1);
            b.B = new L(.9, .9);
            w.q(a);
            return b
        },
        Gate: "Crescent", Crescent: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            N(a, 1 * b, 0, 1 * b, 1 * c, 0, 1 * c);
            N(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            O(a);
            b = a.o;
            b.A = new L(.511, .19);
            b.B = new L(.776, .76);
            w.q(a);
            return b
        }, FramedRectangle: function (a, b, c) {
            var d = w.s(), e = a ? a.Cc : NaN;
            a = a ? a.vu : NaN;
            isNaN(e) && (e = .1);
            isNaN(a) && (a = .1);
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c, !0);
            M(d, e * b, a * c, !1, !0);
            d.lineTo(e * b, (1 - a) * c);
            d.lineTo((1 - e) * b, (1 - a) * c);
            d.lineTo((1 - e) * b, a * c, !0);
            b = d.o;
            b.A = new L(e, a);
            b.B = new L(1 - e, 1 - a);
            w.q(d);
            return b
        },
        Delay: "HalfEllipse", HalfEllipse: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            N(a, ad * b, 0, 1 * b, (.5 - ad / 2) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 + ad / 2) * c, ad * b, 1 * c, 0, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .2);
            b.B = new L(.75, .8);
            w.q(a);
            return b
        }, Heart: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 1 * c, !0);
            N(a, .1 * b, .8 * c, 0, .5 * c, 0 * b, .3 * c);
            N(a, 0 * b, 0, .45 * b, 0, .5 * b, .3 * c);
            N(a, .55 * b, 0, 1 * b, 0, 1 * b, .3 * c);
            N(a, b, .5 * c, .9 * b, .8 * c, .5 * b, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(.15, .29);
            b.B = new L(.86, .68);
            w.q(a);
            return b
        }, Spade: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !0);
            a.lineTo(.51 * b, .01 * c);
            N(a, .6 * b, .2 * c, b, .25 * c, b, .5 * c);
            N(a, b, .8 * c, .6 * b, .8 * c, .55 * b, .7 * c);
            N(a, .5 * b, .75 * c, .55 * b, .95 * c, .75 * b, c);
            a.lineTo(.25 * b, c);
            N(a, .45 * b, .95 * c, .5 * b, .75 * c, .45 * b, .7 * c);
            N(a, .4 * b, .8 * c, 0, .8 * c, 0, .5 * c);
            N(a, 0, .25 * c, .4 * b, .2 * c, .49 * b, .01 * c);
            O(a);
            b = a.o;
            b.A = new L(.19, .26);
            b.B = new L(.8, .68);
            w.q(a);
            return b
        }, Club: function (a, b, c) {
            a = w.s();
            M(a, .4 * b, .6 * c, !0);
            N(a, .5 * b, .75 * c, .45 * b, .95 * c, .15 * b, 1 * c);
            a.lineTo(.85 * b, c);
            N(a, .55 * b, .95 * c, .5 * b, .75 * c, .6 * b, .6 * c);
            var d = .2, e = .3, f = 0, h = 4 * (Math.SQRT2 - 1) / 3 * d;
            N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) *
                b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
            N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
            N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e + .05) * b, (.5 - h + f - .02) * c, .65 * b, .36771243 * c);
            d = .2;
            e = 0;
            f = -.3;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
            N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
            N(a, (.5 - d +
                e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, .35 * b, .36771243 * c);
            d = .2;
            e = -.3;
            f = 0;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            N(a, (.5 + d + e - .05) * b, (.5 - h + f - .02) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
            N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
            N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, .4 * b, .6 * c);
            O(a);
            b = a.o;
            b.A = new L(.06, .39);
            b.B = new L(.93, .58);
            w.q(a);
            return b
        }, Ring: function (a, b, c) {
            a = w.s();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            M(a, b, .5 *
                c, !0);
            N(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
            N(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
            N(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
            N(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
            d = 4 * (Math.SQRT2 - 1) / 3 * .4;
            M(a, .5 * b, .1 * c, !0, !0);
            N(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
            N(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
            N(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
            N(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
            b = a.o;
            b.A = new L(.146, .146);
            b.B = new L(.853, .853);
            b.Zd = Kj;
            w.q(a);
            return b
        }, YinYang: function (a, b, c) {
            var d = .5;
            a = w.s();
            d = .5;
            M(a, .5 * b, 0, !0);
            a.arcTo(270,
                180, .5 * b, .5 * b, .5 * b);
            N(a, 1 * b, d * c, 0, d * c, d * b, 0, !0);
            var d = .1, e = .25;
            M(a, (.5 + d) * b, e * c, !0, !0);
            a.arcTo(0, -360, .5 * b, c * e, d * b);
            O(a);
            M(a, .5 * b, 0, !1);
            a.arcTo(270, -180, .5 * b, .5 * b, .5 * b);
            a.$a(!1);
            e = .75;
            M(a, (.5 + d) * b, e * c, !0);
            a.arcTo(0, 360, .5 * b, c * e, d * b);
            O(a);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }, Peace: function (a, b, c) {
            a = w.s();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            M(a, b, .5 * c, !0);
            N(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
            N(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
            N(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
            N(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
            d = 4 * (Math.SQRT2 - 1) / 3 * .4;
            M(a, .5 * b, .1 * c, !0, !0);
            N(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
            N(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
            N(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
            N(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
            var d = .07, e = 0, f = -.707 * .11, h = 4 * (Math.SQRT2 - 1) / 3 * d;
            M(a, (.5 + d + e) * b, (.5 + f) * c, !0);
            N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
            N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
            N(a, (.5 + h + e) * b, (.5 + d + f) *
                c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
            d = .07;
            e = -.707 * .11;
            f = .707 * .11;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            M(a, (.5 + d + e) * b, (.5 + f) * c, !0);
            N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
            N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
            N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
            d = .07;
            e = .707 * .11;
            f = .707 * .11;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            M(a, (.5 + d + e) * b, (.5 + f) * c, !0);
            N(a, (.5 + d + e) * b, (.5 - h +
                f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
            N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
            N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
            b = a.o;
            b.A = new L(.146, .146);
            b.B = new L(.853, .853);
            b.Zd = Kj;
            w.q(a);
            return b
        }, NotAllowed: function (a, b, c) {
            var d = .5 * ad, e = .5;
            a = w.s();
            M(a, .5 * b, (.5 - e) * c, !0);
            N(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
            N(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b,
                (.5 + e) * c);
            N(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
            N(a, (.5 + e) * b, (.5 - d) * c, (.5 + d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            var e = .4, d = .4 * ad, f = w.K(), h = w.K(), k = w.K(), l = w.K();
            he(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .42, f, h, k, l, l);
            var m = w.K(), n = w.K(), p = w.K();
            he(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .58, l, l, p, m, n);
            var q = w.K(), r = w.K(), s = w.K();
            he(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .42, q, r, s, l, l);
            var u = w.K(), t = w.K(), x = w.K();
            he(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .58, l, l, x, u, t);
            M(a, x.x * b, x.y * c, !0, !0);
            N(a, u.x * b,
                u.y * c, t.x * b, t.y * c, (.5 - e) * b, .5 * c);
            N(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            N(a, f.x * b, f.y * c, h.x * b, h.y * c, k.x * b, k.y * c);
            a.lineTo(x.x * b, x.y * c);
            O(a);
            M(a, s.x * b, s.y * c, !0, !0);
            a.lineTo(p.x * b, p.y * c);
            N(a, m.x * b, m.y * c, n.x * b, n.y * c, (.5 + e) * b, .5 * c);
            N(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            N(a, q.x * b, q.y * c, r.x * b, r.y * c, s.x * b, s.y * c);
            O(a);
            w.v(f);
            w.v(h);
            w.v(k);
            w.v(l);
            w.v(m);
            w.v(n);
            w.v(p);
            w.v(q);
            w.v(r);
            w.v(s);
            w.v(u);
            w.v(t);
            w.v(x);
            b = a.o;
            w.q(a);
            b.Zd = Kj;
            return b
        }, Fragile: function (a, b, c) {
            a = w.s();
            M(a,
                0, 0, !0);
            a.lineTo(.25 * b, 0);
            a.lineTo(.2 * b, .15 * c);
            a.lineTo(.3 * b, .25 * c);
            a.lineTo(.29 * b, .33 * c);
            a.lineTo(.35 * b, .25 * c);
            a.lineTo(.3 * b, .15 * c);
            a.lineTo(.4 * b, 0);
            a.lineTo(1 * b, 0);
            N(a, 1 * b, .25 * c, .75 * b, .5 * c, .55 * b, .5 * c);
            a.lineTo(.55 * b, .9 * c);
            a.lineTo(.7 * b, .9 * c);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(.3 * b, .9 * c);
            a.lineTo(.45 * b, .9 * c);
            a.lineTo(.45 * b, .5 * c);
            N(a, .25 * b, .5 * c, 0, .25 * c, 0, 0);
            O(a);
            b = a.o;
            b.A = new L(.25, 0);
            b.B = new L(.75, .4);
            w.q(a);
            return b
        }, HourGlass: function (a, b, c) {
            a = w.s();
            M(a, .65 * b, .5 * c, !0);
            a.lineTo(1 * b,
                1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.35 * b, .5 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, Lightning: function (a, b, c) {
            a = w.s();
            M(a, 0 * b, .55 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(.25 * b, .45 * c);
            a.lineTo(.9 * b, .48 * c);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.65 * b, .55 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, Parallelogram1: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .1);
            var d = w.s();
            M(d, a * b, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            b = d.o;
            b.A = new L(a, 0);
            b.B = new L(1 - a, 1);
            w.q(d);
            return b
        }, Input: "Output", Output: function (a,
                                              b, c) {
            a = w.s();
            M(a, 0, 1 * c, !0);
            a.lineTo(.1 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(.1, 0);
            b.B = new L(.9, 1);
            w.q(a);
            return b
        }, Parallelogram2: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .25);
            var d = w.s();
            M(d, a * b, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            b = d.o;
            b.A = new L(a, 0);
            b.B = new L(1 - a, 1);
            w.q(d);
            return b
        }, ThickCross: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .25);
            var d = w.s();
            M(d, (.5 - a / 2) * b, 0, !0);
            d.lineTo((.5 + a / 2) * b, 0);
            d.lineTo((.5 + a / 2) * b, (.5 - a / 2) * c);
            d.lineTo(1 * b, (.5 -
                a / 2) * c);
            d.lineTo(1 * b, (.5 + a / 2) * c);
            d.lineTo((.5 + a / 2) * b, (.5 + a / 2) * c);
            d.lineTo((.5 + a / 2) * b, 1 * c);
            d.lineTo((.5 - a / 2) * b, 1 * c);
            d.lineTo((.5 - a / 2) * b, (.5 + a / 2) * c);
            d.lineTo(0, (.5 + a / 2) * c);
            d.lineTo(0, (.5 - a / 2) * c);
            d.lineTo((.5 - a / 2) * b, (.5 - a / 2) * c);
            O(d);
            b = d.o;
            b.A = new L(.5 - a / 2, .5 - a / 2);
            b.B = new L(.5 + a / 2, .5 + a / 2);
            w.q(d);
            return b
        }, ThickX: function (a, b, c) {
            a = .25 / Math.SQRT2;
            var d = w.s();
            M(d, .3 * b, 0, !0);
            d.lineTo(.5 * b, .2 * c);
            d.lineTo(.7 * b, 0);
            d.lineTo(1 * b, .3 * c);
            d.lineTo(.8 * b, .5 * c);
            d.lineTo(1 * b, .7 * c);
            d.lineTo(.7 * b, 1 * c);
            d.lineTo(.5 * b, .8 *
                c);
            d.lineTo(.3 * b, 1 * c);
            d.lineTo(0, .7 * c);
            d.lineTo(.2 * b, .5 * c);
            d.lineTo(0, .3 * c);
            O(d);
            b = d.o;
            b.A = new L(.5 - a, .5 - a);
            b.B = new L(.5 + a, .5 + a);
            w.q(d);
            return b
        }, ThinCross: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            isNaN(d) && (d = .1);
            a = w.s();
            M(a, (.5 - d / 2) * b, 0, !0);
            a.lineTo((.5 + d / 2) * b, 0);
            a.lineTo((.5 + d / 2) * b, (.5 - d / 2) * c);
            a.lineTo(1 * b, (.5 - d / 2) * c);
            a.lineTo(1 * b, (.5 + d / 2) * c);
            a.lineTo((.5 + d / 2) * b, (.5 + d / 2) * c);
            a.lineTo((.5 + d / 2) * b, 1 * c);
            a.lineTo((.5 - d / 2) * b, 1 * c);
            a.lineTo((.5 - d / 2) * b, (.5 + d / 2) * c);
            a.lineTo(0, (.5 + d / 2) * c);
            a.lineTo(0, (.5 - d / 2) * c);
            a.lineTo((.5 -
                d / 2) * b, (.5 - d / 2) * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, ThinX: function (a, b, c) {
            a = w.s();
            M(a, .1 * b, 0, !0);
            a.lineTo(.5 * b, .4 * c);
            a.lineTo(.9 * b, 0);
            a.lineTo(1 * b, .1 * c);
            a.lineTo(.6 * b, .5 * c);
            a.lineTo(1 * b, .9 * c);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.5 * b, .6 * c);
            a.lineTo(.1 * b, 1 * c);
            a.lineTo(0, .9 * c);
            a.lineTo(.4 * b, .5 * c);
            a.lineTo(0, .1 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, RightTriangle: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .5);
            b.B = new L(.5, 1);
            w.q(a);
            return b
        }, RoundedIBeam: function (a, b, c) {
            a =
                w.s();
            M(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            N(a, .5 * b, .25 * c, .5 * b, .75 * c, 1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            N(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, RoundedRectangle: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            isNaN(d) && (d = 5);
            d = Math.min(d, b / 3);
            d = Math.min(d, c / 3);
            a = d * ad;
            var e = w.s();
            M(e, d, 0, !0);
            e.lineTo(b - d, 0);
            N(e, b - a, 0, b, a, b, d);
            e.lineTo(b, c - d);
            N(e, b, c - a, b - a, c, b - d, c);
            e.lineTo(d, c);
            N(e, a, c, 0, c - a, 0, c - d);
            e.lineTo(0, d);
            N(e, 0, a, a, 0, d, 0);
            O(e);
            b = e.o;
            1 < a ? (b.A = new L(0, 0, a, a), b.B = new L(1, 1, -a, -a)) : (b.A = vb, b.B = Kb);
            w.q(e);
            return b
        },
        Border: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            isNaN(d) && (d = 5);
            d = Math.min(d, b / 3);
            d = Math.min(d, c / 3);
            a = w.s();
            M(a, d, 0, !0);
            a.lineTo(b - d, 0);
            N(a, b - 0, 0, b, 0, b, d);
            a.lineTo(b, c - d);
            N(a, b, c - 0, b - 0, c, b - d, c);
            a.lineTo(d, c);
            N(a, 0, c, 0, c - 0, 0, c - d);
            a.lineTo(0, d);
            N(a, 0, 0, 0, 0, d, 0);
            O(a);
            b = a.o;
            b.A = vb;
            b.B = Kb;
            w.q(a);
            return b
        }, SquareIBeam: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            isNaN(d) && (d = .2);
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, d * c);
            a.lineTo((.5 + d / 2) * b, d * c);
            a.lineTo((.5 + d / 2) * b, (1 - d) * c);
            a.lineTo(1 * b, (1 - d) * c);
            a.lineTo(1 * b, 1 *
                c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, (1 - d) * c);
            a.lineTo((.5 - d / 2) * b, (1 - d) * c);
            a.lineTo((.5 - d / 2) * b, d * c);
            a.lineTo(0, d * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, Trapezoid: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .2);
            var d = w.s();
            M(d, a * b, 0, !0);
            d.lineTo((1 - a) * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            b = d.o;
            b.A = new L(a, 0);
            b.B = new L(1 - a, 1);
            w.q(d);
            return b
        }, ManualLoop: "ManualOperation", ManualOperation: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            isNaN(d) && (d = 0);
            a = w.s();
            M(a, d, 0, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.1 *
                b, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(.1, 0);
            b.B = new L(.9, 1);
            w.q(a);
            return b
        }, GenderMale: function (a, b, c) {
            a = w.s();
            var d = .4 * ad, e = .4, f = w.K(), h = w.K(), k = w.K(), l = w.K();
            M(a, (.5 - e) * b, .5 * c, !0);
            N(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            he(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .44, k, l, h, f, f);
            N(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
            var m = w.xb(h.x, h.y);
            he(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .56, f, f, h, k, l);
            var n = w.xb(h.x, h.y);
            a.lineTo((.1 * m.x + .855) * b, .1 * m.y * c);
            a.lineTo(.85 * b, .1 * m.y * c);
            a.lineTo(.85 * b, 0);
            a.lineTo(1 *
                b, 0);
            a.lineTo(1 * b, .15 * c);
            a.lineTo((.1 * n.x + .9) * b, .15 * c);
            a.lineTo((.1 * n.x + .9) * b, (.1 * n.y + .05 * .9) * c);
            a.lineTo(n.x * b, n.y * c);
            N(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
            N(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            N(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
            e = .35;
            d = .35 * ad;
            M(a, .5 * b, (.5 - e) * c, !0, !0);
            N(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
            N(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            N(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
            N(a, (.5 + e) * b, (.5 - d) * c, (.5 +
                d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            M(a, (.5 - e) * b, .5 * c, !0);
            w.v(f);
            w.v(h);
            w.v(k);
            w.v(l);
            w.v(m);
            w.v(n);
            b = a.o;
            b.A = new L(.202, .257);
            b.B = new L(.692, .839);
            b.Zd = Kj;
            w.q(a);
            return b
        }, GenderFemale: function (a, b, c) {
            a = w.s();
            var d = .375, e = 0, f = -.125, h = 4 * (Math.SQRT2 - 1) / 3 * d;
            M(a, (.525 + e) * b, (.5 + d + f) * c, !0);
            N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
            N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
            N(a, (.5 - d + e) * b,
                (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.475 + e) * b, (.5 + d + f) * c);
            a.lineTo(.475 * b, .85 * c);
            a.lineTo(.425 * b, .85 * c);
            a.lineTo(.425 * b, .9 * c);
            a.lineTo(.475 * b, .9 * c);
            a.lineTo(.475 * b, 1 * c);
            a.lineTo(.525 * b, 1 * c);
            a.lineTo(.525 * b, .9 * c);
            a.lineTo(.575 * b, .9 * c);
            a.lineTo(.575 * b, .85 * c);
            a.lineTo(.525 * b, .85 * c);
            O(a);
            d = .325;
            e = 0;
            f = -.125;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            M(a, (.5 + d + e) * b, (.5 + f) * c, !0, !0);
            N(a, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
            N(a, (.5 - h + e) * b, (.5 + d + f) * c, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
            N(a, (.5 -
                d + e) * b, (.5 - h + f) * c, (.5 - h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
            N(a, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
            M(a, (.525 + e) * b, (.5 + d + f) * c, !0);
            b = a.o;
            b.A = new L(.232, .136);
            b.B = new L(.782, .611);
            b.Zd = Kj;
            w.q(a);
            return b
        }, PlusLine: function (a, b, c) {
            a = w.s();
            M(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, XLine: function (a, b, c) {
            a = w.s();
            M(a, 0, 1 * c, !1);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, AsteriskLine: function (a, b, c) {
            a =
                w.s();
            var d = .2 / Math.SQRT2;
            M(a, d * b, (1 - d) * c, !1);
            a.lineTo((1 - d) * b, d * c);
            a.moveTo(d * b, d * c);
            a.lineTo((1 - d) * b, (1 - d) * c);
            a.moveTo(0 * b, .5 * c);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, 0 * c);
            a.lineTo(.5 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, CircleLine: function (a, b, c) {
            var d = .5 * ad;
            a = w.s();
            M(a, 1 * b, .5 * c, !1);
            N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.o;
            b.A = new L(.146, .146);
            b.B = new L(.853, .853);
            b.Zd = Kj;
            w.q(a);
            return b
        }, Pie: function (a,
                          b, c) {
            a = w.s();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            M(a, (.5 * Math.SQRT2 / 2 + .5) * b, (.5 - .5 * Math.SQRT2 / 2) * c, !0);
            N(a, .7 * b, 0 * c, .5 * b, 0 * c, .5 * b, 0 * c);
            N(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
            N(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 + d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
            a.lineTo(.5 * b, .5 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, PiePiece: function (a, b, c) {
            var d = ad / Math.SQRT2 * .5, e = Math.SQRT2 / 2, f = 1 - Math.SQRT2 / 2;
            a = w.s();
            M(a, b, c, !0);
            N(a, b, (1 - d) * c, (e + d) * b, (f + d) * c, e * b, f * c);
            a.lineTo(0, c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, StopSign: function (a,
                               b, c) {
            a = 1 / (Math.SQRT2 + 2);
            var d = w.s();
            M(d, a * b, 0, !0);
            d.lineTo((1 - a) * b, 0);
            d.lineTo(1 * b, a * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(a * b, 1 * c);
            d.lineTo(0, (1 - a) * c);
            d.lineTo(0, a * c);
            O(d);
            b = d.o;
            b.A = new L(a / 2, a / 2);
            b.B = new L(1 - a / 2, 1 - a / 2);
            w.q(d);
            return b
        }, LogicImplies: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            isNaN(d) && (d = .2);
            a = w.s();
            M(a, (1 - d) * b, 0 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, c);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            b = a.o;
            b.A = vb;
            b.B = new L(.8, .5);
            w.q(a);
            return b
        }, LogicIff: function (a, b, c) {
            var d = a ? a.Cc :
                NaN;
            isNaN(d) && (d = .2);
            a = w.s();
            M(a, (1 - d) * b, 0 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, c);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            a.moveTo(d * b, 0);
            a.lineTo(0, .5 * c);
            a.lineTo(d * b, c);
            b = a.o;
            b.A = new L(.2, 0);
            b.B = new L(.8, .5);
            w.q(a);
            return b
        }, LogicNot: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, LogicAnd: function (a, b, c) {
            a = w.s();
            M(a, 0, 1 * c, !1);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            b.A = new L(.25, .5);
            b.B = new L(.75, 1);
            w.q(a);
            return b
        }, LogicOr: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            b = a.o;
            b.A = new L(.219, 0);
            b.B = new L(.78, .409);
            w.q(a);
            return b
        }, LogicXor: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.moveTo(0, .5 * c);
            a.lineTo(1 * b, .5 * c);
            var d = .5 * ad;
            N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }, LogicTruth: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, LogicFalsity: function (a, b, c) {
            a = w.s();
            M(a, 0, 1 * c, !1);
            a.lineTo(1 * b, 1 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            b = a.o;
            w.q(a);
            return b
        }, LogicThereExists: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, .5 * c);
            a.moveTo(1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, LogicForAll: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(.25 * b, .5 * c);
            a.lineTo(.75 * b, .5 * c);
            b = a.o;
            b.A = new L(.25, 0);
            b.B = new L(.75, .5);
            w.q(a);
            return b
        }, LogicIsDefinedAs: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(b, 0);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            a.moveTo(0, c);
            a.lineTo(b, c);
            b = a.o;
            b.A = new L(.01, .01);
            b.B = new L(.99, .49);
            w.q(a);
            return b
        }, LogicIntersect: function (a, b, c) {
            var d = .5 * ad;
            a = w.s();
            M(a, 0, 1 * c, !1);
            a.lineTo(0, .5 * c);
            N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            b.A = new L(0, .5);
            b.B = Kb;
            w.q(a);
            return b
        }, LogicUnion: function (a, b, c) {
            var d = .5 * ad;
            a = w.s();
            M(a, 1 * b, 0, !1);
            a.lineTo(1 * b, .5 * c);
            N(a,
                1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            a.lineTo(0, 0);
            b = a.o;
            b.A = vb;
            b.B = new L(1, .5);
            w.q(a);
            return b
        }, Arrow: function (a, b, c) {
            var d = a ? a.Cc : NaN, e = a ? a.vu : NaN;
            isNaN(d) && (d = .3);
            isNaN(e) && (e = .3);
            a = w.s();
            M(a, 0, (.5 - e / 2) * c, !0);
            a.lineTo((1 - d) * b, (.5 - e / 2) * c);
            a.lineTo((1 - d) * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, 1 * c);
            a.lineTo((1 - d) * b, (.5 + e / 2) * c);
            a.lineTo(0, (.5 + e / 2) * c);
            O(a);
            b = a.o;
            b.A = new L(0, .5 - e / 2);
            d = pe(0, .5 + e / 2, 1, .5 + e / 2, 1 - d, 1, 1, .5, w.K());
            b.B = new L(d.x, d.y);
            w.v(d);
            w.q(a);
            return b
        },
        ISOProcess: "Chevron", Chevron: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, DoubleArrow: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(.3 * b, .214 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(.3 * b, .786 * c);
            a.lineTo(0, 1 * c);
            O(a);
            M(a, .3 * b, .214 * c, !1);
            a.lineTo(.3 * b, .786 * c);
            a.$a(!1);
            b = a.o;
            w.q(a);
            return b
        }, DoubleEndArrow: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(.3 * b, .7 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(0, .5 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(.3 * b, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            O(a);
            b = a.o;
            c = pe(0, .5, .3, 0, 0, .3, .3, .3, w.K());
            b.A = new L(c.x, c.y);
            c = pe(.7, 1, 1, .5, .7, .7, 1, .7, c);
            b.B = new L(c.x, c.y);
            w.v(c);
            w.q(a);
            return b
        }, IBeamArrow: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(.2 * b, .7 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.2 * b, 0);
            a.lineTo(.2 * b, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            O(a);
            b = a.o;
            b.A = new L(0, .3);
            c = pe(.7, 1, 1, .5, .7, .7, 1, .7, w.K());
            b.B = new L(c.x, c.y);
            w.v(c);
            w.q(a);
            return b
        }, Pointer: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(.2 * b, .5 * c);
            a.lineTo(0, 0);
            O(a);
            b = a.o;
            b.A = new L(.2, .35);
            c = pe(.2, .65, 1, .65, 0, 1, 1, .5, w.K());
            b.B = new L(c.x, c.y);
            w.v(c);
            w.q(a);
            return b
        }, RoundedPointer: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            N(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            O(a);
            b = a.o;
            b.A = new L(.4, .35);
            c = pe(.2, .65, 1, .65, 0, 1, 1, .5, w.K());
            b.B = new L(c.x,
                c.y);
            w.v(c);
            w.q(a);
            return b
        }, SplitEndArrow: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(0, .7 * c);
            a.lineTo(.2 * b, .5 * c);
            a.lineTo(0, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            O(a);
            b = a.o;
            b.A = new L(.2, .3);
            c = pe(.7, 1, 1, .5, .7, .7, 1, .7, w.K());
            b.B = new L(c.x, c.y);
            w.v(c);
            w.q(a);
            return b
        }, MessageToUser: "SquareArrow", SquareArrow: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.7 * b, 0);
            O(a);
            b = a.o;
            b.A = vb;
            b.B = new L(.7, 1);
            w.q(a);
            return b
        }, Cone1: function (a, b, c) {
            var d = .5 * ad, e = .1 * ad;
            a = w.s();
            M(a, 0, .9 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, .9 * c);
            N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            O(a);
            b = a.o;
            b.A = new L(.25, .5);
            b.B = new L(.75, .97);
            w.q(a);
            return b
        }, Cone2: function (a, b, c) {
            a = w.s();
            M(a, 0, .9 * c, !0);
            N(a, (1 - .85 / .9) * b, 1 * c, .85 / .9 * b, 1 * c, 1 * b, .9 * c);
            a.lineTo(.5 * b, 0);
            a.lineTo(0, .9 * c);
            O(a);
            M(a, 0, .9 * c, !1);
            N(a, (1 - .85 / .9) * b, .8 * c, .85 / .9 * b, .8 * c, 1 * b, .9 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.25, .5);
            b.B = new L(.75, .82);
            w.q(a);
            return b
        },
        Cube1: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 1 * c, !0);
            a.lineTo(1 * b, .85 * c);
            a.lineTo(1 * b, .15 * c);
            a.lineTo(.5 * b, 0 * c);
            a.lineTo(0 * b, .15 * c);
            a.lineTo(0 * b, .85 * c);
            O(a);
            M(a, .5 * b, 1 * c, !1);
            a.lineTo(.5 * b, .3 * c);
            a.lineTo(0, .15 * c);
            a.moveTo(.5 * b, .3 * c);
            a.lineTo(1 * b, .15 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .3);
            b.B = new L(.5, .85);
            w.q(a);
            return b
        }, Cube2: function (a, b, c) {
            a = w.s();
            M(a, 0, .3 * c, !0);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(.7 * b, c);
            a.lineTo(1 * b, .7 * c);
            a.lineTo(1 * b, 0 * c);
            a.lineTo(.3 * b, 0 * c);
            O(a);
            M(a, 0, .3 * c, !1);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(1 * b,
                0 * c);
            a.moveTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 1 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .3);
            b.B = new L(.7, 1);
            w.q(a);
            return b
        }, MagneticData: "Cylinder1", Cylinder1: function (a, b, c) {
            var d = .5 * ad, e = .1 * ad;
            a = w.s();
            M(a, 0, .1 * c, !0);
            N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            a.lineTo(b, .9 * c);
            N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            M(a, 0, .1 * c, !1);
            N(a, 0, (.1 + e) * c, (.5 - d) * b, .2 * c, .5 * b, .2 * c);
            N(a, (.5 + d) * b, .2 * c, 1 * b, (.1 + e) * c, 1 * b, .1 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0,
                .2);
            b.B = new L(1, .9);
            w.q(a);
            return b
        }, Cylinder2: function (a, b, c) {
            var d = .5 * ad, e = .1 * ad;
            a = w.s();
            M(a, 0, .9 * c, !0);
            a.lineTo(0, .1 * c);
            N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            a.lineTo(1 * b, .9 * c);
            N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            M(a, 0, .9 * c, !1);
            N(a, 0, (.9 - e) * c, (.5 - d) * b, .8 * c, .5 * b, .8 * c);
            N(a, (.5 + d) * b, .8 * c, 1 * b, (.9 - e) * c, 1 * b, .9 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .1);
            b.B = new L(1, .8);
            w.q(a);
            return b
        }, Cylinder3: function (a, b, c) {
            var d = .1 * ad, e = .5 * ad;
            a = w.s();
            M(a, .1 * b, 0, !0);
            a.lineTo(.9 * b, 0);
            N(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 + e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            N(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
            N(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
            M(a, .1 * b, 0, !1);
            N(a, (.1 + d) * b, 0, .2 * b, (.5 - e) * c, .2 * b, .5 * c);
            N(a, .2 * b, (.5 + e) * c, (.1 + d) * b, 1 * c, .1 * b, 1 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.2, 0);
            b.B = new L(.9, 1);
            w.q(a);
            return b
        }, DirectData: "Cylinder4", Cylinder4: function (a, b, c) {
            var d = .1 * ad, e = .5 * ad;
            a = w.s();
            M(a, .9 * b, 0, !0);
            N(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 +
                e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            N(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
            N(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
            a.lineTo(.9 * b, 0);
            M(a, .9 * b, 0, !1);
            N(a, (.9 - d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
            N(a, .8 * b, (.5 + e) * c, (.9 - d) * b, 1 * c, .9 * b, 1 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.1, 0);
            b.B = new L(.8, 1);
            w.q(a);
            return b
        }, Prism1: function (a, b, c) {
            a = w.s();
            M(a, .25 * b, .25 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(b, .5 * c);
            a.lineTo(.5 * b, c);
            a.lineTo(0, c);
            O(a);
            M(a, .25 * b, .25 * c, !1);
            a.lineTo(.5 * b, c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.408, .172);
            b.B = new L(.833,
                .662);
            w.q(a);
            return b
        }, Prism2: function (a, b, c) {
            a = w.s();
            M(a, 0, .25 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(.75 * b, .75 * c);
            a.lineTo(0, 1 * c);
            O(a);
            M(a, 0, c, !1);
            a.lineTo(.25 * b, .5 * c);
            a.lineTo(b, .25 * c);
            a.moveTo(0, .25 * c);
            a.lineTo(.25 * b, .5 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.25, .5);
            b.B = new L(.75, .75);
            w.q(a);
            return b
        }, Pyramid1: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !0);
            a.lineTo(b, .75 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .75 * c);
            O(a);
            M(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.25, .367);
            b.B = new L(.75,
                .875);
            w.q(a);
            return b
        }, Pyramid2: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !0);
            a.lineTo(b, .85 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .85 * c);
            O(a);
            M(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .7 * c);
            a.lineTo(0, .85 * c);
            a.moveTo(.5 * b, .7 * c);
            a.lineTo(1 * b, .85 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.25, .367);
            b.B = new L(.75, .875);
            w.q(a);
            return b
        }, Actor: function (a, b, c) {
            var d = .2 * ad, e = .1 * ad, f = .5, h = .1;
            a = w.s();
            M(a, f * b, (h + .1) * c, !0);
            N(a, (f - d) * b, (h + .1) * c, (f - .2) * b, (h + e) * c, (f - .2) * b, h * c);
            N(a, (f - .2) * b, (h - e) * c, (f - d) * b, (h - .1) * c, f * b, (h - .1) * c);
            N(a, (f + d) * b, (h - .1) * c,
                (f + .2) * b, (h - e) * c, (f + .2) * b, h * c);
            N(a, (f + .2) * b, (h + e) * c, (f + d) * b, (h + .1) * c, f * b, (h + .1) * c);
            d = .05;
            e = ad * d;
            M(a, .5 * b, .2 * c, !0);
            a.lineTo(.95 * b, .2 * c);
            f = .95;
            h = .25;
            N(a, (f + e) * b, (h - d) * c, (f + d) * b, (h - e) * c, (f + d) * b, h * c);
            a.lineTo(1 * b, .6 * c);
            a.lineTo(.85 * b, .6 * c);
            a.lineTo(.85 * b, .35 * c);
            d = .025;
            e = ad * d;
            f = .825;
            h = .35;
            N(a, (f + d) * b, (h - e) * c, (f + e) * b, (h - d) * c, f * b, (h - d) * c);
            N(a, (f - e) * b, (h - d) * c, (f - d) * b, (h - e) * c, (f - d) * b, h * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(.55 * b, 1 * c);
            a.lineTo(.55 * b, .7 * c);
            d = .05;
            e = ad * d;
            f = .5;
            h = .7;
            N(a, (f + d) * b, (h - e) * c, (f + e) * b, (h - d) * c,
                f * b, (h - d) * c);
            N(a, (f - e) * b, (h - d) * c, (f - d) * b, (h - e) * c, (f - d) * b, h * c);
            a.lineTo(.45 * b, 1 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(.2 * b, .35 * c);
            d = .025;
            e = ad * d;
            f = .175;
            h = .35;
            N(a, (f + d) * b, (h - e) * c, (f + e) * b, (h - d) * c, f * b, (h - d) * c);
            N(a, (f - e) * b, (h - d) * c, (f - d) * b, (h - e) * c, (f - d) * b, h * c);
            a.lineTo(.15 * b, .6 * c);
            a.lineTo(0 * b, .6 * c);
            a.lineTo(0 * b, .25 * c);
            d = .05;
            e = ad * d;
            f = .05;
            h = .25;
            N(a, (f - d) * b, (h - e) * c, (f - e) * b, (h - d) * c, f * b, (h - d) * c);
            a.lineTo(.5 * b, .2 * c);
            b = a.o;
            b.A = new L(.2, .2);
            b.B = new L(.8, .65);
            w.q(a);
            return b
        }, Card: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, 0 * c, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(0 * b, .2 * c);
            a.lineTo(.2 * b, 0 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .2);
            b.B = Kb;
            w.q(a);
            return b
        }, Collate: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, .5 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            M(a, .5 * b, .5 * c, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            b = a.o;
            b.A = new L(.25, 0);
            b.B = new L(.75, .25);
            w.q(a);
            return b
        }, CreateRequest: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .1);
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            M(d, 0,
                a * c, !1);
            d.lineTo(1 * b, a * c);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.$a(!1);
            b = d.o;
            b.A = new L(0, a);
            b.B = new L(1, 1 - a);
            w.q(d);
            return b
        }, Database: function (a, b, c) {
            a = w.s();
            var d = .5 * ad, e = .1 * ad;
            M(a, 1 * b, .1 * c, !0);
            a.lineTo(1 * b, .9 * c);
            N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            M(a, 1 * b, .1 * c, !1);
            N(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
            N(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
            a.moveTo(1 * b, .2 * c);
            N(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
            N(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
            a.moveTo(1 * b, .3 * c);
            N(a, 1 * b, (.3 + e) * c, (.5 + d) * b, .4 * c, .5 * b, .4 * c);
            N(a, (.5 - d) * b, .4 * c, 0, (.3 + e) * c, 0, .3 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .4);
            b.B = new L(1, .9);
            w.q(a);
            return b
        }, StoredData: "DataStorage", DataStorage: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            N(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            N(a, .25 * b, .9 * c, .25 * b, .1 * c, 0, 0);
            O(a);
            b = a.o;
            b.A = new L(.226, 0);
            b.B = new L(.81, 1);
            w.q(a);
            return b
        }, DiskStorage: function (a, b, c) {
            a =
                w.s();
            var d = .5 * ad, e = .1 * ad;
            M(a, 1 * b, .1 * c, !0);
            a.lineTo(1 * b, .9 * c);
            N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            M(a, 1 * b, .1 * c, !1);
            N(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
            N(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
            a.moveTo(1 * b, .2 * c);
            N(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
            N(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .3);
            b.B = new L(1, .9);
            w.q(a);
            return b
        }, Display: function (a,
                              b, c) {
            a = w.s();
            M(a, .25 * b, 0, !0);
            a.lineTo(.75 * b, 0);
            N(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
            a.lineTo(.25 * b, 1 * c);
            a.lineTo(0, .5 * c);
            O(a);
            b = a.o;
            b.A = new L(.25, 0);
            b.B = new L(.75, 1);
            w.q(a);
            return b
        }, DividedEvent: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) ? a = .2 : .15 > a && (a = .15);
            var d = w.s(), e = .2 * ad;
            M(d, 0, .2 * c, !0);
            N(d, 0, (.2 - e) * c, (.2 - e) * b, 0, .2 * b, 0);
            d.lineTo(.8 * b, 0);
            N(d, (.8 + e) * b, 0, 1 * b, (.2 - e) * c, 1 * b, .2 * c);
            d.lineTo(1 * b, .8 * c);
            N(d, 1 * b, (.8 + e) * c, (.8 + e) * b, 1 * c, .8 * b, 1 * c);
            d.lineTo(.2 * b, 1 * c);
            N(d, (.2 - e) * b, 1 * c, 0, (.8 + e) * c, 0, .8 * c);
            d.lineTo(0, .2 * c);
            M(d, 0, a * c, !1);
            d.lineTo(1 * b, a * c);
            d.$a(!1);
            b = d.o;
            b.A = new L(0, a);
            b.B = new L(1, 1 - a);
            w.q(d);
            return b
        }, DividedProcess: function (a, b, c) {
            a = a ? a.Cc : NaN;
            if (isNaN(a) || .1 > a)a = .1;
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            M(d, 0, a * c, !1);
            d.lineTo(1 * b, a * c);
            d.$a(!1);
            b = d.o;
            b.A = new L(0, a);
            b.B = Kb;
            w.q(d);
            return b
        }, Document: function (a, b, c) {
            c /= .8;
            a = w.s();
            M(a, 0, .7 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .7 * c);
            N(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            O(a);
            b = a.o;
            b.A = vb;
            b.B = new L(1, .6);
            w.q(a);
            return b
        }, ExternalOrganization: function (a, b, c) {
            a = a ? a.Cc : NaN;
            if (isNaN(a) || .2 > a)a = .2;
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            M(d, a * b, 0, !1);
            d.lineTo(0, a * c);
            d.moveTo(1 * b, a * c);
            d.lineTo((1 - a) * b, 0);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(a * b, 1 * c);
            d.moveTo((1 - a) * b, 1 * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.$a(!1);
            b = d.o;
            b.A = new L(a / 2, a / 2);
            b.B = new L(1 - a / 2, 1 - a / 2);
            w.q(d);
            return b
        }, ExternalProcess: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .5 * c);
            O(a);
            M(a, .1 * b, .4 * c, !1);
            a.lineTo(.1 * b, .6 * c);
            a.moveTo(.9 * b, .6 * c);
            a.lineTo(.9 * b, .4 * c);
            a.moveTo(.6 * b, .1 * c);
            a.lineTo(.4 * b, .1 * c);
            a.moveTo(.4 * b, .9 * c);
            a.lineTo(.6 * b, .9 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.25, .25);
            b.B = new L(.75, .75);
            w.q(a);
            return b
        }, File: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            O(a);
            M(a, .75 * b, 0, !1);
            a.lineTo(.75 * b, .25 * c);
            a.lineTo(1 * b, .25 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .25);
            b.B = Kb;
            w.q(a);
            return b
        }, Interrupt: function (a, b, c) {
            a = w.s();
            M(a, 1 * b,
                .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, .5 * c);
            M(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, 1 * c);
            M(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, 0);
            b = a.o;
            b.A = new L(0, .25);
            b.B = new L(.5, .75);
            w.q(a);
            return b
        }, InternalStorage: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            a = a ? a.vu : NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .1);
            var e = w.s();
            M(e, 0, 0, !0);
            e.lineTo(1 * b, 0);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            O(e);
            M(e, d * b, 0, !1);
            e.lineTo(d * b, 1 * c);
            e.moveTo(0, a * c);
            e.lineTo(1 * b, a * c);
            e.$a(!1);
            b = e.o;
            b.A = new L(d, a);
            b.B = Kb;
            w.q(e);
            return b
        }, Junction: function (a, b,
                               c) {
            a = w.s();
            var d = 1 / Math.SQRT2, e = (1 - 1 / Math.SQRT2) / 2, f = .5 * ad;
            M(a, 1 * b, .5 * c, !0);
            N(a, 1 * b, (.5 + f) * c, (.5 + f) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - f) * b, 1 * c, 0, (.5 + f) * c, 0, .5 * c);
            N(a, 0, (.5 - f) * c, (.5 - f) * b, 0, .5 * b, 0);
            N(a, (.5 + f) * b, 0, 1 * b, (.5 - f) * c, 1 * b, .5 * c);
            M(a, (e + d) * b, (e + d) * c, !1);
            a.lineTo(e * b, e * c);
            a.moveTo(e * b, (e + d) * c);
            a.lineTo((e + d) * b, e * c);
            a.$a(!1);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }, LinedDocument: function (a, b, c) {
            c /= .8;
            a = w.s();
            M(a, 0, .7 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .7 * c);
            N(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            O(a);
            M(a, .1 *
                b, 0, !1);
            a.lineTo(.1 * b, .75 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.1, 0);
            b.B = new L(1, .6);
            w.q(a);
            return b
        }, LoopLimit: function (a, b, c) {
            a = w.s();
            M(a, 0, 1 * c, !0);
            a.lineTo(0, .25 * c);
            a.lineTo(.25 * b, 0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(1 * b, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .25);
            b.B = Kb;
            w.q(a);
            return b
        }, SequentialData: "MagneticTape", MagneticTape: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, .5 * b, 1 * c, !0);
            N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 +
                d) * c, (.5 + d) * b, .9 * c, .6 * b, .9 * c);
            a.lineTo(1 * b, .9 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(.5 * b, 1 * c);
            b = a.o;
            b.A = new L(.15, .15);
            b.B = new L(.85, .8);
            w.q(a);
            return b
        }, ManualInput: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, 0, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .25 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .25);
            b.B = Kb;
            w.q(a);
            return b
        }, MessageFromUser: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .7);
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(a * b, .5 * c);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            b = d.o;
            b.A = vb;
            b.B = new L(a, 1);
            w.q(d);
            return b
        },
        MicroformProcessing: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .25);
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(.5 * b, a * c);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(.5 * b, (1 - a) * c);
            d.lineTo(0, 1 * c);
            O(d);
            b = d.o;
            b.A = new L(0, a);
            b.B = new L(1, 1 - a);
            w.q(d);
            return b
        }, MicroformRecording: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(.75 * b, .25 * c);
            a.lineTo(1 * b, .15 * c);
            a.lineTo(1 * b, .85 * c);
            a.lineTo(.75 * b, .75 * c);
            a.lineTo(0, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .25);
            b.B = new L(1, .75);
            w.q(a);
            return b
        }, MultiDocument: function (a, b, c) {
            c /= .8;
            a = w.s();
            M(a, b, 0, !0);
            a.lineTo(b, .5 * c);
            N(a, .96 * b, .47 * c, .93 * b, .45 * c, .9 * b, .44 * c);
            a.lineTo(.9 * b, .6 * c);
            N(a, .86 * b, .57 * c, .83 * b, .55 * c, .8 * b, .54 * c);
            a.lineTo(.8 * b, .7 * c);
            N(a, .4 * b, .4 * c, .4 * b, 1 * c, 0, .7 * c);
            a.lineTo(0, .2 * c);
            a.lineTo(.1 * b, .2 * c);
            a.lineTo(.1 * b, .1 * c);
            a.lineTo(.2 * b, .1 * c);
            a.lineTo(.2 * b, 0);
            O(a);
            M(a, .1 * b, .2 * c, !1);
            a.lineTo(.8 * b, .2 * c);
            a.lineTo(.8 * b, .54 * c);
            a.moveTo(.2 * b, .1 * c);
            a.lineTo(.9 * b, .1 * c);
            a.lineTo(.9 * b, .44 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .25);
            b.B = new L(.8, .77);
            w.q(a);
            return b
        }, MultiProcess: function (a, b, c) {
            a = w.s();
            M(a, .1 * b, .1 * c, !0);
            a.lineTo(.2 * b, .1 * c);
            a.lineTo(.2 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(.9 * b, .8 * c);
            a.lineTo(.9 * b, .9 * c);
            a.lineTo(.8 * b, .9 * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .2 * c);
            a.lineTo(.1 * b, .2 * c);
            O(a);
            M(a, .2 * b, .1 * c, !1);
            a.lineTo(.9 * b, .1 * c);
            a.lineTo(.9 * b, .8 * c);
            a.moveTo(.1 * b, .2 * c);
            a.lineTo(.8 * b, .2 * c);
            a.lineTo(.8 * b, .9 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(0, .2);
            b.B = new L(.8, 1);
            w.q(a);
            return b
        }, OfflineStorage: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .1);
            var d = 1 - a, e = w.s();
            M(e, 0, 0, !0);
            e.lineTo(1 *
                b, 0);
            e.lineTo(.5 * b, 1 * c);
            O(e);
            M(e, .5 * a * b, a * c, !1);
            e.lineTo((1 - .5 * a) * b, a * c);
            e.$a(!1);
            b = e.o;
            b.A = new L(d / 4 + .5 * a, a);
            b.B = new L(3 * d / 4 + .5 * a, a + .5 * d);
            w.q(e);
            return b
        }, OffPageConnector: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            O(a);
            b = a.o;
            b.A = vb;
            b.B = new L(.75, 1);
            w.q(a);
            return b
        }, Or: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, 1 * b, .5 * c, !0);
            N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a,
                (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            M(a, 1 * b, .5 * c, !1);
            a.lineTo(0, .5 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            a.$a(!1);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }, PaperTape: function (a, b, c) {
            c /= .8;
            a = w.s();
            M(a, 0, .7 * c, !0);
            a.lineTo(0, .3 * c);
            N(a, .5 * b, .6 * c, .5 * b, 0, 1 * b, .3 * c);
            a.lineTo(1 * b, .7 * c);
            N(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .49);
            b.B = new L(1, .75);
            w.q(a);
            return b
        }, PrimitiveFromCall: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            a = a ? a.vu : NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .3);
            var e = w.s();
            M(e, 0, 0, !0);
            e.lineTo(1 * b, 0);
            e.lineTo((1 -
                a) * b, .5 * c);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            O(e);
            b = e.o;
            b.A = new L(d, 0);
            b.B = new L(1 - a, 1);
            w.q(e);
            return b
        }, PrimitiveToCall: function (a, b, c) {
            var d = a ? a.Cc : NaN;
            a = a ? a.vu : NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .3);
            var e = w.s();
            M(e, 0, 0, !0);
            e.lineTo((1 - a) * b, 0);
            e.lineTo(1 * b, .5 * c);
            e.lineTo((1 - a) * b, 1 * c);
            e.lineTo(0, 1 * c);
            O(e);
            b = e.o;
            b.A = new L(d, 0);
            b.B = new L(1 - a, 1);
            w.q(e);
            return b
        }, Subroutine: "Procedure", Procedure: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .1);
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0,
                1 * c);
            O(d);
            M(d, (1 - a) * b, 0, !1);
            d.lineTo((1 - a) * b, 1 * c);
            d.moveTo(a * b, 0);
            d.lineTo(a * b, 1 * c);
            d.$a(!1);
            b = d.o;
            b.A = new L(a, 0);
            b.B = new L(1 - a, 1);
            w.q(d);
            return b
        }, Process: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .1);
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            O(d);
            M(d, a * b, 0, !1);
            d.lineTo(a * b, 1 * c);
            d.$a(!1);
            b = d.o;
            b.A = new L(a, 0);
            b.B = Kb;
            w.q(d);
            return b
        }, Sort: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .5 * c);
            O(a);
            M(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 *
                c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.25, .25);
            b.B = new L(.75, .5);
            w.q(a);
            return b
        }, Start: function (a, b, c) {
            a = w.s();
            M(a, .25 * b, 0, !0);
            M(a, .25 * b, 0, !0);
            a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
            a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
            M(a, .25 * b, 0, !1);
            a.lineTo(.25 * b, 1 * c);
            a.moveTo(.75 * b, 0);
            a.lineTo(.75 * b, 1 * c);
            a.$a(!1);
            b = a.o;
            b.A = new L(.25, 0);
            b.B = new L(.75, 1);
            w.q(a);
            return b
        }, Terminator: function (a, b, c) {
            a = w.s();
            M(a, .25 * b, 0, !0);
            a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
            a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
            b = a.o;
            b.A = new L(.23, 0);
            b.B = new L(.77, 1);
            w.q(a);
            return b
        }, TransmittalTape: function (a, b, c) {
            a = a ? a.Cc : NaN;
            isNaN(a) && (a = .1);
            var d = w.s();
            M(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(.75 * b, (1 - a) * c);
            d.lineTo(0, (1 - a) * c);
            O(d);
            b = d.o;
            b.A = vb;
            b.B = new L(1, 1 - a);
            w.q(d);
            return b
        }, AndGate: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, 0, 0, !0);
            a.lineTo(.5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            O(a);
            b = a.o;
            b.A = vb;
            b.B = new L(.55, 1);
            w.q(a);
            return b
        }, Buffer: function (a, b, c) {
            a = w.s();
            M(a,
                0, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(0, .25);
            b.B = new L(.5, .75);
            w.q(a);
            return b
        }, Clock: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, 1 * b, .5 * c, !0);
            N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            M(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            M(a, .8 * b, .75 * c, !1);
            a.lineTo(.8 * b, .25 * c);
            a.lineTo(.6 * b, .25 * c);
            a.lineTo(.6 * b, .75 * c);
            a.lineTo(.4 * b, .75 * c);
            a.lineTo(.4 * b, .25 * c);
            a.lineTo(.2 * b, .25 * c);
            a.lineTo(.2 *
                b, .75 * c);
            a.$a(!1);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }, Ground: function (a, b, c) {
            a = w.s();
            M(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .4 * c);
            a.moveTo(.2 * b, .6 * c);
            a.lineTo(.8 * b, .6 * c);
            a.moveTo(.3 * b, .8 * c);
            a.lineTo(.7 * b, .8 * c);
            a.moveTo(.4 * b, 1 * c);
            a.lineTo(.6 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, Inverter: function (a, b, c) {
            a = w.s();
            var d = .1 * ad;
            M(a, .8 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.8 * b, .5 * c);
            M(a, 1 * b, .5 * c, !0);
            N(a, 1 * b, (.5 + d) * c, (.9 + d) * b, .6 * c, .9 * b, .6 * c);
            N(a, (.9 - d) * b, .6 * c, .8 * b, (.5 + d) * c, .8 * b, .5 * c);
            N(a, .8 * b, (.5 - d) * c, (.9 - d) * b, .4 *
                c, .9 * b, .4 * c);
            N(a, (.9 + d) * b, .4 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.o;
            b.A = new L(0, .25);
            b.B = new L(.4, .75);
            w.q(a);
            return b
        }, NandGate: function (a, b, c) {
            a = w.s();
            var d = .5 * ad, e = .4 * ad, f = .1 * ad;
            M(a, .8 * b, .5 * c, !0);
            N(a, .8 * b, (.5 + e) * c, (.4 + d) * b, 1 * c, .4 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.4 * b, 0);
            N(a, (.4 + d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
            M(a, 1 * b, .5 * c, !0);
            N(a, 1 * b, (.5 + f) * c, (.9 + f) * b, .6 * c, .9 * b, .6 * c);
            N(a, (.9 - f) * b, .6 * c, .8 * b, (.5 + f) * c, .8 * b, .5 * c);
            N(a, .8 * b, (.5 - f) * c, (.9 - f) * b, .4 * c, .9 * b, .4 * c);
            N(a, (.9 + f) * b, .4 * c, 1 * b, (.5 - f) * c, 1 * b, .5 *
                c);
            b = a.o;
            b.A = new L(0, .05);
            b.B = new L(.55, .95);
            w.q(a);
            return b
        }, NorGate: function (a, b, c) {
            a = w.s();
            var d = .5, e = ad * d, f = 0, h = .5;
            M(a, .8 * b, .5 * c, !0);
            N(a, .7 * b, (h + e) * c, (f + e) * b, (h + d) * c, 0, 1 * c);
            N(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
            N(a, (f + e) * b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
            d = .1;
            e = .1 * ad;
            f = .9;
            h = .5;
            M(a, (f - d) * b, h * c, !0);
            N(a, (f - d) * b, (h - e) * c, (f - e) * b, (h - d) * c, f * b, (h - d) * c);
            N(a, (f + e) * b, (h - d) * c, (f + d) * b, (h - e) * c, (f + d) * b, h * c);
            N(a, (f + d) * b, (h + e) * c, (f + e) * b, (h + d) * c, f * b, (h + d) * c);
            N(a, (f - e) * b, (h + d) * c, (f - d) * b, (h + e) * c, (f - d) * b, h * c);
            b = a.o;
            b.A =
                new L(.2, .25);
            b.B = new L(.6, .75);
            w.q(a);
            return b
        }, OrGate: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, 0, 0, !0);
            N(a, (0 + d + d) * b, 0 * c, .8 * b, (.5 - d) * c, 1 * b, .5 * c);
            N(a, .8 * b, (.5 + d) * c, (0 + d + d) * b, 1 * c, 0, 1 * c);
            N(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
            O(a);
            b = a.o;
            b.A = new L(.2, .25);
            b.B = new L(.75, .75);
            w.q(a);
            return b
        }, XnorGate: function (a, b, c) {
            a = w.s();
            var d = .5, e = ad * d, f = .2, h = .5;
            M(a, .1 * b, 0, !1);
            N(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
            M(a, .8 * b, .5 * c, !0);
            N(a, .7 * b, (h + e) * c, (f + e) * b, (h + d) * c, .2 * b, 1 * c);
            N(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
            N(a, (f + e) *
                b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
            d = .1;
            e = .1 * ad;
            f = .9;
            h = .5;
            M(a, (f - d) * b, h * c, !0);
            N(a, (f - d) * b, (h - e) * c, (f - e) * b, (h - d) * c, f * b, (h - d) * c);
            N(a, (f + e) * b, (h - d) * c, (f + d) * b, (h - e) * c, (f + d) * b, h * c);
            N(a, (f + d) * b, (h + e) * c, (f + e) * b, (h + d) * c, f * b, (h + d) * c);
            N(a, (f - e) * b, (h + d) * c, (f - d) * b, (h + e) * c, (f - d) * b, h * c);
            b = a.o;
            b.A = new L(.4, .25);
            b.B = new L(.65, .75);
            w.q(a);
            return b
        }, XorGate: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, .1 * b, 0, !1);
            N(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
            M(a, .2 * b, 0, !0);
            N(a, (.2 + d) * b, 0 * c, .9 * b, (.5 - d) * c, 1 * b, .5 * c);
            N(a, .9 * b, (.5 + d) *
                c, (.2 + d) * b, 1 * c, .2 * b, 1 * c);
            N(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
            O(a);
            b = a.o;
            b.A = new L(.4, .25);
            b.B = new L(.8, .75);
            w.q(a);
            return b
        }, Capacitor: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(0, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, Resistor: function (a, b, c) {
            a = w.s();
            M(a, 0, .5 * c, !1);
            a.lineTo(.1 * b, 0);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            a.lineTo(.6 * b, 1 * c);
            a.lineTo(.7 * b, .5 * c);
            b = a.o;
            w.q(a);
            return b
        }, Inductor: function (a, b, c) {
            a = w.s();
            var d = .1 * ad, e = .1;
            M(a, (e - .5 *
                d) * b, c, !1);
            N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .3;
            N(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .5;
            N(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .7;
            N(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .9;
            N(a, (e + .1) * b, 0, (e + d) * b, c, (e + .5 * d) * b, c);
            b = a.o;
            w.q(a);
            return b
        }, ACvoltageSource: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, 0 * b, .5 * c, !1);
            N(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
            N(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 + d) *
                c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b, .5 * c);
            a.moveTo(.1 * b, .5 * c);
            N(a, .5 * b, 0 * c, .5 * b, 1 * c, .9 * b, .5 * c);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }, DCvoltageSource: function (a, b, c) {
            a = w.s();
            M(a, 0, .75 * c, !1);
            a.lineTo(0, .25 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, Diode: function (a, b, c) {
            a = w.s();
            M(a, 1 * b, 0, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            b.A = new L(0, .25);
            b.B = new L(.5, .75);
            w.q(a);
            return b
        }, Wifi: function (a, b, c) {
            var d = b, e = c;
            b *= .38;
            c *= .6;
            a = w.s();
            var f = .8 * ad, h = .8, k = 0, l = .5, d = (d - b) / 2, e = (e - c) / 2;
            M(a, k * b + d, (l + h) * c + e, !0);
            N(a, (k - f) * b + d, (l + h) * c + e, (k - h) * b + d, (l + f) * c + e, (k - h) * b + d, l * c + e);
            N(a, (k - h) * b + d, (l - f) * c + e, (k - f) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            N(a, k * b + d, (l - h) * c + e, (k - h + .5 * f) * b + d, (l - f) * c + e, (k - h + .5 * f) * b + d, l * c + e);
            N(a, (k - h + .5 * f) * b + d, (l + f) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            O(a);
            f = .4 * ad;
            h = .4;
            k = .2;
            l = .5;
            M(a, k * b + d, (l + h) * c + e, !0);
            N(a, (k - f) * b + d, (l + h) * c + e, (k - h) * b + d, (l + f) * c + e, (k - h) * b + d, l * c + e);
            N(a, (k - h) * b + d, (l - f) * c + e, (k - f) * b + d, (l - h) * c + e, k *
                b + d, (l - h) * c + e);
            N(a, k * b + d, (l - h) * c + e, (k - h + .5 * f) * b + d, (l - f) * c + e, (k - h + .5 * f) * b + d, l * c + e);
            N(a, (k - h + .5 * f) * b + d, (l + f) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            O(a);
            f = .2 * ad;
            h = .2;
            l = k = .5;
            M(a, (k - h) * b + d, l * c + e, !0);
            N(a, (k - h) * b + d, (l - f) * c + e, (k - f) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            N(a, (k + f) * b + d, (l - h) * c + e, (k + h) * b + d, (l - f) * c + e, (k + h) * b + d, l * c + e);
            N(a, (k + h) * b + d, (l + f) * c + e, (k + f) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            N(a, (k - f) * b + d, (l + h) * c + e, (k - h) * b + d, (l + f) * c + e, (k - h) * b + d, l * c + e);
            f = .4 * ad;
            h = .4;
            k = .8;
            l = .5;
            M(a, k * b + d, (l - h) * c + e, !0);
            N(a, (k + f) * b + d, (l -
                h) * c + e, (k + h) * b + d, (l - f) * c + e, (k + h) * b + d, l * c + e);
            N(a, (k + h) * b + d, (l + f) * c + e, (k + f) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            N(a, k * b + d, (l + h) * c + e, (k + h - .5 * f) * b + d, (l + f) * c + e, (k + h - .5 * f) * b + d, l * c + e);
            N(a, (k + h - .5 * f) * b + d, (l - f) * c + e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            O(a);
            f = .8 * ad;
            h = .8;
            k = 1;
            l = .5;
            M(a, k * b + d, (l - h) * c + e, !0);
            N(a, (k + f) * b + d, (l - h) * c + e, (k + h) * b + d, (l - f) * c + e, (k + h) * b + d, l * c + e);
            N(a, (k + h) * b + d, (l + f) * c + e, (k + f) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            N(a, k * b + d, (l + h) * c + e, (k + h - .5 * f) * b + d, (l + f) * c + e, (k + h - .5 * f) * b + d, l * c + e);
            N(a, (k + h - .5 * f) * b + d, (l - f) * c +
                e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, Email: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            O(a);
            M(a, 0, 0, !1);
            a.lineTo(.5 * b, .6 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 1 * c);
            a.lineTo(.45 * b, .54 * c);
            a.moveTo(1 * b, 1 * c);
            a.lineTo(.55 * b, .54 * c);
            a.$a(!1);
            b = a.o;
            w.q(a);
            return b
        }, Ethernet: function (a, b, c) {
            a = w.s();
            M(a, .35 * b, 0, !0);
            a.lineTo(.65 * b, 0);
            a.lineTo(.65 * b, .4 * c);
            a.lineTo(.35 * b, .4 * c);
            a.lineTo(.35 * b, 0);
            O(a);
            M(a, .1 * b, 1 * c, !0, !0);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.4 * b, .6 * c);
            a.lineTo(.1 * b, .6 * c);
            a.lineTo(.1 * b, 1 * c);
            O(a);
            M(a, .6 * b, 1 * c, !0, !0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.9 * b, .6 * c);
            a.lineTo(.6 * b, .6 * c);
            a.lineTo(.6 * b, 1 * c);
            O(a);
            M(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.5 * b, .4 * c);
            a.moveTo(.75 * b, .5 * c);
            a.lineTo(.75 * b, .6 * c);
            a.moveTo(.25 * b, .5 * c);
            a.lineTo(.25 * b, .6 * c);
            a.$a(!1);
            b = a.o;
            w.q(a);
            return b
        }, Power: function (a, b, c) {
            a = w.s();
            var d = .4 * ad, e = .4, f = w.K(), h = w.K(), k = w.K(), l = w.K();
            he(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, f, f, h, k, l);
            var m = w.xb(h.x,
                h.y);
            M(a, h.x * b, h.y * c, !0);
            N(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
            N(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            N(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
            he(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, f, f);
            N(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
            d = .3 * ad;
            e = .3;
            he(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, f, f);
            a.lineTo(h.x * b, h.y * c);
            N(a, l.x * b, l.y * c, k.x * b, k.y * c, (.5 - e) * b, .5 * c);
            N(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            N(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 +
                e) * b, .5 * c);
            he(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, f, f, h, k, l);
            N(a, l.x * b, l.y * c, k.x * b, k.y * c, h.x * b, h.y * c);
            O(a);
            M(a, .45 * b, 0, !0);
            a.lineTo(.45 * b, .5 * c);
            a.lineTo(.55 * b, .5 * c);
            a.lineTo(.55 * b, 0);
            O(a);
            w.v(f);
            w.v(h);
            w.v(k);
            w.v(l);
            w.v(m);
            b = a.o;
            b.A = new L(.25, .55);
            b.B = new L(.75, .8);
            w.q(a);
            return b
        }, Fallout: function (a, b, c) {
            a = w.s();
            var d = .5 * ad;
            M(a, 0 * b, .5 * c, !0);
            N(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
            N(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b,
                .5 * c);
            var e = d = 0;
            M(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            d = .4;
            e = 0;
            O(a);
            M(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            d = .2;
            e = -.3;
            O(a);
            M(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            O(a);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }, IrritationHazard: function (a, b, c) {
            a = w.s();
            M(a, .2 * b, 0 * c, !0);
            a.lineTo(.5 * b, .3 * c);
            a.lineTo(.8 *
                b, 0 * c);
            a.lineTo(1 * b, .2 * c);
            a.lineTo(.7 * b, .5 * c);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(.5 * b, .7 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(0 * b, .8 * c);
            a.lineTo(.3 * b, .5 * c);
            a.lineTo(0 * b, .2 * c);
            O(a);
            b = a.o;
            b.A = new L(.3, .3);
            b.B = new L(.7, .7);
            w.q(a);
            return b
        }, ElectricalHazard: function (a, b, c) {
            a = w.s();
            M(a, .37 * b, 0 * c, !0);
            a.lineTo(.5 * b, .11 * c);
            a.lineTo(.77 * b, .04 * c);
            a.lineTo(.33 * b, .49 * c);
            a.lineTo(1 * b, .37 * c);
            a.lineTo(.63 * b, .86 * c);
            a.lineTo(.77 * b, .91 * c);
            a.lineTo(.34 * b, 1 * c);
            a.lineTo(.34 * b, .78 * c);
            a.lineTo(.44 * b, .8 * c);
            a.lineTo(.65 *
                b, .56 * c);
            a.lineTo(0 * b, .68 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, FireHazard: function (a, b, c) {
            a = w.s();
            M(a, .1 * b, 1 * c, !0);
            N(a, -.25 * b, .63 * c, .45 * b, .44 * c, .29 * b, 0 * c);
            N(a, .48 * b, .17 * c, .54 * b, .35 * c, .51 * b, .42 * c);
            N(a, .59 * b, .29 * c, .58 * b, .28 * c, .59 * b, .18 * c);
            N(a, .8 * b, .34 * c, .88 * b, .43 * c, .75 * b, .6 * c);
            N(a, .87 * b, .48 * c, .88 * b, .43 * c, .88 * b, .31 * c);
            N(a, 1.17 * b, .76 * c, .82 * b, .8 * c, .9 * b, 1 * c);
            O(a);
            b = a.o;
            b.A = new L(.05, .645);
            b.B = new L(.884, .908);
            w.q(a);
            return b
        }, BpmnActivityLoop: function (a, b, c) {
            a = w.s();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            M(a, .65 * b, 1 * c,
                !1);
            N(a, (1 - d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
            N(a, 1 * b, (.5 - d + 0) * c, (.5 + d + 0) * b, 0 * c, .5 * b, 0 * c);
            N(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
            N(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .35 * b, .98 * c);
            a.moveTo(.25 * b, .8 * c);
            a.lineTo(.35 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, BpmnActivityParallel: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(0, 1 * c);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, BpmnActivitySequential: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            a.lineTo(1 *
                b, 0);
            a.moveTo(0, .5 * c);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(0, 1 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.o;
            w.q(a);
            return b
        }, BpmnActivityAdHoc: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            M(a, 1 * b, 1 * c, !1);
            M(a, 0, .5 * c, !1);
            N(a, .2 * b, .35 * c, .3 * b, .35 * c, .5 * b, .5 * c);
            N(a, .7 * b, .65 * c, .8 * b, .65 * c, 1 * b, .5 * c);
            b = a.o;
            w.q(a);
            return b
        }, BpmnActivityCompensation: function (a, b, c) {
            a = w.s();
            M(a, 0, .5 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, BpmnTaskMessage: function (a,
                                      b, c) {
            a = w.s();
            M(a, 0, .2 * c, !0);
            a.lineTo(1 * b, .2 * c);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(0, .8 * c);
            a.lineTo(0, .8 * c);
            O(a);
            M(a, 0, .2 * c, !1);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(1 * b, .2 * c);
            a.$a(!1);
            b = a.o;
            w.q(a);
            return b
        }, BpmnTaskScript: function (a, b, c) {
            a = w.s();
            M(a, .7 * b, 1 * c, !0);
            a.lineTo(.3 * b, 1 * c);
            N(a, .6 * b, .5 * c, 0, .5 * c, .3 * b, 0);
            a.lineTo(.7 * b, 0);
            N(a, .4 * b, .5 * c, 1 * b, .5 * c, .7 * b, 1 * c);
            O(a);
            M(a, .45 * b, .73 * c, !1);
            a.lineTo(.7 * b, .73 * c);
            a.moveTo(.38 * b, .5 * c);
            a.lineTo(.63 * b, .5 * c);
            a.moveTo(.31 * b, .27 * c);
            a.lineTo(.56 * b, .27 * c);
            a.$a(!1);
            b = a.o;
            w.q(a);
            return b
        },
        BpmnTaskUser: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            M(a, .335 * b, (1 - .555) * c, !0);
            a.lineTo(.335 * b, .595 * c);
            a.lineTo(.665 * b, .595 * c);
            a.lineTo(.665 * b, (1 - .555) * c);
            N(a, .88 * b, .46 * c, .98 * b, .54 * c, 1 * b, .68 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .68 * c);
            N(a, .02 * b, .54 * c, .12 * b, .46 * c, .335 * b, (1 - .555) * c);
            a.lineTo(.365 * b, .405 * c);
            var d = .5 - .285, e = Math.PI / 4, f = 4 * (1 - Math.cos(e)) / (3 * Math.sin(e)), e = f * d, f = f * d;
            N(a, (.5 - (e + d) / 2) * b, (d + (d + f) / 2) * c, (.5 - d) * b, (d + f) * c, (.5 - d) * b, d * c);
            N(a, (.5 - d) * b, (d - f) * c, (.5 - e) * b, (d - d) * c, .5 * b, (d - d) * c);
            N(a, (.5 + e) * b, (d - d) * c, (.5 + d) * b, (d - f) * c, (.5 + d) * b, d * c);
            N(a, (.5 + d) * b, (d + f) * c, (.5 + (e + d) / 2) * b, (d + (d + f) / 2) * c, .635 * b, .405 * c);
            a.lineTo(.635 * b, .405 * c);
            a.lineTo(.665 * b, (1 - .555) * c);
            a.lineTo(.665 * b, .595 * c);
            a.lineTo(.335 * b, .595 * c);
            M(a, .2 * b, 1 * c, !1);
            a.lineTo(.2 * b, .8 * c);
            M(a, .8 * b, 1 * c, !1);
            a.lineTo(.8 * b, .8 * c);
            b = a.o;
            w.q(a);
            return b
        }, BpmnEventConditional: function (a, b, c) {
            a = w.s();
            M(a, .1 * b, 0, !0);
            a.lineTo(.9 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            O(a);
            M(a, .2 * b, .2 * c, !1);
            a.lineTo(.8 * b, .2 * c);
            a.moveTo(.2 * b, .4 * c);
            a.lineTo(.8 *
                b, .4 * c);
            a.moveTo(.2 * b, .6 * c);
            a.lineTo(.8 * b, .6 * c);
            a.moveTo(.2 * b, .8 * c);
            a.lineTo(.8 * b, .8 * c);
            a.$a(!1);
            b = a.o;
            w.q(a);
            return b
        }, BpmnEventError: function (a, b, c) {
            a = w.s();
            M(a, 0, 1 * c, !0);
            a.lineTo(.33 * b, 0);
            a.lineTo(.66 * b, .5 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(.66 * b, 1 * c);
            a.lineTo(.33 * b, .5 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, BpmnEventEscalation: function (a, b, c) {
            a = w.s();
            M(a, 0, 0, !1);
            M(a, 1 * b, 1 * c, !1);
            M(a, .1 * b, 1 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            O(a);
            b = a.o;
            w.q(a);
            return b
        }, BpmnEventTimer: function (a, b, c) {
            a =
                w.s();
            var d = .5 * ad;
            M(a, 1 * b, .5 * c, !0);
            N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            M(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .15 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, .85 * c);
            a.moveTo(0, .5 * c);
            a.lineTo(.15 * b, .5 * c);
            a.moveTo(1 * b, .5 * c);
            a.lineTo(.85 * b, .5 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.58 * b, .1 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.78 * b, .54 * c);
            a.$a(!1);
            b = a.o;
            b.Zd = Kj;
            w.q(a);
            return b
        }
    }, Uq;
    for (Uq in fq)fq[Uq.toLowerCase()] = Uq;
    var mq = {
        "": "",
        Standard: "F1 m 0,0 l 8,4 -8,4 2,-4 z",
        Backward: "F1 m 8,0 l -2,4 2,4 -8,-4 z",
        Triangle: "F1 m 0,0 l 8,4.62 -8,4.62 z",
        BackwardTriangle: "F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",
        Boomerang: "F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
        BackwardBoomerang: "F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",
        SidewaysV: "m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",
        BackwardV: "m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",
        OpenTriangle: "m 0,0 l 8,4 -8,4",
        BackwardOpenTriangle: "m 8,0 l -8,4 8,4",
        OpenTriangleLine: "m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
        BackwardOpenTriangleLine: "m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
        OpenTriangleTop: "m 0,0 l 8,4 m 0,4",
        BackwardOpenTriangleTop: "m 8,0 l -8,4 m 0,4",
        OpenTriangleBottom: "m 0,8 l 8,-4",
        BackwardOpenTriangleBottom: "m 0,4 l 8,4",
        HalfTriangleTop: "F1 m 0,0 l 0,4 8,0 z m 0,8",
        BackwardHalfTriangleTop: "F1 m 8,0 l 0,4 -8,0 z m 0,8",
        HalfTriangleBottom: "F1 m 0,4 l 0,4 8,-4 z",
        BackwardHalfTriangleBottom: "F1 m 8,4 l 0,4 -8,-4 z",
        ForwardSemiCircle: "m 4,0 b 270 180 0 4 4",
        BackwardSemiCircle: "m 4,8 b 90 180 0 -4 4",
        Feather: "m 0,0 l 3,4 -3,4",
        BackwardFeather: "m 3,0 l -3,4 3,4",
        DoubleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardDoubleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        TripleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardTripleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        ForwardSlash: "m 0,8 l 5,-8",
        BackSlash: "m 0,0 l 5,8",
        DoubleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8",
        DoubleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8",
        TripleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
        TripleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",
        Fork: "m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",
        LineFork: "m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardLineFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",
        CircleFork: "F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
        CircleLineFork: "F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleLineFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
        Circle: "F1 m 8,4 b 0 360 -4 0 4 z",
        Block: "F1 m 0,0 l 0,8 8,0 0,-8 z",
        StretchedDiamond: "F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
        Diamond: "F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",
        Chevron: "F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",
        StretchedChevron: "F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",
        NormalArrow: "F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",
        X: "m 0,0 l 8,8 m 0,-8 l -8,8",
        TailedNormalArrow: "F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
        DoubleTriangle: "F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
        BigEndArrow: "F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",
        ConcaveTailArrow: "F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",
        RoundedTriangle: "F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",
        SimpleArrow: "F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",
        AccelerationArrow: "F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",
        BoxArrow: "F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
        TriangleLine: "F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",
        CircleEndedArrow: "F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",
        DynamicWidthArrow: "F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",
        EquilibriumArrow: "m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",
        FastForward: "F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
        Kite: "F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",
        HalfArrowTop: "F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",
        HalfArrowBottom: "F1 m 0,8 l 4,-4 4,0 -8,4 z",
        OpposingDirectionDoubleArrow: "F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",
        PartialDoubleTriangle: "F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",
        LineCircle: "F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        DoubleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        TripleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        CircleLine: "F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",
        DiamondCircle: "F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",
        PlusCircle: "F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
        OpenRightTriangleTop: "m 8,0 l 0,4 -8,0 m 0,4",
        OpenRightTriangleBottom: "m 8,8 l 0,-4 -8,0",
        Line: "m 0,0 l 0,8",
        DoubleLine: "m 0,0 l 0,8 m 2,0 l 0,-8",
        TripleLine: "m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",
        PentagonArrow: "F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"
    };

    function jq(a) {
        var b = Ud[a];
        if (void 0 === b) {
            var c = a.toLowerCase();
            if ("none" === c)return "None";
            b = Ud[c];
            if (void 0 === b) {
                var d = null, e;
                for (e in mq)if (e.toLowerCase() === c) {
                    d = e;
                    break
                }
                if (null !== d)return a = We(mq[d], !1), Ud[d] = a, c !== d && (Ud[c] = d), d
            }
        }
        return "string" === typeof b ? b : b instanceof Fe ? a : null
    }

    function S(a) {
        C.call(this, a);
        this.N = 2408959;
        this.kl = this.ui = "";
        this.Js = this.Gs = this.Ss = this.Tr = null;
        this.Us = "";
        this.si = this.Gr = this.Ts = this.Zm = null;
        this.Is = "";
        this.ip = null;
        this.Hs = Dd;
        this.Ks = "";
        this.kp = null;
        this.Dd = "";
        this.Rv = this.Vq = this.Xk = null;
        this.Ri = (new z(NaN, NaN)).freeze();
        this.Yr = "";
        this.nl = null;
        this.Zr = vb;
        this.gs = ld;
        this.$r = md;
        this.or = null;
        this.Ur = Vq;
        this.an = kd;
        this.$m = "gray";
        this.zg = 4;
        this.VC = -1;
        this.tt = NaN;
        this.DG = new A;
        this.Nm = null;
        this.bk = NaN
    }

    w.La(S, C);
    w.fa("Part", S);
    S.prototype.cloneProtected = function (a) {
        C.prototype.cloneProtected.call(this, a);
        a.N = this.N & -4097 | 49152;
        a.ui = this.ui;
        a.kl = this.kl;
        a.Tr = this.Tr;
        a.Ss = this.Ss;
        a.Gs = this.Gs;
        a.Js = this.Js;
        a.Us = this.Us;
        a.Ts = this.Ts;
        a.Gr = this.Gr;
        a.si = null;
        a.Is = this.Is;
        a.Hs = this.Hs.S();
        a.Ks = this.Ks;
        a.Dd = this.Dd;
        a.Vq = this.Vq;
        a.Ri.assign(this.Ri);
        a.Yr = this.Yr;
        a.Zr = this.Zr.S();
        a.gs = this.gs.S();
        a.$r = this.$r.S();
        a.or = this.or;
        a.Ur = this.Ur;
        a.an = this.an.S();
        a.$m = this.$m;
        a.zg = this.zg;
        a.tt = this.tt
    };
    S.prototype.ki = function (a) {
        C.prototype.ki.call(this, a);
        a.Vl();
        a.Zm = null;
        a.ip = null;
        a.kp = null;
        a.nl = null;
        a.Nm = null
    };
    S.prototype.toString = function () {
        var a = w.hf(Object.getPrototypeOf(this)) + "#" + w.Jd(this);
        null !== this.data && (a += "(" + Qf(this.data) + ")");
        return a
    };
    S.LayoutNone = 0;
    var Hm;
    S.LayoutAdded = Hm = 1;
    var Qm;
    S.LayoutRemoved = Qm = 2;
    S.LayoutShown = 4;
    S.LayoutHidden = 8;
    S.LayoutNodeSized = 16;
    var wn;
    S.LayoutGroupLayout = wn = 32;
    S.LayoutNodeReplaced = 64;
    var Vq;
    S.LayoutStandard = Vq = Hm | Qm | 28 | wn | 64;
    S.LayoutAll = 16777215;
    S.prototype.Tn = function (a, b, c, d, e, f, h) {
        var k = this.g;
        null !== k && (a === Of && "elements" === b ? e instanceof C ? Im(e, function (a) {
            Km(k, a);
            Jm(k, a)
        }) : e instanceof tl && hn(k, e) : a === Pf && "elements" === b && (e instanceof C ? Im(e, function (a) {
            Om(k, a);
            Nm(k, a)
        }) : e instanceof tl && jn(k, e)), k.Wc(a, b, c, d, e, f, h))
    };
    S.prototype.updateTargetBindings = S.prototype.Hb = function (a) {
        C.prototype.Hb.call(this, a);
        if (null !== this.data) {
            a = this.wa.n;
            for (var b = a.length, c = 0; c < b; c++) {
                var d = a[c];
                d instanceof C && Im(d, function (a) {
                    null !== a.data && a.Hb()
                })
            }
        }
    };
    S.prototype.updateRelationshipsFromData = function () {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ba;
                c instanceof P && (a = c.yn(a), b = b.OH(a), null === b || b instanceof U) && (this.Ka = b)
            }
        }
    };
    w.u(S, {Kw: "adornments"}, function () {
        return null === this.si ? va : this.si.qF
    });
    S.prototype.findAdornment = S.prototype.Tp = function (a) {
        var b = this.si;
        return null === b ? null : b.ka(a)
    };
    S.prototype.addAdornment = S.prototype.zl = function (a, b) {
        if (null !== b) {
            var c = null, d = this.si;
            null !== d && (c = d.ka(a));
            if (c !== b) {
                if (null !== c) {
                    var e = c.g;
                    null !== e && e.remove(c)
                }
                null === d && (this.si = d = new ka("string", dh));
                b.ui !== a && (b.rd = a);
                d.add(a, b);
                c = this.g;
                null !== c && (c.add(b), b.data = this.data)
            }
        }
    };
    S.prototype.removeAdornment = S.prototype.Aj = function (a) {
        var b = this.si;
        if (null !== b) {
            var c = b.ka(a);
            if (null !== c) {
                var d = c.g;
                null !== d && d.remove(c)
            }
            b.remove(a);
            0 === b.count && (this.si = null)
        }
    };
    S.prototype.clearAdornments = S.prototype.Ct = function () {
        var a = this.si;
        if (null !== a) {
            for (var b = w.lb(), a = a.i; a.next();)b.push(a.key);
            for (var a = b.length, c = 0; c < a; c++)this.Aj(b[c]);
            w.va(b)
        }
    };
    S.prototype.updateAdornments = function () {
        var a = this.g;
        if (null !== a) {
            a:{
                if (this.eb && this.tJ) {
                    var b = this.Eu;
                    if (!(null !== b && this.Y.H() && this.isVisible() && b.vj() && b.Y.H()))break a;
                    var c = this.Tp("Selection");
                    if (null === c) {
                        c = this.uJ;
                        null === c && (c = this instanceof W ? a.FI : this instanceof U ? a.bI : a.YI);
                        if (!(c instanceof dh))break a;
                        fh(c);
                        c = c.copy();
                        null !== c && (c.qb = b)
                    }
                    if (null !== c) {
                        var d = c.placeholder;
                        if (null !== d) {
                            var e = b.nj(), f = 0;
                            b instanceof X && (f = b.kb);
                            var h = w.im();
                            h.l((b.Ia.width + f) * e, (b.Ia.height + f) * e);
                            d.Aa =
                                h;
                            w.zk(h)
                        }
                        c.angle = b.xn();
                        c.type !== aj && (d = w.K(), c.location = b.Wa(vb, d), w.v(d));
                        this.zl("Selection", c);
                        break a
                    }
                }
                this.Aj("Selection")
            }
            Wq(this, a);
            for (a = this.Kw; a.next();)b = a.value, b.Hb(), b.I()
        }
    };
    function Wq(a, b) {
        b.ab.af.each(function (b) {
            b.isEnabled && b.updateAdornments(a)
        });
        b.ab.updateAdornments(a)
    }

    w.u(S, {layer: "layer"}, function () {
        return this.Rv
    });
    w.u(S, {g: "diagram"}, function () {
        var a = this.Rv;
        return null !== a ? a.g : null
    });
    w.defineProperty(S, {Wf: "layerName"}, function () {
        return this.kl
    }, function (a) {
        var b = this.kl;
        if (b !== a) {
            w.j(a, "string", S, "layerName");
            var c = this.g;
            if (null === c || null !== c.Lt(a) && !c.Fq)if (this.kl = a, null !== c && c.qc(), this.h("layerName", b, a), b = this.layer, null !== b && b.name !== a && (c = b.g, null !== c && (a = c.Lt(a), null !== a && a !== b))) {
                var d = b.jf(-1, this, !0);
                0 <= d && c.Wc(Pf, "parts", b, this, null, d, !0);
                b.visible !== a.visible && this.td(a.visible);
                d = a.$p(99999999, this, !0);
                0 <= d && c.Wc(Of, "parts", a, null, this, !0, d);
                d = this.Dx;
                if (null !==
                    d) {
                    var e = c.Ua;
                    c.Ua = !0;
                    d(this, b, a);
                    c.Ua = e
                }
            }
        }
    });
    w.defineProperty(S, {Dx: "layerChanged"}, function () {
        return this.Tr
    }, function (a) {
        var b = this.Tr;
        b !== a && (null !== a && w.j(a, "function", S, "layerChanged"), this.Tr = a, this.h("layerChanged", b, a))
    });
    w.defineProperty(S, {eo: "zOrder"}, function () {
        return this.tt
    }, function (a) {
        var b = this.tt;
        if (b !== a) {
            w.j(a, "number", S, "zOrder");
            this.tt = a;
            var c = this.layer;
            null !== c && kl(c, -1, this);
            this.h("zOrder", b, a);
            a = this.g;
            null !== a && a.na()
        }
    });
    S.prototype.invalidateAdornments = S.prototype.ce = function () {
        var a = this.g;
        null !== a && (Il(a), 0 !== (this.N & 16384) !== !0 && (this.N |= 16384, a.Le()))
    };
    function gl(a) {
        0 !== (a.N & 16384) !== !1 && (a.updateAdornments(), a.N &= -16385)
    }

    function Xq(a) {
        if (!1 === Am(a)) {
            var b = a.g;
            null !== b && (b.qg.add(a), b.Le());
            Yq(a, !0);
            a.Ii()
        }
    }

    function Zq(a) {
        a.N |= 2097152;
        if (!1 !== Am(a)) {
            var b = a.position, c = a.location;
            c.H() && b.H() || $q(a, b, c);
            var c = a.mc, d = c.copy();
            c.Ra();
            c.x = b.x;
            c.y = b.y;
            c.freeze();
            a.Lx(d, c);
            Yq(a, !1)
        }
    }

    w.u(S, {Xf: "locationObject"}, function () {
        if (null === this.nl) {
            var a = this.AA;
            "" !== a ? (a = this.sd(a), this.nl = null !== a ? a : this) : this.nl = this instanceof dh ? this.type !== aj && null !== this.placeholder ? this.placeholder : this : this
        }
        return this.nl.visible ? this.nl : this
    });
    w.defineProperty(S, {RI: "minLocation"}, function () {
        return this.gs
    }, function (a) {
        var b = this.gs;
        b.L(a) || (this.gs = a = a.S(), this.h("minLocation", b, a))
    });
    w.defineProperty(S, {KI: "maxLocation"}, function () {
        return this.$r
    }, function (a) {
        var b = this.$r;
        b.L(a) || (this.$r = a = a.S(), this.h("maxLocation", b, a))
    });
    w.defineProperty(S, {AA: "locationObjectName"}, function () {
        return this.Yr
    }, function (a) {
        var b = this.Yr;
        b !== a && (this.Yr = a, this.nl = null, Oo(this), this.h("locationObjectName", b, a))
    });
    w.defineProperty(S, {zf: "locationSpot"}, function () {
        return this.Zr
    }, function (a) {
        var b = this.Zr;
        b.L(a) || (this.Zr = a = a.S(), Oo(this), this.h("locationSpot", b, a))
    });
    S.prototype.move = function (a) {
        this.position = a
    };
    S.prototype.moveTo = S.prototype.moveTo = function (a, b) {
        var c = w.xb(a, b);
        this.move(c);
        w.v(c)
    };
    S.prototype.isVisible = function () {
        if (!this.visible)return !1;
        var a = this.layer;
        if (null !== a && !a.visible)return !1;
        a = this.g;
        if (null !== a && (a = a.Pa, a.kf && (a = a.Pm.ka(this), null !== a && a.Ux)))return !0;
        a = this.Ka;
        return null === a || a.we && a.isVisible() ? !0 : !1
    };
    S.prototype.td = function (a) {
        var b = this.g;
        a ? (this.J(4), this.ce(), null !== b && b.qg.add(this)) : (this.J(8), this.Ct());
        this.Vl();
        null !== b && (b.qc(), b.na())
    };
    S.prototype.findObject = S.prototype.sd = function (a) {
        if (this.name === a)return this;
        var b = this.Nm;
        null === b && (this.Nm = b = new sa);
        if (void 0 !== b[a])return b[a];
        for (var c = this.wa.n, d = c.length, e = 0; e < d; e++) {
            var f = c[e];
            if (f.name === a)return b[a] = f;
            if (f instanceof C)if (null === f.Zj && null === f.sg) {
                if (f = f.sd(a), null !== f)return b[a] = f
            } else if (fn(f) && (f = f.wa.first(), null !== f && f.name === a))return b[a] = f
        }
        return b[a] = null
    };
    function ar(a, b, c, d) {
        void 0 === d && (d = new z);
        c = c.Nd() ? Fb : c;
        var e = b.Ia;
        d.l(e.width * c.x + c.offsetX, e.height * c.y + c.offsetY);
        if (null === b || b === a)return d;
        b.transform.nb(d);
        for (b = b.O; null !== b && b !== a;)b.transform.nb(d), b = b.O;
        a.Qi.nb(d);
        d.offset(-a.od.x, -a.od.y);
        return d
    }

    S.prototype.ensureBounds = S.prototype.Ze = function () {
        rk(this, Infinity, Infinity);
        this.gc()
    };
    function jl(a, b) {
        var c = a.DG, d;
        isNaN(a.bk) && (a.bk = Wp(a));
        d = a.bk;
        var e = 2 * d;
        if (!a.Zl)return c.l(b.x - 1 - d, b.y - 1 - d, b.width + 2 + e, b.height + 2 + e), c;
        d = b.x;
        var e = b.y, f = b.width, h = b.height, k = a.shadowBlur, l = a.yJ, f = f + k, h = h + k;
        d -= k / 2;
        e -= k / 2;
        0 < l.x ? f += l.x : (d += l.x, f -= l.x);
        0 < l.y ? h += l.y : (e += l.y, h -= l.y);
        c.l(d - 1, e - 1, f + 2, h + 2);
        return c
    }

    S.prototype.gc = function () {
        this.Ii();
        if (!1 === zm(this))Zq(this); else {
            var a = this.mc, b = w.Df();
            b.assign(a);
            a.Ra();
            var c = fl(this);
            this.hj(0, 0, this.od.width, this.od.height);
            var d = this.position;
            $q(this, d, this.location);
            a.x = d.x;
            a.y = d.y;
            a.freeze();
            this.Lx(b, a);
            Co(this, !1);
            b.L(a) ? this.Bf(c) : !this.de() || K(b.width, a.width) && K(b.height, a.height) || 0 <= this.VC && this.J(16);
            w.Gb(b);
            Yq(this, !1)
        }
    };
    S.prototype.Lx = function (a, b) {
        var c = this.g;
        if (null !== c) {
            var d = !1;
            if (!1 === c.Uj && a.H()) {
                var e = c.qe, f = c.padding, h = e.x + f.left, k = e.y + f.top, l = e.width - 2 * f.right, e = e.height - 2 * f.bottom;
                a.x > h && a.y > k && a.right < l && a.bottom < e && b.x > h && b.y > k && b.right < l && b.bottom < e && (d = !0)
            }
            0 !== (this.N & 65536) !== !0 && a.L(b) || Lm(this, d, c);
            c.na();
            Qa(a, b) || (this instanceof T && !c.oa.fb && this.Tf(), this.Vl())
        }
    };
    w.defineProperty(S, {location: "location"}, function () {
        return this.Ri
    }, function (a) {
        var b = a.x, c = a.y, d = this.Ri, e = d.x, f = d.y;
        (e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) || (a = a.S(), b = a, this instanceof W ? b = !1 : (this.Ri = b, this.N |= 2097152, !1 === zm(this) && (Xq(this), c = this.hb, c.H() && (e = c.copy(), c.l(c.x + (b.x - d.x), c.y + (b.y - d.y)), br(this, this.g, c, e), this.h("position", e, c))), b = !0), b && this.h("location", d, a))
    });
    g = S.prototype;
    g.dB = function (a, b) {
        if (this instanceof W || !a.H())return !1;
        var c = this.g;
        if (null !== c && (br(this, c, a, b), !0 === c.oa.fb))return !0;
        this.hb = a;
        this.N &= -2097153;
        c = this.Ri;
        if (c.H()) {
            var d = c.copy();
            c.l(c.x + (a.x - b.x), c.y + (a.y - b.y));
            this.h("location", d, c)
        }
        !1 === Am(this) && !1 === zm(this) && (Xq(this), Zq(this));
        return !0
    };
    function br(a, b, c, d) {
        null === b || a instanceof dh || (b = b.Pa, b.oc && Ck(b, a, "position", d.copy(), c.copy(), !1))
    }

    g.hy = function (a, b) {
        var c = this.Ri, d = this.hb;
        Am(this) || zm(this) ? c.l(NaN, NaN) : c.l(c.x + a - d.x, c.y + b - d.y);
        d.l(a, b);
        Xq(this)
    };
    g.eB = function () {
        this.N &= -2097153;
        Xq(this)
    };
    function $q(a, b, c) {
        var d = w.K(), e = a.zf, f = a.Xf;
        e.Nd() && w.k("determineOffset: Part's locationSpot must be real: " + e.toString());
        var h = f.Ia, k = f instanceof X ? f.kb : 0;
        d.Hu(0, 0, h.width + k, h.height + k, e);
        if (f !== a)for (d.offset(-k / 2, -k / 2), f.transform.nb(d), e = f.O; null !== e && e !== a;)e.transform.nb(d), e = e.O;
        a.Qi.nb(d);
        d.offset(-a.od.x, -a.od.y);
        e = a.g;
        f = c.H();
        h = b.H();
        f && h ? 0 !== (a.N & 2097152) ? cr(a, b, c, e, d) : dr(a, b, c, e, d) : f ? cr(a, b, c, e, d) : h && dr(a, b, c, e, d);
        a.N |= 2097152;
        w.v(d);
        a.Ii()
    }

    function cr(a, b, c, d, e) {
        var f = b.x, h = b.y;
        b.l(c.x - e.x, c.y - e.y);
        null !== d && (c = d.Pa, (e = c.Vj) || !c.oc || a instanceof dh || Ck(c, a, "position", new z(f, h), b, !1), e || b.x === f && b.y === h || (c = d.wb, d.wb = !0, a.h("position", new z(f, h), b), d.wb = c))
    }

    function dr(a, b, c, d, e) {
        var f = c.copy();
        c.l(b.x + e.x, b.y + e.y);
        c.L(f) || null === d || (b = d.wb, d.wb = !0, a.h("location", f, c), d.wb = b)
    }

    function Lm(a, b, c) {
        Eo(a, !1);
        a instanceof T && En(c, a);
        a.layer.Jc || b || c.qc();
        b = a.mc;
        var d = c.sb;
        d.H() ? (fl(a) ? ab(b, d) || a.Bf(!1) : b.Kg(d) && a.Bf(!0), a.updateAdornments()) : c.fl = !0
    }

    g.Yl = function () {
        return !0
    };
    function hl(a, b) {
        var c = a.mc;
        if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y) && a.isVisible()) {
            var d = a.transform;
            null !== a.Zb && (Ko(a, b, a.Zb, !0, !0), b.fillRect(c.x, c.y, c.width, c.height));
            null === a.Zb && null === a.Db && (Ko(a, b, "rgba(0,0,0,0.4)", !0, !1), b.fillRect(c.x, c.y, c.width, c.height));
            null !== a.Db && (d.cu() || b.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy), c = a.Ia, Ko(a, b, a.Db, !0, !1), b.fillRect(0, 0, c.width, c.height), d.cu() || (c = 1 / (d.m11 * d.m22 - d.m12 * d.m21), b.transform(d.m22 * c, -d.m12 * c, -d.m21 * c, d.m11 * c, c * (d.m21 *
                d.dy - d.m22 * d.dx), c * (d.m12 * d.dx - d.m11 * d.dy))))
        }
    }

    g.de = function () {
        return !0
    };
    g.rj = function () {
        return !0
    };
    w.defineProperty(S, {rd: "category"}, function () {
        return this.ui
    }, function (a) {
        var b = this.ui;
        if (b !== a) {
            w.j(a, "string", S, "category");
            var c = this.g, d = this.data, e = null;
            if (null !== c && null !== d && !(this instanceof dh)) {
                var f = c.ba.oa;
                f.isEnabled && !f.fb && (e = this.clone(), e.wa.Hc(this.wa))
            }
            this.ui = a;
            this.h("category", b, a);
            null === c || null === d || this instanceof dh ? (e = this.Nf, null !== e && (a = e.si, null !== a && a.remove(b), e.zl(this.rd, this))) : (f = c.ba, f.oa.fb || (this instanceof W ? (f instanceof P ? f.bG(d, a) : f instanceof Zf && f.wJ(d,
                a), c = qn(c, a), null !== c && (fh(c), c = c.copy(), null !== c && er(this, c, b, a))) : (null !== f && f.by(d, a), c = nn(c, d, a), null !== c && (fh(c), c = c.copy(), null === c || c instanceof W || (c.location = this.location, er(this, c, b, a)))), null !== e && (b = this.clone(), b.wa.Hc(this.wa), this.h("self", e, b))))
        }
    });
    w.defineProperty(S, {self: "self"}, function () {
        return this
    }, function (a) {
        er(this, a, this.rd, a.rd)
    });
    var fr = !1;

    function er(a, b, c, d) {
        b.constructor === a.constructor || fr || (fr = !0, w.trace('Should not change the class of the Part when changing category from "' + c + '" to "' + d + '"'), w.trace("  Old class: " + w.hf(a) + ", new class: " + w.hf(b) + ", part: " + a.toString()));
        a.Ct();
        var e = a.data;
        c = a.Wf;
        var f = a.eb, h = a.Lg, k = !0, l = !0, m = !1;
        if (a instanceof T)var n = a, k = n.uj, l = n.gd, m = n.Ou;
        b.ki(a);
        b.cloneProtected(a);
        a.ui = d;
        a.I();
        a.na();
        b = a.g;
        d = !0;
        null !== b && (d = b.wb, b.wb = !0);
        a.Vd = e;
        null !== e && a.Hb();
        null !== b && (b.wb = d);
        e = a.Wf;
        e !== c && (a.kl = c,
            a.Wf = e);
        a instanceof T && (n = a, n.uj = k, n.gd = l, n.Ou = m, n.de() && n.J(64));
        a.eb = f;
        a.Lg = h
    }

    S.prototype.canCopy = function () {
        if (!this.zH)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.sk)return !1;
        a = a.g;
        return null === a ? !0 : a.sk ? !0 : !1
    };
    S.prototype.canDelete = function () {
        if (!this.EH)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.gn)return !1;
        a = a.g;
        return null === a ? !0 : a.gn ? !0 : !1
    };
    S.prototype.canEdit = function () {
        if (!this.FJ)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Ow)return !1;
        a = a.g;
        return null === a ? !0 : a.Ow ? !0 : !1
    };
    S.prototype.canGroup = function () {
        if (!this.cI)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Lw)return !1;
        a = a.g;
        return null === a ? !0 : a.Lw ? !0 : !1
    };
    S.prototype.canMove = function () {
        if (!this.WI)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Dl)return !1;
        a = a.g;
        return null === a ? !0 : a.Dl ? !0 : !1
    };
    S.prototype.canReshape = function () {
        if (!this.iJ)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Mw)return !1;
        a = a.g;
        return null === a ? !0 : a.Mw ? !0 : !1
    };
    S.prototype.canResize = function () {
        if (!this.jJ)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Bt)return !1;
        a = a.g;
        return null === a ? !0 : a.Bt ? !0 : !1
    };
    S.prototype.canRotate = function () {
        if (!this.mJ)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Nw)return !1;
        a = a.g;
        return null === a ? !0 : a.Nw ? !0 : !1
    };
    S.prototype.canSelect = function () {
        if (!this.dm)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.tf)return !1;
        a = a.g;
        return null === a ? !0 : a.tf ? !0 : !1
    };
    w.defineProperty(S, {zH: "copyable"}, function () {
        return 0 !== (this.N & 1)
    }, function (a) {
        var b = 0 !== (this.N & 1);
        b !== a && (this.N ^= 1, this.h("copyable", b, a))
    });
    w.defineProperty(S, {EH: "deletable"}, function () {
        return 0 !== (this.N & 2)
    }, function (a) {
        var b = 0 !== (this.N & 2);
        b !== a && (this.N ^= 2, this.h("deletable", b, a))
    });
    w.defineProperty(S, {FJ: "textEditable"}, function () {
        return 0 !== (this.N & 4)
    }, function (a) {
        var b = 0 !== (this.N & 4);
        b !== a && (this.N ^= 4, this.h("textEditable", b, a), this.ce())
    });
    w.defineProperty(S, {cI: "groupable"}, function () {
        return 0 !== (this.N & 8)
    }, function (a) {
        var b = 0 !== (this.N & 8);
        b !== a && (this.N ^= 8, this.h("groupable", b, a))
    });
    w.defineProperty(S, {WI: "movable"}, function () {
        return 0 !== (this.N & 16)
    }, function (a) {
        var b = 0 !== (this.N & 16);
        b !== a && (this.N ^= 16, this.h("movable", b, a))
    });
    w.defineProperty(S, {tJ: "selectionAdorned"}, function () {
        return 0 !== (this.N & 32)
    }, function (a) {
        var b = 0 !== (this.N & 32);
        b !== a && (this.N ^= 32, this.h("selectionAdorned", b, a), this.ce())
    });
    w.defineProperty(S, {xA: "isInDocumentBounds"}, function () {
        return 0 !== (this.N & 64)
    }, function (a) {
        var b = 0 !== (this.N & 64);
        if (b !== a) {
            this.N ^= 64;
            var c = this.g;
            null !== c && c.qc();
            this.h("isInDocumentBounds", b, a)
        }
    });
    w.defineProperty(S, {lF: "isLayoutPositioned"}, function () {
        return 0 !== (this.N & 128)
    }, function (a) {
        var b = 0 !== (this.N & 128);
        b !== a && (this.N ^= 128, this.h("isLayoutPositioned", b, a), this.J(a ? 4 : 8))
    });
    w.defineProperty(S, {dm: "selectable"}, function () {
        return 0 !== (this.N & 256)
    }, function (a) {
        var b = 0 !== (this.N & 256);
        b !== a && (this.N ^= 256, this.h("selectable", b, a), this.ce())
    });
    w.defineProperty(S, {iJ: "reshapable"}, function () {
        return 0 !== (this.N & 512)
    }, function (a) {
        var b = 0 !== (this.N & 512);
        b !== a && (this.N ^= 512, this.h("reshapable", b, a), this.ce())
    });
    w.defineProperty(S, {jJ: "resizable"}, function () {
        return 0 !== (this.N & 1024)
    }, function (a) {
        var b = 0 !== (this.N & 1024);
        b !== a && (this.N ^= 1024, this.h("resizable", b, a), this.ce())
    });
    w.defineProperty(S, {mJ: "rotatable"}, function () {
        return 0 !== (this.N & 2048)
    }, function (a) {
        var b = 0 !== (this.N & 2048);
        b !== a && (this.N ^= 2048, this.h("rotatable", b, a), this.ce())
    });
    w.defineProperty(S, {eb: "isSelected"}, function () {
        return 0 !== (this.N & 4096)
    }, function (a) {
        var b = 0 !== (this.N & 4096);
        if (b !== a) {
            var c = this.g;
            if (!a || this.canSelect() && !(null !== c && c.selection.count >= c.LI)) {
                this.N ^= 4096;
                var d = !1;
                if (null !== c) {
                    d = c.wb;
                    c.wb = !0;
                    var e = c.selection;
                    e.Ra();
                    a ? e.add(this) : e.remove(this);
                    e.freeze()
                }
                this.h("isSelected", b, a);
                this.ce();
                a = this.vJ;
                null !== a && a(this);
                null !== c && (c.Le(), c.wb = d)
            }
        }
    });
    w.defineProperty(S, {Lg: "isHighlighted"}, function () {
        return 0 !== (this.N & 524288)
    }, function (a) {
        var b = 0 !== (this.N & 524288);
        if (b !== a) {
            this.N ^= 524288;
            var c = this.g;
            null !== c && (c = c.Ul, c.Ra(), a ? c.add(this) : c.remove(this), c.freeze());
            this.h("isHighlighted", b, a);
            this.na();
            a = this.fI;
            null !== a && a(this)
        }
    });
    w.defineProperty(S, {Zl: "isShadowed"}, function () {
        return 0 !== (this.N & 8192)
    }, function (a) {
        var b = 0 !== (this.N & 8192);
        b !== a && (this.N ^= 8192, this.h("isShadowed", b, a), this.na())
    });
    function Am(a) {
        return 0 !== (a.N & 32768)
    }

    function Yq(a, b) {
        a.N = b ? a.N | 32768 : a.N & -32769
    }

    function Eo(a, b) {
        a.N = b ? a.N | 65536 : a.N & -65537
    }

    function fl(a) {
        return 0 !== (a.N & 131072)
    }

    S.prototype.Bf = function (a) {
        this.N = a ? this.N | 131072 : this.N & -131073
    };
    function gr(a, b) {
        a.N = b ? a.N | 1048576 : a.N & -1048577
    }

    w.defineProperty(S, {cF: "isAnimated"}, function () {
        return 0 !== (this.N & 262144)
    }, function (a) {
        var b = 0 !== (this.N & 262144);
        b !== a && (this.N ^= 262144, this.h("isAnimated", b, a))
    });
    w.defineProperty(S, {fI: "highlightedChanged"}, function () {
        return this.Gr
    }, function (a) {
        var b = this.Gr;
        b !== a && (null !== a && w.j(a, "function", S, "highlightedChanged"), this.Gr = a, this.h("highlightedChanged", b, a))
    });
    w.defineProperty(S, {ZA: "selectionObjectName"}, function () {
        return this.Us
    }, function (a) {
        var b = this.Us;
        b !== a && (this.Us = a, this.Zm = null, this.h("selectionObjectName", b, a))
    });
    w.defineProperty(S, {uJ: "selectionAdornmentTemplate"}, function () {
        return this.Ss
    }, function (a) {
        var b = this.Ss;
        b !== a && (this instanceof W && (a.type = aj), this.Ss = a, this.h("selectionAdornmentTemplate", b, a))
    });
    w.u(S, {Eu: "selectionObject"}, function () {
        if (null === this.Zm) {
            var a = this.ZA;
            null !== a && "" !== a ? (a = this.sd(a), this.Zm = null !== a ? a : this) : this instanceof W ? (a = this.path, this.Zm = null !== a ? a : this) : this.Zm = this
        }
        return this.Zm
    });
    w.defineProperty(S, {vJ: "selectionChanged"}, function () {
        return this.Ts
    }, function (a) {
        var b = this.Ts;
        b !== a && (null !== a && w.j(a, "function", S, "selectionChanged"), this.Ts = a, this.h("selectionChanged", b, a))
    });
    w.defineProperty(S, {RF: "resizeAdornmentTemplate"}, function () {
        return this.Gs
    }, function (a) {
        var b = this.Gs;
        b !== a && (this.Gs = a, this.h("resizeAdornmentTemplate", b, a))
    });
    w.defineProperty(S, {TF: "resizeObjectName"}, function () {
        return this.Is
    }, function (a) {
        var b = this.Is;
        b !== a && (this.Is = a, this.ip = null, this.h("resizeObjectName", b, a))
    });
    w.u(S, {SF: "resizeObject"}, function () {
        if (null === this.ip) {
            var a = this.TF;
            null !== a && "" !== a ? (a = this.sd(a), this.ip = null !== a ? a : this) : this.ip = this
        }
        return this.ip
    });
    w.defineProperty(S, {kJ: "resizeCellSize"}, function () {
        return this.Hs
    }, function (a) {
        var b = this.Hs;
        b.L(a) || (this.Hs = a = a.S(), this.h("resizeCellSize", b, a))
    });
    w.defineProperty(S, {nJ: "rotateAdornmentTemplate"}, function () {
        return this.Js
    }, function (a) {
        var b = this.Js;
        b !== a && (this.Js = a, this.h("rotateAdornmentTemplate", b, a))
    });
    w.defineProperty(S, {oJ: "rotateObjectName"}, function () {
        return this.Ks
    }, function (a) {
        var b = this.Ks;
        b !== a && (this.Ks = a, this.kp = null, this.h("rotateObjectName", b, a))
    });
    w.u(S, {VF: "rotateObject"}, function () {
        if (null === this.kp) {
            var a = this.oJ;
            null !== a && "" !== a ? (a = this.sd(a), this.kp = null !== a ? a : this) : this.kp = this
        }
        return this.kp
    });
    w.defineProperty(S, {text: "text"}, function () {
        return this.Dd
    }, function (a) {
        var b = this.Dd;
        b !== a && (this.Dd = a, this.h("text", b, a))
    });
    w.defineProperty(S, {Ka: "containingGroup"}, function () {
        return this.Xk
    }, function (a) {
        if (this.de()) {
            var b = this.Xk;
            if (b !== a) {
                null === a || this !== a && !a.mi(this) || (this === a && w.k("Cannot make a Group a member of itself: " + this.toString()), w.k("Cannot make a Group indirectly contain itself: " + this.toString() + " already contains " + a.toString()));
                this.J(Qm);
                var c = this.g;
                null !== b ? hr(b, this) : this instanceof U && null !== c && c.wl.remove(this);
                this.Xk = a;
                null !== a ? ir(a, this) : this instanceof U && null !== c && c.wl.add(this);
                this.J(Hm);
                if (null !== c) {
                    var d = this.data, e = c.ba;
                    null !== d && e instanceof P && e.bB(d, e.ub(null !== a ? a.data : null))
                }
                d = this.pE;
                null !== d && (e = !0, null !== c && (e = c.Ua, c.Ua = !0), d(this, b, a), null !== c && (c.Ua = e));
                if (this instanceof U)for (c = new J(S), ch(c, this, !0, 0, !0), c = c.i; c.next();)if (d = c.value, d instanceof T)for (d = d.fe; d.next();)ln(d.value);
                if (this instanceof T)for (d = this.fe; d.next();)ln(d.value);
                this.h("containingGroup", b, a);
                null !== a && (b = a.layer, null !== b && kl(b, -1, a))
            }
        } else w.k("cannot set the Part.containingGroup of a Link or Adornment")
    });
    g = S.prototype;
    g.Vl = function () {
        var a = this.Ka;
        null !== a && (a.I(), null !== a.Kb && a.Kb.I(), a.Tf())
    };
    g.na = function () {
        var a = this.g;
        null !== a && !zm(this) && !Am(this) && this.isVisible() && this.mc.H() && a.na(jl(this, this.mc))
    };
    g.I = function () {
        C.prototype.I.call(this);
        var a = this.g;
        null !== a && (a.qg.add(this), this instanceof T && null !== this.Lc && Oo(this.Lc), a.Le(!0))
    };
    g.Wt = function (a) {
        a || (a = this.Xk, null !== a && ir(a, this))
    };
    g.Xt = function (a) {
        a || (a = this.Xk, null !== a && hr(a, this))
    };
    g.tn = function () {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            null !== b && (b = b.ba, null !== b && b.Xx(a))
        }
    };
    w.defineProperty(S, {pE: "containingGroupChanged"}, function () {
        return this.Vq
    }, function (a) {
        var b = this.Vq;
        b !== a && (null !== a && w.j(a, "function", S, "containingGroupChanged"), this.Vq = a, this.h("containingGroupChanged", b, a))
    });
    S.prototype.findSubGraphLevel = function () {
        return jr(this, this)
    };
    function jr(a, b) {
        var c = b.Ka;
        return null !== c ? 1 + jr(a, c) : b instanceof T && (c = b.Lc, null !== c) ? jr(a, c) : 0
    }

    S.prototype.findTopLevelPart = function () {
        return kr(this, this)
    };
    function kr(a, b) {
        var c = b.Ka;
        return null !== c ? kr(a, c) : b instanceof T && (c = b.Lc, null !== c) ? kr(a, c) : b
    }

    w.u(S, {cq: "isTopLevel"}, function () {
        return null !== this.Ka || this instanceof T && this.lf ? !1 : !0
    });
    S.prototype.isMemberOf = S.prototype.mi = function (a) {
        return a instanceof U ? lr(this, this, a) : !1
    };
    function lr(a, b, c) {
        if (b === c || null === c)return !1;
        var d = b.Ka;
        return null === d || d !== c && !lr(a, d, c) ? b instanceof T && (b = b.Lc, null !== b) ? lr(a, b, c) : !1 : !0
    }

    S.prototype.findCommonContainingGroup = S.prototype.MH = function (a) {
        if (null === a)return null;
        if (this === a)return this.Ka;
        for (var b = this; null !== b;)b instanceof U && gr(b, !0), b = b.Ka;
        for (var c = null, b = a; null !== b;) {
            if (0 !== (b.N & 1048576)) {
                c = b;
                break
            }
            b = b.Ka
        }
        for (b = this; null !== b;)b instanceof U && gr(b, !1), b = b.Ka;
        return c
    };
    w.defineProperty(S, {AI: "layoutConditions"}, function () {
        return this.Ur
    }, function (a) {
        var b = this.Ur;
        b !== a && (this.Ur = a, this.h("layoutConditions", b, a))
    });
    S.prototype.canLayout = function () {
        if (!this.lF || !this.isVisible())return !1;
        var a = this.layer;
        return null !== a && a.Jc || this instanceof T && this.lf ? !1 : !0
    };
    S.prototype.invalidateLayout = S.prototype.J = function (a) {
        void 0 === a && (a = 16777215);
        var b;
        this.lF && 0 !== (a & this.AI) ? (b = this.layer, null !== b && b.Jc || this instanceof T && this.lf ? b = !1 : (b = this.g, b = null !== b && b.oa.fb ? !1 : !0)) : b = !1;
        if (b)if (b = this.Xk, null !== b) {
            var c = b.Rb;
            null !== c ? c.J() : b.J(a)
        } else a = this.g, null !== a && (c = a.Rb, null !== c && c.J())
    };
    function Mm(a) {
        if (!a.isVisible())return !1;
        a = a.layer;
        return null !== a && a.Jc ? !1 : !0
    }

    w.defineProperty(S, {AE: "dragComputation"}, function () {
        return this.or
    }, function (a) {
        var b = this.or;
        b !== a && (null !== a && w.j(a, "function", S, "dragComputation"), this.or = a, this.h("dragComputation", b, a))
    });
    w.defineProperty(S, {yJ: "shadowOffset"}, function () {
        return this.an
    }, function (a) {
        var b = this.an;
        b.L(a) || (this.an = a = a.S(), this.na(), this.h("shadowOffset", b, a))
    });
    w.defineProperty(S, {shadowColor: "shadowColor"}, function () {
        return this.$m
    }, function (a) {
        var b = this.$m;
        b !== a && (this.$m = a, this.na(), this.h("shadowColor", b, a))
    });
    w.defineProperty(S, {shadowBlur: "shadowBlur"}, function () {
        return this.zg
    }, function (a) {
        var b = this.zg;
        b !== a && (this.zg = a, this.na(), this.h("shadowBlur", b, a))
    });
    function dh(a) {
        0 === arguments.length ? S.call(this, Nj) : S.call(this, a);
        this.N &= -257;
        this.kl = "Adornment";
        this.Dc = null;
        this.fD = 0;
        this.WD = !1;
        this.Kb = this.$g = null
    }

    w.La(dh, S);
    w.fa("Adornment", dh);
    dh.prototype.toString = function () {
        var a = this.Nf;
        return "Adornment(" + this.rd + ")" + (null !== a ? a.toString() : "")
    };
    dh.prototype.updateRelationshipsFromData = function () {
    };
    dh.prototype.lu = function (a) {
        var b = this.qb.U, c = this.qb;
        if (b instanceof W && c instanceof X) {
            var d = b.path, c = d.vf;
            b.lu(a);
            c = d.vf;
            a = this.wa.n;
            b = a.length;
            for (d = 0; d < b; d++) {
                var e = a[d];
                e.Uf && e instanceof X && (e.gb = c)
            }
        }
    };
    w.u(dh, {placeholder: "placeholder"}, function () {
        return this.Kb
    });
    w.defineProperty(dh, {qb: "adornedObject"}, function () {
        return this.Dc
    }, function (a) {
        var b = this.Nf, c = null;
        null !== a && (c = a.U);
        null === b || null !== a && b === c || b.Aj(this.rd);
        this.Dc = a;
        null !== c && c.zl(this.rd, this)
    });
    w.u(dh, {Nf: "adornedPart"}, function () {
        var a = this.Dc;
        return null !== a ? a.U : null
    });
    dh.prototype.Yl = function () {
        var a = this.Dc;
        if (null === a)return !0;
        a = a.U;
        return null === a || !zm(a)
    };
    dh.prototype.de = function () {
        return !1
    };
    w.u(dh, {Ka: "containingGroup"}, function () {
        return null
    });
    dh.prototype.Tn = function (a, b, c, d, e, f, h) {
        if (a === Of && "elements" === b)if (e instanceof Hj) {
            var k = e;
            null === this.Kb ? this.Kb = k : this.Kb !== k && w.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")
        } else e instanceof C && (k = e.Kt(function (a) {
            return a instanceof Hj
        }), k instanceof Hj && (null === this.Kb ? this.Kb = k : this.Kb !== k && w.k("Cannot insert a second Placeholder into the visual tree of an Adornment."))); else a === Pf && "elements" === b && null !== this.Kb && (d === this.Kb ? this.Kb = null : d instanceof C &&
        this.Kb.Xl(d) && (this.Kb = null));
        S.prototype.Tn.call(this, a, b, c, d, e, f, h)
    };
    dh.prototype.updateAdornments = function () {
    };
    dh.prototype.tn = function () {
    };
    function T(a) {
        S.call(this, a);
        this.xa = 13;
        this.nc = new I(W);
        this.ot = this.Uo = this.ml = this.Wr = this.Vr = null;
        this.Oq = jd;
        this.le = this.Hh = null;
        this.Cs = mr;
        this.pk = !1
    }

    w.La(T, S);
    w.fa("Node", T);
    T.prototype.cloneProtected = function (a) {
        S.prototype.cloneProtected.call(this, a);
        a.xa = this.xa;
        a.xa = this.xa & -17;
        a.Vr = this.Vr;
        a.Wr = this.Wr;
        a.ml = this.ml;
        a.ot = this.ot;
        a.Oq = this.Oq.S();
        a.Cs = this.Cs
    };
    T.prototype.ki = function (a) {
        S.prototype.ki.call(this, a);
        a.Tf();
        a.Hh = this.Hh;
        a.le = null
    };
    var nr;
    T.DirectionDefault = nr = w.p(T, "DirectionDefault", 0);
    T.DirectionAbsolute = w.p(T, "DirectionAbsolute", 1);
    var or;
    T.DirectionRotatedNode = or = w.p(T, "DirectionRotatedNode", 2);
    var uo;
    T.DirectionRotatedNodeOrthogonal = uo = w.p(T, "DirectionRotatedNodeOrthogonal", 3);
    T.SpreadingNone = w.p(T, "SpreadingNone", 10);
    var mr;
    T.SpreadingEvenly = mr = w.p(T, "SpreadingEvenly", 11);
    var pr;
    T.SpreadingPacked = pr = w.p(T, "SpreadingPacked", 12);
    function qr(a, b) {
        null !== b && (null === a.Hh && (a.Hh = new J(ul)), a.Hh.add(b))
    }

    function rr(a, b, c, d) {
        if (null === b || null === a.Hh)return null;
        for (var e = a.Hh.i; e.next();) {
            var f = e.value;
            if (f.iq === a && f.qu === b && f.Ox === c && f.Px === d || f.iq === b && f.qu === a && f.Ox === d && f.Px === c)return f
        }
        return null
    }

    T.prototype.invalidateLinkBundle = function (a, b, c) {
        if (void 0 === b || null === b)b = "";
        if (void 0 === c || null === c)c = "";
        a = rr(this, a, b, c);
        null !== a && a.aq()
    };
    T.prototype.Tn = function (a, b, c, d, e, f, h) {
        a === Of && "elements" === b ? this.le = null : a === Pf && "elements" === b && (null === this.g ? this.le = null : d instanceof G && Xo(this, d, function (a, b) {
            Uo(a, b, !0)
        }));
        S.prototype.Tn.call(this, a, b, c, d, e, f, h)
    };
    T.prototype.invalidateConnectedLinks = T.prototype.Tf = function (a) {
        void 0 === a && (a = null);
        for (var b = this.fe; b.next();) {
            var c = b.value;
            null !== a && a.contains(c) || (sr(this, c.ed), sr(this, c.Sd), c.Xb())
        }
    };
    function Fo(a, b) {
        for (var c = a.fe; c.next();) {
            var d = c.value;
            if (d.ed === b || d.Sd === b)sr(a, d.ed), sr(a, d.Sd), d.Xb()
        }
    }

    function sr(a, b) {
        if (null !== b) {
            var c = b.Bs;
            null !== c && c.aq();
            c = a.Ka;
            null === c || c.we || sr(c, c.Ol(""))
        }
    }

    T.prototype.Yl = function () {
        return !0
    };
    w.defineProperty(T, {bJ: "portSpreading"}, function () {
        return this.Cs
    }, function (a) {
        var b = this.Cs;
        b !== a && (this.Cs = a, this.h("portSpreading", b, a), a = this.g, null !== a && a.oa.fb || this.Tf())
    });
    w.defineProperty(T, {Pz: "avoidable"}, function () {
        return 0 !== (this.xa & 8)
    }, function (a) {
        var b = 0 !== (this.xa & 8);
        if (b !== a) {
            this.xa ^= 8;
            var c = this.g;
            null !== c && En(c, this);
            this.h("avoidable", b, a)
        }
    });
    w.defineProperty(T, {gH: "avoidableMargin"}, function () {
        return this.Oq
    }, function (a) {
        "number" === typeof a ? a = new eb(a) : w.G(a, eb, T, "avoidableMargin");
        var b = this.Oq;
        if (!b.L(a)) {
            this.Oq = a = a.S();
            var c = this.g;
            null !== c && En(c, this);
            this.h("avoidableMargin", b, a)
        }
    });
    T.prototype.getAvoidableRect = function (a) {
        a.set(this.Y);
        a.Jw(this.gH);
        return a
    };
    T.prototype.findVisibleNode = function () {
        for (var a = this; null !== a && !a.isVisible();)a = a.Ka;
        return a
    };
    T.prototype.isVisible = function () {
        if (!S.prototype.isVisible.call(this))return !1;
        var a = !0, b = ql, c = this.g;
        if (null !== c) {
            a = c.Pa;
            if (a.kf && (a = a.Pm.ka(this), null !== a && a.Ux))return !0;
            a = c.Od;
            b = c.sB
        }
        if (b === ql) {
            if (c = this.Ql(), null !== c && !c.gd)return !1
        } else if (b === Um) {
            if (c = a ? this.HE() : this.IE(), 0 < c.count && c.all(function (a) {
                    return !a.gd
                }))return !1
        } else if (b === Vm && (c = a ? this.HE() : this.IE(), 0 < c.count && c.any(function (a) {
                return !a.gd
            })))return !1;
        c = this.Lc;
        return null !== c ? c.isVisible() : !0
    };
    T.prototype.td = function (a) {
        S.prototype.td.call(this, a);
        for (var b = this.fe; b.next();)b.value.td(a)
    };
    w.u(T, {fe: "linksConnected"}, function () {
        return this.nc.i
    });
    T.prototype.findLinksConnected = T.prototype.FE = function (a) {
        void 0 === a && (a = null);
        if (null === a)return this.nc.i;
        var b = new ya(this.nc), c = this;
        b.jq = function (b) {
            return b.W === c && b.Jg === a || b.$ === c && b.Eh === a
        };
        return b
    };
    T.prototype.findLinksOutOf = T.prototype.ix = function (a) {
        void 0 === a && (a = null);
        var b = new ya(this.nc), c = this;
        b.jq = function (b) {
            return b.W !== c ? !1 : null === a ? !0 : b.Jg === a
        };
        return b
    };
    T.prototype.findLinksInto = T.prototype.Ig = function (a) {
        void 0 === a && (a = null);
        var b = new ya(this.nc), c = this;
        b.jq = function (b) {
            return b.$ !== c ? !1 : null === a ? !0 : b.Eh === a
        };
        return b
    };
    T.prototype.findNodesConnected = T.prototype.GE = function (a) {
        void 0 === a && (a = null);
        for (var b = null, c = null, d = this.nc.i; d.next();) {
            var e = d.value;
            if (e.W === this) {
                if (null === a || e.Jg === a)e = e.$, null !== b ? b.add(e) : null !== c && c !== e ? (b = new J(T), b.add(c), b.add(e)) : c = e
            } else e.$ !== this || null !== a && e.Eh !== a || (e = e.W, null !== b ? b.add(e) : null !== c && c !== e ? (b = new J(T), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.i : null !== c ? new wa(c) : va
    };
    T.prototype.findNodesOutOf = T.prototype.IE = function (a) {
        void 0 === a && (a = null);
        for (var b = null, c = null, d = this.nc.i; d.next();) {
            var e = d.value;
            e.W !== this || null !== a && e.Jg !== a || (e = e.$, null !== b ? b.add(e) : null !== c && c !== e ? (b = new J(T), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.i : null !== c ? new wa(c) : va
    };
    T.prototype.findNodesInto = T.prototype.HE = function (a) {
        void 0 === a && (a = null);
        for (var b = null, c = null, d = this.nc.i; d.next();) {
            var e = d.value;
            e.$ !== this || null !== a && e.Eh !== a || (e = e.W, null !== b ? b.add(e) : null !== c && c !== e ? (b = new J(T), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.i : null !== c ? new wa(c) : va
    };
    T.prototype.findLinksBetween = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var d = new ya(this.nc), e = this;
        d.jq = function (d) {
            return (d.W !== e || d.$ !== a || null !== b && d.Jg !== b || null !== c && d.Eh !== c) && (d.W !== a || d.$ !== e || null !== c && d.Jg !== c || null !== b && d.Eh !== b) ? !1 : !0
        };
        return d
    };
    T.prototype.findLinksTo = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var d = new ya(this.nc), e = this;
        d.jq = function (d) {
            return d.W !== e || d.$ !== a || null !== b && d.Jg !== b || null !== c && d.Eh === c ? !1 : !0
        };
        return d
    };
    w.defineProperty(T, {CI: "linkConnected"}, function () {
        return this.Vr
    }, function (a) {
        var b = this.Vr;
        b !== a && (null !== a && w.j(a, "function", T, "linkConnected"), this.Vr = a, this.h("linkConnected", b, a))
    });
    w.defineProperty(T, {DI: "linkDisconnected"}, function () {
        return this.Wr
    }, function (a) {
        var b = this.Wr;
        b !== a && (null !== a && w.j(a, "function", T, "linkDisconnected"), this.Wr = a, this.h("linkDisconnected", b, a))
    });
    w.defineProperty(T, {Gx: "linkValidation"}, function () {
        return this.ml
    }, function (a) {
        var b = this.ml;
        b !== a && (null !== a && w.j(a, "function", T, "linkValidation"), this.ml = a, this.h("linkValidation", b, a))
    });
    function tr(a, b, c) {
        sr(a, c);
        if (!a.nc.contains(b)) {
            a.nc.add(b);
            var d = a.CI;
            if (null !== d) {
                var e = !0, f = a.g;
                null !== f && (e = f.Ua, f.Ua = !0);
                d(a, b, c);
                null !== f && (f.Ua = e)
            }
            b.Kc && (c = b.W, b = b.$, null !== c && null !== b && c !== b && (d = !0, f = a.g, null !== f && (d = f.Od), a = d ? b : c, e = d ? c : b, a.pk || (a.pk = e), !e.uj || null !== f && f.oa.fb || (d ? c === e && (e.uj = !1) : b === e && (e.uj = !1))))
        }
    }

    function ur(a, b, c) {
        sr(a, c);
        if (a.nc.remove(b)) {
            var d = a.DI, e = a.g;
            if (null !== d) {
                var f = !0;
                null !== e && (f = e.Ua, e.Ua = !0);
                d(a, b, c);
                null !== e && (e.Ua = f)
            }
            b.Kc && (c = !0, null !== e && (c = e.Od), a = c ? b.$ : b.W, b = c ? b.W : b.$, null !== a && (a.pk = !1), null === b || b.uj || (0 === b.nc.count ? (b.pk = null, null !== e && e.oa.fb || (b.uj = !0)) : xn(b)))
        }
    }

    function xn(a) {
        a.pk = !1;
        if (0 !== a.nc.count) {
            var b = !0, c = a.g;
            if (null === c || !c.oa.fb) {
                null !== c && (b = c.Od);
                for (c = a.nc.i; c.next();) {
                    var d = c.value;
                    if (d.Kc)if (b) {
                        if (d.W === a) {
                            a.uj = !1;
                            return
                        }
                    } else if (d.$ === a) {
                        a.uj = !1;
                        return
                    }
                }
                a.uj = !0
            }
        }
    }

    T.prototype.updateRelationshipsFromData = function () {
        S.prototype.updateRelationshipsFromData.call(this);
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ba;
                c instanceof Zf && (a = c.An(a), a = b.Ie(a), c = this.Ql(), a !== c && (c = this.vn(), null !== a ? null !== c ? b.Od ? c.W = a : c.$ = a : $m(b, a, this) : null !== c && Pm(b, c, !1)))
            }
        }
    };
    T.prototype.Wt = function (a) {
        S.prototype.Wt.call(this, a);
        a || (xn(this), a = this.Uo, null !== a && vr(a, this))
    };
    T.prototype.Xt = function (a) {
        S.prototype.Xt.call(this, a);
        a || (a = this.Uo, null !== a && null !== a.rf && (a.rf.remove(this), a.I()))
    };
    T.prototype.tn = function () {
        if (0 < this.nc.count) {
            var a = this.g;
            if (null !== a)for (var b = a.ob.zE, c = this.nc.copy().i; c.next();) {
                var d = c.value;
                b ? a.remove(d) : (d.W === this && (d.W = null), d.$ === this && (d.$ = null))
            }
        }
        this.Lc = null;
        S.prototype.tn.call(this)
    };
    w.u(T, {lf: "isLinkLabel"}, function () {
        return null !== this.Uo
    });
    w.defineProperty(T, {Lc: "labeledLink"}, function () {
        return this.Uo
    }, function (a) {
        var b = this.Uo;
        if (b !== a) {
            var c = this.g, d = this.data;
            if (null !== b && (null !== b.rf && (b.rf.remove(this), b.I()), null !== c && null !== d && !c.oa.fb)) {
                var e = b.data, f = c.ba;
                if (null !== e && f instanceof P) {
                    var h = f.ub(d);
                    void 0 !== h && f.gJ(e, h)
                }
            }
            this.Uo = a;
            null !== a && (vr(a, this), null === c || null === d || c.oa.fb || (e = a.data, f = c.ba, null !== e && f instanceof P && (h = f.ub(d), void 0 !== h && f.cE(e, h))));
            Oo(this);
            this.h("labeledLink", b, a)
        }
    });
    T.prototype.findPort = T.prototype.Ol = function (a) {
        if (null === this.le) {
            if ("" === a && !1 === this.Ck)return this;
            Vo(this)
        }
        var b = this.le.ka(a);
        return null !== b || "" !== a && (b = this.le.ka(""), null !== b) ? b : this
    };
    w.u(T, {port: "port"}, function () {
        return this.Ol("")
    });
    w.u(T, {ports: "ports"}, function () {
        null === this.le && Vo(this);
        return this.le.qF
    });
    function Vo(a) {
        null === a.le ? a.le = new ka("string", G) : a.le.clear();
        Xo(a, a, function (a, c) {
            var d = c.Pd;
            null !== d && a.le.add(d, c)
        });
        0 === a.le.count && a.le.add("", a)
    }

    function Uo(a, b, c) {
        var d = b.Pd;
        if (null !== d && (null !== a.le && a.le.remove(d), b = a.g, null !== b && c)) {
            c = null;
            for (d = a.FE(d); d.next();)a = d.value, null === c && (c = w.lb()), c.push(a);
            if (null !== c) {
                for (d = 0; d < c.length; d++)a = c[d], b.remove(a);
                w.va(c)
            }
        }
    }

    T.prototype.isInTreeOf = function (a) {
        if (null === a || a === this)return !1;
        var b = !0, c = this.g;
        null !== c && (b = c.Od);
        c = this;
        if (b)for (; c !== a;) {
            for (var b = null, d = c.nc.i; d.next();) {
                var e = d.value;
                if (e.Kc && (b = e.W, b !== c && b !== this))break
            }
            if (b === this || null === b || b === c)return !1;
            c = b
        } else for (; c !== a;) {
            b = null;
            for (d = c.nc.i; d.next() && (e = d.value, !e.Kc || (b = e.$, b === c || b === this)););
            if (b === this || null === b || b === c)return !1;
            c = b
        }
        return !0
    };
    T.prototype.findTreeRoot = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.Od);
        b = this;
        if (a)for (; ;) {
            for (var a = null, c = b.nc.i; c.next();) {
                var d = c.value;
                if (d.Kc && (a = d.W, a !== b && a !== this))break
            }
            if (a === this)return this;
            if (null === a || a === b)return b;
            b = a
        } else for (; ;) {
            a = null;
            for (c = b.nc.i; c.next() && (d = c.value, !d.Kc || (a = d.$, a === b || a === this)););
            if (a === this)return this;
            if (null === a || a === b)return b;
            b = a
        }
    };
    T.prototype.findCommonTreeParent = function (a) {
        if (null === a)return null;
        if (this === a)return this;
        for (var b = this; null !== b;)gr(b, !0), b = b.Ql();
        for (var c = null, b = a; null !== b;) {
            if (0 !== (b.N & 1048576)) {
                c = b;
                break
            }
            b = b.Ql()
        }
        for (b = this; null !== b;)gr(b, !1), b = b.Ql();
        return c
    };
    T.prototype.findTreeParentLink = T.prototype.vn = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.Od);
        b = this.nc.i;
        if (a)for (; b.next();) {
            if (a = b.value, a.Kc && a.W !== this)return a
        } else for (; b.next();)if (a = b.value, a.Kc && a.$ !== this)return a;
        return null
    };
    T.prototype.findTreeParentNode = T.prototype.Ql = function () {
        var a = this.pk;
        if (null === a)return null;
        if (a instanceof T)return a;
        var b = !0, a = this.g;
        null !== a && (b = a.Od);
        a = this.nc.i;
        if (b)for (; a.next();) {
            if (b = a.value, b.Kc && (b = b.W, b !== this))return this.pk = b
        } else for (; a.next();)if (b = a.value, b.Kc && (b = b.$, b !== this))return this.pk = b;
        return this.pk = null
    };
    T.prototype.findTreeParentChain = function () {
        function a(b, d) {
            if (null !== b) {
                d.add(b);
                var e = b.vn();
                null !== e && (d.add(e), a(b.Ql(), d))
            }
        }

        var b = new J(S);
        a(this, b);
        return b
    };
    T.prototype.findTreeLevel = function () {
        return wr(this, this)
    };
    function wr(a, b) {
        var c = b.Ql();
        return null === c ? 0 : 1 + wr(a, c)
    }

    T.prototype.findTreeChildrenLinks = T.prototype.kx = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.Od);
        var b = new ya(this.nc), c = this;
        b.jq = a ? function (a) {
            return a.Kc && a.W === c ? !0 : !1
        } : function (a) {
            return a.Kc && a.$ === c ? !0 : !1
        };
        return b
    };
    T.prototype.findTreeChildrenNodes = T.prototype.KE = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.Od);
        var c = b = null, d = this.nc.i;
        if (a)for (; d.next();)a = d.value, a.Kc && a.W === this && (a = a.$, null !== b ? b.add(a) : null !== c && c !== a ? (b = new I(T), b.add(c), b.add(a)) : c = a); else for (; d.next();)a = d.value, a.Kc && a.$ === this && (a = a.W, null !== b ? b.add(a) : null !== c && c !== a ? (b = new I(T), b.add(c), b.add(a)) : c = a);
        return null !== b ? b.i : null !== c ? new wa(c) : va
    };
    T.prototype.findTreeParts = function (a) {
        void 0 === a && (a = Infinity);
        w.j(a, "number", T, "findTreeParts:level");
        var b = new J(S);
        ch(b, this, !1, a, !0);
        return b
    };
    T.prototype.collapseTree = T.prototype.collapseTree = function (a) {
        void 0 === a && (a = 1);
        w.Ed(a, T, "collapseTree:level");
        1 > a && (a = 1);
        var b = this.g;
        if (null !== b && !b.wh) {
            b.wh = !0;
            var c = new J(T);
            c.add(this);
            xr(this, c, b.Od, a, b.Pa, this, b.sB === ql);
            b.wh = !1
        }
    };
    function xr(a, b, c, d, e, f, h) {
        if (1 < d)for (var k = c ? a.ix() : a.Ig(); k.next();) {
            var l = k.value;
            l.Kc && (l = l.mA(a), null === l || l === a || b.contains(l) || (b.add(l), xr(l, b, c, d - 1, e, f, h)))
        } else yr(a, b, c, e, f, h)
    }

    function yr(a, b, c, d, e, f) {
        for (var h = e === a ? !0 : a.gd, k = c ? a.ix() : a.Ig(); k.next();) {
            var l = k.value;
            l.Kc && (l = l.mA(a), null === l || l === a || b.contains(l) || (b.add(l), h && (f && cl(d, l, e), l.Vl(), l.td(!1)), l.gd && (l.Ou = l.gd, yr(l, b, c, d, e, f))))
        }
        a.gd = !1
    }

    T.prototype.expandTree = T.prototype.expandTree = function (a) {
        void 0 === a && (a = 2);
        w.Ed(a, T, "expandTree:level");
        2 > a && (a = 2);
        var b = this.g;
        if (null !== b && !b.wh) {
            b.wh = !0;
            var c = new J(T);
            c.add(this);
            zr(this, c, b.Od, a, b.Pa, this, b.sB === ql);
            b.wh = !1
        }
    };
    function zr(a, b, c, d, e, f, h) {
        for (var k = f === a ? !1 : a.gd, l = c ? a.ix() : a.Ig(); l.next();) {
            var m = l.value;
            m.Kc && (k || m.Zg || m.Xb(), m = m.mA(a), null !== m && m !== a && !b.contains(m) && (b.add(m), k || (m.td(!0), m.Vl(), h && bl(e, m, f)), 2 < d || m.Ou)) && (m.Ou = !1, zr(m, b, c, d - 1, e, f, h))
        }
        a.gd = !0
    }

    w.defineProperty(T, {gd: "isTreeExpanded"}, function () {
        return 0 !== (this.xa & 1)
    }, function (a) {
        var b = 0 !== (this.xa & 1);
        if (b !== a) {
            this.xa ^= 1;
            var c = this.g;
            this.h("isTreeExpanded", b, a);
            b = this.MJ;
            if (null !== b) {
                var d = !0;
                null !== c && (d = c.Ua, c.Ua = !0);
                b(this);
                null !== c && (c.Ua = d)
            }
            null !== c && c.oa.fb ? this.td(a) : a ? this.expandTree() : this.collapseTree()
        }
    });
    w.defineProperty(T, {Ou: "wasTreeExpanded"}, function () {
        return 0 !== (this.xa & 2)
    }, function (a) {
        var b = 0 !== (this.xa & 2);
        b !== a && (this.xa ^= 2, this.h("wasTreeExpanded", b, a))
    });
    w.defineProperty(T, {MJ: "treeExpandedChanged"}, function () {
        return this.ot
    }, function (a) {
        var b = this.ot;
        b !== a && (null !== a && w.j(a, "function", T, "treeExpandedChanged"), this.ot = a, this.h("treeExpandedChanged", b, a))
    });
    w.defineProperty(T, {uj: "isTreeLeaf"}, function () {
        return 0 !== (this.xa & 4)
    }, function (a) {
        var b = 0 !== (this.xa & 4);
        b !== a && (this.xa ^= 4, this.h("isTreeLeaf", b, a))
    });
    function W() {
        S.call(this, aj);
        this.Vb = 8;
        this.mg = null;
        this.Nh = "";
        this.Cg = this.xr = null;
        this.hi = "";
        this.nt = null;
        this.Gq = dj;
        this.ar = 0;
        this.dr = dj;
        this.er = NaN;
        this.Um = Ar;
        this.at = .5;
        this.rf = null;
        this.ad = (new I(z)).freeze();
        this.$g = this.oC = this.iC = this.ti = this.Gi = this.gb = this.mw = this.lp = this.Ue = null;
        this.Cz = new z;
        this.V = this.GD = this.FD = null
    }

    w.La(W, S);
    w.fa("Link", W);
    W.prototype.cloneProtected = function (a) {
        S.prototype.cloneProtected.call(this, a);
        a.Vb = this.Vb & -113;
        a.Nh = this.Nh;
        a.xr = this.xr;
        a.hi = this.hi;
        a.nt = this.nt;
        a.Gq = this.Gq;
        a.ar = this.ar;
        a.dr = this.dr;
        a.er = this.er;
        a.Um = this.Um;
        a.at = this.at;
        null !== this.V && (a.V = this.V.copy())
    };
    W.prototype.ki = function (a) {
        S.prototype.ki.call(this, a);
        this.Nh = a.Nh;
        this.hi = a.hi;
        a.Ue = null;
        a.Xb();
        a.ti = this.ti
    };
    W.prototype.fc = function (a) {
        a.De === W ? 2 === (a.value & 2) ? this.Zx = a : a === sj || a === cj || a === bj ? this.Ye = a : a === Br || a === Cr || a === Dr ? this.xt = a : a !== Ar && a !== dj && w.k("Unknown Link enum value for a Link property: " + a) : S.prototype.fc.call(this, a)
    };
    var Ar;
    W.Normal = Ar = w.p(W, "Normal", 1);
    W.Orthogonal = w.p(W, "Orthogonal", 2);
    W.AvoidsNodes = w.p(W, "AvoidsNodes", 6);
    var Er;
    W.AvoidsNodesStraight = Er = w.p(W, "AvoidsNodesStraight", 7);
    var dj;
    W.None = dj = w.p(W, "None", 0);
    var sj;
    W.Bezier = sj = w.p(W, "Bezier", 9);
    var cj;
    W.JumpGap = cj = w.p(W, "JumpGap", 10);
    var bj;
    W.JumpOver = bj = w.p(W, "JumpOver", 11);
    var Br;
    W.End = Br = w.p(W, "End", 17);
    var Cr;
    W.Scale = Cr = w.p(W, "Scale", 18);
    var Dr;
    W.Stretch = Dr = w.p(W, "Stretch", 19);
    var lq;
    W.OrientAlong = lq = w.p(W, "OrientAlong", 21);
    var Np;
    W.OrientPlus90 = Np = w.p(W, "OrientPlus90", 22);
    var Pp;
    W.OrientMinus90 = Pp = w.p(W, "OrientMinus90", 23);
    var Dq;
    W.OrientOpposite = Dq = w.p(W, "OrientOpposite", 24);
    var Eq;
    W.OrientUpright = Eq = w.p(W, "OrientUpright", 25);
    var Op;
    W.OrientPlus90Upright = Op = w.p(W, "OrientPlus90Upright", 26);
    var Qp;
    W.OrientMinus90Upright = Qp = w.p(W, "OrientMinus90Upright", 27);
    var Rp;
    W.OrientUpright45 = Rp = w.p(W, "OrientUpright45", 28);
    g = W.prototype;
    g.Kd = function () {
        null === this.V && (this.V = new to)
    };
    g.Yl = function () {
        var a = this.W;
        if (null !== a) {
            var b = a.findVisibleNode();
            null !== b && (a = b);
            if (zm(a) || Am(a))return !1
        }
        a = this.$;
        return null !== a && (b = a.findVisibleNode(), null !== b && (a = b), zm(a) || Am(a)) ? !1 : !0
    };
    g.dB = function () {
        return !1
    };
    g.eB = function () {
    };
    g.de = function () {
        return !1
    };
    W.prototype.computeAngle = function (a, b, c) {
        a = 0;
        switch (b) {
            default:
            case dj:
                a = 0;
                break;
            case lq:
                a = c;
                break;
            case Np:
                a = c + 90;
                break;
            case Pp:
                a = c - 90;
                break;
            case Dq:
                a = c + 180;
                break;
            case Eq:
                a = Be(c);
                90 < a && 270 > a && (a -= 180);
                break;
            case Op:
                a = Be(c + 90);
                90 < a && 270 > a && (a -= 180);
                break;
            case Qp:
                a = Be(c - 90);
                90 < a && 270 > a && (a -= 180);
                break;
            case Rp:
                a = Be(c);
                if (45 < a && 135 > a || 225 < a && 315 > a)return 0;
                90 < a && 270 > a && (a -= 180)
        }
        return Be(a)
    };
    w.defineProperty(W, {W: "fromNode"}, function () {
        return this.mg
    }, function (a) {
        var b = this.mg;
        if (b !== a) {
            var c = this.ed;
            null !== b && (this.Cg !== b && ur(b, this, c), Fr(this), this.J(Qm));
            this.mg = a;
            null !== a && this.td(a.isVisible());
            this.Gi = null;
            this.Xb();
            var d = this.g;
            if (null !== d) {
                var e = this.data, f = d.ba;
                if (null !== e)if (f instanceof P) {
                    var h = null !== a ? a.data : null;
                    f.$A(e, f.ub(h))
                } else f instanceof Zf && (h = null !== a ? a.data : null, d.Od ? f.oi(e, f.ub(h)) : (null !== b && f.oi(b.data, void 0), f.oi(h, f.ub(null !== this.Cg ? this.Cg.data : null))))
            }
            e =
                this.ed;
            f = this.NE;
            null !== f && (h = !0, null !== d && (h = d.Ua, d.Ua = !0), f(this, c, e), null !== d && (d.Ua = h));
            null !== a && (this.Cg !== a && tr(a, this, e), Gr(this), this.J(Hm));
            this.h("fromNode", b, a);
            ln(this)
        }
    });
    w.defineProperty(W, {Jg: "fromPortId"}, function () {
        return this.Nh
    }, function (a) {
        var b = this.Nh;
        if (b !== a) {
            var c = this.ed;
            null !== c && sr(this.W, c);
            Fr(this);
            this.Nh = a;
            var d = this.ed;
            null !== d && sr(this.W, d);
            var e = this.g;
            if (null !== e) {
                var f = this.data, h = e.ba;
                null !== f && h instanceof P && h.aB(f, a)
            }
            c !== d && (this.Gi = null, this.Xb(), f = this.NE, null !== f && (h = !0, null !== e && (h = e.Ua, e.Ua = !0), f(this, c, d), null !== e && (e.Ua = h)));
            Gr(this);
            this.h("fromPortId", b, a)
        }
    });
    w.u(W, {ed: "fromPort"}, function () {
        var a = this.mg;
        return null === a ? null : a.Ol(this.Nh)
    });
    w.defineProperty(W, {NE: "fromPortChanged"}, function () {
        return this.xr
    }, function (a) {
        var b = this.xr;
        b !== a && (null !== a && w.j(a, "function", W, "fromPortChanged"), this.xr = a, this.h("fromPortChanged", b, a))
    });
    w.defineProperty(W, {$: "toNode"}, function () {
        return this.Cg
    }, function (a) {
        var b = this.Cg;
        if (b !== a) {
            var c = this.Sd;
            null !== b && (this.mg !== b && ur(b, this, c), Fr(this), this.J(Qm));
            this.Cg = a;
            null !== a && this.td(a.isVisible());
            this.Gi = null;
            this.Xb();
            var d = this.g;
            if (null !== d) {
                var e = this.data, f = d.ba;
                if (null !== e)if (f instanceof P) {
                    var h = null !== a ? a.data : null;
                    f.fB(e, f.ub(h))
                } else f instanceof Zf && (h = null !== a ? a.data : null, d.Od ? (null !== b && f.oi(b.data, void 0), f.oi(h, f.ub(null !== this.mg ? this.mg.data : null))) : f.oi(e, f.ub(h)))
            }
            e =
                this.Sd;
            f = this.nG;
            null !== f && (h = !0, null !== d && (h = d.Ua, d.Ua = !0), f(this, c, e), null !== d && (d.Ua = h));
            null !== a && (this.mg !== a && tr(a, this, e), Gr(this), this.J(Hm));
            this.h("toNode", b, a);
            ln(this)
        }
    });
    w.defineProperty(W, {Eh: "toPortId"}, function () {
        return this.hi
    }, function (a) {
        var b = this.hi;
        if (b !== a) {
            var c = this.Sd;
            null !== c && sr(this.$, c);
            Fr(this);
            this.hi = a;
            var d = this.Sd;
            null !== d && sr(this.$, d);
            var e = this.g;
            if (null !== e) {
                var f = this.data, h = e.ba;
                null !== f && h instanceof P && h.gB(f, a)
            }
            c !== d && (this.Gi = null, this.Xb(), f = this.nG, null !== f && (h = !0, null !== e && (h = e.Ua, e.Ua = !0), f(this, c, d), null !== e && (e.Ua = h)));
            Gr(this);
            this.h("toPortId", b, a)
        }
    });
    w.u(W, {Sd: "toPort"}, function () {
        var a = this.Cg;
        return null === a ? null : a.Ol(this.hi)
    });
    w.defineProperty(W, {nG: "toPortChanged"}, function () {
        return this.nt
    }, function (a) {
        var b = this.nt;
        b !== a && (null !== a && w.j(a, "function", W, "toPortChanged"), this.nt = a, this.h("toPortChanged", b, a))
    });
    w.defineProperty(W, {Ab: "fromSpot"}, function () {
        return null !== this.V ? this.V.Rj : oc
    }, function (a) {
        this.Kd();
        var b = this.V.Rj;
        b.L(a) || (a = a.S(), this.V.Rj = a, this.h("fromSpot", b, a), this.Xb())
    });
    w.defineProperty(W, {Rl: "fromEndSegmentLength"}, function () {
        return null !== this.V ? this.V.Pj : NaN
    }, function (a) {
        this.Kd();
        var b = this.V.Pj;
        b !== a && (0 > a && w.Ea(a, ">= 0", W, "fromEndSegmentLength"), this.V.Pj = a, this.h("fromEndSegmentLength", b, a), this.Xb())
    });
    w.defineProperty(W, {St: "fromEndSegmentDirection"}, function () {
        return null !== this.V ? this.V.Oj : nr
    }, function (a) {
        this.Kd();
        var b = this.V.Oj;
        b !== a && (w.Gt("Link.fromEndSegmentDirection", "2.0"), this.V.Oj = a, this.h("fromEndSegmentDirection", b, a), this.Xb())
    });
    w.defineProperty(W, {Tt: "fromShortLength"}, function () {
        return null !== this.V ? this.V.Qj : NaN
    }, function (a) {
        this.Kd();
        var b = this.V.Qj;
        b !== a && (this.V.Qj = a, this.h("fromShortLength", b, a), this.Xb())
    });
    w.defineProperty(W, {Bb: "toSpot"}, function () {
        return null !== this.V ? this.V.ok : oc
    }, function (a) {
        this.Kd();
        var b = this.V.ok;
        b.L(a) || (a = a.S(), this.V.ok = a, this.h("toSpot", b, a), this.Xb())
    });
    w.defineProperty(W, {jm: "toEndSegmentLength"}, function () {
        return null !== this.V ? this.V.mk : NaN
    }, function (a) {
        this.Kd();
        var b = this.V.mk;
        b !== a && (0 > a && w.Ea(a, ">= 0", W, "toEndSegmentLength"), this.V.mk = a, this.h("toEndSegmentLength", b, a), this.Xb())
    });
    w.defineProperty(W, {Lu: "toEndSegmentDirection"}, function () {
        return null !== this.V ? this.V.lk : nr
    }, function (a) {
        this.Kd();
        var b = this.V.lk;
        b !== a && (w.Gt("Link.toEndSegmentDirection", "2.0"), this.V.lk = a, this.h("toEndSegmentDirection", b, a), this.Xb())
    });
    w.defineProperty(W, {Mu: "toShortLength"}, function () {
        return null !== this.V ? this.V.nk : NaN
    }, function (a) {
        this.Kd();
        var b = this.V.nk;
        b !== a && (this.V.nk = a, this.h("toShortLength", b, a), this.Xb())
    });
    function ln(a) {
        var b = a.W, c = a.$;
        null !== b ? null !== c ? Hr(a, b.MH(c)) : Hr(a, null) : Hr(a, null)
    }

    function Hr(a, b) {
        var c = a.Xk;
        if (c !== b) {
            null !== c && hr(c, a);
            a.Xk = b;
            null !== b && ir(b, a);
            var d = a.pE;
            if (null !== d) {
                var e = !0, f = a.g;
                null !== f && (e = f.Ua, f.Ua = !0);
                d(a, c, b);
                null !== f && (f.Ua = e)
            }
            !a.Zg || a.FD !== c && a.GD !== c || a.Xb()
        }
    }

    W.prototype.Vl = function () {
        var a = this.Ka;
        null !== a && this.W !== a && this.$ !== a && a.Tw && S.prototype.Vl.call(this)
    };
    W.prototype.getOtherNode = W.prototype.mA = function (a) {
        var b = this.W;
        return a === b ? this.$ : b
    };
    W.prototype.getOtherPort = function (a) {
        var b = this.ed;
        return a === b ? this.Sd : b
    };
    w.u(W, {VK: "isLabeledLink"}, function () {
        return null === this.rf ? !1 : 0 < this.rf.count
    });
    w.u(W, {Vf: "labelNodes"}, function () {
        return null === this.rf ? va : this.rf.i
    });
    function vr(a, b) {
        null === a.rf && (a.rf = new J(T));
        a.rf.add(b);
        a.I()
    }

    W.prototype.Wt = function (a) {
        S.prototype.Wt.call(this, a);
        Ir(this) && ej(this, this.Y);
        a || (a = this.mg, null !== a && tr(a, this, this.ed), a = this.Cg, null !== a && tr(a, this, this.Sd), Gr(this))
    };
    W.prototype.Xt = function (a) {
        S.prototype.Xt.call(this, a);
        Ir(this) && ej(this, this.Y);
        a || (a = this.mg, null !== a && ur(a, this, this.ed), a = this.Cg, null !== a && ur(a, this, this.Sd), Fr(this))
    };
    W.prototype.tn = function () {
        this.Zg = !0;
        if (null !== this.rf) {
            var a = this.g;
            if (null !== a)for (var b = this.rf.copy().i; b.next();)a.remove(b.value)
        }
        b = this.data;
        null !== b && (a = this.g, null !== a && (a = a.ba, a instanceof P ? a.Wx(b) : a instanceof Zf && a.oi(b, void 0)))
    };
    W.prototype.updateRelationshipsFromData = function () {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ba;
                if (c instanceof P) {
                    var d = c.Sl(a);
                    this.W = d = b.Ie(d);
                    d = c.Tl(a);
                    this.$ = d = b.Ie(d);
                    a = c.Ak(a);
                    if (0 < a.length || 0 < this.Vf.count) {
                        if (1 === a.length && 1 === this.Vf.count) {
                            var d = a[0], e = this.Vf.first();
                            if (c.ub(e.data) === d)return
                        }
                        var d = (new J).Hc(a), f = new J;
                        this.Vf.each(function (a) {
                            null !== a.data && (a = c.ub(a.data), void 0 !== a && f.add(a))
                        });
                        a = f.copy();
                        a.Vx(d);
                        d = d.copy();
                        d.Vx(f);
                        if (0 < a.count || 0 < d.count) {
                            var h =
                                this;
                            a.each(function (a) {
                                a = b.Ie(a);
                                null !== a && a.Lc === h && (a.Lc = null)
                            });
                            d.each(function (a) {
                                a = b.Ie(a);
                                null !== a && a.Lc !== h && (a.Lc = h)
                            })
                        }
                    }
                }
            }
        }
    };
    W.prototype.move = function (a) {
        var b = this.position, c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        c = a.x - c;
        b = a.y - b;
        S.prototype.move.call(this, a);
        this.am(c, b);
        for (a = this.Vf; a.next();) {
            var d = a.value, e = d.position;
            d.moveTo(e.x + c, e.y + b)
        }
    };
    w.defineProperty(W, {eJ: "relinkableFrom"}, function () {
        return 0 !== (this.Vb & 1)
    }, function (a) {
        var b = 0 !== (this.Vb & 1);
        b !== a && (this.Vb ^= 1, this.h("relinkableFrom", b, a), this.ce())
    });
    w.defineProperty(W, {fJ: "relinkableTo"}, function () {
        return 0 !== (this.Vb & 2)
    }, function (a) {
        var b = 0 !== (this.Vb & 2);
        b !== a && (this.Vb ^= 2, this.h("relinkableTo", b, a), this.ce())
    });
    W.prototype.canRelinkFrom = function () {
        if (!this.eJ)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.hn)return !1;
        a = a.g;
        return null === a || a.hn ? !0 : !1
    };
    W.prototype.canRelinkTo = function () {
        if (!this.fJ)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.hn)return !1;
        a = a.g;
        return null === a || a.hn ? !0 : !1
    };
    w.defineProperty(W, {Au: "resegmentable"}, function () {
        return 0 !== (this.Vb & 4)
    }, function (a) {
        var b = 0 !== (this.Vb & 4);
        b !== a && (this.Vb ^= 4, this.h("resegmentable", b, a), this.ce())
    });
    w.defineProperty(W, {Kc: "isTreeLink"}, function () {
        return 0 !== (this.Vb & 8)
    }, function (a) {
        var b = 0 !== (this.Vb & 8);
        b !== a && (this.Vb ^= 8, this.h("isTreeLink", b, a), null !== this.W && xn(this.W), null !== this.$ && xn(this.$))
    });
    w.u(W, {path: "path"}, function () {
        var a = this.Hd();
        return a instanceof X ? a : null
    });
    w.u(W, {Un: "routeBounds"}, function () {
        this.ao();
        var a = new A;
        var b = Infinity, c = Infinity, d = this.qa;
        if (0 === d)a.l(NaN, NaN, 0, 0); else {
            if (1 === d)d = this.m(0), b = Math.min(d.x, b), c = Math.min(d.y, c), a.l(d.x, d.y, 0, 0); else if (2 === d) {
                var e = this.m(0), f = this.m(1), b = Math.min(e.x, f.x), c = Math.min(e.y, f.y);
                a.l(e.x, e.y, 0, 0);
                a.ri(f)
            } else if (this.computeCurve() === sj && 3 <= d && !this.ic)if (e = this.m(0), b = e.x, c = e.y, a.l(b, c, 0, 0), 3 === d)d = this.m(1), b = Math.min(d.x, b), c = Math.min(d.y, c), f = this.m(2), b = Math.min(f.x, b), c = Math.min(f.y, c), Zd(e.x,
                e.y, d.x, d.y, d.x, d.y, f.x, f.y, .5, a); else for (var h = 3; h < d; h += 3) {
                var k = this.m(h - 2);
                h + 3 >= d && (h = d - 1);
                var l = this.m(h - 1), f = this.m(h);
                Zd(e.x, e.y, k.x, k.y, l.x, l.y, f.x, f.y, .5, a);
                b = Math.min(f.x, b);
                c = Math.min(f.y, c);
                e = f
            } else for (e = this.m(0), f = this.m(1), b = Math.min(e.x, f.x), c = Math.min(e.y, f.y), a.l(e.x, e.y, 0, 0), a.ri(f), h = 2; h < d; h++)e = this.m(h), b = Math.min(e.x, b), c = Math.min(e.y, c), a.ri(e);
            this.Cz.l(b - a.x, c - a.y)
        }
        return this.mw = a
    });
    w.u(W, {wF: "midPoint"}, function () {
        this.ao();
        return this.computeMidPoint(new z)
    });
    W.prototype.computeMidPoint = function (a) {
        var b = this.qa;
        if (0 === b)return a.assign(Cd), a;
        if (1 === b)return a.assign(this.m(0)), a;
        if (2 === b) {
            var c = this.m(0), d = this.m(1);
            a.l((c.x + d.x) / 2, (c.y + d.y) / 2);
            return a
        }
        if (this.computeCurve() === sj && 3 <= b && !this.ic) {
            if (3 === b)return this.m(1);
            var c = (b - 1) / 3 | 0, e = 3 * (c / 2 | 0);
            if (1 === c % 2) {
                var c = this.m(e), d = this.m(e + 1), f = this.m(e + 2), e = this.m(e + 3), b = d.x, h = d.y, d = f.x, k = f.y, f = (b + d) / 2, l = (h + k) / 2, h = ((c.y + h) / 2 + l) / 2, k = (l + (k + e.y) / 2) / 2;
                a.x = (((c.x + b) / 2 + f) / 2 + (f + (d + e.x) / 2) / 2) / 2;
                a.y = (h + k) / 2
            } else a.assign(this.m(e));
            return a
        }
        e = 0;
        f = w.lb();
        for (h = 0; h < b - 1; h++)c = 0, c = this.m(h), d = this.m(h + 1), Xa(c.x, d.x) ? (c = d.y - c.y, 0 > c && (c = -c)) : Xa(c.y, d.y) ? (c = d.x - c.x, 0 > c && (c = -c)) : c = Math.sqrt(c.uf(d)), f.push(c), e += c;
        for (d = h = c = 0; c < e / 2 && h < b;) {
            d = f[h];
            if (c + d > e / 2)break;
            c += d;
            h++
        }
        w.va(f);
        b = this.m(h);
        f = this.m(h + 1);
        b.x === f.x ? b.y > f.y ? a.l(b.x, b.y - (e / 2 - c)) : a.l(b.x, b.y + (e / 2 - c)) : b.y === f.y ? b.x > f.x ? a.l(b.x - (e / 2 - c), b.y) : a.l(b.x + (e / 2 - c), b.y) : (c = (e / 2 - c) / d, a.l(b.x + c * (f.x - b.x), b.y + c * (f.y - b.y)));
        return a
    };
    w.u(W, {vF: "midAngle"}, function () {
        this.ao();
        return this.computeMidAngle()
    });
    W.prototype.computeMidAngle = function () {
        var a = this.qa;
        if (2 > a)return NaN;
        if (this.computeCurve() === sj && 4 <= a && !this.ic) {
            var b = (a - 1) / 3 | 0, c = 3 * (b / 2 | 0);
            if (1 === b % 2) {
                var c = Math.floor(c), b = this.m(c), d = this.m(c + 1), a = this.m(c + 2), c = this.m(c + 3), e = d.x, d = d.y, f = a.x, a = a.y, h = (e + f) / 2, k = (d + a) / 2;
                return Oa(((b.x + e) / 2 + h) / 2, ((b.y + d) / 2 + k) / 2, (h + (f + c.x) / 2) / 2, (k + (a + c.y) / 2) / 2)
            }
            if (0 < c && c + 1 < a)return b = this.m(c - 1), d = this.m(c + 1), b.yc(d)
        }
        c = a / 2 | 0;
        if (0 === a % 2)return b = this.m(c - 1), d = this.m(c), 4 <= a && b.Ic(d) && (b = this.m(c - 2), a = this.m(c + 1),
            c = b.uf(d), e = d.uf(a), !(c > e + 10)) ? e > c + 10 ? d.yc(a) : b.yc(a) : b.yc(d);
        b = this.m(c - 1);
        d = this.m(c);
        a = this.m(c + 1);
        c = b.uf(d);
        e = d.uf(a);
        return c > e + 10 ? b.yc(d) : e > c + 10 ? d.yc(a) : b.yc(a)
    };
    w.defineProperty(W, {points: "points"}, function () {
        return this.ad
    }, function (a) {
        var b = this.ad;
        if (b !== a) {
            var c = null;
            if (Array.isArray(a)) {
                var d = 0 === a.length % 2;
                if (d)for (var e = 0; e < a.length; e++)if ("number" !== typeof a[e] || isNaN(a[e])) {
                    d = !1;
                    break
                }
                if (d)for (c = new I(z), d = 0; d < a.length / 2; d++) {
                    var f = (new z(a[2 * d], a[2 * d + 1])).freeze();
                    c.add(f)
                } else {
                    e = !0;
                    for (d = 0; d < a.length; d++) {
                        var h = a[d];
                        if (!w.Qa(f) || "number" !== typeof h.x || isNaN(h.x) || "number" !== typeof h.y || isNaN(h.y)) {
                            e = !1;
                            break
                        }
                    }
                    if (e)for (c = new I(z), d = 0; d < a.length; d++)f =
                        a[d], c.add((new z(f.x, f.y)).freeze()); else w.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: " + a)
                }
            } else if (a instanceof I)for (c = a.copy(), a = c.i; a.next();)a.value.freeze(); else w.k("Link.points value is not an instance of List or Array: " + a);
            c.freeze();
            this.ad = c;
            this.Ke();
            this.I();
            Jr(this);
            a = this.g;
            null !== a && (a.Fn || a.oa.fb || a.Hx.add(this), a.Pa.oc && (this.lp = c));
            this.h("points", b, c)
        }
    });
    w.u(W, {qa: "pointsCount"}, function () {
        return this.ad.count
    });
    W.prototype.getPoint = W.prototype.m = function (a) {
        return this.ad.n[a]
    };
    W.prototype.setPoint = W.prototype.Tg = function (a, b) {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.fg(a, b)
    };
    W.prototype.setPointAt = W.prototype.ea = function (a, b, c) {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.fg(a, new z(b, c))
    };
    W.prototype.insertPoint = function (a, b) {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.Ld(a, b)
    };
    W.prototype.insertPointAt = W.prototype.w = function (a, b, c) {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.Ld(a, new z(b, c))
    };
    W.prototype.addPoint = W.prototype.ii = function (a) {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.add(a)
    };
    W.prototype.addPointAt = W.prototype.Bl = function (a, b) {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.add(new z(a, b))
    };
    W.prototype.removePoint = W.prototype.NF = function (a) {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.Xc(a)
    };
    W.prototype.clearPoints = W.prototype.Jp = function () {
        null === this.Ue && w.k("Call Link.startRoute before modifying the points of the route.");
        this.ad.clear()
    };
    W.prototype.movePoints = W.prototype.am = function (a, b) {
        for (var c = new I(z), d = this.ad.i; d.next();) {
            var e = d.value;
            c.add((new z(e.x + a, e.y + b)).freeze())
        }
        c.freeze();
        d = this.ad;
        this.ad = c;
        this.I();
        Jr(this);
        e = this.g;
        null !== e && e.Pa.oc && (this.lp = c);
        this.h("points", d, c)
    };
    W.prototype.startRoute = W.prototype.fm = function () {
        null === this.Ue && (this.Ue = this.ad, this.ad = this.ad.copy())
    };
    W.prototype.commitRoute = W.prototype.ij = function () {
        if (null !== this.Ue) {
            for (var a = this.Ue, b = this.ad, c = Infinity, d = Infinity, e = a.n, f = e.length, h = 0; h < f; h++)var k = e[h], c = Math.min(k.x, c), d = Math.min(k.y, d);
            for (var l = Infinity, m = Infinity, n = b.n, p = n.length, h = 0; h < p; h++)k = n[h], l = Math.min(k.x, l), m = Math.min(k.y, m), k.freeze();
            b.freeze();
            if (p === f)for (h = 0; h < p; h++) {
                if (f = e[h], k = n[h], f.x - c !== k.x - l || f.y - d !== k.y - m) {
                    this.I();
                    this.Ke();
                    break
                }
            } else this.I(), this.Ke();
            this.Ue = null;
            c = this.g;
            null !== c && c.Pa.oc && (this.lp = b);
            Jr(this);
            this.h("points", a, b)
        }
    };
    W.prototype.rollbackRoute = W.prototype.lJ = function () {
        null !== this.Ue && (this.ad = this.Ue, this.Ue = null)
    };
    function Jr(a) {
        0 === a.ad.count ? a.Zg = !1 : (a.Zg = !0, a.Op = a.m(0), a.Pp = a.m(a.qa - 1), Kr(a, !1))
    }

    W.prototype.invalidateRoute = W.prototype.Xb = function () {
        if (!this.Dj) {
            var a = this.g;
            a && (a.Hx.contains(this) || a.oa.fb || a.Pa.vI && !a.Pa.kf) || (a = this.path, null !== a && (this.Zg = !1, this.I(), a.I()))
        }
    };
    w.defineProperty(W, {Zg: null}, function () {
        return 0 !== (this.Vb & 16)
    }, function (a) {
        0 !== (this.Vb & 16) !== a && (this.Vb ^= 16)
    });
    w.defineProperty(W, {Dj: "suspendsRouting"}, function () {
        return 0 !== (this.Vb & 32)
    }, function (a) {
        0 !== (this.Vb & 32) !== a && (this.Vb ^= 32)
    });
    w.defineProperty(W, {Tz: null}, function () {
        return 0 !== (this.Vb & 64)
    }, function (a) {
        0 !== (this.Vb & 64) !== a && (this.Vb ^= 64)
    });
    w.defineProperty(W, {Op: "defaultFromPoint"}, function () {
        return this.iC
    }, function (a) {
        this.iC = a.copy()
    });
    w.defineProperty(W, {Pp: "defaultToPoint"}, function () {
        return this.oC
    }, function (a) {
        this.oC = a.copy()
    });
    W.prototype.updateRoute = W.prototype.ao = function () {
        if (!this.Zg && !this.Tz) {
            var a = !0;
            try {
                this.Tz = !0, this.fm(), a = this.computePoints()
            } finally {
                this.Tz = !1, a ? this.ij() : this.lJ()
            }
        }
    };
    W.prototype.computePoints = function () {
        var a = this.g;
        if (null === a)return !1;
        var b = this.W, c = null;
        null === b ? (a.sl || (a.Ls = new X, a.Ls.Aa = nd, a.Ls.kb = 0, a.sl = new T, a.sl.add(a.Ls), a.sl.Ze()), this.Op && (a.sl.position = a.sl.location = this.Op, a.sl.Ze(), b = a.sl, c = a.Ls)) : c = this.ed;
        if (null !== c && !b.isVisible()) {
            var d = b.findVisibleNode();
            null !== d && d !== b ? (b = d, c = d.Ol("")) : b = d
        }
        this.FD = b;
        if (null === b || !b.location.H())return !1;
        for (; !(null === c || c.Y.H() && c.vj());)c = c.O;
        if (null === c)return !1;
        var e = this.$, f = null;
        null === e ? (a.tl || (a.Ms =
            new X, a.Ms.Aa = nd, a.Ms.kb = 0, a.tl = new T, a.tl.add(a.Ms), a.tl.Ze()), this.Pp && (a.tl.position = a.tl.location = this.Pp, a.tl.Ze(), e = a.tl, f = a.Ms)) : f = this.Sd;
        null === f || e.isVisible() || (a = e.findVisibleNode(), null !== a && a !== e ? (e = a, f = a.Ol("")) : e = a);
        this.GD = e;
        if (null === e || !e.location.H())return !1;
        for (; !(null === f || f.Y.H() && f.vj());)f = f.O;
        if (null === f)return !1;
        var h = this.qa, d = Lr(this, c), a = Mr(this, f), k = d === sb, l = a === sb, m = c === f && null !== c, n = this.ic, p = this.Ye === sj;
        this.Gi = m && !n ? p = !0 : !1;
        var q = this.xt === dj || m;
        if (!n && !m && k &&
            l) {
            if (k = !1, !q && 3 <= h && (q = this.getLinkPoint(b, c, d, !0, !1, e, f), l = this.getLinkPoint(e, f, a, !1, !1, b, c), k = this.adjustPoints(0, q, h - 1, l)) && (q = this.getLinkPoint(b, c, d, !0, !1, e, f), l = this.getLinkPoint(e, f, a, !1, !1, b, c), this.adjustPoints(0, q, h - 1, l)), !k)if (this.Jp(), p) {
                var h = this.getLinkPoint(b, c, d, !0, !1, e, f), q = this.getLinkPoint(e, f, a, !1, !1, b, c), k = q.x - h.x, l = q.y - h.y, m = this.computeCurviness(), p = n = 0, r = h.x + k / 3, s = h.y + l / 3, u = r, t = s;
                K(l, 0) ? t = 0 < k ? t - m : t + m : (n = -k / l, p = Math.sqrt(m * m / (n * n + 1)), 0 > m && (p = -p), u = (0 > l ? -1 : 1) * p + r, t = n * (u -
                    r) + s);
                var r = h.x + 2 * k / 3, s = h.y + 2 * l / 3, x = r, v = s;
                K(l, 0) ? v = 0 < k ? v - m : v + m : (x = (0 > l ? -1 : 1) * p + r, v = n * (x - r) + s);
                this.Jp();
                this.ii(h);
                this.Bl(u, t);
                this.Bl(x, v);
                this.ii(q);
                this.Tg(0, this.getLinkPoint(b, c, d, !0, !1, e, f));
                this.Tg(3, this.getLinkPoint(e, f, a, !1, !1, b, c))
            } else d = this.getLinkPoint(b, c, d, !0, !1, e, f), a = this.getLinkPoint(e, f, a, !1, !1, b, c), this.hasCurviness() ? (q = a.x - d.x, e = a.y - d.y, f = this.computeCurviness(), b = d.x + q / 2, c = d.y + e / 2, h = b, k = c, K(e, 0) ? k = 0 < q ? k - f : k + f : (q = -q / e, h = Math.sqrt(f * f / (q * q + 1)), 0 > f && (h = -h), h = (0 > e ? -1 : 1) * h + b,
                k = q * (h - b) + c), this.ii(d), this.Bl(h, k)) : this.ii(d), this.ii(a)
        } else {
            p = this.Dk;
            q && (n && p || m) && this.Jp();
            var B = m ? this.computeCurviness() : 0, p = this.getLinkPoint(b, c, d, !0, n, e, f), r = u = s = 0;
            if (n || !k || m)if (t = this.computeEndSegmentLength(b, c, d, !0), r = this.getLinkDirection(b, c, p, d, !0, n, e, f), m && (k || d.L(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (r -= n ? 90 : 30, 0 > B && (r -= 180)), 0 > r ? r += 360 : 360 <= r && (r -= 360), m && (t += Math.abs(B) * (n ? 1 : 2)), 0 === r ? s = t : 90 === r ? u = t : 180 === r ? s = -t : 270 === r ? u = -t : (s = t * Math.cos(r * Math.PI / 180), u = t * Math.sin(r * Math.PI /
                        180)), d.Nd() && m) {
                var y = c.Wa(Fb, w.K()), H = w.xb(y.x + 1E3 * s, y.y + 1E3 * u);
                this.getLinkPointFromPoint(b, c, y, H, !0, p);
                w.v(y);
                w.v(H)
            }
            var t = this.getLinkPoint(e, f, a, !1, n, b, c), E = v = x = 0;
            if (n || !l || m)y = this.computeEndSegmentLength(e, f, a, !1), E = this.getLinkDirection(e, f, t, a, !1, n, b, c), m && (l || d.L(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (E += n ? 0 : 30, 0 > B && (E += 180)), 0 > E ? E += 360 : 360 <= E && (E -= 360), m && (y += Math.abs(B) * (n ? 1 : 2)), 0 === E ? x = y : 90 === E ? v = y : 180 === E ? x = -y : 270 === E ? v = -y : (x = y * Math.cos(E * Math.PI / 180), v = y * Math.sin(E * Math.PI / 180)), a.Nd() &&
            m && (y = f.Wa(Fb, w.K()), H = w.xb(y.x + 1E3 * x, y.y + 1E3 * v), this.getLinkPointFromPoint(e, f, y, H, !1, t), w.v(y), w.v(H));
            a = p;
            if (n || !k || m)a = new z(p.x + s, p.y + u);
            d = t;
            if (n || !l || m)d = new z(t.x + x, t.y + v);
            !q && !n && k && 3 < h && this.adjustPoints(0, p, h - 2, d) ? this.Tg(h - 1, t) : !q && !n && l && 3 < h && this.adjustPoints(1, a, h - 1, t) ? this.Tg(0, p) : !q && (n ? 6 <= h : 4 < h) && this.adjustPoints(1, a, h - 2, d) ? (this.Tg(0, p), this.Tg(h - 1, t)) : (this.Jp(), this.ii(p), (n || !k || m) && this.ii(a), n && this.addOrthoPoints(a, r, d, E, b, e), (n || !l || m) && this.ii(d), this.ii(t))
        }
        return !0
    };
    function Nr(a, b) {
        Math.abs(b.x - a.x) > Math.abs(b.y - a.y) ? (b.x = b.x >= a.x ? a.x + 9E9 : a.x - 9E9, b.y = a.y) : (b.y = b.y >= a.y ? a.y + 9E9 : a.y - 9E9, b.x = a.x);
        return b
    }

    W.prototype.getLinkPointFromPoint = function (a, b, c, d, e, f) {
        void 0 === f && (f = new z);
        if (null === a || null === b)return f.assign(c), f;
        a.isVisible() || (e = a.findVisibleNode(), null !== e && e !== a && (b = e.port));
        var h = e = 0, k = 0, l = 0;
        a = null;
        e = b.O;
        null === e || e.Yg() || (e = e.O);
        if (null === e)e = d.x, h = d.y, k = c.x, l = c.y; else {
            a = e.ph;
            e = 1 / (a.m11 * a.m22 - a.m12 * a.m21);
            var k = a.m22 * e, l = -a.m12 * e, m = -a.m21 * e, n = a.m11 * e, p = e * (a.m21 * a.dy - a.m22 * a.dx), q = e * (a.m12 * a.dx - a.m11 * a.dy);
            e = d.x * k + d.y * m + p;
            h = d.x * l + d.y * n + q;
            k = c.x * k + c.y * m + p;
            l = c.x * l + c.y * n + q
        }
        b.zn(e, h, k, l,
            f);
        null !== a && f.transform(a);
        return f
    };
    function Or(a, b) {
        var c = b.Bs;
        null === c && (c = new Pr, c.port = b, c.Nc = b.U, b.Bs = c);
        return Qr(c, a)
    }

    W.prototype.getLinkPoint = function (a, b, c, d, e, f, h, k) {
        void 0 === k && (k = new z);
        if (c.fd())return b.Wa(c, k), k;
        if (c.sj()) {
            var l = Or(this, b);
            if (null !== l) {
                k.assign(l.fq);
                if (e && this.Zx === Er) {
                    var m = Or(this, h);
                    if (null !== m && l.rn < m.rn) {
                        var l = w.K(), m = w.K(), n = new A(b.Wa(vb, l), b.Wa(Kb, m)), p = this.computeSpot(!d);
                        a = this.getLinkPoint(f, h, p, !d, e, a, b, m);
                        (c.qj(Tb) || c.qj(Ub)) && a.y >= n.y && a.y <= n.y + n.height ? k.y = a.y : (c.qj(Sb) || c.qj(Vb)) && a.x >= n.x && a.x <= n.x + n.width && (k.x = a.x);
                        w.v(l);
                        w.v(m)
                    }
                }
                return k
            }
        }
        c = b.Wa(Fb, w.K());
        l = f = null;
        this.qa >
        (e ? 6 : 2) ? (l = d ? this.m(1) : this.m(this.qa - 2), e && (l = Nr(c, l.copy()))) : (f = w.K(), l = h.Wa(Fb, f), e && (l = Nr(c, l)), w.v(f));
        this.getLinkPointFromPoint(a, b, c, l, d, k);
        w.v(c);
        return k
    };
    W.prototype.getLinkDirection = function (a, b, c, d, e, f, h, k) {
        a:if (d.fd())c = d.x > d.y ? d.x > 1 - d.y ? 0 : d.x < 1 - d.y ? 270 : 315 : d.x < d.y ? d.x > 1 - d.y ? 90 : d.x < 1 - d.y ? 180 : 135 : .5 > d.x ? 225 : .5 < d.x ? 45 : 0; else {
            if (d.sj()) {
                var l = Or(this, b);
                if (null !== l)switch (l.xe) {
                    case w.jd:
                        c = 270;
                        break a;
                    case w.Qc:
                        c = 180;
                        break a;
                    default:
                    case w.Zc:
                        c = 0;
                        break a;
                    case w.Yc:
                        c = 90;
                        break a
                }
            }
            var l = b.Wa(Fb, w.K()), m = null, n = null;
            this.qa > (f ? 6 : 2) ? (n = e ? this.m(1) : this.m(this.qa - 2), n = f ? Nr(l, n.copy()) : c) : (m = w.K(), n = k.Wa(Fb, m), w.v(m));
            c = 0;
            c = Math.abs(n.x - l.x) > Math.abs(n.y -
                l.y) ? n.x >= l.x ? 0 : 180 : n.y >= l.y ? 90 : 270;
            w.v(l)
        }
        d.Nd() && h.mi(a) && (c += 180, 360 <= c && (c -= 360));
        a = nr;
        a = e ? this.St : this.Lu;
        a === nr && (a = e ? b.St : b.Lu);
        switch (a) {
            case or:
                b = b.xn();
                c += b;
                360 <= c && (c -= 360);
                break;
            case nr:
            case uo:
                b = b.xn();
                if (0 === b)break;
                45 <= b && 135 > b ? c += 90 : 135 <= b && 225 > b ? c += 180 : 225 <= b && 315 > b && (c += 270);
                360 <= c && (c -= 360)
        }
        return c
    };
    W.prototype.computeEndSegmentLength = function (a, b, c, d) {
        if (null !== b && c.sj() && (a = Or(this, b), null !== a))return a.bx;
        a = NaN;
        a = d ? this.Rl : this.jm;
        null !== b && isNaN(a) && (a = d ? b.Rl : b.jm);
        isNaN(a) && (a = 10);
        return a
    };
    W.prototype.computeSpot = function (a) {
        return a ? Lr(this, this.ed) : Mr(this, this.Sd)
    };
    function Lr(a, b) {
        if (null === b)return Fb;
        var c = a.Ab;
        c.Uc() && null !== b && (c = b.Ab);
        return c === oc ? sb : c
    }

    function Mr(a, b) {
        if (null === b)return Fb;
        var c = a.Bb;
        c.Uc() && null !== b && (c = b.Bb);
        return c === oc ? sb : c
    }

    W.prototype.computeOtherPoint = function (a, b) {
        var c = b.Wa(Fb), d;
        d = b.Bs;
        d = null !== d ? Qr(d, this) : null;
        null !== d && (c = d.fq);
        return c
    };
    W.prototype.computeShortLength = function (a) {
        if (a) {
            if (a = this.Tt, isNaN(a)) {
                var b = this.ed;
                null !== b && (a = b.Tt)
            }
        } else a = this.Mu, isNaN(a) && (b = this.Sd, null !== b && (a = b.Mu));
        return isNaN(a) ? 0 : a
    };
    W.prototype.yk = function (a, b, c, d, e, f) {
        if (!1 === this.Sg)return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = f;
        void 0 === f && (h = w.Ef(), h.reset());
        h.multiply(this.transform);
        if (this.on(a, h))return Xp(this, b, c, e), void 0 === f && w.ue(h), !0;
        if (this.Kg(a, h)) {
            var k = !1;
            if (!this.En)for (var l = this.wa.n, m = l.length; m--;) {
                var n = l[m];
                if (n.visible || n === this.Xf) {
                    var p = n.Y, q = this.Ia;
                    if (!(p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height)) {
                        p = w.Ef();
                        p.set(h);
                        if (n instanceof C)k = n.yk(a, b, c, d, e, p); else if (this.path ===
                            n) {
                            if (n instanceof X) {
                                var k = n, r = a, s = d, q = p;
                                if (!1 === k.Sg)k = !1; else if (q.multiply(k.transform), s)b:{
                                    var u = r, t = q;
                                    if (k.on(u, t))k = !0; else {
                                        if (void 0 === t && (t = k.transform, u.vk(k.Y))) {
                                            k = !0;
                                            break b
                                        }
                                        var q = u.left, r = u.right, s = u.top, u = u.bottom, x = w.K(), v = w.K(), B = w.K(), y = w.Ef();
                                        y.set(t);
                                        y.yF(k.transform);
                                        y.qx();
                                        v.x = r;
                                        v.y = s;
                                        v.transform(y);
                                        x.x = q;
                                        x.y = s;
                                        x.transform(y);
                                        t = !1;
                                        iq(k, x, v, B) ? t = !0 : (x.x = r, x.y = u, x.transform(y), iq(k, x, v, B) ? t = !0 : (v.x = q, v.y = u, v.transform(y), iq(k, x, v, B) ? t = !0 : (x.x = q, x.y = s, x.transform(y), iq(k, x, v, B) &&
                                        (t = !0))));
                                        w.ue(y);
                                        w.v(x);
                                        w.v(v);
                                        w.v(B);
                                        k = t
                                    }
                                } else k = k.on(r, q)
                            }
                        } else k = Ao(n, a, d, p);
                        k && (null !== b && (n = b(n)), n && (null === c || c(n)) && (e instanceof J && e.add(n), e instanceof I && e.add(n)));
                        w.ue(p)
                    }
                }
            }
            void 0 === f && w.ue(h);
            return k || null !== this.background || null !== this.jn
        }
        void 0 === f && w.ue(h);
        return !1
    };
    w.u(W, {ic: "isOrthogonal"}, function () {
        return 2 === (this.Um.value & 2)
    });
    w.u(W, {Dk: "isAvoiding"}, function () {
        return 4 === (this.Um.value & 4)
    });
    W.prototype.computeCurve = function () {
        if (null === this.Gi) {
            var a = this.ed, b = this.ic;
            this.Gi = null !== a && a === this.Sd && !b
        }
        return this.Gi ? sj : this.Ye
    };
    W.prototype.computeCorner = function () {
        if (this.Ye === sj)return 0;
        var a = this.Yz;
        if (isNaN(a) || 0 > a)a = 10;
        return a
    };
    W.prototype.findMidLabel = function () {
        for (var a = this.path, b = this.wa.n, c = b.length, d = 0; d < c; d++) {
            var e = b[d];
            if (e !== a && !e.Uf && (-Infinity === e.Me || isNaN(e.Me)))return e
        }
        for (a = this.Vf; a.next();)if (b = a.value, -Infinity === b.Me || isNaN(b.Me))return b;
        return null
    };
    W.prototype.computeSpacing = function () {
        if (!this.isVisible())return 0;
        var a;
        a = Math.max(14, this.computeThickness());
        var b = this.ed, c = this.Sd;
        if (null !== b && null !== c) {
            var d = this.findMidLabel();
            if (null !== d) {
                var e = d.Ia, f = d.margin, h = isNaN(e.width) ? 30 : e.width * d.scale + f.left + f.right, e = isNaN(e.height) ? 14 : e.height * d.scale + f.top + f.bottom, d = d.rq;
                d === lq || d === Eq || d === Dq ? a = Math.max(a, e) : d === Pp || d === Qp || d === Np || d === Op ? a = Math.max(a, h) : (b = b.Wa(Fb).yc(c.Wa(Fb)) / 180 * Math.PI, a = Math.max(a, Math.abs(Math.sin(b) * h) + Math.abs(Math.cos(b) *
                        e) + 1));
                this.Ye === sj && (a *= 1.333)
            }
        }
        return a
    };
    W.prototype.arrangeBundledLinks = function (a, b) {
        if (b)for (var c = 0; c < a.length; c++)a[c].Xb()
    };
    W.prototype.computeCurviness = function () {
        var a = this.Xw;
        if (isNaN(a)) {
            var a = 16, b = this.ti;
            if (null !== b) {
                for (var c = w.lb(), d = 0, e = b.links, f = 0; f < e.length; f++) {
                    var h = e[f], h = h.computeSpacing();
                    c.push(h);
                    d += h
                }
                d = -d / 2;
                for (f = 0; f < e.length; f++) {
                    h = e[f];
                    if (h === this) {
                        a = d + c[f] / 2;
                        break
                    }
                    d += c[f]
                }
                b.iq === this.W && (a = -a);
                w.va(c)
            }
        }
        return a
    };
    W.prototype.computeThickness = function () {
        if (!this.isVisible())return 0;
        var a = this.path;
        return null !== a ? Math.max(a.kb, 1) : 1
    };
    W.prototype.hasCurviness = function () {
        return !isNaN(this.Xw) || null !== this.ti
    };
    W.prototype.adjustPoints = function (a, b, c, d) {
        var e = this.xt;
        if (this.ic) {
            if (e === Cr)return !1;
            e === Dr && (e = Br)
        }
        switch (e) {
            case Cr:
                var f = this.m(a), h = this.m(c);
                if (!f.Ic(b) || !h.Ic(d)) {
                    var e = f.x, f = f.y, k = h.x - e, l = h.y - f, m = Math.sqrt(k * k + l * l);
                    if (!Xa(m, 0)) {
                        var n = 0;
                        Xa(k, 0) ? n = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (n = Math.atan(l / Math.abs(k)), 0 > k && (n = Math.PI - n));
                        var h = b.x, p = b.y, l = d.x - h, q = d.y - p, r = Math.sqrt(l * l + q * q), k = 0;
                        Xa(l, 0) ? k = 0 > q ? -Math.PI / 2 : Math.PI / 2 : (k = Math.atan(q / Math.abs(l)), 0 > l && (k = Math.PI - k));
                        m = r / m;
                        n = k - n;
                        this.Tg(a, b);
                        for (a +=
                                 1; a < c; a++)b = this.m(a), k = b.x - e, l = b.y - f, b = Math.sqrt(k * k + l * l), Xa(b, 0) || (q = 0, Xa(k, 0) ? q = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (q = Math.atan(l / Math.abs(k)), 0 > k && (q = Math.PI - q)), k = q + n, b *= m, this.ea(a, h + b * Math.cos(k), p + b * Math.sin(k)));
                        this.Tg(c, d)
                    }
                }
                return !0;
            case Dr:
                f = this.m(a);
                p = this.m(c);
                if (!f.Ic(b) || !p.Ic(d)) {
                    var e = f.x, f = f.y, h = p.x, p = p.y, m = (h - e) * (h - e) + (p - f) * (p - f), k = b.x, n = b.y, l = d.x, q = d.y, r = 0, s = 1;
                    0 !== l - k ? (r = (q - n) / (l - k), s = Math.sqrt(1 + 1 / (r * r))) : r = 9E9;
                    this.Tg(a, b);
                    for (a += 1; a < c; a++) {
                        b = this.m(a);
                        var u = b.x, t = b.y, x = .5;
                        0 !== m && (x =
                            ((e - u) * (e - h) + (f - t) * (f - p)) / m);
                        var v = e + x * (h - e), B = f + x * (p - f);
                        b = Math.sqrt((u - v) * (u - v) + (t - B) * (t - B));
                        t < r * (u - v) + B && (b = -b);
                        0 < r && (b = -b);
                        u = k + x * (l - k);
                        x = n + x * (q - n);
                        0 !== r ? (b = u + b / s, this.ea(a, b, x - (b - u) / r)) : this.ea(a, u, x + b)
                    }
                    this.Tg(c, d)
                }
                return !0;
            case Br:
                a:{
                    if (this.ic) {
                        h = this.m(a);
                        p = this.m(a + 1);
                        e = this.m(a + 2);
                        m = p.x;
                        k = p.y;
                        K(h.y, p.y) ? K(p.x, e.x) ? k = b.y : K(p.y, e.y) && (m = b.x) : K(h.x, p.x) && (K(p.y, e.y) ? m = b.x : K(p.x, e.x) && (k = b.y));
                        f = this.g;
                        if (this.Dk && null !== f && (h = zn(f, !0, this.Ka, null), !h.$l(Math.min(m, e.x), Math.min(k, e.y), Math.abs(m -
                                e.x), Math.abs(k - e.y)))) {
                            c = !1;
                            break a
                        }
                        this.ea(a + 1, m, k);
                        h = this.m(c);
                        p = this.m(c - 1);
                        e = this.m(c - 2);
                        m = p.x;
                        k = p.y;
                        K(h.y, p.y) ? K(p.x, e.x) ? k = d.y : K(p.y, e.y) && (m = d.x) : K(h.x, p.x) && (K(p.y, e.y) ? m = d.x : K(p.x, e.x) && (k = d.y));
                        if (this.Dk && null !== f && (h = zn(f, !0, this.Ka, null), !h.$l(Math.min(m, e.x), Math.min(k, e.y), Math.abs(m - e.x), Math.abs(k - e.y)))) {
                            c = !1;
                            break a
                        }
                        this.ea(c - 1, m, k)
                    }
                    this.Tg(a, b);
                    this.Tg(c, d);
                    c = !0
                }
                return c;
            default:
                return !1
        }
    };
    W.prototype.addOrthoPoints = function (a, b, c, d, e, f) {
        b = -45 <= b && 45 > b ? 0 : 45 <= b && 135 > b ? 90 : 135 <= b && 225 > b ? 180 : 270;
        d = -45 <= d && 45 > d ? 0 : 45 <= d && 135 > d ? 90 : 135 <= d && 225 > d ? 180 : 270;
        var h = e.Y.copy(), k = f.Y.copy();
        if (h.H() && k.H()) {
            h.Sf(8, 8);
            k.Sf(8, 8);
            h.ri(a);
            k.ri(c);
            var l, m;
            if (0 === b)if (c.x > a.x || 270 === d && c.y < a.y && k.right > a.x || 90 === d && c.y > a.y && k.right > a.x)l = new z(c.x, a.y), m = new z(c.x, (a.y + c.y) / 2), 180 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x < k.left ? this.computeMidOrthoPosition(a.x,
                k.left, !1) : a.x < k.right && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.right, m.x = l.x, m.y = c.y) : 0 === d && a.x < k.left && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y); else {
                l = new z(a.x, c.y);
                m = new z((a.x + c.x) / 2, c.y);
                if (180 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom)180 === d && (k.Ha(a) || h.Ha(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (180 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y,
                    k.bottom), !0) : c.y > a.y && (180 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)), m.x = c.x, m.y = l.y;
                if (l.y > h.top && l.y < h.bottom)if (c.x >= h.left && c.x <= a.x || a.x <= k.right && a.x >= c.x) {
                    if (90 === d || 270 === d)l = new z(Math.max((a.x + c.x) / 2, a.x), a.y), m = new z(l.x, c.y)
                } else l.y = 270 === d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 0 === d ? h.top : Math.min(h.top, k.top)) : Math.max(c.y, 0 === d ? h.bottom : Math.max(h.bottom, k.bottom)), m.x = c.x, m.y = l.y
            } else if (180 === b)if (c.x < a.x || 270 === d && c.y < a.y && k.left < a.x ||
                90 === d && c.y > a.y && k.left < a.x)l = new z(c.x, a.y), m = new z(c.x, (a.y + c.y) / 2), 0 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x > k.right ? this.computeMidOrthoPosition(a.x, k.right, !1) : a.x > k.left && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.left, m.x = l.x, m.y = c.y) : 180 === d && a.x > k.right && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y); else {
                l = new z(a.x, c.y);
                m = new z((a.x +
                    c.x) / 2, c.y);
                if (0 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom)0 === d && (k.Ha(a) || h.Ha(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (0 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y, k.bottom), !0) : c.y > a.y && (0 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)), m.x = c.x, m.y = l.y;
                if (l.y > h.top && l.y < h.bottom)if (c.x <= h.right && c.x >= a.x || a.x >= k.left && a.x <= c.x) {
                    if (90 === d || 270 === d)l = new z(Math.min((a.x + c.x) / 2, a.x), a.y), m = new z(l.x, c.y)
                } else l.y = 270 ===
                d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 180 === d ? h.top : Math.min(h.top, k.top)) : Math.max(c.y, 180 === d ? h.bottom : Math.max(h.bottom, k.bottom)), m.x = c.x, m.y = l.y
            } else if (90 === b)if (c.y > a.y || 180 === d && c.x < a.x && k.bottom > a.y || 0 === d && c.x > a.x && k.bottom > a.y)l = new z(a.x, c.y), m = new z((a.x + c.x) / 2, c.y), 270 === d ? (l.y = this.computeMidOrthoPosition(a.y, c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x > a.x ? (l.y = a.y < k.top ? this.computeMidOrthoPosition(a.y, k.top, !0) : a.y < k.bottom && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ?
                this.computeMidOrthoPosition(a.y, c.y, !0) : k.bottom, m.x = c.x, m.y = l.y) : 90 === d && a.y < k.top && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x); else {
                l = new z(c.x, a.y);
                m = new z(c.x, (a.y + c.y) / 2);
                if (270 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right)270 === d && (k.Ha(a) || h.Ha(c)) ? l.x = this.computeMidOrthoPosition(a.x, c.x, !1) : c.x < a.x && (270 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (270 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right,
                    Math.min(c.x, k.left), !1)), m.x = l.x, m.y = c.y;
                if (l.x > h.left && l.x < h.right)if (c.y >= h.top && c.y <= a.y || a.y <= k.bottom && a.y >= c.y) {
                    if (0 === d || 180 === d)l = new z(a.x, Math.max((a.y + c.y) / 2, a.y)), m = new z(c.x, l.y)
                } else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 90 === d ? h.left : Math.min(h.left, k.left)) : Math.max(c.x, 90 === d ? h.right : Math.max(h.right, k.right)), m.x = l.x, m.y = c.y
            } else if (c.y < a.y || 180 === d && c.x < a.x && k.top < a.y || 0 === d && c.x > a.x && k.top < a.y)l = new z(a.x, c.y), m = new z((a.x + c.x) / 2, c.y), 90 === d ? (l.y = this.computeMidOrthoPosition(a.y,
                c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x >= a.x ? (l.y = a.y > k.bottom ? this.computeMidOrthoPosition(a.y, k.bottom, !0) : a.y > k.top && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ? this.computeMidOrthoPosition(a.y, c.y, !0) : k.top, m.x = c.x, m.y = l.y) : 270 === d && a.y > k.bottom && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x); else {
                l = new z(c.x, a.y);
                m = new z(c.x, (a.y + c.y) / 2);
                if (90 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right)90 === d && (k.Ha(a) || h.Ha(c)) ? l.x = this.computeMidOrthoPosition(a.x,
                    c.x, !1) : c.x < a.x && (90 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (90 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right, Math.min(c.x, k.left), !1)), m.x = l.x, m.y = c.y;
                if (l.x > h.left && l.x < h.right)if (c.y <= h.bottom && c.y >= a.y || a.y >= k.top && a.y <= c.y) {
                    if (0 === d || 180 === d)l = new z(a.x, Math.min((a.y + c.y) / 2, a.y)), m = new z(c.x, l.y)
                } else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 270 === d ? h.left : Math.min(h.left, k.left)) : Math.max(c.x, 270 === d ? h.right : Math.max(h.right,
                    k.right)), m.x = l.x, m.y = c.y
            }
            var n = l, p = m;
            if (this.Dk) {
                var q = this.g, r;
                (r = null === q) || (q.Pa.kf ? r = !1 : (r = q.Za, r = r instanceof hh ? !r.Aw || r.nI : !0), r = !r);
                if (r || h.Ha(c) && !f.mi(e) || k.Ha(a) && !e.mi(f) || e === f || this.layer.Jc)a = !1; else if (e = zn(q, !0, this.Ka, null), e.$l(Math.min(a.x, n.x), Math.min(a.y, n.y), Math.abs(a.x - n.x), Math.abs(a.y - n.y)) && e.$l(Math.min(n.x, p.x), Math.min(n.y, p.y), Math.abs(n.x - p.x), Math.abs(n.y - p.y)) && e.$l(Math.min(p.x, c.x), Math.min(p.y, c.y), Math.abs(p.x - c.x), Math.abs(p.y - c.y)))a = !1; else if (h = h.copy().Gh(k),
                        h.Sf(2 * e.Ip, 2 * e.Gp), Rr(e, a, b, c, d, h), k = Sr(e, c.x, c.y), e.abort || 999999 !== k || (Cn(e), k = e.fG, h.Sf(e.Ip * k, e.Gp * k), Rr(e, a, b, c, d, h), k = Sr(e, c.x, c.y)), e.abort || 999999 !== k || (Cn(e), k = e.rF, h.Sf(e.Ip * k, e.Gp * k), Rr(e, a, b, c, d, h), k = Sr(e, c.x, c.y)), !e.abort && 999999 === k && e.wG && (Cn(e), Rr(e, a, b, c, d, e.jb), k = Sr(e, c.x, c.y)), !e.abort && 999999 > k && 0 !== Sr(e, c.x, c.y)) {
                    Tr(this, e, c.x, c.y, d, !0);
                    d = this.m(2);
                    if (4 > this.qa)0 === b || 180 === b ? (d.x = a.x, d.y = c.y) : (d.x = c.x, d.y = a.y), this.ea(2, d.x, d.y), this.w(3, d.x, d.y); else if (c = this.m(3), 0 === b ||
                        180 === b)K(d.x, c.x) ? (b = 0 === b ? Math.max(d.x, a.x) : Math.min(d.x, a.x), this.ea(2, b, a.y), this.ea(3, b, c.y)) : K(d.y, c.y) ? (Math.abs(a.y - d.y) <= e.Gp / 2 && (this.ea(2, d.x, a.y), this.ea(3, c.x, a.y)), this.w(2, d.x, a.y)) : this.ea(2, a.x, d.y); else if (90 === b || 270 === b)K(d.y, c.y) ? (b = 90 === b ? Math.max(d.y, a.y) : Math.min(d.y, a.y), this.ea(2, a.x, b), this.ea(3, c.x, b)) : K(d.x, c.x) ? (Math.abs(a.x - d.x) <= e.Ip / 2 && (this.ea(2, a.x, d.y), this.ea(3, a.x, c.y)), this.w(2, a.x, d.y)) : this.ea(2, d.x, a.y);
                    a = !0
                } else a = !1
            } else a = !1;
            a || (this.ii(l), this.ii(m))
        }
    };
    W.prototype.computeMidOrthoPosition = function (a, b) {
        if (this.hasCurviness()) {
            var c = this.computeCurviness();
            return (a + b) / 2 + c
        }
        return (a + b) / 2
    };
    function Eh(a) {
        if (null === a.g || !a.Dk)return !1;
        var b = a.points.n, c = b.length;
        if (4 > c)return !1;
        a = zn(a.g, !0, a.Ka, null);
        for (var d = 1; d < c - 2; d++) {
            var e = b[d], f = b[d + 1];
            if (!a.$l(Math.min(e.x, f.x), Math.min(e.y, f.y), Math.abs(e.x - f.x), Math.abs(e.y - f.y)))return !0
        }
        return !1
    }

    function Tr(a, b, c, d, e, f) {
        var h = b.Ip, k = b.Gp, l = Sr(b, c, d), m = c, n = d;
        for (0 === e ? m += h : 90 === e ? n += k : 180 === e ? m -= h : n -= k; 1 < l && Sr(b, m, n) === l - 1;)c = m, d = n, 0 === e ? m += h : 90 === e ? n += k : 180 === e ? m -= h : n -= k, l -= 1;
        if (f) {
            if (1 < l)if (180 === e || 0 === e)c = Math.floor(c / h) * h + h / 2; else if (90 === e || 270 === e)d = Math.floor(d / k) * k + k / 2
        } else c = Math.floor(c / h) * h + h / 2, d = Math.floor(d / k) * k + k / 2;
        1 < l && (f = e, m = c, n = d, 0 === e ? (f = 90, n += k) : 90 === e ? (f = 180, m -= h) : 180 === e ? (f = 270, n -= k) : 270 === e && (f = 0, m += h), Sr(b, m, n) === l - 1 ? Tr(a, b, m, n, f, !1) : (m = c, n = d, 0 === e ? (f = 270, n -= k) : 90 ===
        e ? (f = 0, m += h) : 180 === e ? (f = 90, n += k) : 270 === e && (f = 180, m -= h), Sr(b, m, n) === l - 1 && Tr(a, b, m, n, f, !1)));
        a.Bl(c, d)
    }

    W.prototype.findClosestSegment = function (a) {
        var b = a.x;
        a = a.y;
        for (var c = this.m(0), d = this.m(1), e = Ma(b, a, c.x, c.y, d.x, d.y), f = 0, h = 1; h < this.qa - 1; h++) {
            var c = this.m(h + 1), k = Ma(b, a, d.x, d.y, c.x, c.y), d = c;
            k < e && (f = h, e = k)
        }
        return f
    };
    W.prototype.Ke = function () {
        this.gb = null
    };
    w.u(W, {vf: "geometry"}, function () {
        null === this.gb && (this.ao(), this.gb = this.makeGeometry());
        return this.gb
    });
    W.prototype.lu = function (a) {
        if (!a) {
            if (!1 === this.Zg)return;
            a = this.Hd();
            if (null !== this.gb && (null === a || null !== a.vf))return
        }
        this.gb = this.makeGeometry();
        a = this.path;
        if (null !== a) {
            a.gb = this.gb;
            for (var b = this.wa.n, c = b.length, d = 0; d < c; d++) {
                var e = b[d];
                e !== a && e.Uf && e instanceof X && (e.gb = this.gb)
            }
        }
    };
    W.prototype.makeGeometry = function () {
        var a = this.qa;
        if (2 > a)return new Fe(Je);
        var b = !1, c = this.g;
        null !== c && Ir(this) && c.Zk.contains(this) && null !== this.mw && (b = !0);
        var d = c = 0, e = this.m(0).copy(), f = e.copy(), c = this.ad.n, h = this.computeCurve();
        if (h === sj && 3 <= a && !Xa(this.wq, 0))if (3 === a)var k = this.m(1), c = Math.min(e.x, k.x), d = Math.min(e.y, k.y), k = this.m(2), c = Math.min(c, k.x), d = Math.min(d, k.y); else {
            if (this.ic)for (k = 0; k < a; k++)d = c[k], f.x = Math.min(d.x, f.x), f.y = Math.min(d.y, f.y); else for (k = 3; k < a; k += 3)k + 3 >= a && (k = a - 1), c = this.m(k),
                f.x = Math.min(c.x, f.x), f.y = Math.min(c.y, f.y);
            c = f.x;
            d = f.y
        } else {
            for (k = 0; k < a; k++)d = c[k], f.x = Math.min(d.x, f.x), f.y = Math.min(d.y, f.y);
            c = f.x;
            d = f.y
        }
        c -= this.Cz.x;
        d -= this.Cz.y;
        e.x -= c;
        e.y -= d;
        if (2 !== a || Ir(this)) {
            var l = w.s();
            0 !== this.computeShortLength(!0) && (e = Ur(this, e, !0, f));
            M(l, e.x, e.y, !1, !1);
            if (h === sj && 3 <= a && !Xa(this.wq, 0))if (3 === a)k = this.m(1), a = k.x - c, b = k.y - d, k = this.m(2).copy(), k.x -= c, k.y -= d, 0 !== this.computeShortLength(!1) && (k = Ur(this, k, !1, f)), N(l, a, b, a, b, k.x, k.y); else if (this.ic) {
                for (var f = new z(c, d), e = this.m(1).copy(),
                         h = new z(c, d), a = new z(c, d), b = this.m(0), m = null, n = this.wq / 3, k = 1; k < this.qa - 1; k++) {
                    var m = this.m(k), p = b, q = m, r = this.m(Vr(this, m, k, !1));
                    if (!Xa(p.x, q.x) || !Xa(q.x, r.x))if (!Xa(p.y, q.y) || !Xa(q.y, r.y)) {
                        var s = n, u = h, t = a;
                        isNaN(s) && (s = this.wq / 3);
                        var x = p.x, p = p.y, v = q.x, q = q.y, B = r.x, r = r.y, y = s * Wr(x, p, v, q), s = s * Wr(v, q, B, r);
                        Xa(p, q) && Xa(v, B) && (v > x ? r > q ? (u.x = v - y, u.y = q - y, t.x = v + s, t.y = q + s) : (u.x = v - y, u.y = q + y, t.x = v + s, t.y = q - s) : r > q ? (u.x = v + y, u.y = q - y, t.x = v - s, t.y = q + s) : (u.x = v + y, u.y = q + y, t.x = v - s, t.y = q - s));
                        Xa(x, v) && Xa(q, r) && (q > p ? (B > v ? (u.x =
                            v - y, u.y = q - y, t.x = v + s) : (u.x = v + y, u.y = q - y, t.x = v - s), t.y = q + s) : (B > v ? (u.x = v - y, u.y = q + y, t.x = v + s) : (u.x = v + y, u.y = q + y, t.x = v - s), t.y = q - s));
                        if (Xa(x, v) && Xa(v, B) || Xa(p, q) && Xa(q, r))x = .5 * (x + B), p = .5 * (p + r), u.x = x, u.y = p, t.x = x, t.y = p;
                        1 === k ? (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y)) : 2 === k && Xa(b.x, this.m(0).x) && Xa(b.y, this.m(0).y) && (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y));
                        N(l, e.x - c, e.y - d, h.x - c, h.y - d, m.x - c, m.y - d);
                        f.set(h);
                        e.set(a);
                        b = m
                    }
                }
                k = b.x;
                b = b.y;
                f = this.m(this.qa - 1);
                0 !== this.computeShortLength(!1) && (f = Ur(this, f.copy(), !1, bd));
                k = .5 * (k + f.x);
                b = .5 * (b + f.y);
                N(l, a.x - c, a.y - d, k - c, b - d, f.x - c, f.y - d)
            } else for (k = 3; k < a; k += 3)b = this.m(k - 2), k + 3 >= a && (k = a - 1), f = this.m(k - 1), e = this.m(k), k === a - 1 && 0 !== this.computeShortLength(!1) && (e = Ur(this, e.copy(), !1, bd)), N(l, b.x - c, b.y - d, f.x - c, f.y - d, e.x - c, e.y - d); else {
                f = w.K();
                f.assign(this.m(0));
                for (k = 1; k < a;) {
                    k = Vr(this, f, k, 1 < k);
                    u = this.m(k);
                    if (k >= a - 1) {
                        f !== u && (0 !== this.computeShortLength(!1) && (u = Ur(this, u.copy(), !1, bd)), Xr(this, l, -c, -d, f, u, b));
                        break
                    }
                    k = Vr(this, u, k + 1, k < a - 3);
                    e = l;
                    h = -c;
                    m = -d;
                    n = f;
                    t = this.m(k);
                    x = f;
                    p = b;
                    K(n.y, u.y) && K(u.x,
                        t.x) ? (s = this.computeCorner(), s = Math.min(s, Math.abs(u.x - n.x) / 2), s = v = Math.min(s, Math.abs(t.y - u.y) / 2), K(s, 0) ? (Xr(this, e, h, m, n, u, p), x.assign(u)) : (q = u.x, B = u.y, r = q, y = B, q = u.x > n.x ? u.x - s : u.x + s, y = t.y > u.y ? u.y + v : u.y - v, Xr(this, e, h, m, n, new z(q, B), p), Xe(e, u.x + h, u.y + m, r + h, y + m), x.l(r, y))) : K(n.x, u.x) && K(u.y, t.y) ? (s = this.computeCorner(), v = Math.min(s, Math.abs(u.y - n.y) / 2), v = s = Math.min(v, Math.abs(t.x - u.x) / 2), K(s, 0) ? (Xr(this, e, h, m, n, u, p), x.assign(u)) : (q = u.x, y = B = u.y, B = u.y > n.y ? u.y - v : u.y + v, r = t.x > u.x ? u.x + s : u.x - s, Xr(this, e,
                        h, m, n, new z(q, B), p), Xe(e, u.x + h, u.y + m, r + h, y + m), x.l(r, y))) : (Xr(this, e, h, m, n, u, p), x.assign(u))
                }
                w.v(f)
            }
            c = l.o;
            w.q(l)
        } else l = this.m(1).copy(), l.x -= c, l.y -= d, 0 !== this.computeShortLength(!0) && (e = Ur(this, e, !0, f)), 0 !== this.computeShortLength(!1) && (l = Ur(this, l, !1, f)), c = new Fe(Je), c.ia = e.x, c.ga = e.y, c.D = l.x, c.F = l.y;
        return c
    };
    function Wr(a, b, c, d) {
        a = c - a;
        if (isNaN(a) || Infinity === a || -Infinity === a)return NaN;
        0 > a && (a = -a);
        b = d - b;
        if (isNaN(b) || Infinity === b || -Infinity === b)return NaN;
        0 > b && (b = -b);
        return Xa(a, 0) ? b : Xa(b, 0) ? a : Math.sqrt(a * a + b * b)
    }

    function Ur(a, b, c, d) {
        var e = a.qa;
        if (2 > e)return b;
        if (c) {
            var f = a.m(1);
            c = f.x - d.x;
            d = f.y - d.y;
            f = Wr(b.x, b.y, c, d);
            if (0 === f)return b;
            e = 2 === e ? .5 * f : f;
            a = a.computeShortLength(!0);
            a > e && (a = e);
            c = a * (c - b.x) / f;
            a = a * (d - b.y) / f;
            b.x += c;
            b.y += a
        } else {
            f = a.m(e - 2);
            c = f.x - d.x;
            d = f.y - d.y;
            f = Wr(b.x, b.y, c, d);
            if (0 === f)return b;
            e = 2 === e ? .5 * f : f;
            a = a.computeShortLength(!1);
            a > e && (a = e);
            c = a * (b.x - c) / f;
            a = a * (b.y - d) / f;
            b.x -= c;
            b.y -= a
        }
        return b
    }

    function Vr(a, b, c, d) {
        for (var e = a.qa, f = b; Xa(b.x, f.x) && Xa(b.y, f.y);) {
            if (c >= e)return e - 1;
            f = a.m(c++)
        }
        if (!Xa(b.x, f.x) && !Xa(b.y, f.y))return c - 1;
        for (var h = f; Xa(b.x, f.x) && Xa(f.x, h.x) && (!d || (b.y >= f.y ? f.y >= h.y : f.y <= h.y)) || Xa(b.y, f.y) && Xa(f.y, h.y) && (!d || (b.x >= f.x ? f.x >= h.x : f.x <= h.x));) {
            if (c >= e)return e - 1;
            h = a.m(c++)
        }
        return c - 2
    }

    function Xr(a, b, c, d, e, f, h) {
        if (!h && Ir(a)) {
            h = [];
            var k = 0;
            a.isVisible() && (k = Yr(a, e, f, h));
            var l = e.x, l = e.y;
            if (0 < k)if (K(e.y, f.y))if (e.x < f.x)for (var m = 0; m < k;) {
                var n = Math.max(e.x, Math.min(h[m++] - 5, f.x - 10));
                b.lineTo(n + c, f.y + d);
                for (var l = n + c, p = Math.min(n + 10, f.x); m < k;) {
                    var q = h[m];
                    if (q < p + 10)m++, p = Math.min(q + 5, f.x); else break
                }
                q = (n + p) / 2 + c;
                q = f.y - 10 + d;
                n = p + c;
                p = f.y + d;
                a.Ye === cj ? M(b, n, p, !1, !1) : N(b, l, q, n, q, n, p)
            } else for (m = k - 1; 0 <= m;) {
                n = Math.min(e.x, Math.max(h[m--] + 5, f.x + 10));
                b.lineTo(n + c, f.y + d);
                l = n + c;
                for (p = Math.max(n - 10,
                    f.x); 0 <= m;)if (q = h[m], q > p - 10)m--, p = Math.max(q - 5, f.x); else break;
                q = f.y - 10 + d;
                n = p + c;
                p = f.y + d;
                a.Ye === cj ? M(b, n, p, !1, !1) : N(b, l, q, n, q, n, p)
            } else if (K(e.x, f.x))if (e.y < f.y)for (m = 0; m < k;) {
                n = Math.max(e.y, Math.min(h[m++] - 5, f.y - 10));
                b.lineTo(f.x + c, n + d);
                l = n + d;
                for (p = Math.min(n + 10, f.y); m < k;)if (q = h[m], q < p + 10)m++, p = Math.min(q + 5, f.y); else break;
                q = f.x - 10 + c;
                n = f.x + c;
                p += d;
                a.Ye === cj ? M(b, n, p, !1, !1) : N(b, q, l, q, p, n, p)
            } else for (m = k - 1; 0 <= m;) {
                n = Math.min(e.y, Math.max(h[m--] + 5, f.y + 10));
                b.lineTo(f.x + c, n + d);
                l = n + d;
                for (p = Math.max(n - 10, f.y); 0 <=
                m;)if (q = h[m], q > p - 10)m--, p = Math.max(q - 5, f.y); else break;
                q = f.x - 10 + c;
                n = f.x + c;
                p += d;
                a.Ye === cj ? M(b, n, p, !1, !1) : N(b, q, l, q, p, n, p)
            }
        }
        b.lineTo(f.x + c, f.y + d)
    }

    function Yr(a, b, c, d) {
        var e = a.g;
        if (null === e || b.L(c))return 0;
        for (e = e.Ex; e.next();) {
            var f = e.value;
            if (null !== f && f.visible)for (var f = f.zb.n, h = f.length, k = 0; k < h; k++) {
                var l = f[k];
                if (l instanceof W) {
                    if (l === a)return 0 < d.length && d.sort(function (a, b) {
                        return a - b
                    }), d.length;
                    if (l.isVisible() && Ir(l)) {
                        var m = l.Un;
                        m.H() && a.Un.Kg(m) && !a.usesSamePort(l) && (m = l.path, null !== m && m.vj() && Zr(b, c, d, l))
                    }
                }
            }
        }
        0 < d.length && d.sort(function (a, b) {
            return a - b
        });
        return d.length
    }

    function Zr(a, b, c, d) {
        for (var e = K(a.y, b.y), f = d.qa, h = d.m(0), k = w.K(), l = 1; l < f; l++) {
            var m = d.m(l);
            if (l < f - 1) {
                var n = d.m(l + 1);
                if (h.y === m.y && m.y === n.y) {
                    if (m.x > h.x && n.x > m.x || m.x < h.x && n.x < m.x)m = n, l++
                } else h.x === m.x && m.x === n.x && (m.y > h.y && n.y > m.y || m.y < h.y && n.y < m.y) && (m = n, l++)
            }
            a:{
                var n = k, p = a.x, q = a.y, r = b.x, s = b.y, u = h.x, h = h.y, t = m.x, x = m.y;
                if (!K(p, r)) {
                    if (K(q, s) && K(u, t) && Math.min(p, r) < u && Math.max(p, r) > u && Math.min(h, x) < q && Math.max(h, x) > q && !K(h, x)) {
                        n.x = u;
                        n.y = q;
                        n = !0;
                        break a
                    }
                } else if (!K(q, s) && K(h, x) && Math.min(q, s) < h && Math.max(q,
                        s) > h && Math.min(u, t) < p && Math.max(u, t) > p && !K(u, t)) {
                    n.x = p;
                    n.y = h;
                    n = !0;
                    break a
                }
                n.x = 0;
                n.y = 0;
                n = !1
            }
            n && (e ? c.push(k.x) : c.push(k.y));
            h = m
        }
        w.v(k)
    }

    w.u(W, {Ot: "firstPickIndex"}, function () {
        var a;
        2 >= this.qa ? a = 0 : ((a = this.ic) || (a = this.computeSpot(!0) !== sb), a = a ? 1 : 0);
        return a
    });
    w.u(W, {Cx: "lastPickIndex"}, function () {
        var a = this.qa;
        if (0 === a)a = 0; else if (2 >= a)a -= 1; else {
            var b;
            (b = this.ic) || (b = this.computeSpot(!1) !== sb);
            a = b ? a - 2 : a - 1
        }
        return a
    });
    function Ir(a) {
        a = a.Ye;
        return a === bj || a === cj
    }

    function Kr(a, b) {
        if (b || Ir(a)) {
            var c = a.g;
            null === c || c.Zk.contains(a) || null === a.mw || c.Zk.add(a, a.mw)
        }
    }

    function ej(a, b) {
        var c = a.layer;
        if (null !== c && c.visible && !c.Jc) {
            var d = c.g;
            if (null !== d)for (var e = !1, d = d.Ex; d.next();) {
                var f = d.value;
                if (f.visible)if (f === c)for (var e = !0, h = !1, f = f.zb.n, k = f.length, l = 0; l < k; l++) {
                    var m = f[l];
                    m instanceof W && (m === a ? h = !0 : h && $r(a, m, b))
                } else if (e)for (f = f.zb.n, k = f.length, l = 0; l < k; l++)m = f[l], m instanceof W && $r(a, m, b)
            }
        }
    }

    function $r(a, b, c) {
        if (null !== b && null !== b.gb && Ir(b)) {
            var d = b.Un;
            d.H() && (a.Un.Kg(d) || c.Kg(d)) && (a.usesSamePort(b) || b.Ke())
        }
    }

    W.prototype.usesSamePort = function (a) {
        var b = this.qa, c = a.qa;
        if (0 < b && 0 < c) {
            var d = this.m(0), e = a.m(0);
            if (d.Ic(e))return !0;
            b = this.m(b - 1);
            a = a.m(c - 1);
            if (b.Ic(a) || d.Ic(a) || b.Ic(e))return !0
        } else if (this.W === a.W || this.$ === a.$ || this.W === a.$ || this.$ === a.W)return !0;
        return !1
    };
    W.prototype.isVisible = function () {
        if (!S.prototype.isVisible.call(this))return !1;
        var a = this.Ka, b = !0, c = this.g;
        null !== c && (b = c.Od);
        var d = this.W;
        if (null !== d) {
            if (this.Kc && b && !d.gd)return !1;
            if (d === a)return !0;
            for (c = d; null !== c;) {
                if (c.Lc === this)return !0;
                c = c.Ka
            }
            c = d.findVisibleNode();
            if (null === c || c === a)return !1
        }
        d = this.$;
        if (null !== d) {
            if (this.Kc && !b && !d.gd)return !1;
            if (d === a)return !0;
            for (c = d; null !== c;) {
                if (c.Lc === this)return !0;
                c = c.Ka
            }
            b = d.findVisibleNode();
            if (null === b || b === a)return !1
        }
        return !0
    };
    W.prototype.td = function (a) {
        S.prototype.td.call(this, a);
        null !== this.ti && this.ti.aq();
        if (null !== this.rf)for (var b = this.rf.i; b.next();)b.value.td(a)
    };
    w.defineProperty(W, {xt: "adjusting"}, function () {
        return this.Gq
    }, function (a) {
        var b = this.Gq;
        b !== a && (this.Gq = a, this.h("adjusting", b, a))
    });
    w.defineProperty(W, {Yz: "corner"}, function () {
        return this.ar
    }, function (a) {
        var b = this.ar;
        b !== a && (this.ar = a, this.Ke(), this.h("corner", b, a))
    });
    w.defineProperty(W, {Ye: "curve"}, function () {
        return this.dr
    }, function (a) {
        var b = this.dr;
        b !== a && (this.dr = a, this.Xb(), this.Ke(), Kr(this, b === cj || b === bj || a === cj || a === bj), this.h("curve", b, a))
    });
    w.defineProperty(W, {Xw: "curviness"}, function () {
        return this.er
    }, function (a) {
        var b = this.er;
        b !== a && (this.er = a, this.Xb(), this.Ke(), this.h("curviness", b, a))
    });
    w.defineProperty(W, {Zx: "routing"}, function () {
        return this.Um
    }, function (a) {
        var b = this.Um;
        b !== a && (this.Um = a, this.Gi = null, this.Xb(), Kr(this, 2 === (b.value & 2) || 2 === (a.value & 2)), this.h("routing", b, a))
    });
    w.defineProperty(W, {wq: "smoothness"}, function () {
        return this.at
    }, function (a) {
        var b = this.at;
        b !== a && (this.at = a, this.Ke(), this.h("smoothness", b, a))
    });
    function Gr(a) {
        var b = a.mg;
        if (null !== b) {
            var c = a.Cg;
            if (null !== c) {
                var d = a.Nh;
                a = a.hi;
                for (var e = null, f = null, h = b.nc.n, k = h.length, l = 0; l < k; l++) {
                    var m = h[l];
                    if (m.mg === b && m.Nh === d && m.Cg === c && m.hi === a || m.mg === c && m.Nh === a && m.Cg === b && m.hi === d)null === f ? f = m : (null === e && (e = [], e.push(f)), e.push(m))
                }
                if (null !== e) {
                    f = rr(b, c, d, a);
                    null === f && (f = new ul, f.iq = b, f.Ox = d, f.qu = c, f.Px = a, qr(b, f), qr(c, f));
                    f.links = e;
                    for (l = 0; l < e.length; l++)m = e[l], m.ti = f;
                    f.aq()
                }
            }
        }
    }

    function Fr(a) {
        var b = a.ti;
        null !== b && (a.ti = null, a = b.links.indexOf(a), 0 <= a && (w.Fg(b.links, a), b.aq()))
    }

    function ul() {
        w.lc(this);
        this.Kv = !1;
        this.Px = this.qu = this.Ox = this.iq = null;
        this.links = []
    }

    ul.prototype.aq = function () {
        if (!this.Kv) {
            var a = this.links;
            0 < a.length && (a = a[0].g, null !== a && a.FC.add(this))
        }
        this.Kv = !0
    };
    ul.prototype.uB = function () {
        if (this.Kv) {
            this.Kv = !1;
            var a = this.links;
            if (0 < a.length) {
                var b = a[0], c = b.g;
                b.arrangeBundledLinks(a, null === c || c.Fn);
                1 === a.length && (b.ti = null, a.length = 0)
            }
            0 === a.length && (a = this.iq, null !== this && null !== a.Hh && a.Hh.remove(this), a = this.qu, null !== this && null !== a.Hh && a.Hh.remove(this))
        }
    };
    w.$d(ul, {iq: !0, Ox: !0, qu: !0, Px: !0, links: !0, spacing: !0});
    function An() {
        w.lc(this);
        this.iB = this.group = null;
        this.Yt = !0;
        this.abort = !1;
        this.wg = this.vg = 1;
        this.bs = this.as = -1;
        this.Ae = this.ze = 8;
        this.xd = null;
        this.wG = !1;
        this.fG = 22;
        this.rF = 111
    }

    w.$d(An, {group: !0, iB: !0, Yt: !0, abort: !0, wG: !0, fG: !0, rF: !0});
    An.prototype.initialize = function (a) {
        if (!(0 >= a.width || 0 >= a.height)) {
            var b = a.y, c = a.x + a.width, d = a.y + a.height;
            this.vg = Math.floor((a.x - this.ze) / this.ze) * this.ze;
            this.wg = Math.floor((b - this.Ae) / this.Ae) * this.Ae;
            this.as = Math.ceil((c + 2 * this.ze) / this.ze) * this.ze;
            this.bs = Math.ceil((d + 2 * this.Ae) / this.Ae) * this.Ae;
            a = 1 + (Math.ceil((this.as - this.vg) / this.ze) | 0);
            b = 1 + (Math.ceil((this.bs - this.wg) / this.Ae) | 0);
            if (null === this.xd || this.Ap < a - 1 || this.Bp < b - 1) {
                c = [];
                for (d = 0; d <= a; d++) {
                    for (var e = [], f = 0; f <= b; f++)e[f] = 0;
                    c[d] = e
                }
                this.xd =
                    c;
                this.Ap = a - 1;
                this.Bp = b - 1
            }
            if (null !== this.xd)for (a = 0; a <= this.Ap; a++)for (b = 0; b <= this.Bp; b++)this.xd[a][b] = 999999
        }
    };
    w.u(An, {jb: null}, function () {
        return new A(this.vg, this.wg, this.as - this.vg, this.bs - this.wg)
    });
    w.defineProperty(An, {Ip: null}, function () {
        return this.ze
    }, function (a) {
        0 < a && a !== this.ze && (this.ze = a, this.initialize(this.jb))
    });
    w.defineProperty(An, {Gp: null}, function () {
        return this.Ae
    }, function (a) {
        0 < a && a !== this.Ae && (this.Ae = a, this.initialize(this.jb))
    });
    function as(a, b, c) {
        return a.vg <= b && b <= a.as && a.wg <= c && c <= a.bs
    }

    function Sr(a, b, c) {
        if (!as(a, b, c))return 0;
        b -= a.vg;
        b /= a.ze;
        c -= a.wg;
        c /= a.Ae;
        return a.xd[b | 0][c | 0]
    }

    function Dn(a, b, c) {
        as(a, b, c) && (b -= a.vg, b /= a.ze, c -= a.wg, c /= a.Ae, a.xd[b | 0][c | 0] = 0)
    }

    function Cn(a) {
        if (null !== a.xd)for (var b = 0; b <= a.Ap; b++)for (var c = 0; c <= a.Bp; c++)1 <= a.xd[b][c] && (a.xd[b][c] |= 999999)
    }

    An.prototype.$l = function (a, b, c, d) {
        if (a > this.as || a + c < this.vg || b > this.bs || b + d < this.wg)return !0;
        a = (a - this.vg) / this.ze | 0;
        b = (b - this.wg) / this.Ae | 0;
        c = Math.max(0, c) / this.ze + 1 | 0;
        var e = Math.max(0, d) / this.Ae + 1 | 0;
        0 > a && (c += a, a = 0);
        0 > b && (e += b, b = 0);
        if (0 > c || 0 > e)return !0;
        d = Math.min(a + c - 1, this.Ap) | 0;
        for (c = Math.min(b + e - 1, this.Bp) | 0; a <= d; a++)for (e = b; e <= c; e++)if (0 === this.xd[a][e])return !1;
        return !0
    };
    function bs(a, b, c, d, e, f, h, k, l) {
        if (!(b < f || b > h || c < k || c > l)) {
            var m, n;
            m = b | 0;
            n = c | 0;
            var p = a.xd[m][n];
            if (1 <= p && 999999 > p)for (e ? n += d : m += d, p += 1; f <= m && m <= h && k <= n && n <= l && !(p >= a.xd[m][n]);)a.xd[m][n] = p, p += 1, e ? n += d : m += d;
            m = e ? n : m;
            if (e)if (0 < d)for (c += d; c < m; c += d)bs(a, b, c, 1, !e, f, h, k, l), bs(a, b, c, -1, !e, f, h, k, l); else for (c += d; c > m; c += d)bs(a, b, c, 1, !e, f, h, k, l), bs(a, b, c, -1, !e, f, h, k, l); else if (0 < d)for (b += d; b < m; b += d)bs(a, b, c, 1, !e, f, h, k, l), bs(a, b, c, -1, !e, f, h, k, l); else for (b += d; b > m; b += d)bs(a, b, c, 1, !e, f, h, k, l), bs(a, b, c, -1, !e, f, h,
                k, l)
        }
    }

    function cs(a, b, c, d, e, f, h, k, l) {
        b |= 0;
        c |= 0;
        var m = 0, n = 1;
        for (a.xd[b][c] = n; 0 === m && b > f && b < h && c > k && c < l;)n += 1, a.xd[b][c] = n, e ? c += d : b += d, m = a.xd[b][c]
    }

    function ds(a, b, c, d, e, f, h, k, l) {
        b |= 0;
        c |= 0;
        var m = 0;
        for (a.xd[b][c] = 999999; 0 === m && b > f && b < h && c > k && c < l;)a.xd[b][c] = 999999, e ? c += d : b += d, m = a.xd[b][c]
    }

    function Rr(a, b, c, d, e, f) {
        if (null !== a.xd) {
            a.abort = !1;
            var h = b.x, k = b.y;
            if (as(a, h, k) && (h -= a.vg, h /= a.ze, k -= a.wg, k /= a.Ae, b = d.x, d = d.y, as(a, b, d)))if (b -= a.vg, b /= a.ze, d -= a.wg, d /= a.Ae, 1 >= Math.abs(h - b) && 1 >= Math.abs(k - d))a.abort = !0; else {
                var l = f.x, m = f.y, n = f.x + f.width, p = f.y + f.height, l = l - a.vg, l = l / a.ze, m = m - a.wg, m = m / a.Ae, n = n - a.vg, n = n / a.ze, p = p - a.wg, p = p / a.Ae;
                f = Math.max(0, Math.min(a.Ap, l | 0));
                n = Math.min(a.Ap, Math.max(0, n | 0));
                m = Math.max(0, Math.min(a.Bp, m | 0));
                p = Math.min(a.Bp, Math.max(0, p | 0));
                h |= 0;
                k |= 0;
                b |= 0;
                d |= 0;
                l = 90 === c ||
                    270 === c;
                cs(a, h, k, 0 === c || 90 === c ? 1 : -1, l, f, n, m, p);
                cs(a, h, k, 1, !l, f, n, m, p);
                cs(a, h, k, -1, !l, f, n, m, p);
                ds(a, b, d, 0 === e || 90 === e ? 1 : -1, 90 === e || 270 === e, f, n, m, p);
                ds(a, b, d, 1, !(90 === e || 270 === e), f, n, m, p);
                ds(a, b, d, -1, !(90 === e || 270 === e), f, n, m, p);
                a.abort || (bs(a, h, k, 1, !1, f, n, m, p), bs(a, h, k, -1, !1, f, n, m, p), bs(a, h, k, 1, !0, f, n, m, p), bs(a, h, k, -1, !0, f, n, m, p))
            }
        }
    }

    function Pr() {
        w.lc(this);
        this.port = this.Nc = null;
        this.ag = [];
        this.hq = !1
    }

    w.$d(Pr, {Nc: !0, port: !0, ag: !0, hq: !0});
    Pr.prototype.toString = function () {
        for (var a = this.ag, b = this.Nc.toString() + " " + a.length.toString() + ":", c = 0; c < a.length; c++) {
            var d = a[c];
            null !== d && (b += "\n  " + d.toString())
        }
        return b
    };
    function es(a, b, c, d) {
        b = b.offsetY;
        switch (b) {
            case w.Yc:
                return 90;
            case w.Qc:
                return 180;
            case w.jd:
                return 270;
            case w.Zc:
                return 0
        }
        switch (b) {
            case w.Yc | w.jd:
                return 180 < c ? 270 : 90;
            case w.Qc | w.Zc:
                return 90 < c && 270 >= c ? 180 : 0
        }
        a = 180 * Math.atan2(a.height, a.width) / Math.PI;
        switch (b) {
            case w.Qc | w.jd:
                return c > a && c <= 180 + a ? 180 : 270;
            case w.jd | w.Zc:
                return c > 180 - a && c <= 360 - a ? 270 : 0;
            case w.Zc | w.Yc:
                return c > a && c <= 180 + a ? 90 : 0;
            case w.Yc | w.Qc:
                return c > 180 - a && c <= 360 - a ? 180 : 90;
            case w.Qc | w.jd | w.Zc:
                return 90 < c && c <= 180 + a ? 180 : c > 180 + a && c <= 360 -
                a ? 270 : 0;
            case w.jd | w.Zc | w.Yc:
                return 180 < c && c <= 360 - a ? 270 : c > a && 180 >= c ? 90 : 0;
            case w.Zc | w.Yc | w.Qc:
                return c > a && c <= 180 - a ? 90 : c > 180 - a && 270 >= c ? 180 : 0;
            case w.Yc | w.Qc | w.jd:
                return c > 180 - a && c <= 180 + a ? 180 : c > 180 + a ? 270 : 90
        }
        d && b !== (w.Qc | w.jd | w.Zc | w.Yc) && (c -= 15, 0 > c && (c += 360));
        return c > a && c < 180 - a ? 90 : c >= 180 - a && c <= 180 + a ? 180 : c > 180 + a && c < 360 - a ? 270 : 0
    }

    Pr.prototype.aq = function () {
        this.ag.length = 0
    };
    function Qr(a, b) {
        var c = a.ag;
        if (0 === c.length) {
            a:if (!a.hq) {
                c = a.hq;
                a.hq = !0;
                var d, e = null, f = a.Nc, f = f instanceof U ? f : null;
                if (null === f || f.we)d = a.Nc.FE(a.port.Pd); else {
                    if (!f.Y.H()) {
                        a.hq = c;
                        break a
                    }
                    e = f;
                    d = e.EE()
                }
                var h = a.ag.length = 0, k = a.port.Wa(vb, w.K()), l = a.port.Wa(Kb, w.K()), f = w.Vg(k.x, k.y, 0, 0);
                f.ri(l);
                w.v(k);
                w.v(l);
                k = w.xb(f.x + f.width / 2, f.y + f.height / 2);
                for (d = d.i; d.next();)if (l = d.value, l.isVisible()) {
                    var m = l.ed === a.port || l.W.mi(e), n = l.computeSpot(m);
                    if (n.sj() && (m = m ? l.Sd : l.ed, null !== m)) {
                        var p = m.U;
                        if (null !== p) {
                            var m =
                                l.computeOtherPoint(p, m), p = k.yc(m), n = es(f, n, p, l.ic), q = 0;
                            0 === n ? (q = w.Zc, 180 < p && (p -= 360)) : q = 90 === n ? w.Yc : 180 === n ? w.Qc : w.jd;
                            n = a.ag[h];
                            void 0 === n ? (n = new fs(l, p, q), a.ag[h] = n) : (n.link = l, n.angle = p, n.xe = q);
                            n.Mx.set(m);
                            h++
                        }
                    }
                }
                w.v(k);
                a.ag.sort(Pr.prototype.XI);
                e = a.ag.length;
                k = -1;
                for (h = d = 0; h < e; h++)n = a.ag[h], void 0 !== n && (n.xe !== k && (k = n.xe, d = 0), n.Zp = d, d++);
                k = -1;
                d = 0;
                for (h = e - 1; 0 <= h; h--)n = a.ag[h], void 0 !== n && (n.xe !== k && (k = n.xe, d = n.Zp + 1), n.rn = d);
                h = a.ag;
                m = a.port;
                e = a.Nc.bJ;
                k = w.K();
                d = w.K();
                l = w.K();
                n = w.K();
                m.Wa(vb, k);
                m.Wa(Ab,
                    d);
                m.Wa(Kb, l);
                m.Wa(Ib, n);
                var r = q = p = m = 0;
                if (e === pr)for (var s = 0; s < h.length; s++) {
                    var u = h[s];
                    if (null !== u) {
                        var t = u.link.computeThickness();
                        switch (u.xe) {
                            case w.Yc:
                                q += t;
                                break;
                            case w.Qc:
                                r += t;
                                break;
                            case w.jd:
                                m += t;
                                break;
                            default:
                            case w.Zc:
                                p += t
                        }
                    }
                }
                for (var x = 0, v = 0, B = 1, s = 0; s < h.length; s++)if (u = h[s], null !== u) {
                    var y, H;
                    if (x !== u.xe) {
                        x = u.xe;
                        switch (x) {
                            case w.Yc:
                                y = l;
                                H = n;
                                break;
                            case w.Qc:
                                y = n;
                                H = k;
                                break;
                            case w.jd:
                                y = k;
                                H = d;
                                break;
                            default:
                            case w.Zc:
                                y = d, H = l
                        }
                        var E = H.x - y.x;
                        H = H.y - y.y;
                        switch (x) {
                            case w.Yc:
                                q > Math.abs(E) ? (B = Math.abs(E) /
                                    q, q = Math.abs(E)) : B = 1;
                                break;
                            case w.Qc:
                                r > Math.abs(H) ? (B = Math.abs(H) / r, r = Math.abs(H)) : B = 1;
                                break;
                            case w.jd:
                                m > Math.abs(E) ? (B = Math.abs(E) / m, m = Math.abs(E)) : B = 1;
                                break;
                            default:
                            case w.Zc:
                                p > Math.abs(H) ? (B = Math.abs(H) / p, p = Math.abs(H)) : B = 1
                        }
                        v = 0
                    }
                    var V = u.fq;
                    if (e === pr) {
                        t = u.link.computeThickness();
                        t *= B;
                        V.set(y);
                        switch (x) {
                            case w.Yc:
                                V.x = y.x + E / 2 + q / 2 - v - t / 2;
                                break;
                            case w.Qc:
                                V.y = y.y + H / 2 + r / 2 - v - t / 2;
                                break;
                            case w.jd:
                                V.x = y.x + E / 2 - m / 2 + v + t / 2;
                                break;
                            default:
                            case w.Zc:
                                V.y = y.y + H / 2 - p / 2 + v + t / 2
                        }
                        v += t
                    } else t = .5, e === mr && (t = (u.Zp + 1) / (u.rn + 1)),
                        V.x = y.x + E * t, V.y = y.y + H * t
                }
                w.v(k);
                w.v(d);
                w.v(l);
                w.v(n);
                y = a.ag;
                for (E = 0; E < y.length; E++)H = y[E], null !== H && (H.bx = a.computeEndSegmentLength(H));
                a.hq = c;
                w.Gb(f)
            }
            c = a.ag
        }
        for (f = 0; f < c.length; f++)if (y = c[f], null !== y && y.link === b)return y;
        return null
    }

    Pr.prototype.XI = function (a, b) {
        return a === b ? 0 : null === a ? -1 : null === b ? 1 : a.xe < b.xe ? -1 : a.xe > b.xe ? 1 : a.angle < b.angle ? -1 : a.angle > b.angle ? 1 : 0
    };
    Pr.prototype.computeEndSegmentLength = function (a) {
        var b = a.link, c = b.computeEndSegmentLength(this.Nc, this.port, sb, b.ed === this.port), d = a.Zp;
        if (0 > d)return c;
        var e = a.rn;
        if (1 >= e || !b.ic)return c;
        var b = a.Mx, f = a.fq;
        if (a.xe === w.Qc || a.xe === w.Yc)d = e - 1 - d;
        return ((a = a.xe === w.Qc || a.xe === w.Zc) ? b.y < f.y : b.x < f.x) ? c + 8 * d : (a ? b.y === f.y : b.x === f.x) ? c : c + 8 * (e - 1 - d)
    };
    function fs(a, b, c) {
        this.link = a;
        this.angle = b;
        this.xe = c;
        this.Mx = new z;
        this.rn = this.Zp = 0;
        this.fq = new z;
        this.bx = 0
    }

    w.$d(fs, {link: !0, angle: !0, xe: !0, Mx: !0, Zp: !0, rn: !0, fq: !0, bx: !0});
    fs.prototype.toString = function () {
        return this.link.toString() + " " + this.angle.toString() + " " + this.xe.toString() + ":" + this.Zp.toString() + "/" + this.rn.toString() + " " + this.fq.toString() + " " + this.bx.toString() + " " + this.Mx.toString()
    };
    function to() {
        this.ok = this.Rj = oc;
        this.mk = this.Pj = NaN;
        this.lk = this.Oj = nr;
        this.nk = this.Qj = NaN;
        this.lt = this.vr = null;
        this.mt = this.wr = Infinity
    }

    to.prototype.copy = function () {
        var a = new to;
        a.Rj = this.Rj.S();
        a.ok = this.ok.S();
        a.Pj = this.Pj;
        a.mk = this.mk;
        a.Oj = this.Oj;
        a.lk = this.lk;
        a.Qj = this.Qj;
        a.nk = this.nk;
        a.vr = this.vr;
        a.lt = this.lt;
        a.wr = this.wr;
        a.mt = this.mt;
        return a
    };
    function U(a) {
        T.call(this, a);
        this.xa |= 4608;
        this.ds = new J(S);
        this.bp = new J(U);
        this.Kb = this.et = this.ol = this.es = this.cs = null;
        this.ie = new pg;
        this.ie.group = this
    }

    w.La(U, T);
    w.fa("Group", U);
    U.prototype.cloneProtected = function (a) {
        T.prototype.cloneProtected.call(this, a);
        this.xa &= -32769;
        a.cs = this.cs;
        a.es = this.es;
        a.ol = this.ol;
        a.et = this.et;
        var b = a.Kt(function (a) {
            return a instanceof Hj
        });
        a.Kb = b instanceof Hj ? b : null;
        null !== this.ie ? (a.ie = this.ie.copy(), a.ie.group = a) : (null !== a.ie && (a.ie.group = null), a.ie = null)
    };
    U.prototype.ki = function (a) {
        T.prototype.ki.call(this, a);
        var b = a.Vp();
        for (a = a.Mc; a.next();) {
            var c = a.value;
            c.I();
            c.J(8);
            c.Ct();
            if (c instanceof T)c.Tf(b); else if (c instanceof W)for (c = c.Vf; c.next();)c.value.Tf(b)
        }
    };
    U.prototype.Tn = function (a, b, c, d, e, f, h) {
        if (a === Of && "elements" === b)if (e instanceof Hj) {
            var k = e;
            null === this.Kb ? this.Kb = k : this.Kb !== k && w.k("Cannot insert a second Placeholder into the visual tree of a Group.")
        } else e instanceof C && (k = e.Kt(function (a) {
            return a instanceof Hj
        }), k instanceof Hj && (null === this.Kb ? this.Kb = k : this.Kb !== k && w.k("Cannot insert a second Placeholder into the visual tree of a Group."))); else a === Pf && "elements" === b && null !== this.Kb && (d === this.Kb ? this.Kb = null : d instanceof C && this.Kb.Xl(d) &&
        (this.Kb = null));
        T.prototype.Tn.call(this, a, b, c, d, e, f, h)
    };
    U.prototype.hj = function (a, b, c, d) {
        this.nl = this.Kb;
        C.prototype.hj.call(this, a, b, c, d)
    };
    U.prototype.Yl = function () {
        if (!T.prototype.Yl.call(this))return !1;
        for (var a = this.Mc; a.next();) {
            var b = a.value;
            if (b instanceof T) {
                if (b.isVisible() && zm(b))return !1
            } else if (b instanceof W && b.isVisible() && zm(b) && b.W !== this && b.$ !== this)return !1
        }
        return !0
    };
    w.u(U, {placeholder: "placeholder"}, function () {
        return this.Kb
    });
    w.defineProperty(U, {sH: "computesBoundsAfterDrag"}, function () {
        return 0 !== (this.xa & 2048)
    }, function (a) {
        var b = 0 !== (this.xa & 2048);
        b !== a && (w.j(a, "boolean", U, "computesBoundsAfterDrag"), this.xa ^= 2048, this.h("computesBoundsAfterDrag", b, a))
    });
    w.defineProperty(U, {Tw: "computesBoundsIncludingLinks"}, function () {
        return 0 !== (this.xa & 4096)
    }, function (a) {
        w.j(a, "boolean", U, "computesBoundsIncludingLinks");
        var b = 0 !== (this.xa & 4096);
        b !== a && (this.xa ^= 4096, this.h("computesBoundsIncludingLinks", b, a))
    });
    w.defineProperty(U, {tH: "computesBoundsIncludingLocation"}, function () {
        return 0 !== (this.xa & 8192)
    }, function (a) {
        w.j(a, "boolean", U, "computesBoundsIncludingLocation");
        var b = 0 !== (this.xa & 8192);
        b !== a && (this.xa ^= 8192, this.h("computesBoundsIncludingLocation", b, a))
    });
    w.defineProperty(U, {dI: "handlesDragDropForMembers"}, function () {
        return 0 !== (this.xa & 16384)
    }, function (a) {
        w.j(a, "boolean", U, "handlesDragDropForMembers");
        var b = 0 !== (this.xa & 16384);
        b !== a && (this.xa ^= 16384, this.h("handlesDragDropForMembers", b, a))
    });
    w.u(U, {Mc: "memberParts"}, function () {
        return this.ds.i
    });
    function ir(a, b) {
        if (a.ds.add(b)) {
            b instanceof U && a.bp.add(b);
            var c = a.NI;
            if (null !== c) {
                var d = !0, e = a.g;
                null !== e && (d = e.Ua, e.Ua = !0);
                c(a, b);
                null !== e && (e.Ua = d)
            }
            a.isVisible() && a.we || b.td(!1)
        }
        b instanceof W && !a.Tw || (c = a.Kb, null === c && (c = a), c.I())
    }

    function hr(a, b) {
        if (a.ds.remove(b)) {
            b instanceof U && a.bp.remove(b);
            var c = a.OI;
            if (null !== c) {
                var d = !0, e = a.g;
                null !== e && (d = e.Ua, e.Ua = !0);
                c(a, b);
                null !== e && (e.Ua = d)
            }
            a.isVisible() && a.we || b.td(!0)
        }
        b instanceof W && !a.Tw || (c = a.Kb, null === c && (c = a), c.I())
    }

    U.prototype.tn = function () {
        if (0 < this.ds.count) {
            var a = this.g;
            if (null !== a)for (var b = this.ds.copy().i; b.next();)a.remove(b.value)
        }
        T.prototype.tn.call(this)
    };
    w.defineProperty(U, {Rb: "layout"}, function () {
        return this.ie
    }, function (a) {
        var b = this.ie;
        b !== a && (null !== a && w.G(a, pg, U, "layout"), null !== b && (b.g = null, b.group = null), this.ie = a, null !== a && (a.g = this.g, a.group = this), this.h("layout", b, a))
    });
    w.defineProperty(U, {NI: "memberAdded"}, function () {
        return this.cs
    }, function (a) {
        var b = this.cs;
        b !== a && (null !== a && w.j(a, "function", U, "memberAdded"), this.cs = a, this.h("memberAdded", b, a))
    });
    w.defineProperty(U, {OI: "memberRemoved"}, function () {
        return this.es
    }, function (a) {
        var b = this.es;
        b !== a && (null !== a && w.j(a, "function", U, "memberRemoved"), this.es = a, this.h("memberRemoved", b, a))
    });
    w.defineProperty(U, {FA: "memberValidation"}, function () {
        return this.ol
    }, function (a) {
        var b = this.ol;
        b !== a && (null !== a && w.j(a, "function", U, "memberValidation"), this.ol = a, this.h("memberValidation", b, a))
    });
    U.prototype.canAddMembers = function (a) {
        var b = this.g;
        if (null === b)return !1;
        b = b.ob;
        for (a = Bh(a).i; a.next();)if (!b.isValidMember(this, a.value))return !1;
        return !0
    };
    U.prototype.addMembers = function (a, b) {
        var c = this.g;
        if (null === c)return !1;
        for (var c = c.ob, d = !0, e = Bh(a).i; e.next();) {
            var f = e.value;
            !b || c.isValidMember(this, f) ? f.Ka = this : d = !1
        }
        return d
    };
    w.defineProperty(U, {OJ: "ungroupable"}, function () {
        return 0 !== (this.xa & 256)
    }, function (a) {
        var b = 0 !== (this.xa & 256);
        b !== a && (w.j(a, "boolean", U, "ungroupable"), this.xa ^= 256, this.h("ungroupable", b, a))
    });
    U.prototype.canUngroup = function () {
        if (!this.OJ)return !1;
        var a = this.layer;
        if (null !== a && !a.Pw)return !1;
        a = a.g;
        return null === a || a.Pw ? !0 : !1
    };
    U.prototype.Tf = function (a) {
        void 0 === a && (a = null);
        var b = 0 !== (this.xa & 65536);
        T.prototype.Tf.call(this, a);
        if (!b)for (0 !== (this.xa & 65536) !== !0 && (this.xa ^= 65536), b = this.EE(); b.next();) {
            var c = b.value;
            if (null === a || !a.contains(c)) {
                var d = c.W;
                null !== d && d !== this && d.mi(this) && !d.isVisible() ? c.Xb() : (d = c.$, null !== d && d !== this && d.mi(this) && !d.isVisible() && c.Xb())
            }
        }
    };
    U.prototype.findExternalLinksConnected = U.prototype.EE = function () {
        var a = this.Vp();
        a.add(this);
        for (var b = new J(W), c = a.i; c.next();) {
            var d = c.value;
            if (d instanceof T)for (d = d.fe; d.next();) {
                var e = d.value;
                a.contains(e) || b.add(e)
            }
        }
        return b.i
    };
    U.prototype.findExternalNodesConnected = function () {
        var a = this.Vp();
        a.add(this);
        for (var b = new J(T), c = a.i; c.next();) {
            var d = c.value;
            if (d instanceof T)for (d = d.fe; d.next();) {
                var e = d.value, f = e.W;
                a.contains(f) && f !== this || b.add(f);
                e = e.$;
                a.contains(e) && e !== this || b.add(e)
            }
        }
        return b.i
    };
    U.prototype.findContainingGroupChain = function () {
        function a(b, d) {
            null !== b && (d.add(b), a(b.Ka, d))
        }

        var b = new J(U);
        a(this, b);
        return b
    };
    U.prototype.findSubGraphParts = U.prototype.Vp = function () {
        var a = new J(S);
        ch(a, this, !0, 0, !0);
        a.remove(this);
        return a
    };
    U.prototype.td = function (a) {
        T.prototype.td.call(this, a);
        for (var b = this.Mc; b.next();)b.value.td(a)
    };
    U.prototype.collapseSubGraph = U.prototype.collapseSubGraph = function () {
        var a = this.g;
        if (null !== a && !a.wh) {
            a.wh = !0;
            var b = this.Vp();
            gs(this, b, a.Pa, this);
            a.wh = !1
        }
    };
    function gs(a, b, c, d) {
        for (var e = a.Mc; e.next();) {
            var f = e.value;
            f.td(!1);
            if (f instanceof U) {
                var h = f;
                h.we && (h.wB = h.we, gs(h, b, c, d))
            }
            if (f instanceof T)f.Tf(b), cl(c, f, d); else if (f instanceof W)for (f = f.Vf; f.next();)f.value.Tf(b)
        }
        a.we = !1
    }

    U.prototype.expandSubGraph = U.prototype.expandSubGraph = function () {
        var a = this.g;
        if (null !== a && !a.wh) {
            a.wh = !0;
            var b = this.Vp();
            hs(this, b, a.Pa, this);
            a.wh = !1
        }
    };
    function hs(a, b, c, d) {
        for (var e = a.Mc; e.next();) {
            var f = e.value;
            f.td(!0);
            if (f instanceof U) {
                var h = f;
                h.wB && (h.wB = !1, hs(h, b, c, d))
            }
            if (f instanceof T)f.Tf(b), bl(c, f, d); else if (f instanceof W)for (f = f.Vf; f.next();)f.value.Tf(b)
        }
        a.we = !0
    }

    w.defineProperty(U, {we: "isSubGraphExpanded"}, function () {
        return 0 !== (this.xa & 512)
    }, function (a) {
        var b = 0 !== (this.xa & 512);
        if (b !== a) {
            w.j(a, "boolean", U, "isSubGraphExpanded");
            this.xa ^= 512;
            var c = this.g;
            this.h("isSubGraphExpanded", b, a);
            b = this.DJ;
            if (null !== b) {
                var d = !0;
                null !== c && (d = c.Ua, c.Ua = !0);
                b(this);
                null !== c && (c.Ua = d)
            }
            null !== c && c.oa.fb ? null !== this.Kb && this.Kb.I() : a ? this.expandSubGraph() : this.collapseSubGraph()
        }
    });
    w.defineProperty(U, {wB: "wasSubGraphExpanded"}, function () {
        return 0 !== (this.xa & 1024)
    }, function (a) {
        var b = 0 !== (this.xa & 1024);
        b !== a && (w.j(a, "boolean", U, "wasSubGraphExpanded"), this.xa ^= 1024, this.h("wasSubGraphExpanded", b, a))
    });
    w.defineProperty(U, {DJ: "subGraphExpandedChanged"}, function () {
        return this.et
    }, function (a) {
        var b = this.et;
        b !== a && (null !== a && w.j(a, "function", U, "subGraphExpandedChanged"), this.et = a, this.h("subGraphExpandedChanged", b, a))
    });
    U.prototype.move = function (a) {
        var b = this.position, c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        var c = a.x - c, b = a.y - b, d = w.xb(c, b);
        T.prototype.move.call(this, a);
        for (a = this.Vp().i; a.next();) {
            var e = a.value;
            if (!(e instanceof W || e instanceof T && e.lf)) {
                var f = e.position, h = e.location;
                f.H() ? (d.x = f.x + c, d.y = f.y + b, e.position = d) : h.H() && (d.x = h.x + c, d.y = h.y + b, e.location = d)
            }
        }
        for (a.reset(); a.next();)e = a.value, e instanceof W && (f = e.position, d.x = f.x + c, d.y = f.y + b, e.move(d));
        w.v(d)
    };
    w.defineProperty(U, {Qn: null}, function () {
        return 0 !== (this.xa & 32768)
    }, function (a) {
        0 !== (this.xa & 32768) !== a && (this.xa ^= 32768)
    });
    function Hj() {
        G.call(this);
        this.ff = dd;
        this.Ps = new A(NaN, NaN, NaN, NaN)
    }

    w.La(Hj, G);
    w.fa("Placeholder", Hj);
    Hj.prototype.cloneProtected = function (a) {
        G.prototype.cloneProtected.call(this, a);
        a.ff = this.ff.S();
        a.Ps = this.Ps.copy()
    };
    Hj.prototype.uk = function (a) {
        if (null === this.background && null === this.jn)return !1;
        var b = this.Ia;
        return db(0, 0, b.width, b.height, a.x, a.y)
    };
    Hj.prototype.Ln = function () {
        var a = this.U;
        null !== a && (a instanceof U || a instanceof dh) || w.k("Placeholder is not inside a Group or Adornment.");
        if (a instanceof U) {
            var b = this.computeBorder(this.Ps), c = this.Sc;
            Pa(c, b.width || 0, b.height || 0);
            yo(this, 0, 0, c.width, c.height);
            for (var c = a.Mc, d = !1; c.next();)if (c.value.isVisible()) {
                d = !0;
                break
            }
            !d || isNaN(b.x) || isNaN(b.y) || (c = new z, c.Vn(b, a.zf), a.location = new z(c.x, c.y))
        } else {
            var b = this.Aa, c = this.Sc, d = this.padding, e = d.left + d.right, f = d.top + d.bottom;
            if (b.H())Pa(c, b.width +
                e || 0, b.height + f || 0), yo(this, -d.left, -d.top, c.width, c.height); else {
                var h = a.qb, k = h.Wa(vb, w.K()), b = w.Vg(k.x, k.y, 0, 0);
                b.ri(h.Wa(Kb, k));
                b.ri(h.Wa(Ab, k));
                b.ri(h.Wa(Ib, k));
                a.Ri.l(b.x, b.y);
                Pa(c, b.width + e || 0, b.height + f || 0);
                yo(this, -d.left, -d.top, c.width, c.height);
                w.v(k);
                w.Gb(b)
            }
        }
    };
    Hj.prototype.hj = function (a, b, c, d) {
        var e = this.Y;
        e.x = a;
        e.y = b;
        e.width = c;
        e.height = d
    };
    Hj.prototype.computeBorder = function (a) {
        var b = this.U;
        if (b instanceof U) {
            var c = b;
            if (c.sH && this.Ps.H()) {
                var d = c.g;
                if (null !== d && (d = d.Za, d instanceof hh && !d.pr && null !== d.Wb && !d.Wb.contains(c)))return a.assign(this.Ps), a
            }
        }
        var c = w.Df(), d = this.computeMemberBounds(c), e = this.padding;
        a.l(d.x - e.left, d.y - e.top, Math.max(d.width + e.left + e.right, 0), Math.max(d.height + e.top + e.bottom, 0));
        w.Gb(c);
        b instanceof U && (c = b, c.tH && c.location.H() && a.ri(c.location));
        return a
    };
    Hj.prototype.computeMemberBounds = function (a) {
        if (!(this.U instanceof U))return a.l(0, 0, 0, 0), a;
        for (var b = this.U, c = Infinity, d = Infinity, e = -Infinity, f = -Infinity, h = b.Mc; h.next();) {
            var k = h.value;
            if (k.isVisible()) {
                if (k instanceof W) {
                    var l = k;
                    if (!b.Tw)continue;
                    if (ym(l))continue;
                    if (l.W === b || l.$ === b)continue
                }
                k = k.Y;
                k.left < c && (c = k.left);
                k.top < d && (d = k.top);
                k.right > e && (e = k.right);
                k.bottom > f && (f = k.bottom)
            }
        }
        isFinite(c) && isFinite(d) ? a.l(c, d, e - c, f - d) : (b = b.location, c = this.padding, a.l(b.x + c.left, b.y + c.top, 0, 0));
        return a
    };
    w.defineProperty(Hj, {padding: "padding"}, function () {
        return this.ff
    }, function (a) {
        "number" === typeof a ? a = new eb(a) : w.G(a, eb, Hj, "padding");
        var b = this.ff;
        b.L(a) || (this.ff = a = a.S(), this.h("padding", b, a))
    });
    function pg() {
        0 < arguments.length && w.hd(pg);
        w.lc(this);
        this.bz = this.Z = null;
        this.Wj = this.Kr = !0;
        this.Qr = !1;
        this.Kq = (new z(0, 0)).freeze();
        this.Mr = this.Nr = !0;
        this.rC = "";
        this.So = !1;
        this.oz = null
    }

    w.fa("Layout", pg);
    pg.prototype.cloneProtected = function (a) {
        a.Kr = this.Kr;
        a.Wj = this.Wj;
        a.Qr = this.Qr;
        a.Kq.assign(this.Kq);
        a.Nr = this.Nr;
        a.Mr = this.Mr;
        a.rC = this.rC;
        this.Wj || (a.So = !0)
    };
    pg.prototype.copy = function () {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    pg.prototype.fc = function (a) {
        w.Ej(this, a)
    };
    pg.prototype.toString = function () {
        var a = w.hf(Object.getPrototypeOf(this)), a = a + "(";
        null !== this.group && (a += " in " + this.group);
        null !== this.g && (a += " for " + this.g);
        return a + ")"
    };
    w.defineProperty(pg, {g: "diagram"}, function () {
        return this.Z
    }, function (a) {
        null !== a && w.G(a, D, pg, "diagram");
        this.Z = a
    });
    w.defineProperty(pg, {group: "group"}, function () {
        return this.bz
    }, function (a) {
        this.bz !== a && (null !== a && w.G(a, U, pg, "group"), this.bz = a, null !== a && (this.Z = a.g))
    });
    w.defineProperty(pg, {tI: "isOngoing"}, function () {
        return this.Kr
    }, function (a) {
        this.Kr !== a && (w.j(a, "boolean", pg, "isOngoing"), this.Kr = a)
    });
    w.defineProperty(pg, {kF: "isInitial"}, function () {
        return this.Wj
    }, function (a) {
        w.j(a, "boolean", pg, "isInitial");
        this.Wj = a;
        a || (this.So = !0)
    });
    w.defineProperty(pg, {Ax: "isViewportSized"}, function () {
        return this.Qr
    }, function (a) {
        this.Qr !== a && (w.j(a, "boolean", pg, "isViewportSized"), (this.Qr = a) && this.J())
    });
    w.defineProperty(pg, {eu: "isRouting"}, function () {
        return this.Nr
    }, function (a) {
        this.Nr !== a && (w.j(a, "boolean", pg, "isRouting"), this.Nr = a)
    });
    w.defineProperty(pg, {nF: "isRealtime"}, function () {
        return this.Mr
    }, function (a) {
        this.Mr !== a && (w.j(a, "boolean", pg, "isRealtime"), this.Mr = a)
    });
    w.defineProperty(pg, {yf: "isValidLayout"}, function () {
        return this.So
    }, function (a) {
        this.So !== a && (w.j(a, "boolean", pg, "isValidLayout"), this.So = a, a || (a = this.g, null !== a && (a.bv = !0)))
    });
    pg.prototype.invalidateLayout = pg.prototype.J = function () {
        if (this.So) {
            var a = this.g;
            if (null !== a && !a.oa.fb) {
                var b = a.Pa;
                !b.Ro && (b.kf && b.pi(), this.tI && a.Fn || this.kF && !a.Fn) && (this.yf = !1, a.Le())
            }
        }
    };
    w.defineProperty(pg, {network: "network"}, function () {
        return this.oz
    }, function (a) {
        var b = this.oz;
        b !== a && (null !== a && w.G(a, qg, pg, "network"), null !== b && (b.Rb = null), this.oz = a, null !== a && (a.Rb = this))
    });
    pg.prototype.createNetwork = function () {
        return new qg
    };
    pg.prototype.makeNetwork = function (a) {
        var b = this.createNetwork();
        b.Rb = this;
        a instanceof D ? (b.rk(a.dg, !0), b.rk(a.links, !0)) : a instanceof U ? b.rk(a.Mc) : b.rk(a.i);
        return b
    };
    pg.prototype.updateParts = function () {
        var a = this.g;
        if (null === a && null !== this.network)for (var b = this.network.vertexes.i; b.next();) {
            var c = b.value.Nc;
            if (null !== c && (a = c.g, null !== a))break
        }
        this.yf = !0;
        try {
            null !== a && a.Tb("Layout"), this.commitLayout()
        } finally {
            null !== a && a.Fd("Layout")
        }
    };
    pg.prototype.commitLayout = function () {
        for (var a = this.network.vertexes.i; a.next();)a.value.commit();
        if (this.eu)for (a = this.network.edges.i; a.next();)a.value.commit()
    };
    pg.prototype.doLayout = function (a) {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        var b = new J(S);
        a instanceof D ? (is(this, b, a.dg, !0, this.Qn, !0, !1, !0), is(this, b, a.Hk, !0, this.Qn, !0, !1, !0)) : a instanceof U ? is(this, b, a.Mc, !1, this.Qn, !0, !1, !0) : b.Hc(a.i);
        var c = b.count;
        if (0 < c) {
            a = this.g;
            null !== a && a.Tb("Layout");
            for (var c = Math.ceil(Math.sqrt(c)), d = this.oe.x, e = d, f = this.oe.y, h = 0, k = 0, b = b.i; b.next();) {
                var l = b.value;
                l.Ze();
                var m = l.za, n = m.width,
                    m = m.height;
                l.moveTo(e, f);
                l instanceof U && (l.Qn = !1);
                e += Math.max(n, 50) + 20;
                k = Math.max(k, Math.max(m, 50));
                h >= c - 1 ? (h = 0, e = d, f += k + 20, k = 0) : h++
            }
            null !== a && a.Fd("Layout")
        }
        this.yf = !0
    };
    pg.prototype.Qn = function (a) {
        return !a.location.H() || a instanceof U && a.Qn ? !0 : !1
    };
    function is(a, b, c, d, e, f, h, k) {
        for (c = c.i; c.next();) {
            var l = c.value;
            d && !l.cq || null !== e && !e(l) || !l.canLayout() || (f && l instanceof T ? l.lf || (l instanceof U ? null === l.Rb ? is(a, b, l.Mc, !1, e, f, h, k) : (js(l), b.add(l)) : (js(l), b.add(l))) : h && l instanceof W ? b.add(l) : !k || !l.de() || l instanceof T || (js(l), b.add(l)))
        }
    }

    function js(a) {
        var b = a.Y;
        (0 === b.width || 0 === b.height || isNaN(b.width) || isNaN(b.height)) && a.Ze()
    }

    pg.prototype.collectParts = pg.prototype.mH = function (a) {
        var b = new J(S);
        a instanceof D ? (is(this, b, a.dg, !0, null, !0, !0, !0), is(this, b, a.links, !0, null, !0, !0, !0), is(this, b, a.Hk, !0, null, !0, !0, !0)) : a instanceof U ? is(this, b, a.Mc, !1, null, !0, !0, !0) : is(this, b, a.i, !1, null, !0, !0, !0);
        return b
    };
    w.defineProperty(pg, {oe: "arrangementOrigin"}, function () {
        return this.Kq
    }, function (a) {
        w.G(a, z, pg, "arrangementOrigin");
        this.Kq.L(a) || (this.Kq.assign(a), this.J())
    });
    pg.prototype.initialOrigin = function (a) {
        var b = this.group;
        if (null !== b) {
            var c = b.position.copy();
            (isNaN(c.x) || isNaN(c.y)) && c.set(a);
            b = b.placeholder;
            null !== b && (c = b.Wa(vb), (isNaN(c.x) || isNaN(c.y)) && c.set(a), c.x += b.padding.left, c.y += b.padding.top);
            return c
        }
        return a
    };
    function qg() {
        w.lc(this);
        this.ie = null;
        if (this.vertexes)for (var a = this.vertexes.i; a.next();) {
            var b = a.value;
            b.clear();
            b.network = null
        }
        if (this.edges)for (a = this.edges.i; a.next();)b = a.value, b.clear(), b.network = null;
        this.vertexes = new J(ks);
        this.edges = new J(ls);
        this.Jx = new ka(T, ks);
        this.Fx = new ka(W, ls)
    }

    w.fa("LayoutNetwork", qg);
    qg.prototype.clear = function () {
        if (this.vertexes)for (var a = this.vertexes.i; a.next();) {
            var b = a.value;
            b.clear();
            b.network = null
        }
        if (this.edges)for (a = this.edges.i; a.next();)b = a.value, b.clear(), b.network = null;
        this.vertexes = new J(ks);
        this.edges = new J(ls);
        this.Jx = new ka(T, ks);
        this.Fx = new ka(W, ls)
    };
    qg.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "LayoutNetwork" + (null !== this.Rb ? "(" + this.Rb.toString() + ")" : "");
        if (0 >= a)return b;
        b += " vertexes: " + this.vertexes.count + " edges: " + this.edges.count;
        if (1 < a) {
            for (var c = this.vertexes.i; c.next();)b += "\n    " + c.value.toString(a - 1);
            for (c = this.edges.i; c.next();)b += "\n    " + c.value.toString(a - 1)
        }
        return b
    };
    w.defineProperty(qg, {Rb: "layout"}, function () {
        return this.ie
    }, function (a) {
        this.ie = a
    });
    qg.prototype.createVertex = function () {
        return new ks
    };
    qg.prototype.createEdge = function () {
        return new ls
    };
    qg.prototype.addParts = qg.prototype.rk = function (a, b, c) {
        if (null !== a) {
            void 0 === b && (b = !1);
            w.j(b, "boolean", qg, "addParts:toplevelonly");
            void 0 === c && (c = null);
            null === c && (c = function (a) {
                if (a instanceof T)return !a.lf;
                if (a instanceof W) {
                    var b = a.W;
                    if (null === b || b.lf)return !1;
                    a = a.$;
                    return null === a || a.lf ? !1 : !0
                }
                return !1
            });
            for (a = a.i; a.next();) {
                var d = a.value;
                if (d instanceof T && (!b || d.cq) && d.canLayout() && c(d))if (d instanceof U && null === d.Rb)this.rk(d.Mc, !1); else if (null === this.wn(d)) {
                    var e = this.createVertex();
                    e.Nc = d;
                    this.Cl(e)
                }
            }
            for (a.reset(); a.next();)if (d = a.value, d instanceof W && (!b || d.cq) && d.canLayout() && c(d) && null === this.gx(d)) {
                var f = d.W, e = d.$;
                null !== f && null !== e && f !== e && (f = this.findGroupVertex(f), e = this.findGroupVertex(e), null !== f && null !== e && this.gq(f, e, d))
            }
        }
    };
    qg.prototype.findGroupVertex = function (a) {
        if (null === a)return null;
        var b = a.findVisibleNode();
        if (null === b)return null;
        a = this.wn(b);
        if (null !== a)return a;
        for (b = b.Ka; null !== b;) {
            a = this.wn(b);
            if (null !== a)return a;
            b = b.Ka
        }
        return null
    };
    qg.prototype.addVertex = qg.prototype.Cl = function (a) {
        if (null !== a) {
            this.vertexes.add(a);
            var b = a.Nc;
            null !== b && this.Jx.add(b, a);
            a.network = this
        }
    };
    qg.prototype.addNode = qg.prototype.wt = function (a) {
        if (null === a)return null;
        var b = this.wn(a);
        null === b && (b = this.createVertex(), b.Nc = a, this.Cl(b));
        return b
    };
    qg.prototype.deleteVertex = qg.prototype.yE = function (a) {
        if (null !== a && ms(this, a)) {
            for (var b = a.Oe, c = b.count - 1; 0 <= c; c--) {
                var d = b.da(c);
                this.Qp(d)
            }
            b = a.He;
            for (c = b.count - 1; 0 <= c; c--)d = b.da(c), this.Qp(d)
        }
    };
    function ms(a, b) {
        if (null === b)return !1;
        var c = a.vertexes.remove(b);
        c && (a.Jx.remove(b.Nc), b.network = null);
        return c
    }

    qg.prototype.deleteNode = function (a) {
        null !== a && (a = this.wn(a), null !== a && this.yE(a))
    };
    qg.prototype.findVertex = qg.prototype.wn = function (a) {
        return null === a ? null : this.Jx.ka(a)
    };
    qg.prototype.addEdge = qg.prototype.Dp = function (a) {
        if (null !== a) {
            this.edges.add(a);
            var b = a.link;
            null !== b && null === this.gx(b) && this.Fx.add(b, a);
            b = a.toVertex;
            null !== b && b.dE(a);
            b = a.fromVertex;
            null !== b && b.bE(a);
            a.network = this
        }
    };
    qg.prototype.addLink = function (a) {
        if (null === a)return null;
        var b = a.W, c = a.$, d = this.gx(a);
        null === d ? (d = this.createEdge(), d.link = a, null !== b && (d.fromVertex = this.wt(b)), null !== c && (d.toVertex = this.wt(c)), this.Dp(d)) : (d.fromVertex = null !== b ? this.wt(b) : null, d.toVertex = null !== c ? this.wt(c) : null);
        return d
    };
    qg.prototype.deleteEdge = qg.prototype.Qp = function (a) {
        if (null !== a) {
            var b = a.toVertex;
            null !== b && b.xE(a);
            b = a.fromVertex;
            null !== b && b.wE(a);
            ns(this, a)
        }
    };
    function ns(a, b) {
        null !== b && a.edges.remove(b) && (a.Fx.remove(b.link), b.network = null)
    }

    qg.prototype.deleteLink = function (a) {
        null !== a && (a = this.gx(a), null !== a && this.Qp(a))
    };
    qg.prototype.findEdge = qg.prototype.gx = function (a) {
        return null === a ? null : this.Fx.ka(a)
    };
    qg.prototype.linkVertexes = qg.prototype.gq = function (a, b, c) {
        if (null === a || null === b)return null;
        if (a.network === this && b.network === this) {
            var d = this.createEdge();
            d.link = c;
            d.fromVertex = a;
            d.toVertex = b;
            this.Dp(d);
            return d
        }
        return null
    };
    qg.prototype.reverseEdge = qg.prototype.Yx = function (a) {
        if (null !== a) {
            var b = a.fromVertex, c = a.toVertex;
            null !== b && null !== c && (b.wE(a), c.xE(a), a.Yx(), b.dE(a), c.bE(a))
        }
    };
    qg.prototype.deleteSelfEdges = qg.prototype.Zw = function () {
        for (var a = w.lb(), b = this.edges.i; b.next();) {
            var c = b.value;
            c.fromVertex === c.toVertex && a.push(c)
        }
        b = a.length;
        for (c = 0; c < b; c++)this.Qp(a[c]);
        w.va(a)
    };
    qg.prototype.deleteArtificialVertexes = function () {
        for (var a = w.lb(), b = this.vertexes.i; b.next();) {
            var c = b.value;
            null === c.Nc && a.push(c)
        }
        for (var c = a.length, d = 0; d < c; d++)this.yE(a[d]);
        b = w.lb();
        for (c = this.edges.i; c.next();)d = c.value, null === d.link && b.push(d);
        c = b.length;
        for (d = 0; d < c; d++)this.Qp(b[d]);
        w.va(a);
        w.va(b)
    };
    function os(a) {
        for (var b = w.lb(), c = a.edges.i; c.next();) {
            var d = c.value;
            null !== d.fromVertex && null !== d.toVertex || b.push(d)
        }
        c = b.length;
        for (d = 0; d < c; d++)a.Qp(b[d]);
        w.va(b)
    }

    qg.prototype.splitIntoSubNetworks = qg.prototype.CJ = function () {
        this.deleteArtificialVertexes();
        os(this);
        this.Zw();
        for (var a = new I(qg), b = !0; b;)for (var b = !1, c = this.vertexes.i; c.next();) {
            var d = c.value;
            if (0 < d.Oe.count || 0 < d.He.count) {
                b = this.Rb.createNetwork();
                a.add(b);
                ps(this, b, d);
                b = !0;
                break
            }
        }
        a.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : b.vertexes.count - a.vertexes.count
        });
        return a
    };
    function ps(a, b, c) {
        if (null !== c && c.network !== b) {
            ms(a, c);
            b.Cl(c);
            for (var d = c.kc; d.next();) {
                var e = d.value;
                e.network !== b && (ns(a, e), b.Dp(e), ps(a, b, e.fromVertex))
            }
            for (d = c.hc; d.next();)c = d.value, c.network !== b && (ns(a, c), b.Dp(c), ps(a, b, c.toVertex))
        }
    }

    qg.prototype.findAllParts = function () {
        for (var a = new J(S), b = this.vertexes.i; b.next();)a.add(b.value.Nc);
        for (b = this.edges.i; b.next();)a.add(b.value.link);
        return a
    };
    function ks() {
        w.lc(this);
        this.network = null;
        this.M = (new A(0, 0, 10, 10)).freeze();
        this.T = (new z(5, 5)).freeze();
        this.pd = this.Vd = null;
        this.Oe = new I(ls);
        this.He = new I(ls)
    }

    w.fa("LayoutVertex", ks);
    ks.prototype.clear = function () {
        this.pd = this.Vd = null;
        this.Oe = new I(ls);
        this.He = new I(ls)
    };
    ks.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "LayoutVertex#" + w.Jd(this);
        if (0 < a && (b += null !== this.Nc ? "(" + this.Nc.toString() + ")" : "", 1 < a)) {
            a = "";
            for (var c = !0, d = this.Oe.i; d.next();) {
                var e = d.value;
                c ? c = !1 : a += ",";
                a += e.toString(0)
            }
            e = "";
            c = !0;
            for (d = this.He.i; d.next();) {
                var f = d.value;
                c ? c = !1 : e += ",";
                e += f.toString(0)
            }
            b += " sources: " + a + " destinations: " + e
        }
        return b
    };
    w.defineProperty(ks, {data: "data"}, function () {
        return this.Vd
    }, function (a) {
        this.Vd = a;
        if (null !== a) {
            var b = a.bounds;
            a = b.x;
            var c = b.y, d = b.width, b = b.height;
            this.T.l(d / 2, b / 2);
            this.M.l(a, c, d, b)
        }
    });
    w.defineProperty(ks, {Nc: "node"}, function () {
        return this.pd
    }, function (a) {
        if (this.pd !== a) {
            this.pd = a;
            a.Ze();
            var b = a.Y, c = b.x, d = b.y, e = b.width, b = b.height;
            isNaN(c) && (c = 0);
            isNaN(d) && (d = 0);
            this.M.l(c, d, e, b);
            if (!(a instanceof U) && (a = a.Xf.Wa(Fb), a.H())) {
                this.T.l(a.x - c, a.y - d);
                return
            }
            this.T.l(e / 2, b / 2)
        }
    });
    w.defineProperty(ks, {jb: "bounds"}, function () {
        return this.M
    }, function (a) {
        this.M.L(a) || this.M.assign(a)
    });
    w.defineProperty(ks, {focus: "focus"}, function () {
        return this.T
    }, function (a) {
        this.T.L(a) || this.T.assign(a)
    });
    w.defineProperty(ks, {ja: "centerX"}, function () {
        return this.M.x + this.T.x
    }, function (a) {
        var b = this.M;
        b.x + this.T.x !== a && (b.Ra(), b.x = a - this.T.x, b.freeze())
    });
    w.defineProperty(ks, {ra: "centerY"}, function () {
        return this.M.y + this.T.y
    }, function (a) {
        var b = this.M;
        b.y + this.T.y !== a && (b.Ra(), b.y = a - this.T.y, b.freeze())
    });
    w.defineProperty(ks, {Qt: "focusX"}, function () {
        return this.T.x
    }, function (a) {
        var b = this.T;
        b.x !== a && (b.Ra(), b.x = a, b.freeze())
    });
    w.defineProperty(ks, {Rt: "focusY"}, function () {
        return this.T.y
    }, function (a) {
        var b = this.T;
        b.y !== a && (b.Ra(), b.y = a, b.freeze())
    });
    w.defineProperty(ks, {x: "x"}, function () {
        return this.M.x
    }, function (a) {
        var b = this.M;
        b.x !== a && (b.Ra(), b.x = a, b.freeze())
    });
    w.defineProperty(ks, {y: "y"}, function () {
        return this.M.y
    }, function (a) {
        var b = this.M;
        b.y !== a && (b.Ra(), b.y = a, b.freeze())
    });
    w.defineProperty(ks, {width: "width"}, function () {
        return this.M.width
    }, function (a) {
        var b = this.M;
        b.width !== a && (b.Ra(), b.width = a, b.freeze())
    });
    w.defineProperty(ks, {height: "height"}, function () {
        return this.M.height
    }, function (a) {
        var b = this.M;
        b.height !== a && (b.Ra(), b.height = a, b.freeze())
    });
    ks.prototype.commit = function () {
        var a = this.Vd;
        if (null !== a) {
            var b = this.jb, c = a.bounds;
            w.Qa(c) ? (c.x = b.x, c.y = b.y, c.width = b.width, c.height = b.height) : a.bounds = b.copy()
        } else if (a = this.Nc, null !== a) {
            b = this.jb;
            if (!(a instanceof U)) {
                var c = a.Y, d = a.Xf.Wa(Fb);
                if (c.H() && d.H()) {
                    a.moveTo(b.x + this.Qt - (d.x - c.x), b.y + this.Rt - (d.y - c.y));
                    return
                }
            }
            a.moveTo(b.x, b.y)
        }
    };
    ks.prototype.addSourceEdge = ks.prototype.dE = function (a) {
        null !== a && (this.Oe.contains(a) || this.Oe.add(a))
    };
    ks.prototype.deleteSourceEdge = ks.prototype.xE = function (a) {
        null !== a && this.Oe.remove(a)
    };
    ks.prototype.addDestinationEdge = ks.prototype.bE = function (a) {
        null !== a && (this.He.contains(a) || this.He.add(a))
    };
    ks.prototype.deleteDestinationEdge = ks.prototype.wE = function (a) {
        null !== a && this.He.remove(a)
    };
    w.u(ks, {BJ: "sourceVertexes"}, function () {
        for (var a = new J(ks), b = this.kc; b.next();)a.add(b.value.fromVertex);
        return a.i
    });
    w.u(ks, {GH: "destinationVertexes"}, function () {
        for (var a = new J(ks), b = this.hc; b.next();)a.add(b.value.toVertex);
        return a.i
    });
    w.u(ks, {vertexes: "vertexes"}, function () {
        for (var a = new J(ks), b = this.kc; b.next();)a.add(b.value.fromVertex);
        for (b = this.hc; b.next();)a.add(b.value.toVertex);
        return a.i
    });
    w.u(ks, {kc: "sourceEdges"}, function () {
        return this.Oe.i
    });
    w.u(ks, {hc: "destinationEdges"}, function () {
        return this.He.i
    });
    w.u(ks, {edges: "edges"}, function () {
        for (var a = new I(ls), b = this.kc; b.next();)a.add(b.value);
        for (b = this.hc; b.next();)a.add(b.value);
        return a.i
    });
    w.u(ks, {LH: "edgesCount"}, function () {
        return this.Oe.count + this.He.count
    });
    var qs;
    ks.standardComparer = qs = function (a, b) {
        var c = a.pd, d = b.pd;
        return c ? d ? (c = c.text, d = d.text, c < d ? -1 : c > d ? 1 : 0) : 1 : null !== d ? -1 : 0
    };
    ks.smartComparer = function (a, b) {
        if (null !== a) {
            if (null !== b) {
                var c = a.pd, d = b.pd;
                if (null !== c) {
                    if (null !== d) {
                        for (var c = c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++)if ("" !== d[e] && void 0 !== d[e]) {
                            var f = parseFloat(c[e]), h = parseFloat(d[e]);
                            if (isNaN(f)) {
                                if (!isNaN(h))return 1;
                                if (0 !== c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])
                            } else {
                                if (isNaN(h))return -1;
                                if (0 !== f - h)return f -
                                    h
                            }
                        } else if ("" !== c[e])return 1;
                        return "" !== d[e] && void 0 !== d[e] ? -1 : 0
                    }
                    return 1
                }
                return null !== d ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };
    function ls() {
        w.lc(this);
        this.toVertex = this.fromVertex = this.link = this.data = this.network = null
    }

    w.fa("LayoutEdge", ls);
    ls.prototype.clear = function () {
        this.toVertex = this.fromVertex = this.link = this.data = null
    };
    ls.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "LayoutEdge#" + w.Jd(this);
        0 < a && (b += null !== this.link ? "(" + this.link.toString() + ")" : "", 1 < a && (b += " " + (this.fromVertex ? this.fromVertex.toString() : "null") + " --\x3e " + (this.toVertex ? this.toVertex.toString() : "null")));
        return b
    };
    ls.prototype.Yx = function () {
        var a = this.fromVertex;
        this.fromVertex = this.toVertex;
        this.toVertex = a
    };
    ls.prototype.commit = function () {
    };
    ls.prototype.getOtherVertex = ls.prototype.VH = function (a) {
        return this.toVertex === a ? this.fromVertex : this.fromVertex === a ? this.toVertex : null
    };
    function Ln() {
        0 < arguments.length && w.hd(Ln);
        pg.call(this);
        this.Ax = !0;
        this.rt = this.st = NaN;
        this.Jj = (new ha(NaN, NaN)).freeze();
        this.ai = (new ha(10, 10)).freeze();
        this.ge = rs;
        this.kd = ss;
        this.$h = ts;
        this.Jh = us
    }

    w.La(Ln, pg);
    w.fa("GridLayout", Ln);
    Ln.prototype.cloneProtected = function (a) {
        pg.prototype.cloneProtected.call(this, a);
        a.st = this.st;
        a.rt = this.rt;
        a.Jj.assign(this.Jj);
        a.ai.assign(this.ai);
        a.ge = this.ge;
        a.kd = this.kd;
        a.$h = this.$h;
        a.Jh = this.Jh
    };
    Ln.prototype.fc = function (a) {
        a.De === Ln ? a === ts || a === vs || a === ws || a === xs ? this.sorting = a : a === ss || a === ys ? this.Of = a : a === rs || a === zs ? this.alignment = a : w.k("Unknown enum value: " + a) : pg.prototype.fc.call(this, a)
    };
    Ln.prototype.doLayout = function (a) {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        this.oe = this.initialOrigin(this.oe);
        var b = this.g;
        a = this.mH(a);
        for (var c = a.copy().i; c.next();) {
            var d = c.value;
            if (d instanceof W) {
                var e = d;
                if (null !== e.W || null !== e.$) {
                    a.remove(e);
                    continue
                }
            }
            d.Ze();
            if (d instanceof U)for (d = d.Mc; d.next();)a.remove(d.value)
        }
        e = a.dc();
        if (0 !== e.length) {
            switch (this.sorting) {
                case xs:
                    e.reverse();
                    break;
                case ts:
                    e.sort(this.comparer);
                    break;
                case vs:
                    e.sort(this.comparer), e.reverse()
            }
            var f = this.SJ;
            isNaN(f) && (f = 0);
            var h = this.yG, h = isNaN(h) && null !== b ? Math.max(b.sb.width - b.padding.left - b.padding.right, 0) : Math.max(this.yG, 0);
            0 >= f && 0 >= h && (f = 1);
            a = this.spacing.width;
            isFinite(a) || (a = 0);
            c = this.spacing.height;
            isFinite(c) || (c = 0);
            null !== b && b.Tb("Layout");
            d = [];
            switch (this.alignment) {
                case zs:
                    var k = a, l = c, m = Math.max(this.Hp.width, 1);
                    if (!isFinite(m))for (var n = m = 0; n < e.length; n++)var p = e[n], q = p.za, m = Math.max(m, q.width);
                    var m = Math.max(m + k, 1), r = Math.max(this.Hp.height,
                        1);
                    if (!isFinite(r))for (n = r = 0; n < e.length; n++)p = e[n], q = p.za, r = Math.max(r, q.height);
                    for (var r = Math.max(r + l, 1), s = this.Of, u = this.oe.x, t = u, x = this.oe.y, v = 0, B = 0, n = 0; n < e.length; n++) {
                        var p = e[n], q = p.za, y = Math.ceil((q.width + k) / m) * m, H = Math.ceil((q.height + l) / r) * r, E = 0;
                        switch (s) {
                            case ys:
                                E = Math.abs(t - q.width);
                                break;
                            default:
                                E = t + q.width
                        }
                        if (0 < f && v > f - 1 || 0 < h && 0 < v && E > h)d.push(new A(0, x, h + k, B)), v = 0, t = u, x += B, B = 0;
                        B = Math.max(B, H);
                        H = 0;
                        switch (s) {
                            case ys:
                                H = -q.width;
                                break;
                            default:
                                H = 0
                        }
                        p.moveTo(t + H, x);
                        switch (s) {
                            case ys:
                                t -= y;
                                break;
                            default:
                                t += y
                        }
                        v++
                    }
                    d.push(new A(0, x, h + k, B));
                    break;
                case rs:
                    k = f;
                    l = a;
                    m = c;
                    n = Math.max(this.Hp.width, 1);
                    p = x = y = 0;
                    q = w.K();
                    for (f = 0; f < e.length; f++)r = e[f], s = r.za, u = ar(r, r.Xf, r.zf, q), y = Math.max(y, u.x), x = Math.max(x, s.width - u.x), p = Math.max(p, u.y);
                    t = this.Of;
                    switch (t) {
                        case ys:
                            y += l;
                            break;
                        default:
                            x += l
                    }
                    var n = isFinite(n) ? Math.max(n + l, 1) : Math.max(y + x, 1), V = x = this.oe.x, v = this.oe.y, B = 0;
                    h >= y && (h -= y);
                    for (var y = H = 0, E = Math.max(this.Hp.height, 1), ba = p = 0, Q = !0, $ = w.K(), f = 0; f < e.length; f++) {
                        r = e[f];
                        s = r.za;
                        u = ar(r, r.Xf, r.zf, q);
                        if (0 < B)switch (t) {
                            case ys:
                                V =
                                    (V - x - (s.width - u.x)) / n;
                                V = Xa(Math.round(V), V) ? Math.round(V) : Math.floor(V);
                                V = V * n + x;
                                break;
                            default:
                                V = (V - x + u.x) / n, V = Xa(Math.round(V), V) ? Math.round(V) : Math.ceil(V), V = V * n + x
                        } else switch (t) {
                            case ys:
                                H = V + u.x + s.width;
                                break;
                            default:
                                H = V - u.x
                        }
                        var ca = 0;
                        switch (t) {
                            case ys:
                                ca = -(V + u.x) + H;
                                break;
                            default:
                                ca = V + s.width - u.x - H
                        }
                        if (0 < k && B > k - 1 || 0 < h && 0 < B && ca > h) {
                            d.push(new A(0, Q ? v - p : v, h + l, ba + p + m));
                            for (V = 0; V < B && f !== B; V++) {
                                var ca = e[f - B + V], R = ar(ca, ca.Xf, ca.zf, $);
                                ca.moveTo(ca.position.x, ca.position.y + p - R.y)
                            }
                            ba += m;
                            v = Q ? v + ba : v + (ba + p);
                            B =
                                ba = p = 0;
                            V = x;
                            Q = !1
                        }
                        V === x && (y = t === ys ? Math.max(y, s.width - u.x) : Math.min(y, -u.x));
                        p = Math.max(p, u.y);
                        ba = Math.max(ba, s.height - u.y);
                        isFinite(E) && (ba = Math.max(ba, Math.max(s.height, E) - u.y));
                        Q ? r.moveTo(V - u.x, v - u.y) : r.moveTo(V - u.x, v);
                        switch (t) {
                            case ys:
                                V -= u.x + l;
                                break;
                            default:
                                V += s.width - u.x + l
                        }
                        B++
                    }
                    d.push(new A(0, v, h + l, (Q ? ba : ba + p) + m));
                    for (V = 0; V < B && f !== B; V++)ca = e[f - B + V], R = ar(ca, ca.Xf, ca.zf, q), ca.moveTo(ca.position.x, ca.position.y + p - R.y);
                    w.v(q);
                    w.v($);
                    if (t === ys)for (f = 0; f < d.length; f++)e = d[f], e.width += y, e.x -= y; else for (f =
                                                                                                               0; f < d.length; f++)e = d[f], e.x > y && (e.width += e.x - y, e.x = y)
            }
            for (k = f = h = e = 0; k < d.length; k++)l = d[k], e = Math.min(e, l.x), h = Math.min(h, l.y), f = Math.max(f, l.x + l.width);
            this.Of === ys ? this.commitLayers(d, new z(e + a / 2 - (f + e), h - c / 2)) : this.commitLayers(d, new z(e - a / 2, h - c / 2));
            null !== b && b.Fd("Layout");
            this.yf = !0
        }
    };
    Ln.prototype.commitLayers = function () {
    };
    w.defineProperty(Ln, {yG: "wrappingWidth"}, function () {
        return this.st
    }, function (a) {
        this.st !== a && (w.j(a, "number", Ln, "wrappingWidth"), 0 < a || isNaN(a)) && (this.st = a, this.Ax = isNaN(a), this.J())
    });
    w.defineProperty(Ln, {SJ: "wrappingColumn"}, function () {
        return this.rt
    }, function (a) {
        this.rt !== a && (w.j(a, "number", Ln, "wrappingColumn"), 0 < a || isNaN(a)) && (this.rt = a, this.J())
    });
    w.defineProperty(Ln, {Hp: "cellSize"}, function () {
        return this.Jj
    }, function (a) {
        w.G(a, ha, Ln, "cellSize");
        this.Jj.L(a) || (this.Jj.assign(a), this.J())
    });
    w.defineProperty(Ln, {spacing: "spacing"}, function () {
        return this.ai
    }, function (a) {
        w.G(a, ha, Ln, "spacing");
        this.ai.L(a) || (this.ai.assign(a), this.J())
    });
    w.defineProperty(Ln, {alignment: "alignment"}, function () {
        return this.ge
    }, function (a) {
        this.ge !== a && (w.mb(a, Ln, Ln, "alignment"), a === rs || a === zs) && (this.ge = a, this.J())
    });
    w.defineProperty(Ln, {Of: "arrangement"}, function () {
        return this.kd
    }, function (a) {
        this.kd !== a && (w.mb(a, Ln, Ln, "arrangement"), a === ss || a === ys) && (this.kd = a, this.J())
    });
    w.defineProperty(Ln, {sorting: "sorting"}, function () {
        return this.$h
    }, function (a) {
        this.$h !== a && (w.mb(a, Ln, Ln, "sorting"), a === ws || a === xs || a === ts || a === vs) && (this.$h = a, this.J())
    });
    w.defineProperty(Ln, {comparer: "comparer"}, function () {
        return this.Jh
    }, function (a) {
        this.Jh !== a && (w.j(a, "function", Ln, "comparer"), this.Jh = a, this.J())
    });
    var us;
    Ln.standardComparer = us = function (a, b) {
        var c = a.text, d = b.text;
        return c < d ? -1 : c > d ? 1 : 0
    };
    Ln.smartComparer = function (a, b) {
        if (null !== a) {
            if (null !== b) {
                for (var c = a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++)if ("" !== d[e] && void 0 !== d[e]) {
                    var f = parseFloat(c[e]), h = parseFloat(d[e]);
                    if (isNaN(f)) {
                        if (!isNaN(h))return 1;
                        if (0 !== c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])
                    } else {
                        if (isNaN(h))return -1;
                        if (0 !== f - h)return f - h
                    }
                } else if ("" !== c[e])return 1;
                return "" !==
                d[e] && void 0 !== d[e] ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };
    var zs;
    Ln.Position = zs = w.p(Ln, "Position", 0);
    var rs;
    Ln.Location = rs = w.p(Ln, "Location", 1);
    var ss;
    Ln.LeftToRight = ss = w.p(Ln, "LeftToRight", 2);
    var ys;
    Ln.RightToLeft = ys = w.p(Ln, "RightToLeft", 3);
    var ws;
    Ln.Forward = ws = w.p(Ln, "Forward", 4);
    var xs;
    Ln.Reverse = xs = w.p(Ln, "Reverse", 5);
    var ts;
    Ln.Ascending = ts = w.p(Ln, "Ascending", 6);
    var vs;
    Ln.Descending = vs = w.p(Ln, "Descending", 7);
    function As() {
        0 < arguments.length && w.hd(As);
        pg.call(this);
        this.Ty = this.Do = this.Wd = 0;
        this.qr = 360;
        this.Sy = Bs;
        this.$k = 0;
        this.yC = Bs;
        this.iv = this.Eg = this.PD = 0;
        this.Gw = new Cs;
        this.jv = this.Qm = 0;
        this.MG = 600;
        this.Ds = NaN;
        this.Mq = 1;
        this.dt = 0;
        this.gt = 360;
        this.kd = Bs;
        this.aa = Ds;
        this.$h = Es;
        this.Jh = qs;
        this.ai = 6;
        this.ss = Fs
    }

    w.La(As, pg);
    w.fa("CircularLayout", As);
    As.prototype.cloneProtected = function (a) {
        pg.prototype.cloneProtected.call(this, a);
        a.Ds = this.Ds;
        a.Mq = this.Mq;
        a.dt = this.dt;
        a.gt = this.gt;
        a.kd = this.kd;
        a.aa = this.aa;
        a.$h = this.$h;
        a.Jh = this.Jh;
        a.ai = this.ai;
        a.ss = this.ss
    };
    As.prototype.fc = function (a) {
        if (a.De === As)if (a === Gs || a === Hs || a === Is || a === Js || a === Es)this.sorting = a; else if (a === Ks || a === Ls || a === Ds || a === Ms)this.direction = a; else if (a === Ns || a === Os || a === Bs || a === Ps)this.Of = a; else {
            if (a === Qs || a === Fs)this.Ix = a
        } else pg.prototype.fc.call(this, a)
    };
    As.prototype.createNetwork = function () {
        return new Rs
    };
    As.prototype.doLayout = function (a) {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        a = this.network.vertexes;
        if (1 >= a.count)1 === a.count && (a = a.first(), a.ja = 0, a.ra = 0); else {
            var b = new I(Ss);
            b.Hc(a.i);
            a = new I(Ss);
            var c = new I(Ss), d;
            d = this.sort(b);
            var e = this.Sy, f = this.yC, h = this.Wd, k = this.Do, l = this.Ty, m = this.qr, b = this.$k, n = this.PD, p = this.Eg, q = this.iv, e = this.Of, f = this.Ix, h = this.cJ;
            if (!isFinite(h) ||
                0 >= h)h = NaN;
            k = this.fH;
            if (!isFinite(k) || 0 >= k)k = 1;
            l = this.ye;
            isFinite(l) || (l = 0);
            m = this.of;
            if (!isFinite(m) || 360 < m || 1 > m)m = 360;
            b = this.spacing;
            isFinite(b) || (b = NaN);
            e === Ps && f === Qs ? e = Bs : e === Ps && f !== Qs && (f = Qs, e = this.Of);
            if ((this.direction === Ks || this.direction === Ls) && this.sorting !== Es) {
                for (var r = 0; !(r >= d.length); r += 2) {
                    a.add(d.da(r));
                    if (r + 1 >= d.length)break;
                    c.add(d.da(r + 1))
                }
                this.direction === Ks ? (this.Of === Ps && a.reverse(), d = new I(Ss), d.Hc(a), d.Hc(c)) : (this.Of === Ps && c.reverse(), d = new I(Ss), d.Hc(c), d.Hc(a))
            }
            for (var s =
                d.length, u = n = 0, r = 0; r < d.length; r++) {
                var p = l + m * u * (this.direction === Ds ? 1 : -1) / s, t = d.da(r).diameter;
                isNaN(t) && (t = Ts(d.da(r), p));
                360 > m && (0 === r || r === d.length - 1) && (t /= 2);
                n += t;
                u++
            }
            if (isNaN(h) || e === Ps) {
                isNaN(b) && (b = 6);
                if (e !== Bs && e !== Ps) {
                    t = -Infinity;
                    for (r = 0; r < s; r++) {
                        var q = d.da(r), x = d.da(r === s - 1 ? 0 : r + 1);
                        isNaN(q.diameter) && Ts(q, 0);
                        isNaN(x.diameter) && Ts(x, 0);
                        t = Math.max(t, (q.diameter + x.diameter) / 2)
                    }
                    q = t + b;
                    e === Ns ? (p = 2 * Math.PI / s, h = (t + b) / p) : h = Us(this, q * (360 <= m ? s : s - 1), k, l * Math.PI / 180, m * Math.PI / 180)
                } else h = Us(this, n + (360 <=
                    m ? s : s - 1) * (e !== Ps ? b : 1.6 * b), k, l * Math.PI / 180, m * Math.PI / 180);
                p = h * k
            } else if (p = h * k, u = Vs(this, h, p, l * Math.PI / 180, m * Math.PI / 180), isNaN(b)) {
                if (e === Bs || e === Ps)b = (u - n) / (360 <= m ? s : s - 1)
            } else if (e === Bs || e === Ps)r = (u - n) / (360 <= m ? s : s - 1), r < b ? (h = Us(this, n + b * (360 <= m ? s : s - 1), k, l * Math.PI / 180, m * Math.PI / 180), p = h * k) : b = r; else {
                t = -Infinity;
                for (r = 0; r < s; r++)q = d.da(r), x = d.da(r === s - 1 ? 0 : r + 1), isNaN(q.diameter) && Ts(q, 0), isNaN(x.diameter) && Ts(x, 0), t = Math.max(t, (q.diameter + x.diameter) / 2);
                q = t + b;
                r = Us(this, q * (360 <= m ? s : s - 1), k, l * Math.PI / 180,
                    m * Math.PI / 180);
                r > h ? (h = r, p = h * k) : q = u / (360 <= m ? s : s - 1)
            }
            this.Sy = e;
            this.yC = f;
            this.Wd = h;
            this.Do = k;
            this.Ty = l;
            this.qr = m;
            this.$k = b;
            this.PD = n;
            this.Eg = p;
            this.iv = q;
            b = d;
            d = this.Sy;
            e = this.Wd;
            f = this.Ty;
            k = this.qr;
            l = this.$k;
            m = this.Eg;
            n = this.iv;
            if (this.direction !== Ks && this.direction !== Ls || d !== Ps)if (this.direction === Ks || this.direction === Ls) {
                h = 0;
                switch (d) {
                    case Os:
                        h = 180 * Ws(this, e, m, f, n) / Math.PI;
                        break;
                    case Bs:
                        n = b = 0;
                        h = a.first();
                        null !== h && (b = Ts(h, Math.PI / 2));
                        h = c.first();
                        null !== h && (n = Ts(h, Math.PI / 2));
                        h = 180 * Ws(this, e, m, f, l + (b +
                                n) / 2) / Math.PI;
                        break;
                    case Ns:
                        h = k / b.length
                }
                if (this.direction === Ks) {
                    switch (d) {
                        case Os:
                            Xs(this, a, f, Ms);
                            break;
                        case Bs:
                            Ys(this, a, f, Ms);
                            break;
                        case Ns:
                            Zs(this, a, k / 2, f, Ms)
                    }
                    switch (d) {
                        case Os:
                            Xs(this, c, f + h, Ds);
                            break;
                        case Bs:
                            Ys(this, c, f + h, Ds);
                            break;
                        case Ns:
                            Zs(this, c, k / 2, f + h, Ds)
                    }
                } else {
                    switch (d) {
                        case Os:
                            Xs(this, c, f, Ms);
                            break;
                        case Bs:
                            Ys(this, c, f, Ms);
                            break;
                        case Ns:
                            Zs(this, c, k / 2, f, Ms)
                    }
                    switch (d) {
                        case Os:
                            Xs(this, a, f + h, Ds);
                            break;
                        case Bs:
                            Ys(this, a, f + h, Ds);
                            break;
                        case Ns:
                            Zs(this, a, k / 2, f + h, Ds)
                    }
                }
            } else switch (d) {
                case Os:
                    Xs(this,
                        b, f, this.direction);
                    break;
                case Bs:
                    Ys(this, b, f, this.direction);
                    break;
                case Ns:
                    Zs(this, b, k, f, this.direction);
                    break;
                case Ps:
                    $s(this, b, k, f, this.direction)
            } else $s(this, b, k, f - k / 2, Ds)
        }
        this.updateParts();
        this.network = null;
        this.yf = !0
    };
    function Zs(a, b, c, d, e) {
        var f = a.qr, h = a.Wd;
        a = a.Eg;
        d = d * Math.PI / 180;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++) {
            var m = d + (e === Ds ? l * c / (360 <= f ? k : k - 1) : -(l * c) / k), n = b.da(l), p = h * Math.tan(m) / a, p = Math.sqrt((h * h + a * a * p * p) / (1 + p * p));
            n.ja = p * Math.cos(m);
            n.ra = p * Math.sin(m);
            n.actualAngle = 180 * m / Math.PI
        }
    }

    function Ys(a, b, c, d) {
        var e = a.Wd, f = a.Eg, h = a.$k;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++) {
            var m = b.da(l), n = b.da(l === k - 1 ? 0 : l + 1), p = f * Math.sin(c);
            m.ja = e * Math.cos(c);
            m.ra = p;
            m.actualAngle = 180 * c / Math.PI;
            isNaN(m.diameter) && Ts(m, 0);
            isNaN(n.diameter) && Ts(n, 0);
            m = Ws(a, e, f, d === Ds ? c : -c, (m.diameter + n.diameter) / 2 + h);
            c += d === Ds ? m : -m
        }
    }

    function Xs(a, b, c, d) {
        var e = a.Wd, f = a.Eg, h = a.iv;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++) {
            var m = b.da(l);
            m.ja = e * Math.cos(c);
            m.ra = f * Math.sin(c);
            m.actualAngle = 180 * c / Math.PI;
            m = Ws(a, e, f, d === Ds ? c : -c, h);
            c += d === Ds ? m : -m
        }
    }

    function $s(a, b, c, d, e) {
        var f = a.jv, f = a.qr;
        a.Qm = 0;
        a.Gw = new Cs;
        if (360 > c) {
            for (f = d + (e === Ds ? f : -f); 0 > f;)f += 360;
            f %= 360;
            180 < f && (f -= 360);
            f *= Math.PI / 180;
            a.jv = f;
            at(a, b, c, d, e)
        } else bt(a, b, c, d, e);
        a.Gw.commit(b)
    }

    function bt(a, b, c, d, e) {
        var f = a.Wd, h = a.$k, k = a.Do, l = f * Math.cos(d * Math.PI / 180), m = a.Eg * Math.sin(d * Math.PI / 180), n = b.dc();
        if (3 === n.length)n[0].ja = f, n[0].ra = 0, n[1].ja = n[0].ja - n[0].width / 2 - n[1].width / 2 - h, n[1].y = n[0].y, n[2].ja = (n[0].ja + n[1].ja) / 2, n[2].y = n[0].y - n[2].height - h; else if (4 === n.length)n[0].ja = f, n[0].ra = 0, n[2].ja = -n[0].ja, n[2].ra = n[0].ra, n[1].ja = 0, n[1].y = Math.min(n[0].y, n[2].y) - n[1].height - h, n[3].ja = 0, n[3].y = Math.max(n[0].y + n[0].height + h, n[2].y + n[2].height + h); else {
            for (var f = w.K(), p = 0; p < n.length; p++) {
                n[p].ja =
                    l;
                n[p].ra = m;
                if (p >= n.length - 1)break;
                ct(a, l, m, n, p, e, f) || dt(a, l, m, n, p, e, f);
                l = f.x;
                m = f.y
            }
            w.v(f);
            a.Qm++;
            if (!(23 < a.Qm)) {
                var l = n[0].ja, m = n[0].ra, f = n[n.length - 1].ja, p = n[n.length - 1].ra, q = Math.abs(l - f) - ((n[0].width + n[n.length - 1].width) / 2 + h), r = Math.abs(m - p) - ((n[0].height + n[n.length - 1].height) / 2 + h), h = 0;
                1 > Math.abs(r) ? Math.abs(l - f) < (n[0].width + n[n.length - 1].width) / 2 && (h = 0) : h = 0 < r ? r : 1 > Math.abs(q) ? 0 : q;
                q = !1;
                q = Math.abs(f) > Math.abs(p) ? 0 < f !== m > p : 0 < p !== l < f;
                if (q = e === Ds ? q : !q)h = -Math.abs(h), h = Math.min(h, -n[n.length - 1].width),
                    h = Math.min(h, -n[n.length - 1].height);
                a.Gw.compare(h, n);
                1 < Math.abs(h) && (a.Wd = 8 > a.Qm ? a.Wd - h / (2 * Math.PI) : 5 > n.length && 10 < h ? a.Wd / 2 : a.Wd - (0 < h ? 1.7 : -2.3), a.Eg = a.Wd * k, bt(a, b, c, d, e))
            }
        }
    }

    function at(a, b, c, d, e) {
        for (var f = a.Wd, h = a.Eg, k = a.Do, l = f * Math.cos(d * Math.PI / 180), m = h * Math.sin(d * Math.PI / 180), n = w.K(), p = b.dc(), q = 0; q < p.length; q++) {
            p[q].ja = l;
            p[q].ra = m;
            if (q >= p.length - 1)break;
            ct(a, l, m, p, q, e, n) || dt(a, l, m, p, q, e, n);
            l = n.x;
            m = n.y
        }
        w.v(n);
        a.Qm++;
        if (!(23 < a.Qm)) {
            l = Math.atan2(m, l);
            l = e === Ds ? a.jv - l : l - a.jv;
            l = Math.abs(l) < Math.abs(l - 2 * Math.PI) ? l : l - 2 * Math.PI;
            f = l * (f + h) / 2;
            h = a.Gw;
            if (Math.abs(f) < Math.abs(h.Wp))for (h.Wp = f, h.co = [], h.Aq = [], l = 0; l < p.length; l++)h.co[l] = p[l].jb.x, h.Aq[l] = p[l].jb.y;
            1 < Math.abs(f) &&
            (a.Wd = 8 > a.Qm ? a.Wd - f / (2 * Math.PI) : a.Wd - (0 < f ? 1.7 : -2.3), a.Eg = a.Wd * k, at(a, b, c, d, e))
        }
    }

    function ct(a, b, c, d, e, f, h) {
        var k = a.Wd, l = a.Eg, m = 0, n = 0;
        a = (d[e].width + d[e + 1].width) / 2 + a.$k;
        var p = !1;
        if (0 <= c !== (f === Ds)) {
            if (m = b + a, m > k) {
                m = b - a;
                if (m < -k)return h.x = m, h.y = n, !1;
                p = !0
            }
        } else if (m = b - a, m < -k) {
            m = b + a;
            if (m > k)return h.x = m, h.y = n, !1;
            p = !0
        }
        n = Math.sqrt(1 - Math.min(1, m * m / (k * k))) * l;
        0 > c !== p && (n = -n);
        if (Math.abs(c - n) > (d[e].height + d[e + 1].height) / 2)return h.x = m, h.y = n, !1;
        h.x = m;
        h.y = n;
        return !0
    }

    function dt(a, b, c, d, e, f, h) {
        var k = a.Wd, l = a.Eg, m = 0, n = 0;
        a = (d[e].height + d[e + 1].height) / 2 + a.$k;
        d = !1;
        if (0 <= b !== (f === Ds)) {
            if (n = c - a, n < -l) {
                n = c + a;
                if (n > l) {
                    h.x = m;
                    h.y = n;
                    return
                }
                d = !0
            }
        } else if (n = c + a, n > l) {
            n = c - a;
            if (n < -l) {
                h.x = m;
                h.y = n;
                return
            }
            d = !0
        }
        m = Math.sqrt(1 - Math.min(1, n * n / (l * l))) * k;
        0 > b !== d && (m = -m);
        h.x = m;
        h.y = n
    }

    As.prototype.commitLayout = function () {
        this.commitNodes();
        this.eu && this.commitLinks()
    };
    As.prototype.commitNodes = function () {
        for (var a = this.VG, b = this.network.vertexes.i; b.next();) {
            var c = b.value;
            c.x += a.x;
            c.y += a.y;
            c.commit()
        }
    };
    As.prototype.commitLinks = function () {
        for (var a = this.network.edges.i; a.next();)a.value.commit()
    };
    function Vs(a, b, c, d, e) {
        var f = a.MG;
        if (.001 > Math.abs(a.Do - 1))return void 0 !== d && void 0 !== e ? e * b : 2 * Math.PI * b;
        a = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c;
        for (var h = 0, k = 0, k = void 0 !== d && void 0 !== e ? e / (f + 1) : Math.PI / (2 * (f + 1)), l = 0, m = 0; m <= f; m++)l = void 0 !== d && void 0 !== e ? d + m * e / f : m * Math.PI / (2 * f), l = Math.sin(l), h += Math.sqrt(1 - a * a * l * l) * k;
        return void 0 !== d && void 0 !== e ? (b > c ? b : c) * h : 4 * (b > c ? b : c) * h
    }

    function Us(a, b, c, d, e) {
        var f = 0, f = void 0 !== d && void 0 !== e ? Vs(a, 1, c, d, e) : Vs(a, 1, c);
        return b / f
    }

    function Ws(a, b, c, d, e) {
        if (.001 > Math.abs(a.Do - 1))return e / b;
        var f = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c, h = 0;
        a = 2 * Math.PI / (700 * a.network.vertexes.count);
        b > c && (d += Math.PI / 2);
        for (var k = 0; ; k++) {
            var l = Math.sin(d + k * a), h = h + (b > c ? b : c) * Math.sqrt(1 - f * f * l * l) * a;
            if (h >= e)return k * a
        }
    }

    As.prototype.sort = function (a) {
        switch (this.sorting) {
            case Is:
                break;
            case Js:
                a.reverse();
                break;
            case Gs:
                a.sort(this.comparer);
                break;
            case Hs:
                a.sort(this.comparer);
                a.reverse();
                break;
            case Es:
                for (var b = [], c = 0; c < a.length; c++)b.push(0);
                for (var d = new I(Ss), c = 0; c < a.length; c++) {
                    var e = -1, f = -1;
                    if (0 === c)for (var h = 0; h < a.length; h++) {
                        var k = a.da(h).LH;
                        k > e && (e = k, f = h)
                    } else for (h = 0; h < a.length; h++)k = b[h], k > e && (e = k, f = h);
                    d.add(a.da(f));
                    b[f] = -1;
                    f = a.da(f);
                    e = 0;
                    for (h = f.kc; h.next();)e = a.indexOf(h.value.fromVertex), 0 > e || 0 <= b[e] &&
                    b[e]++;
                    for (f = f.hc; f.next();)e = a.indexOf(f.value.toVertex), 0 > e || 0 <= b[e] && b[e]++
                }
                a = [];
                for (f = 0; f < d.length; f++) {
                    b = d.da(f);
                    a[f] = [];
                    for (var l = 0, c = b.hc; c.next();)l = d.indexOf(c.value.toVertex), l !== f && 0 > a[f].indexOf(l) && a[f].push(l);
                    for (b = b.kc; b.next();)l = d.indexOf(b.value.fromVertex), l !== f && 0 > a[f].indexOf(l) && a[f].push(l)
                }
                h = [];
                for (f = 0; f < a.length; f++)h[f] = 0;
                for (var b = [], k = [], m = [], c = [], e = new I(Ss), n = 0, f = 0; f < a.length; f++) {
                    var p = a[f].length;
                    if (1 === p)c.push(f); else if (0 === p)e.add(d.da(f)); else {
                        if (0 === n)b.push(f);
                        else {
                            for (var q = Infinity, r = Infinity, s = -1, u = [], p = 0; p < b.length; p++)0 > a[b[p]].indexOf(b[p === b.length - 1 ? 0 : p + 1]) && u.push(p === b.length - 1 ? 0 : p + 1);
                            if (0 === u.length)for (p = 0; p < b.length; p++)u.push(p);
                            for (p = 0; p < u.length; p++) {
                                var t = u[p], x, l = a[f];
                                x = k;
                                for (var v = m, B = h, y = t, H = b, E = 0, V = 0; V < x.length; V++) {
                                    var ba = B[x[V]], Q = B[v[V]], $ = 0, ca = 0;
                                    ba < Q ? ($ = ba, ca = Q) : ($ = Q, ca = ba);
                                    if ($ < y && y <= ca)for (ba = 0; ba < l.length; ba++)Q = l[ba], 0 > H.indexOf(Q) || $ < B[Q] && B[Q] < ca || $ === B[Q] || ca === B[Q] || E++; else for (ba = 0; ba < l.length; ba++)Q = l[ba], 0 > H.indexOf(Q) ||
                                    $ < B[Q] && B[Q] < ca && $ !== B[Q] && ca !== B[Q] && E++
                                }
                                x = E;
                                for (B = v = 0; B < a[f].length; B++)l = b.indexOf(a[f][B]), 0 <= l && (l = Math.abs(t - (l >= t ? l + 1 : l)), v += l < b.length + 1 - l ? l : b.length + 1 - l);
                                for (B = 0; B < k.length; B++)l = h[k[B]], y = h[m[B]], l >= t && l++, y >= t && y++, l > y && (H = y, y = l, l = H), y - l < (b.length + 2) / 2 === (l < t && t <= y) && v++;
                                if (x < q || x === q && v < r)q = x, r = v, s = t
                            }
                            b.splice(s, 0, f);
                            for (p = 0; p < b.length; p++)h[b[p]] = p;
                            for (p = 0; p < a[f].length; p++)q = a[f][p], 0 <= b.indexOf(q) && (k.push(f), m.push(q))
                        }
                        n++
                    }
                }
                f = !1;
                for (h = b.length; ;) {
                    f = !0;
                    for (k = 0; k < c.length; k++)if (m = c[k],
                            n = a[m][0], l = b.indexOf(n), 0 <= l) {
                        for (r = p = 0; r < a[n].length; r++)q = a[n][r], q = b.indexOf(q), 0 > q || q === l || (s = q > l ? q - l : l - q, p += q < l !== s > h - s ? 1 : -1);
                        b.splice(0 > p ? l : l + 1, 0, m);
                        c.splice(k, 1);
                        k--
                    } else f = !1;
                    if (f)break; else b.push(c[0]), c.splice(0, 1)
                }
                for (f = 0; f < b.length; f++)e.add(d.da(b[f]));
                return e;
            default:
                w.k("Invalid sorting type.")
        }
        return a
    };
    w.defineProperty(As, {cJ: "radius"}, function () {
        return this.Ds
    }, function (a) {
        this.Ds !== a && (w.j(a, "number", As, "radius"), 0 < a || isNaN(a)) && (this.Ds = a, this.J())
    });
    w.defineProperty(As, {fH: "aspectRatio"}, function () {
        return this.Mq
    }, function (a) {
        this.Mq !== a && (w.j(a, "number", As, "aspectRatio"), 0 < a && (this.Mq = a, this.J()))
    });
    w.defineProperty(As, {ye: "startAngle"}, function () {
        return this.dt
    }, function (a) {
        this.dt !== a && (w.j(a, "number", As, "startAngle"), this.dt = a, this.J())
    });
    w.defineProperty(As, {of: "sweepAngle"}, function () {
        return this.gt
    }, function (a) {
        this.gt !== a && (w.j(a, "number", As, "sweepAngle"), this.gt = 0 < a && 360 >= a ? a : 360, this.J())
    });
    w.defineProperty(As, {Of: "arrangement"}, function () {
        return this.kd
    }, function (a) {
        this.kd !== a && (w.mb(a, As, As, "arrangement"), a === Ps || a === Bs || a === Os || a === Ns) && (this.kd = a, this.J())
    });
    w.defineProperty(As, {direction: "direction"}, function () {
        return this.aa
    }, function (a) {
        this.aa !== a && (w.mb(a, As, As, "direction"), a === Ds || a === Ms || a === Ks || a === Ls) && (this.aa = a, this.J())
    });
    w.defineProperty(As, {sorting: "sorting"}, function () {
        return this.$h
    }, function (a) {
        this.$h !== a && (w.mb(a, As, As, "sorting"), a === Is || a === Js || a === Gs || Hs || a === Es) && (this.$h = a, this.J())
    });
    w.defineProperty(As, {comparer: "comparer"}, function () {
        return this.Jh
    }, function (a) {
        this.Jh !== a && (w.j(a, "function", As, "comparer"), this.Jh = a, this.J())
    });
    w.defineProperty(As, {spacing: "spacing"}, function () {
        return this.ai
    }, function (a) {
        this.ai !== a && (w.j(a, "number", As, "spacing"), this.ai = a, this.J())
    });
    w.defineProperty(As, {Ix: "nodeDiameterFormula"}, function () {
        return this.ss
    }, function (a) {
        this.ss !== a && (w.mb(a, As, As, "nodeDiameterFormula"), a === Fs || a === Qs) && (this.ss = a, this.J())
    });
    w.u(As, {WG: "actualXRadius"}, function () {
        return this.Wd
    });
    w.u(As, {XG: "actualYRadius"}, function () {
        return this.Eg
    });
    w.u(As, {UJ: "actualSpacing"}, function () {
        return this.$k
    });
    w.u(As, {VG: "actualCenter"}, function () {
        return isNaN(this.oe.x) || isNaN(this.oe.y) ? new z(0, 0) : new z(this.oe.x + this.WG, this.oe.y + this.XG)
    });
    var Bs;
    As.ConstantSpacing = Bs = w.p(As, "ConstantSpacing", 0);
    var Os;
    As.ConstantDistance = Os = w.p(As, "ConstantDistance", 1);
    var Ns;
    As.ConstantAngle = Ns = w.p(As, "ConstantAngle", 2);
    var Ps;
    As.Packed = Ps = w.p(As, "Packed", 3);
    var Ds;
    As.Clockwise = Ds = w.p(As, "Clockwise", 4);
    var Ms;
    As.Counterclockwise = Ms = w.p(As, "Counterclockwise", 5);
    var Ks;
    As.BidirectionalLeft = Ks = w.p(As, "BidirectionalLeft", 6);
    var Ls;
    As.BidirectionalRight = Ls = w.p(As, "BidirectionalRight", 7);
    var Is;
    As.Forwards = Is = w.p(As, "Forwards", 8);
    var Js;
    As.Reverse = Js = w.p(As, "Reverse", 9);
    var Gs;
    As.Ascending = Gs = w.p(As, "Ascending", 10);
    var Hs;
    As.Descending = Hs = w.p(As, "Descending", 11);
    var Es;
    As.Optimized = Es = w.p(As, "Optimized", 12);
    var Fs;
    As.Pythagorean = Fs = w.p(As, "Pythagorean", 13);
    var Qs;
    As.Circular = Qs = w.p(As, "Circular", 14);
    function Cs() {
        this.Wp = -Infinity;
        this.Aq = this.co = null
    }

    Cs.prototype.compare = function (a, b) {
        if (0 < a && 0 > this.Wp || Math.abs(a) < Math.abs(this.Wp) && !(0 > a && 0 < this.Wp)) {
            this.Wp = a;
            this.co = [];
            this.Aq = [];
            for (var c = 0; c < b.length; c++)this.co[c] = b[c].jb.x, this.Aq[c] = b[c].jb.y
        }
    };
    Cs.prototype.commit = function (a) {
        if (null !== this.co && null !== this.Aq)for (var b = 0; b < this.co.length; b++) {
            var c = a.da(b);
            c.x = this.co[b];
            c.y = this.Aq[b]
        }
    };
    function Rs() {
        qg.call(this)
    }

    w.La(Rs, qg);
    w.fa("CircularNetwork", Rs);
    Rs.prototype.createVertex = function () {
        return new Ss
    };
    Rs.prototype.createEdge = function () {
        return new et
    };
    function Ss() {
        ks.call(this);
        this.actualAngle = this.diameter = NaN
    }

    w.La(Ss, ks);
    w.fa("CircularVertex", Ss);
    function Ts(a, b) {
        var c = a.network;
        if (null === c)return NaN;
        c = c.Rb;
        if (null === c)return NaN;
        if (c.Of === Ps)if (c.Ix === Qs)a.diameter = Math.max(a.width, a.height); else {
            var c = Math.abs(Math.sin(b)), d = Math.abs(Math.cos(b));
            if (0 === c)return a.width;
            if (0 === d)return a.height;
            a.diameter = Math.min(a.height / c, a.width / d)
        } else a.diameter = c.Ix === Qs ? Math.max(a.width, a.height) : Math.sqrt(a.width * a.width + a.height * a.height);
        return a.diameter
    }

    function et() {
        ls.call(this)
    }

    w.La(et, ls);
    w.fa("CircularEdge", et);
    function ft() {
        0 < arguments.length && w.hd(ft);
        pg.call(this);
        this.Dg = null;
        this.Sr = 0;
        this.hg = (new ha(100, 100)).freeze();
        this.Lq = !1;
        this.Zh = !0;
        this.Ih = !1;
        this.ap = 100;
        this.tr = 1;
        this.Oh = 1E3;
        this.Es = Math;
        this.zo = .05;
        this.yo = 50;
        this.wo = 150;
        this.xo = 0;
        this.ir = 10;
        this.hr = 5
    }

    w.La(ft, pg);
    w.fa("ForceDirectedLayout", ft);
    ft.prototype.cloneProtected = function (a) {
        pg.prototype.cloneProtected.call(this, a);
        a.hg.assign(this.hg);
        a.Lq = this.Lq;
        a.Zh = this.Zh;
        a.Ih = this.Ih;
        a.ap = this.ap;
        a.tr = this.tr;
        a.Oh = this.Oh;
        a.Es = this.Es;
        a.zo = this.zo;
        a.yo = this.yo;
        a.wo = this.wo;
        a.xo = this.xo;
        a.ir = this.ir;
        a.hr = this.hr
    };
    ft.prototype.createNetwork = function () {
        return new gt
    };
    ft.prototype.doLayout = function (a) {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        a = this.EA;
        if (0 < this.network.vertexes.count) {
            this.network.Zw();
            for (var b = this.network.vertexes.i; b.next();) {
                var c = b.value;
                c.charge = this.electricalCharge(c);
                c.mass = this.gravitationalMass(c)
            }
            for (b = this.network.edges.i; b.next();)c = b.value, c.stiffness = this.springStiffness(c), c.length = this.springLength(c);
            this.Nz();
            this.Sr = 0;
            if (this.needsClusterLayout()) {
                b = this.network;
                for (c = b.CJ().i; c.next();) {
                    this.network = c.value;
                    for (var d = this.network.vertexes.i; d.next();) {
                        var e = d.value;
                        e.eg = e.vertexes.count;
                        e.Gk = 1;
                        e.nn = null;
                        e.Dh = null
                    }
                    qt(this, 0, a)
                }
                this.network = b;
                c.reset();
                for (var d = this.iE, f = c.count, h = !0, k = e = 0, l = w.lb(), m = 0; m < f + b.vertexes.count + 2; m++)l[m] = null;
                f = 0;
                c.reset();
                for (var n = w.Df(); c.next();)if (m = c.value, this.sh(m, n), h)h = !1, e = n.x + n.width / 2, k = n.y + n.height / 2, l[0] = new z(n.x + n.width + d.width, n.y), l[1] = new z(n.x,
                    n.y + n.height + d.height), f = 2; else {
                    var p = Yt(l, f, e, k, n.width, n.height, d), q = l[p], r = new z(q.x + n.width + d.width, q.y), s = new z(q.x, q.y + n.height + d.height);
                    p + 1 < f && l.splice(p + 1, 0, null);
                    l[p] = r;
                    l[p + 1] = s;
                    f++;
                    p = q.x - n.x;
                    q = q.y - n.y;
                    for (m = m.vertexes.i; m.next();)r = m.value, r.ja += p, r.ra += q
                }
                w.Gb(n);
                for (m = b.vertexes.i; m.next();)h = m.value, n = h.jb, 2 > f ? (e = n.x + n.width / 2, k = n.y + n.height / 2, l[0] = new z(n.x + n.width + d.width, n.y), l[1] = new z(n.x, n.y + n.height + d.height), f = 2) : (p = Yt(l, f, e, k, n.width, n.height, d), q = l[p], r = new z(q.x + n.width + d.width,
                    q.y), s = new z(q.x, q.y + n.height + d.height), p + 1 < f && l.splice(p + 1, 0, null), l[p] = r, l[p + 1] = s, f++, h.ja = q.x + h.width / 2, h.ra = q.y + h.height / 2);
                w.va(l);
                for (c.reset(); c.next();) {
                    d = c.value;
                    for (e = d.vertexes.i; e.next();)b.Cl(e.value);
                    for (d = d.edges.i; d.next();)b.Dp(d.value)
                }
            }
            Zt(this, a);
            this.updateParts()
        }
        this.ap = a;
        this.network = null;
        this.yf = !0
    };
    ft.prototype.needsClusterLayout = function () {
        if (3 > this.network.vertexes.count)return !1;
        for (var a = 0, b = 0, c = this.network.vertexes.first().jb, d = this.network.vertexes.i; d.next();) {
            if (d.value.jb.Kg(c) && (a++, 2 < a))return !0;
            if (10 < b)break;
            b++
        }
        return !1
    };
    ft.prototype.sh = function (a, b) {
        for (var c = !0, d = a.vertexes.i; d.next();) {
            var e = d.value;
            c ? (c = !1, b.set(e.jb)) : b.Gh(e.jb)
        }
        return b
    };
    function qt(a, b, c) {
        if ($t(a, b)) {
            var d = a.Oh;
            a.Oh *= 1 + 1 / (b + 1);
            var e = au(a, b), f = Math.max(0, Math.max(Math.min(a.network.vertexes.count, c * (b + 1) / 11), 10));
            a.EA += f;
            qt(a, b + 1, c);
            Zt(a, f);
            bu(a, e);
            b = a.Dg;
            null === b ? b = new I(cu) : b.clear();
            b.Hc(e.vertexes);
            b.sort(function (a, b) {
                return null === a || null === b || a === b ? 0 : b.eg - a.eg
            });
            for (e = b.i; e.next();)du(a, e.value);
            a.Oh = d
        }
    }

    function $t(a, b) {
        if (10 < b || 3 > a.network.vertexes.count)return !1;
        null === a.Dg ? a.Dg = new I(cu) : a.Dg.clear();
        a.Dg.Hc(a.network.vertexes);
        var c = a.Dg;
        c.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : b.eg - a.eg
        });
        for (var d = c.count - 1; 0 <= d && 1 >= c.da(d).eg;)d--;
        return 1 < c.count - d
    }

    function au(a, b) {
        for (var c = a.network, d = new gt, e = a.Dg.i; e.next();) {
            var f = e.value;
            if (1 < f.eg) {
                d.Cl(f);
                var h = new eu;
                h.qy = f.eg;
                h.sy = f.width;
                h.py = f.height;
                h.BB = f.T.x;
                h.CB = f.T.y;
                null === f.Dh && (f.Dh = new I(eu));
                f.Dh.add(h);
                f.VA = f.Dh.count - 1
            } else break
        }
        for (var k = c.edges.i; k.next();)if (h = k.value, e = h.fromVertex, f = h.toVertex, e.network === d && f.network === d)d.Dp(h); else if (e.network === d) {
            var l = e.nn;
            null === l && (l = new I(cu), e.nn = l);
            l.add(f);
            e.eg--;
            e.Gk += f.Gk
        } else f.network === d && (l = f.nn, null === l && (l = new I(cu), f.nn = l),
            l.add(e), f.eg--, f.Gk += e.Gk);
        for (e = d.edges.i; e.next();)f = e.value, f.length *= Math.max(1, Wd((f.fromVertex.Gk + f.toVertex.Gk) / (4 * b + 1)));
        for (e = d.vertexes.i; e.next();)if (f = e.value, l = f.nn, null !== l && 0 < l.count && (h = f.Dh.da(f.Dh.count - 1), h = h.qy - f.eg, !(0 >= h))) {
            for (var m = 0, n = 0, p = l.count - h; p < l.count; p++) {
                for (var q = l.da(p), r = null, k = q.edges.i; k.next();) {
                    var s = k.value;
                    if (s.VH(q) === f) {
                        r = s;
                        break
                    }
                }
                null !== r && (n += r.length, m += q.width * q.height)
            }
            k = f.ja;
            l = f.ra;
            p = f.width;
            q = f.height;
            r = f.T;
            s = p * q;
            1 > s && (s = 1);
            m = Wd((m + s + n * n * 4 / (h * h)) /
                s);
            h = (m - 1) * p / 2;
            m = (m - 1) * q / 2;
            f.jb = new A(k - r.x - h, l - r.y - m, p + 2 * h, q + 2 * m);
            f.focus = new z(r.x + h, r.y + m)
        }
        a.network = d;
        return c
    }

    function bu(a, b) {
        for (var c = a.network.vertexes.i; c.next();) {
            var d = c.value;
            d.network = b;
            if (null !== d.Dh) {
                var e = d.Dh.da(d.VA);
                d.eg = e.qy;
                var f = e.BB, h = e.CB;
                d.jb = new A(d.ja - f, d.ra - h, e.sy, e.py);
                d.focus = new z(f, h);
                d.VA--
            }
        }
        for (c = a.network.edges.i; c.next();)c.value.network = b;
        a.network = b
    }

    function du(a, b) {
        var c = b.nn;
        if (null !== c && 0 !== c.count) {
            var d = b.ja, e = b.ra, f = b.width, h = b.height;
            null !== b.Dh && 0 < b.Dh.count && (h = b.Dh.da(0), f = h.sy, h = h.py);
            for (var f = Wd(f * f + h * h) / 2, k = !1, l = h = 0, m = 0, n = b.vertexes.i; n.next();) {
                var p = n.value;
                1 >= p.eg ? l++ : (k = !0, m++, h += Math.atan2(b.ra - p.ra, b.ja - p.ja))
            }
            if (0 !== l)for (0 < m && (h /= m), n = m = 0, m = k ? 2 * Math.PI / (l + 1) : 2 * Math.PI / l, 0 === l % 2 && (n = m / 2), 1 < c.count && c.sort(function (a, b) {
                return null === a || null === b || a === b ? 0 : b.width * b.height - a.width * a.height
            }), k = 0 === l % 2 ? 0 : 1, c = c.i; c.next();)if (l =
                    c.value, !(1 < l.eg || a.isFixed(l))) {
                for (var p = null, q = l.edges.i; q.next();) {
                    p = q.value;
                    break
                }
                var q = l.width, r = l.height, q = Wd(q * q + r * r) / 2, p = f + p.length + q, q = h + (m * (k / 2 >> 1) + n) * (0 === k % 2 ? 1 : -1);
                l.ja = d + p * Math.cos(q);
                l.ra = e + p * Math.sin(q);
                k++
            }
        }
    }

    function Yt(a, b, c, d, e, f, h) {
        var k = 9E19, l = -1, m = 0;
        a:for (; m < b; m++) {
            var n = a[m], p = n.x - c, q = n.y - d, p = p * p + q * q;
            if (p < k) {
                for (q = m - 1; 0 <= q; q--)if (a[q].y > n.y && a[q].x - n.x < e + h.width)continue a;
                for (q = m + 1; q < b; q++)if (a[q].x > n.x && a[q].y - n.y < f + h.height)continue a;
                l = m;
                k = p
            }
        }
        return l
    }

    ft.prototype.Nz = function () {
        if (this.comments)for (var a = this.network.vertexes.i; a.next();)this.addComments(a.value)
    };
    ft.prototype.addComments = function (a) {
        var b = a.Nc;
        if (null !== b)for (b = b.GE(); b.next();) {
            var c = b.value;
            if ("Comment" === c.rd && c.isVisible()) {
                var d = this.network.wn(c);
                null === d && (d = this.network.wt(c));
                d.charge = this.BH;
                for (var c = null, e = d.hc; e.next();) {
                    var f = e.value;
                    if (f.toVertex === a) {
                        c = f;
                        break
                    }
                }
                if (null === c)for (e = d.kc; e.next();)if (f = e.value, f.fromVertex === a) {
                    c = f;
                    break
                }
                null === c && (c = this.network.gq(a, d, null));
                c.length = this.CH
            }
        }
    };
    function fu(a, b) {
        var c = a.M, d = c.x, e = c.y, f = c.width, c = c.height, h = b.M, k = h.x, l = h.y, m = h.width, h = h.height;
        return d + f < k ? e > l + h ? (d = d + f - k, e = e - l - h, Wd(d * d + e * e)) : e + c < l ? (d = d + f - k, e = e + c - l, Wd(d * d + e * e)) : k - (d + f) : d > k + m ? e > l + h ? (d = d - k - m, e = e - l - h, Wd(d * d + e * e)) : e + c < l ? (d = d - k - m, e = e + c - l, Wd(d * d + e * e)) : d - (k + m) : e > l + h ? e - (l + h) : e + c < l ? l - (e + c) : .1
    }

    function Zt(a, b) {
        a.Dg = null;
        for (var c = a.Sr + b; a.Sr < c && (a.Sr++, gu(a)););
        a.Dg = null
    }

    function gu(a) {
        null === a.Dg && (a.Dg = new I(cu), a.Dg.Hc(a.network.vertexes));
        var b = a.Dg.n;
        if (0 >= b.length)return !1;
        var c = b[0];
        c.forceX = 0;
        c.forceY = 0;
        for (var d = c.ja, e = d, f = c.ra, h = f, c = 1; c < b.length; c++) {
            var k = b[c];
            k.forceX = 0;
            k.forceY = 0;
            var l = k.ja, k = k.ra, d = Math.min(d, l), e = Math.max(e, l), f = Math.min(f, k), h = Math.max(h, k)
        }
        (f = e - d > h - f) ? b.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : a.ja - b.ja
        }) : b.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : a.ra - b.ra
        });
        for (var h = a.Oh, m = 0, n = 0, p = 0, c = 0; c < b.length; c++) {
            var k =
                b[c], l = k.M, q = k.T, d = l.x + q.x, l = l.y + q.y, n = k.charge * a.electricalFieldX(d, l), p = k.charge * a.electricalFieldY(d, l), n = n + k.mass * a.gravitationalFieldX(d, l), p = p + k.mass * a.gravitationalFieldY(d, l);
            k.forceX += n;
            k.forceY += p;
            for (q = c + 1; q < b.length; q++)if (e = b[q], e !== k) {
                var r = e.M, n = e.T, p = r.x + n.x, r = r.y + n.y;
                if (d - p > h || p - d > h) {
                    if (f)break
                } else if (l - r > h || r - l > h) {
                    if (!f)break
                } else {
                    var s = fu(k, e);
                    1 > s ? (n = a.Rx, null === n && (a.Rx = n = new ta(0)), m = n.random(), s = n.random(), d > p ? (n = Math.abs(e.M.right - k.M.x), n = (1 + n) * m) : d < p ? (n = Math.abs(e.M.x - k.M.right),
                        n = -(1 + n) * m) : (n = Math.max(e.width, k.width), n = (1 + n) * m - n / 2), l > r ? (p = Math.abs(e.M.bottom - k.M.y), p = (1 + p) * s) : d < p ? (p = Math.abs(e.M.y - k.M.bottom), p = -(1 + p) * s) : (p = Math.max(e.height, k.height), p = (1 + p) * s - p / 2)) : (m = -(k.charge * e.charge) / (s * s), n = (p - d) / s * m, p = (r - l) / s * m);
                    k.forceX += n;
                    k.forceY += p;
                    e.forceX -= n;
                    e.forceY -= p
                }
            }
        }
        for (c = a.network.edges.i; c.next();)f = c.value, k = f.fromVertex, e = f.toVertex, l = k.M, q = k.T, d = l.x + q.x, l = l.y + q.y, r = e.M, n = e.T, p = r.x + n.x, r = r.y + n.y, s = fu(k, e), 1 > s ? (n = a.Rx, null === n && (a.Rx = n = new ta(0)), m = n.random(), s =
            n.random(), n = (d > p ? 1 : -1) * (1 + (e.width > k.width ? e.width : k.width)) * m, p = (l > r ? 1 : -1) * (1 + (e.height > k.height ? e.height : k.height)) * s) : (m = f.stiffness * (s - f.length), n = (p - d) / s * m, p = (r - l) / s * m), k.forceX += n, k.forceY += p, e.forceX -= n, e.forceY -= p;
        c = 0;
        d = Math.max(a.Oh / 20, 50);
        for (e = 0; e < b.length; e++)k = b[e], a.isFixed(k) ? a.moveFixedVertex(k) : (f = k.forceX, h = k.forceY, f < -d ? f = -d : f > d && (f = d), h < -d ? h = -d : h > d && (h = d), k.ja += f, k.ra += h, c = Math.max(c, f * f + h * h));
        return c > a.DE * a.DE
    }

    ft.prototype.moveFixedVertex = function () {
    };
    ft.prototype.commitLayout = function () {
        this.cB();
        this.commitNodes();
        this.eu && this.commitLinks()
    };
    ft.prototype.cB = function () {
        if (this.uq)for (var a = this.network.edges.i; a.next();) {
            var b = a.value.link;
            null !== b && (b.Ab = oc, b.Bb = oc)
        }
    };
    ft.prototype.commitNodes = function () {
        var a = 0, b = 0;
        if (this.eH) {
            var c = w.Df();
            this.sh(this.network, c);
            b = this.oe;
            a = b.x - c.x;
            b = b.y - c.y;
            w.Gb(c)
        }
        for (var c = w.Df(), d = this.network.vertexes.i; d.next();) {
            var e = d.value;
            if (0 !== a || 0 !== b)c.assign(e.jb), c.x += a, c.y += b, e.jb = c;
            e.commit()
        }
        w.Gb(c)
    };
    ft.prototype.commitLinks = function () {
        for (var a = this.network.edges.i; a.next();)a.value.commit()
    };
    ft.prototype.springStiffness = function (a) {
        a = a.stiffness;
        return isNaN(a) ? this.zo : a
    };
    ft.prototype.springLength = function (a) {
        a = a.length;
        return isNaN(a) ? this.yo : a
    };
    ft.prototype.electricalCharge = function (a) {
        a = a.charge;
        return isNaN(a) ? this.wo : a
    };
    ft.prototype.electricalFieldX = function () {
        return 0
    };
    ft.prototype.electricalFieldY = function () {
        return 0
    };
    ft.prototype.gravitationalMass = function (a) {
        a = a.mass;
        return isNaN(a) ? this.xo : a
    };
    ft.prototype.gravitationalFieldX = function () {
        return 0
    };
    ft.prototype.gravitationalFieldY = function () {
        return 0
    };
    ft.prototype.isFixed = function (a) {
        return a.isFixed
    };
    w.u(ft, {yK: "currentIteration"}, function () {
        return this.Sr
    });
    w.defineProperty(ft, {iE: "arrangementSpacing"}, function () {
        return this.hg
    }, function (a) {
        w.G(a, ha, ft, "arrangementSpacing");
        this.hg.L(a) || (this.hg.assign(a), this.J())
    });
    w.defineProperty(ft, {eH: "arrangesToOrigin"}, function () {
        return this.Lq
    }, function (a) {
        this.Lq !== a && (w.j(a, "boolean", ft, "arrangesToOrigin"), this.Lq = a, this.J())
    });
    w.defineProperty(ft, {uq: "setsPortSpots"}, function () {
        return this.Zh
    }, function (a) {
        this.Zh !== a && (w.j(a, "boolean", ft, "setsPortSpots"), this.Zh = a, this.J())
    });
    w.defineProperty(ft, {comments: "comments"}, function () {
        return this.Ih
    }, function (a) {
        this.Ih !== a && (w.j(a, "boolean", ft, "comments"), this.Ih = a, this.J())
    });
    w.defineProperty(ft, {EA: "maxIterations"}, function () {
        return this.ap
    }, function (a) {
        this.ap !== a && (w.j(a, "number", ft, "maxIterations"), 0 <= a && (this.ap = a, this.J()))
    });
    w.defineProperty(ft, {DE: "epsilonDistance"}, function () {
        return this.tr
    }, function (a) {
        this.tr !== a && (w.j(a, "number", ft, "epsilonDistance"), 0 < a && (this.tr = a, this.J()))
    });
    w.defineProperty(ft, {RK: "infinityDistance"}, function () {
        return this.Oh
    }, function (a) {
        this.Oh !== a && (w.j(a, "number", ft, "infinityDistance"), 1 < a && (this.Oh = a, this.J()))
    });
    w.defineProperty(ft, {Rx: "randomNumberGenerator"}, function () {
        return this.Es
    }, function (a) {
        this.Es !== a && (null !== a && "function" !== typeof a.random && w.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: ' + a), this.Es = a)
    });
    w.defineProperty(ft, {KK: "defaultSpringStiffness"}, function () {
        return this.zo
    }, function (a) {
        this.zo !== a && (w.j(a, "number", ft, "defaultSpringStiffness"), this.zo = a, this.J())
    });
    w.defineProperty(ft, {JK: "defaultSpringLength"}, function () {
        return this.yo
    }, function (a) {
        this.yo !== a && (w.j(a, "number", ft, "defaultSpringLength"), this.yo = a, this.J())
    });
    w.defineProperty(ft, {DK: "defaultElectricalCharge"}, function () {
        return this.wo
    }, function (a) {
        this.wo !== a && (w.j(a, "number", ft, "defaultElectricalCharge"), this.wo = a, this.J())
    });
    w.defineProperty(ft, {EK: "defaultGravitationalMass"}, function () {
        return this.xo
    }, function (a) {
        this.xo !== a && (w.j(a, "number", ft, "defaultGravitationalMass"), this.xo = a, this.J())
    });
    w.defineProperty(ft, {CH: "defaultCommentSpringLength"}, function () {
        return this.ir
    }, function (a) {
        this.ir !== a && (w.j(a, "number", ft, "defaultCommentSpringLength"), this.ir = a, this.J())
    });
    w.defineProperty(ft, {BH: "defaultCommentElectricalCharge"}, function () {
        return this.hr
    }, function (a) {
        this.hr !== a && (w.j(a, "number", ft, "defaultCommentElectricalCharge"), this.hr = a, this.J())
    });
    function eu() {
        this.CB = this.BB = this.py = this.sy = this.qy = 0
    }

    function gt() {
        qg.call(this)
    }

    w.La(gt, qg);
    w.fa("ForceDirectedNetwork", gt);
    gt.prototype.createVertex = function () {
        return new cu
    };
    gt.prototype.createEdge = function () {
        return new hu
    };
    function cu() {
        ks.call(this);
        this.isFixed = !1;
        this.mass = this.charge = NaN;
        this.Gk = this.eg = this.forceY = this.forceX = 0;
        this.Dh = this.nn = null;
        this.VA = 0
    }

    w.La(cu, ks);
    w.fa("ForceDirectedVertex", cu);
    function hu() {
        ls.call(this);
        this.length = this.stiffness = NaN
    }

    w.La(hu, ls);
    w.fa("ForceDirectedEdge", hu);
    function iu() {
        0 < arguments.length && w.hd(iu);
        pg.call(this);
        this.Ud = this.Hm = 25;
        this.aa = 0;
        this.vo = ju;
        this.Xo = ku;
        this.Mo = lu;
        this.Fm = 4;
        this.io = mu;
        this.Yi = nu;
        this.Zh = !0;
        this.Xr = 4;
        this.Jb = this.Vv = this.pb = -1;
        this.Kf = this.fs = 0;
        this.Nb = this.If = this.Jf = this.tg = this.he = null;
        this.os = 0;
        this.ns = this.Mm = null;
        this.xg = 0;
        this.ps = null;
        this.OB = new z;
        this.hh = [];
        this.hh.length = 100
    }

    w.La(iu, pg);
    w.fa("LayeredDigraphLayout", iu);
    iu.prototype.cloneProtected = function (a) {
        pg.prototype.cloneProtected.call(this, a);
        a.Hm = this.Hm;
        a.Ud = this.Ud;
        a.aa = this.aa;
        a.vo = this.vo;
        a.Xo = this.Xo;
        a.Mo = this.Mo;
        a.Fm = this.Fm;
        a.io = this.io;
        a.Yi = this.Yi;
        a.Zh = this.Zh;
        a.Xr = this.Xr
    };
    iu.prototype.fc = function (a) {
        a.De === iu ? 0 === a.name.indexOf("Aggressive") ? this.cH = a : 0 === a.name.indexOf("Cycle") ? this.AH = a : 0 === a.name.indexOf("Init") ? this.mI = a : 0 === a.name.indexOf("Layer") ? this.zI = a : w.k("Unknown enum value: " + a) : pg.prototype.fc.call(this, a)
    };
    iu.prototype.createNetwork = function () {
        return new ou
    };
    iu.prototype.doLayout = function (a) {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.oe = this.initialOrigin(this.oe);
        this.Vv = -1;
        this.Kf = this.fs = 0;
        this.ps = this.ns = this.Mm = null;
        for (a = 0; a < this.hh.length; a++)this.hh[a] = null;
        if (0 < this.network.vertexes.count) {
            this.network.Zw();
            for (a = this.network.edges.i; a.next();)a.value.rev = !1;
            switch (this.vo) {
                default:
                case pu:
                    a = this.network;
                    var b =
                        0, c = a.vertexes.count - 1, d = [];
                    d.length = c + 1;
                    for (var e = a.vertexes.i; e.next();)e.value.valid = !0;
                    for (; null !== qu(a);) {
                        for (e = ru(a); null !== e;)d[c] = e, c--, e.valid = !1, e = ru(a);
                        for (e = su(a); null !== e;)d[b] = e, b++, e.valid = !1, e = su(a);
                        for (var e = null, f = 0, h = this.network.vertexes.i; h.next();) {
                            var k = h.value;
                            if (k.valid) {
                                for (var l = 0, m = k.hc; m.next();)m.value.toVertex.valid && l++;
                                for (var m = 0, n = k.kc; n.next();)n.value.fromVertex.valid && m++;
                                if (null === e || f < l - m)e = k, f = l - m
                            }
                        }
                        null !== e && (d[b] = e, b++, e.valid = !1)
                    }
                    for (b = 0; b < a.vertexes.count; b++)d[b].index =
                        b;
                    for (d = a.edges.i; d.next();)b = d.value, b.fromVertex.index > b.toVertex.index && (a.Yx(b), b.rev = !0);
                    break;
                case ju:
                    for (d = this.network.vertexes.i; d.next();)a = d.value, a.Rp = -1, a.finish = -1;
                    for (a = this.network.edges.i; a.next();)a.value.forest = !1;
                    this.os = 0;
                    for (d.reset(); d.next();)b = d.value, 0 === b.kc.count && tu(this, b);
                    for (d.reset(); d.next();)b = d.value, -1 === b.Rp && tu(this, b);
                    for (a.reset(); a.next();)d = a.value, d.forest || (b = d.fromVertex, c = b.finish, e = d.toVertex, f = e.finish, e.Rp < b.Rp && c < f && (this.network.Yx(d), d.rev = !0))
            }
            for (a =
                     this.network.vertexes.i; a.next();)a.value.layer = -1;
            this.pb = -1;
            this.assignLayers();
            for (a.reset(); a.next();)this.pb = Math.max(this.pb, a.value.layer);
            a = this.network;
            d = [];
            for (c = a.edges.i; c.next();)b = c.value, b.valid = !1, d.push(b);
            for (c = 0; c < d.length; c++)if (b = d[c], f = b.fromVertex, e = b.toVertex, !b.valid && (null !== f.pd && null !== e.pd || f.layer !== e.layer)) {
                m = k = l = h = 0;
                if (null !== b.link) {
                    l = b.link;
                    if (null === l)continue;
                    var p = f.pd, h = e.pd;
                    if (null === p || null === h)continue;
                    var q = l.W, k = l.$, r = l.ed, m = l.Sd;
                    b.rev && (l = q, n = r, q = k, r = m,
                        k = l, m = n);
                    var s = f.T, l = e.T, u = b.rev ? e.M : f.M, n = w.K();
                    u.H() ? (ar(q, r, Fb, n), n.H() || n.assign(s)) : n.assign(s);
                    p !== q && u.H() && q.isVisible() && (p = f.M, p.H() && (n.x += u.x - p.x, n.y += u.y - p.y));
                    q = b.rev ? f.M : e.M;
                    p = w.K();
                    q.H() ? (ar(k, m, Fb, p), p.H() || p.assign(l)) : p.assign(l);
                    h !== k && q.H() && k.isVisible() && (h = e.M, h.H() && (p.x += q.x - h.x, p.y += q.y - h.y));
                    90 === this.aa || 270 === this.aa ? (h = Math.round((n.x - s.x) / this.Ud), k = n.x, l = Math.round((p.x - l.x) / this.Ud), m = p.x) : (h = Math.round((n.y - s.y) / this.Ud), k = n.y, l = Math.round((p.y - l.y) / this.Ud), m = p.y);
                    w.v(n);
                    w.v(p);
                    b.portFromColOffset = h;
                    b.portFromPos = k;
                    b.portToColOffset = l;
                    b.portToPos = m
                } else b.portFromColOffset = 0, b.portFromPos = 0, b.portToColOffset = 0, b.portToPos = 0;
                n = f.layer;
                s = e.layer;
                a:if (p = b, q = 0, u = p.link, null !== u) {
                    var t = u.ed, x = u.Sd;
                    if (null !== t && null !== x) {
                        var v = u.W, r = u.$;
                        if (null !== v && null !== r) {
                            var B = t.Ab, y = x.Bb;
                            this.uq || (u.Ab.Uc() || (B = u.Ab), u.Bb.Uc() || (y = u.Bb));
                            var H = u.ic, E = uu(this, !0);
                            if (B.Uc() || B === sb)B = E;
                            var V = uu(this, !1);
                            if (y.Uc() || y === sb)y = V;
                            if (B.sj() && B.qj(V) && y.sj() && y.qj(E)) {
                                q = 0;
                                break a
                            }
                            E =
                                u.getLinkPoint(v, t, B, !0, H, r, x, w.K());
                            B = u.getLinkDirection(v, t, E, B, !0, H, r, x);
                            w.v(E);
                            B === vu(this, p, !0) ? q += 1 : this.uq && null !== v && 1 === v.ports.count && p.rev && (q += 1);
                            B = u.getLinkPoint(r, x, y, !1, H, v, t, w.K());
                            u = u.getLinkDirection(r, x, B, y, !1, H, v, t);
                            w.v(B);
                            u === vu(this, p, !1) ? q += 2 : this.uq && null !== r && 1 === r.ports.count && p.rev && (q += 2)
                        }
                    }
                }
                p = 1 === q || 3 === q ? !0 : !1;
                if (q = 2 === q || 3 === q ? !0 : !1)r = a.createVertex(), r.pd = null, r.kn = 1, r.layer = n, r.near = f, a.Cl(r), f = a.gq(f, r, b.link), f.valid = !1, f.rev = b.rev, f.portFromColOffset = h, f.portToColOffset =
                    0, f.portFromPos = k, f.portToPos = 0, f = r;
                u = 1;
                p && u--;
                if (n - s > u && 0 < n) {
                    b.valid = !1;
                    r = a.createVertex();
                    r.pd = null;
                    r.kn = 2;
                    r.layer = n - 1;
                    a.Cl(r);
                    f = a.gq(f, r, b.link);
                    f.valid = !0;
                    f.rev = b.rev;
                    f.portFromColOffset = q ? 0 : h;
                    f.portToColOffset = 0;
                    f.portFromPos = q ? 0 : k;
                    f.portToPos = 0;
                    f = r;
                    for (n--; n - s > u && 0 < n;)r = a.createVertex(), r.pd = null, r.kn = 3, r.layer = n - 1, a.Cl(r), f = a.gq(f, r, b.link), f.valid = !0, f.rev = b.rev, f.portFromColOffset = 0, f.portToColOffset = 0, f.portFromPos = 0, f.portToPos = 0, f = r, n--;
                    f = a.gq(r, e, b.link);
                    f.valid = !p;
                    p && (r.near = e);
                    f.rev =
                        b.rev;
                    f.portFromColOffset = 0;
                    f.portToColOffset = l;
                    f.portFromPos = 0;
                    f.portToPos = m
                } else b.valid = !0
            }
            d = this.he = [];
            for (b = 0; b <= this.pb; b++)d[b] = 0;
            for (a = this.network.vertexes.i; a.next();)a.value.index = -1;
            this.initializeIndices();
            this.Vv = -1;
            for (b = this.Kf = this.fs = 0; b <= this.pb; b++)d[b] > d[this.Kf] && (this.Vv = d[b] - 1, this.Kf = b), d[b] < d[this.fs] && (this.fs = b);
            this.ps = [];
            for (b = 0; b < d.length; b++)this.ps[b] = [];
            for (a.reset(); a.next();)d = a.value, this.ps[d.layer][d.index] = d;
            this.Jb = -1;
            for (a = 0; a <= this.pb; a++) {
                d = wu(this, a);
                b =
                    0;
                c = this.he[a];
                for (e = 0; e < c; e++)f = d[e], b += this.nodeMinColumnSpace(f, !0), f.column = b, b += 1, b += this.nodeMinColumnSpace(f, !1);
                this.Jb = Math.max(this.Jb, b - 1);
                xu(this, a, d)
            }
            this.reduceCrossings();
            this.straightenAndPack();
            this.updateParts()
        }
        this.network = null;
        this.yf = !0
    };
    iu.prototype.linkMinLength = function () {
        return 1
    };
    function yu(a) {
        var b = a.fromVertex.pd;
        a = a.toVertex.pd;
        return null === b && null === a ? 8 : null === b || null === a ? 4 : 1
    }

    iu.prototype.nodeMinLayerSpace = function (a, b) {
        return null === a.pd ? 0 : 90 === this.aa || 270 === this.aa ? b ? a.T.y + 10 : a.M.height - a.T.y + 10 : b ? a.T.x + 10 : a.M.width - a.T.x + 10
    };
    iu.prototype.nodeMinColumnSpace = function (a, b) {
        if (null === a.pd)return 0;
        var c = b ? a.LA : a.KA;
        if (null !== c)return c;
        c = this.aa;
        return 90 === c || 270 === c ? b ? a.LA = a.T.x / this.Ud + 1 | 0 : a.KA = (a.M.width - a.T.x) / this.Ud + 1 | 0 : b ? a.LA = a.T.y / this.Ud + 1 | 0 : a.KA = (a.M.height - a.T.y) / this.Ud + 1 | 0
    };
    function zu(a) {
        null === a.Mm && (a.Mm = []);
        for (var b = 0, c = a.network.vertexes.i; c.next();) {
            var d = c.value;
            a.Mm[b] = d.layer;
            b++;
            a.Mm[b] = d.column;
            b++;
            a.Mm[b] = d.index;
            b++
        }
        return a.Mm
    }

    function Au(a, b) {
        for (var c = 0, d = a.network.vertexes.i; d.next();) {
            var e = d.value;
            e.layer = b[c];
            c++;
            e.column = b[c];
            c++;
            e.index = b[c];
            c++
        }
    }

    function Bu(a, b, c) {
        var d = wu(a, b), e = a.he[b];
        if (null === a.ns || a.ns.length < e * e)a.ns = [];
        for (var f = a.ns, h = 0; h < e; h++) {
            var k = 0, l = d[h], m = l.near, n = 0;
            if (null !== m && m.layer === l.layer)if (n = m.index, n > h)for (var p = h + 1; p < n; p++)l = d[p], l.near === m && l.kn === m.kn || k++; else for (p = h - 1; p > n; p--)l = d[p], l.near === m && l.kn === m.kn || k++;
            var m = 0, q, r = q = p = l = 0, s, u = 0, t = 0;
            s = 0;
            var x;
            if (0 <= c)for (n = d[h].Oe, m = 0; m < n.count; m++)if (q = n.n[m], q.valid && q.fromVertex.layer !== b)for (l = q.fromVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++)s =
                n.n[r], s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, t = s.portToPos, s = s.portFromPos, p < t && (l > u || l === u && q > s) && k++, t < p && (u > l || u === l && s > q) && k++);
            if (0 >= c)for (n = d[h].He, m = 0; m < n.count; m++)if (q = n.n[m], q.valid && q.toVertex.layer !== b)for (l = q.toVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++)s = n.n[r], s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, s = s.portFromPos, q < s && (l > u || l === u && p > t) && k++, s < q && (u > l || u === l && t > p) && k++);
            f[h * e + h] = k;
            for (n = h + 1; n < e; n++) {
                var v = 0, B = 0;
                if (0 <= c)for (k =
                                    d[h].Oe, x = d[n].Oe, m = 0; m < k.count; m++)if (q = k.n[m], q.valid && q.fromVertex.layer !== b)for (l = q.fromVertex.index, q = q.portFromPos, r = 0; r < x.count; r++)s = x.n[r], s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, s = s.portFromPos, (l < u || l === u && q < s) && B++, (u < l || u === l && s < q) && v++);
                if (0 >= c)for (k = d[h].He, x = d[n].He, m = 0; m < k.count; m++)if (q = k.n[m], q.valid && q.toVertex.layer !== b)for (l = q.toVertex.index, p = q.portToPos, r = 0; r < x.count; r++)s = x.n[r], s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, (l < u || l === u && p <
                t) && B++, (u < l || u === l && t < p) && v++);
                f[h * e + n] = v;
                f[n * e + h] = B
            }
        }
        xu(a, b, d);
        return f
    }

    iu.prototype.countCrossings = function () {
        for (var a = 0, b = 0; b <= this.pb; b++)for (var c = Bu(this, b, 1), d = this.he[b], e = 0; e < d; e++)for (var f = e; f < d; f++)a += c[e * d + f];
        return a
    };
    function Cu(a) {
        for (var b = 0, c = 0; c <= a.pb; c++) {
            for (var d = a, e = c, f = wu(d, e), h = d.he[e], k = 0, l = 0; l < h; l++) {
                var m = null, m = f[l].He, n, p = 0, q = 0;
                if (null !== m)for (var r = 0; r < m.count; r++)n = m.n[r], n.valid && n.toVertex.layer !== e && (p = n.fromVertex.column + n.portFromColOffset, q = n.toVertex.column + n.portToColOffset, k += (Math.abs(p - q) + 1) * yu(n))
            }
            xu(d, e, f);
            b += k
        }
        return b
    }

    iu.prototype.normalize = function () {
        var a = Infinity;
        this.Jb = -1;
        for (var b = this.network.vertexes.i; b.next();) {
            var c = b.value, a = Math.min(a, c.column - this.nodeMinColumnSpace(c, !0));
            this.Jb = Math.max(this.Jb, c.column + this.nodeMinColumnSpace(c, !1))
        }
        for (b.reset(); b.next();)b.value.column -= a;
        this.Jb -= a
    };
    function Du(a, b, c) {
        for (var d = wu(a, b), e = a.he[b], f = [], h = 0; h < e; h++) {
            var k = d[h], l = null;
            0 >= c && (l = k.Oe);
            var m = null;
            0 <= c && (m = k.He);
            var n = 0, p = 0, q = k.near;
            null !== q && q.layer === k.layer && (n += q.column - 1, p++);
            if (null !== l)for (q = 0; q < l.count; q++) {
                var k = l.n[q], r = k.fromVertex;
                k.valid && !k.rev && r.layer !== b && (n += r.column, p++)
            }
            if (null !== m)for (l = 0; l < m.count; l++)k = m.n[l], q = k.toVertex, k.valid && !k.rev && q.layer !== b && (n += q.column, p++);
            f[h] = 0 === p ? -1 : n / p
        }
        xu(a, b, d);
        return f
    }

    function Eu(a, b, c) {
        for (var d = wu(a, b), e = a.he[b], f = [], h = 0; h < e; h++) {
            var k = d[h], l = null;
            0 >= c && (l = k.Oe);
            var m = null;
            0 <= c && (m = k.He);
            var n = 0, p = [], q = k.near;
            null !== q && q.layer === k.layer && (p[n] = q.column - 1, n++);
            if (null !== l)for (q = 0; q < l.count; q++) {
                var k = l.n[q], r = k.fromVertex;
                k.valid && !k.rev && r.layer !== b && (p[n] = r.column + k.portFromColOffset, n++)
            }
            if (null !== m)for (l = 0; l < m.count; l++)k = m.n[l], q = k.toVertex, k.valid && !k.rev && q.layer !== b && (p[n] = q.column + k.portToColOffset, n++);
            0 === n ? f[h] = -1 : (p.sort(function (a, b) {
                return a - b
            }),
                m = n >> 1, f[h] = 0 !== (n & 1) ? p[m] : p[m - 1] + p[m] >> 1)
        }
        xu(a, b, d);
        return f
    }

    function Fu(a, b, c, d, e, f) {
        if (b.component === d) {
            b.component = c;
            var h = 0, k = 0;
            if (e)for (var l = b.hc; l.next();) {
                var k = l.value, m = k.toVertex, h = b.layer - m.layer, k = a.linkMinLength(k);
                h === k && Fu(a, m, c, d, e, f)
            }
            if (f)for (l = b.kc; l.next();)k = l.value, m = k.fromVertex, h = m.layer - b.layer, k = a.linkMinLength(k), h === k && Fu(a, m, c, d, e, f)
        }
    }

    function Gu(a, b, c, d, e, f) {
        if (b.component === d) {
            b.component = c;
            if (e)for (var h = b.hc; h.next();)Gu(a, h.value.toVertex, c, d, e, f);
            if (f)for (b = b.kc; b.next();)Gu(a, b.value.fromVertex, c, d, e, f)
        }
    }

    function qu(a) {
        for (a = a.vertexes.i; a.next();) {
            var b = a.value;
            if (b.valid)return b
        }
        return null
    }

    function ru(a) {
        for (a = a.vertexes.i; a.next();) {
            var b = a.value;
            if (b.valid) {
                for (var c = !0, d = b.hc; d.next();)if (d.value.toVertex.valid) {
                    c = !1;
                    break
                }
                if (c)return b
            }
        }
        return null
    }

    function su(a) {
        for (a = a.vertexes.i; a.next();) {
            var b = a.value;
            if (b.valid) {
                for (var c = !0, d = b.kc; d.next();)if (d.value.fromVertex.valid) {
                    c = !1;
                    break
                }
                if (c)return b
            }
        }
        return null
    }

    function tu(a, b) {
        b.Rp = a.os;
        a.os++;
        for (var c = b.hc; c.next();) {
            var d = c.value, e = d.toVertex;
            -1 === e.Rp && (d.forest = !0, tu(a, e))
        }
        b.finish = a.os;
        a.os++
    }

    iu.prototype.assignLayers = function () {
        switch (this.Xo) {
            case Hu:
                Iu(this);
                break;
            case Ju:
                for (var a = 0, b = this.network.vertexes.i; b.next();)a = Ku(this, b.value), this.pb = Math.max(a, this.pb);
                for (b.reset(); b.next();)a = b.value, a.layer = this.pb - a.layer;
                break;
            default:
            case ku:
                Iu(this);
                for (b = this.network.vertexes.i; b.next();)b.value.valid = !1;
                for (b.reset(); b.next();)a = b.value, 0 === a.kc.count && Lu(this, a);
                a = Infinity;
                for (b.reset(); b.next();)a = Math.min(a, b.value.layer);
                this.pb = -1;
                for (b.reset(); b.next();) {
                    var c = b.value;
                    c.layer -=
                        a;
                    this.pb = Math.max(this.pb, c.layer)
                }
        }
    };
    function Iu(a) {
        for (var b = a.network.vertexes.i; b.next();) {
            var c = Mu(a, b.value);
            a.pb = Math.max(c, a.pb)
        }
    }

    function Mu(a, b) {
        var c = 0;
        if (-1 === b.layer) {
            for (var d = b.hc; d.next();)var e = d.value, f = e.toVertex, e = a.linkMinLength(e), c = Math.max(c, Mu(a, f) + e);
            b.layer = c
        } else c = b.layer;
        return c
    }

    function Ku(a, b) {
        var c = 0;
        if (-1 === b.layer) {
            for (var d = b.kc; d.next();)var e = d.value, f = e.fromVertex, e = a.linkMinLength(e), c = Math.max(c, Ku(a, f) + e);
            b.layer = c
        } else c = b.layer;
        return c
    }

    function Lu(a, b) {
        if (!b.valid) {
            b.valid = !0;
            for (var c = b.hc; c.next();)Lu(a, c.value.toVertex);
            for (c = a.network.vertexes.i; c.next();)c.value.component = -1;
            for (var d = b.Oe.n, e = d.length, f = 0; f < e; f++) {
                var h = d[f], k = h.fromVertex, l = h.toVertex, h = a.linkMinLength(h);
                k.layer - l.layer > h && Fu(a, k, 0, -1, !0, !1)
            }
            for (Fu(a, b, 1, -1, !0, !0); 0 !== b.component;) {
                for (var k = 0, d = Infinity, l = 0, m = null, n = a.network.vertexes.i; n.next();) {
                    var p = n.value;
                    if (1 === p.component) {
                        for (var q = 0, r = !1, s = p.Oe.n, e = s.length, f = 0; f < e; f++) {
                            var h = s[f], u = h.fromVertex,
                                q = q + 1;
                            1 !== u.component && (k += 1, u = u.layer - p.layer, h = a.linkMinLength(h), d = Math.min(d, u - h))
                        }
                        h = p.He.n;
                        e = h.length;
                        for (f = 0; f < e; f++)s = h[f].toVertex, q -= 1, 1 !== s.component ? k -= 1 : r = !0;
                        (null === m || q < l) && !r && (m = p, l = q)
                    }
                }
                if (0 < k) {
                    for (c.reset(); c.next();)e = c.value, 1 === e.component && (e.layer += d);
                    b.component = 0
                } else m.component = 0
            }
            for (c = a.network.vertexes.i; c.next();)c.value.component = -1;
            for (Fu(a, b, 1, -1, !0, !1); 0 !== b.component;) {
                f = 0;
                e = Infinity;
                d = 0;
                h = null;
                for (k = a.network.vertexes.i; k.next();)if (l = k.value, 1 === l.component) {
                    m =
                        0;
                    n = !1;
                    r = l.Oe.n;
                    p = r.length;
                    for (q = 0; q < p; q++)s = r[q].fromVertex, m += 1, 1 !== s.component ? f += 1 : n = !0;
                    r = l.He.n;
                    p = r.length;
                    for (q = 0; q < p; q++)s = r[q], u = s.toVertex, m -= 1, 1 !== u.component && (f -= 1, u = l.layer - u.layer, s = a.linkMinLength(s), e = Math.min(e, u - s));
                    (null === h || m > d) && !n && (h = l, d = m)
                }
                if (0 > f) {
                    for (c.reset(); c.next();)f = c.value, 1 === f.component && (f.layer -= e);
                    b.component = 0
                } else h.component = 0
            }
        }
    }

    function vu(a, b, c) {
        return 90 === a.aa ? c && !b.rev || !c && b.rev ? 270 : 90 : 180 === a.aa ? c && !b.rev || !c && b.rev ? 0 : 180 : 270 === a.aa ? c && !b.rev || !c && b.rev ? 90 : 270 : c && !b.rev || !c && b.rev ? 180 : 0
    }

    iu.prototype.initializeIndices = function () {
        switch (this.Mo) {
            default:
            case Nu:
                for (var a = this.network.vertexes.i; a.next();) {
                    var b = a.value, c = b.layer;
                    b.index = this.he[c];
                    this.he[c]++
                }
                break;
            case lu:
                a = this.network.vertexes.i;
                for (b = this.pb; 0 <= b; b--)for (a.reset(); a.next();)c = a.value, c.layer === b && -1 === c.index && Ou(this, c);
                break;
            case Pu:
                for (a = this.network.vertexes.i, b = 0; b <= this.pb; b++)for (a.reset(); a.next();)c = a.value, c.layer === b && -1 === c.index && Qu(this, c)
        }
    };
    function Ou(a, b) {
        var c = b.layer;
        b.index = a.he[c];
        a.he[c]++;
        for (var c = b.He.dc(), d = !0; d;)for (var d = !1, e = 0; e < c.length - 1; e++) {
            var f = c[e], h = c[e + 1];
            f.portFromColOffset > h.portFromColOffset && (d = !0, c[e] = h, c[e + 1] = f)
        }
        for (e = 0; e < c.length; e++)d = c[e], d.valid && (d = d.toVertex, -1 === d.index && Ou(a, d))
    }

    function Qu(a, b) {
        var c = b.layer;
        b.index = a.he[c];
        a.he[c]++;
        for (var c = b.Oe.dc(), d = !0, e = 0; d;)for (d = !1, e = 0; e < c.length - 1; e++) {
            var f = c[e], h = c[e + 1];
            f.portToColOffset > h.portToColOffset && (d = !0, c[e] = h, c[e + 1] = f)
        }
        for (e = 0; e < c.length; e++)d = c[e], d.valid && (d = d.fromVertex, -1 === d.index && Qu(a, d))
    }

    iu.prototype.reduceCrossings = function () {
        for (var a = this.countCrossings(), b = zu(this), c = 0, d = 0, e = 0, c = 0; c < this.Fm; c++) {
            for (d = 0; d <= this.pb; d++)Ru(this, d, 1), Su(this, d, 1);
            e = this.countCrossings();
            e < a && (a = e, b = zu(this));
            for (d = this.pb; 0 <= d; d--)Ru(this, d, -1), Su(this, d, -1);
            e = this.countCrossings();
            e < a && (a = e, b = zu(this))
        }
        Au(this, b);
        for (c = 0; c < this.Fm; c++) {
            for (d = 0; d <= this.pb; d++)Ru(this, d, 0), Su(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = zu(this));
            for (d = this.pb; 0 <= d; d--)Ru(this, d, 0), Su(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = zu(this))
        }
        Au(this, b);
        var f = !1, h = c = 0, k = 0, d = 0;
        switch (this.io) {
            case Tu:
                break;
            case Uu:
                for (k = a + 1; (d = this.countCrossings()) < k;)for (k = d, c = this.pb; 0 <= c; c--)for (h = 0; h <= c; h++) {
                    for (f = !0; f;)for (f = !1, d = c; d >= h; d--)f = Su(this, d, -1) || f;
                    e = this.countCrossings();
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = c; d >= h; d--)f = Su(this, d, 1) || f;
                    e = this.countCrossings();
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = h; d <= c; d++)f = Su(this, d, 1) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1,
                                             d = h; d <= c; d++)f = Su(this, d, -1) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = c; d >= h; d--)f = Su(this, d, 0) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = h; d <= c; d++)f = Su(this, d, 0) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this))
                }
                break;
            default:
            case mu:
                for (c = this.pb, h = 0, k = a + 1; (d = this.countCrossings()) < k;) {
                    k = d;
                    for (f = !0; f;)for (f = !1, d = c; d >= h; d--)f = Su(this, d, -1) || f;
                    e = this.countCrossings();
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = c; d >= h; d--)f = Su(this, d, 1) || f;
                    e = this.countCrossings();
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = h; d <= c; d++)f = Su(this, d, 1) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = h; d <= c; d++)f = Su(this, d, -1) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = c; d >= h; d--)f = Su(this, d, 0) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this));
                    for (f = !0; f;)for (f = !1, d = h; d <= c; d++)f = Su(this, d, 0) || f;
                    e >= a ? Au(this, b) : (a = e, b = zu(this))
                }
        }
        Au(this, b)
    };
    function Ru(a, b, c) {
        var d = 0, e = wu(a, b), f = a.he[b], h = Eu(a, b, c);
        c = Du(a, b, c);
        for (d = 0; d < f; d++)-1 === c[d] && (c[d] = e[d].column), -1 === h[d] && (h[d] = e[d].column);
        for (var k = !0, l; k;)for (k = !1, d = 0; d < f - 1; d++)if (h[d + 1] < h[d] || h[d + 1] === h[d] && c[d + 1] < c[d])k = !0, l = h[d], h[d] = h[d + 1], h[d + 1] = l, l = c[d], c[d] = c[d + 1], c[d + 1] = l, l = e[d], e[d] = e[d + 1], e[d + 1] = l;
        for (d = h = 0; d < f; d++)l = e[d], l.index = d, h += a.nodeMinColumnSpace(l, !0), l.column = h, h += 1, h += a.nodeMinColumnSpace(l, !1);
        xu(a, b, e)
    }

    function Su(a, b, c) {
        var d = wu(a, b), e = a.he[b];
        c = Bu(a, b, c);
        var f = 0, h;
        h = [];
        for (f = 0; f < e; f++)h[f] = -1;
        var k;
        k = [];
        for (f = 0; f < e; f++)k[f] = -1;
        for (var l = !1, m = !0; m;)for (m = !1, f = 0; f < e - 1; f++) {
            var n = c[d[f].index * e + d[f + 1].index], p = c[d[f + 1].index * e + d[f].index], q = 0, r = 0, s = d[f].column, u = d[f + 1].column, t = a.nodeMinColumnSpace(d[f], !0), x = a.nodeMinColumnSpace(d[f], !1), v = a.nodeMinColumnSpace(d[f + 1], !0), B = a.nodeMinColumnSpace(d[f + 1], !1), t = s - t + v, x = u - x + B, v = v = 0, y = d[f].kc.i;
            for (y.reset(); y.next();)if (v = y.value, B = v.fromVertex, v.valid &&
                B.layer === b) {
                for (v = 0; d[v] !== B;)v++;
                v < f && (q += 2 * (f - v), r += 2 * (f + 1 - v));
                v === f + 1 && (q += 1);
                v > f + 1 && (q += 4 * (v - f), r += 4 * (v - (f + 1)))
            }
            y = d[f].hc.i;
            for (y.reset(); y.next();)if (v = y.value, B = v.toVertex, v.valid && B.layer === b) {
                for (v = 0; d[v] !== B;)v++;
                v === f + 1 && (r += 1)
            }
            y = d[f + 1].kc.i;
            for (y.reset(); y.next();)if (v = y.value, B = v.fromVertex, v.valid && B.layer === b) {
                for (v = 0; d[v] !== B;)v++;
                v < f && (q += 2 * (f + 1 - v), r += 2 * (f - v));
                v === f && (r += 1);
                v > f + 1 && (q += 4 * (v - (f + 1)), r += 4 * (v - f))
            }
            y = d[f + 1].hc.i;
            for (y.reset(); y.next();)if (v = y.value, B = v.toVertex, v.valid &&
                B.layer === b) {
                for (v = 0; d[v] !== B;)v++;
                v === f && (q += 1)
            }
            var v = B = 0, y = h[d[f].index], H = k[d[f].index], E = h[d[f + 1].index], V = k[d[f + 1].index];
            -1 !== y && (B += Math.abs(y - s), v += Math.abs(y - x));
            -1 !== H && (B += Math.abs(H - s), v += Math.abs(H - x));
            -1 !== E && (B += Math.abs(E - u), v += Math.abs(E - t));
            -1 !== V && (B += Math.abs(V - u), v += Math.abs(V - t));
            if (r < q - .5 || r === q && p < n - .5 || r === q && p === n && v < B - .5)m = l = !0, d[f].column = x, d[f + 1].column = t, n = d[f], d[f] = d[f + 1], d[f + 1] = n
        }
        for (f = 0; f < e; f++)d[f].index = f;
        xu(a, b, d);
        return l
    }

    iu.prototype.straightenAndPack = function () {
        var a = 0, b = !1, c = 0 !== (this.Yi & Vu), a = this.Yi === nu;
        1E3 < this.network.edges.count && !a && (c = !1);
        if (c) {
            b = [];
            for (a = a = 0; a <= this.pb; a++)b[a] = 0;
            for (var d = 0, e = this.network.vertexes.i; e.next();) {
                var f = e.value, a = f.layer, d = f.column, f = this.nodeMinColumnSpace(f, !1);
                b[a] = Math.max(b[a], d + f)
            }
            for (e.reset(); e.next();)f = e.value, a = f.layer, d = f.column, f.column = (8 * (this.Jb - b[a]) >> 1) + 8 * d;
            this.Jb *= 8
        }
        if (0 !== (this.Yi & Wu))for (b = !0; b;) {
            b = !1;
            for (a = this.Kf + 1; a <= this.pb; a++)b = Xu(this, a, 1) || b;
            for (a = this.Kf - 1; 0 <= a; a--)b = Xu(this, a, -1) || b;
            b = Xu(this, this.Kf, 0) || b
        }
        if (0 !== (this.Yi & Yu)) {
            for (a = this.Kf + 1; a <= this.pb; a++)Zu(this, a, 1);
            for (a = this.Kf - 1; 0 <= a; a--)Zu(this, a, -1);
            Zu(this, this.Kf, 0)
        }
        c && ($u(this, -1), $u(this, 1));
        if (0 !== (this.Yi & Wu))for (b = !0; b;) {
            b = !1;
            b = Xu(this, this.Kf, 0) || b;
            for (a = this.Kf + 1; a <= this.pb; a++)b = Xu(this, a, 0) || b;
            for (a = this.Kf - 1; 0 <= a; a--)b = Xu(this, a, 0) || b
        }
    };
    function Xu(a, b, c) {
        for (var d = !1; av(a, b, c);)d = !0;
        return d
    }

    function av(a, b, c) {
        var d = 0, e = wu(a, b), f = a.he[b], h = Du(a, b, -1);
        if (0 < c)for (d = 0; d < f; d++)h[d] = -1;
        var k = Du(a, b, 1);
        if (0 > c)for (d = 0; d < f; d++)k[d] = -1;
        for (var l = !1, m = !0; m;)for (m = !1, d = 0; d < f; d++) {
            var n = e[d].column, p = a.nodeMinColumnSpace(e[d], !0), q = a.nodeMinColumnSpace(e[d], !1), r = 0, r = 0 > d - 1 || n - e[d - 1].column - 1 > p + a.nodeMinColumnSpace(e[d - 1], !1) ? n - 1 : n, p = 0, p = d + 1 >= f || e[d + 1].column - n - 1 > q + a.nodeMinColumnSpace(e[d + 1], !0) ? n + 1 : n, s = q = 0, u = 0, t = 0, x = 0, v = 0;
            if (0 >= c)for (var B = e[d].kc.i; B.next();) {
                var v = B.value, y = v.fromVertex;
                v.valid &&
                y.layer !== b && (t = yu(v), x = v.portFromColOffset, v = v.portToColOffset, y = y.column, q += (Math.abs(n + v - (y + x)) + 1) * t, s += (Math.abs(r + v - (y + x)) + 1) * t, u += (Math.abs(p + v - (y + x)) + 1) * t)
            }
            if (0 <= c)for (B = e[d].hc.i; B.next();)v = B.value, y = v.toVertex, v.valid && y.layer !== b && (t = yu(v), x = v.portFromColOffset, v = v.portToColOffset, y = y.column, q += (Math.abs(n + x - (y + v)) + 1) * t, s += (Math.abs(r + x - (y + v)) + 1) * t, u += (Math.abs(p + x - (y + v)) + 1) * t);
            v = x = t = 0;
            B = h[e[d].index];
            y = k[e[d].index];
            -1 !== B && (t += Math.abs(B - n), x += Math.abs(B - r), v += Math.abs(B - p));
            -1 !== y &&
            (t += Math.abs(y - n), x += Math.abs(y - r), v += Math.abs(y - p));
            if (s < q || s === q && x < t)m = l = !0, e[d].column = r; else if (u < q || u === q && v < t)m = l = !0, e[d].column = p
        }
        xu(a, b, e);
        a.normalize();
        return l
    }

    function Zu(a, b, c) {
        var d = 0, e = wu(a, b), f = a.he[b], h = Eu(a, b, c);
        c = [];
        for (d = 0; d < f; d++)c[d] = h[d];
        for (h = !0; h;)for (h = !1, d = 0; d < f; d++) {
            var k = e[d].column, l = a.nodeMinColumnSpace(e[d], !0), m = a.nodeMinColumnSpace(e[d], !1), n = 0, p = 0, q = 0, q = p = 0;
            -1 === c[d] ? 0 === d && d === f - 1 ? n = k : 0 === d ? (p = e[d + 1].column, n = p - k === m + a.nodeMinColumnSpace(e[d + 1], !0) ? k - 1 : k) : d === f - 1 ? (q = e[d - 1].column, n = k - q === l + a.nodeMinColumnSpace(e[d - 1], !1) ? k + 1 : k) : (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d +
                1], !0) - m - 1, n = (q + p) / 2 | 0) : 0 === d && d === f - 1 ? n = c[d] : 0 === d ? (p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, n = Math.min(c[d], p)) : d === f - 1 ? (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, n = Math.max(c[d], q)) : (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, q < c[d] && c[d] < p ? n = c[d] : q >= c[d] ? n = q : p <= c[d] && (n = p));
            n !== k && (h = !0, e[d].column = n)
        }
        xu(a, b, e);
        a.normalize()
    }

    function bv(a, b) {
        for (var c = !0, d = a.network.vertexes.i; d.next();) {
            var e = d.value, f = a.nodeMinColumnSpace(e, !0), h = a.nodeMinColumnSpace(e, !1);
            if (e.column - f <= b && e.column + h >= b) {
                c = !1;
                break
            }
        }
        e = !1;
        if (c)for (d.reset(); d.next();)c = d.value, c.column > b && (c.column -= 1, e = !0);
        return e
    }

    function cv(a, b) {
        for (var c = b, c = b + 1, d = 0, e = [], f = [], d = 0; d <= a.pb; d++)e[d] = !1, f[d] = !1;
        for (var h = a.network.vertexes.i; h.next();) {
            var d = h.value, k = d.column - a.nodeMinColumnSpace(d, !0), l = d.column + a.nodeMinColumnSpace(d, !1);
            k <= b && l >= b && (e[d.layer] = !0);
            k <= c && l >= c && (f[d.layer] = !0)
        }
        k = !0;
        c = !1;
        for (d = 0; d <= a.pb; d++)k = k && !(e[d] && f[d]);
        if (k)for (h.reset(); h.next();)e = h.value, e.column > b && (e.column -= 1, c = !0);
        return c
    }

    function $u(a, b) {
        for (var c = 0; c <= a.Jb; c++)for (; bv(a, c););
        a.normalize();
        for (c = 0; c < a.Jb; c++)for (; cv(a, c););
        a.normalize();
        var c = 0, d, e = 0, f = 0, h = 0;
        if (0 < b)for (c = 0; c <= a.Jb; c++)for (d = zu(a), e = Cu(a), f = e + 1; e < f;)f = e, dv(a, c, 1), h = Cu(a), h > e ? Au(a, d) : h < e && (e = h, d = zu(a));
        if (0 > b)for (c = a.Jb; 0 <= c; c--)for (d = zu(a), e = Cu(a), f = e + 1; e < f;)f = e, dv(a, c, -1), h = Cu(a), h > e ? Au(a, d) : h < e && (e = h, d = zu(a));
        a.normalize()
    }

    function dv(a, b, c) {
        a.xg = 0;
        for (var d = a.network.vertexes.i; d.next();)d.value.component = -1;
        if (0 < c)for (d.reset(); d.next();) {
            var e = d.value;
            e.column - a.nodeMinColumnSpace(e, !0) <= b && (e.component = a.xg)
        }
        if (0 > c)for (d.reset(); d.next();)e = d.value, e.column + a.nodeMinColumnSpace(e, !1) >= b && (e.component = a.xg);
        a.xg++;
        for (d.reset(); d.next();)b = d.value, -1 === b.component && (Gu(a, b, a.xg, -1, !0, !0), a.xg++);
        var f = 0;
        b = [];
        for (f = 0; f < a.xg * a.xg; f++)b[f] = !1;
        e = [];
        for (f = 0; f < (a.pb + 1) * (a.Jb + 1); f++)e[f] = -1;
        for (d.reset(); d.next();)for (var f =
            d.value, h = f.layer, k = Math.max(0, f.column - a.nodeMinColumnSpace(f, !0)), l = Math.min(a.Jb, f.column + a.nodeMinColumnSpace(f, !1)); k <= l; k++)e[h * (a.Jb + 1) + k] = f.component;
        for (f = 0; f <= a.pb; f++) {
            if (0 < c)for (k = 0; k < a.Jb; k++)-1 !== e[f * (a.Jb + 1) + k] && -1 !== e[f * (a.Jb + 1) + k + 1] && e[f * (a.Jb + 1) + k] !== e[f * (a.Jb + 1) + k + 1] && (b[e[f * (a.Jb + 1) + k] * a.xg + e[f * (a.Jb + 1) + k + 1]] = !0);
            if (0 > c)for (k = a.Jb; 0 < k; k--)-1 !== e[f * (a.Jb + 1) + k] && -1 !== e[f * (a.Jb + 1) + k - 1] && e[f * (a.Jb + 1) + k] !== e[f * (a.Jb + 1) + k - 1] && (b[e[f * (a.Jb + 1) + k] * a.xg + e[f * (a.Jb + 1) + k - 1]] = !0)
        }
        e = [];
        for (f =
                 0; f < a.xg; f++)e[f] = !0;
        h = new I("number");
        h.add(0);
        for (l = 0; 0 !== h.count;)if (l = h.n[h.count - 1], h.Xc(h.count - 1), e[l])for (e[l] = !1, f = 0; f < a.xg; f++)b[l * a.xg + f] && h.Ld(0, f);
        if (0 < c)for (d.reset(); d.next();)a = d.value, e[a.component] && (a.column -= 1);
        if (0 > c)for (d.reset(); d.next();)c = d.value, e[c.component] && (c.column += 1)
    }

    iu.prototype.commitLayout = function () {
        if (this.uq)for (var a = uu(this, !0), b = uu(this, !1), c = this.network.edges.i; c.next();) {
            var d = c.value.link;
            null !== d && (d.Ab = a, d.Bb = b)
        }
        this.commitNodes();
        this.Sz();
        this.eu && this.commitLinks()
    };
    function uu(a, b) {
        return 270 === a.aa ? b ? Dc : Gc : 90 === a.aa ? b ? Gc : Dc : 180 === a.aa ? b ? Ec : Fc : b ? Fc : Ec
    }

    iu.prototype.commitNodes = function () {
        this.tg = [];
        this.Jf = [];
        this.If = [];
        this.Nb = [];
        for (var a = 0; a <= this.pb; a++)this.tg[a] = 0, this.Jf[a] = 0, this.If[a] = 0, this.Nb[a] = 0;
        for (a = this.network.vertexes.i; a.next();) {
            var b = a.value, c = b.layer;
            this.tg[c] = Math.max(this.tg[c], this.nodeMinLayerSpace(b, !0));
            this.Jf[c] = Math.max(this.Jf[c], this.nodeMinLayerSpace(b, !1))
        }
        for (var b = 0, d = this.Hm, c = 0; c <= this.pb; c++) {
            var e = d;
            0 >= this.tg[c] + this.Jf[c] && (e = 0);
            0 < c && (b += e / 2);
            90 === this.aa || 0 === this.aa ? (b += this.Jf[c], this.If[c] = b, b += this.tg[c]) :
                (b += this.tg[c], this.If[c] = b, b += this.Jf[c]);
            c < this.pb && (b += e / 2);
            this.Nb[c] = b
        }
        d = b;
        b = this.oe;
        for (c = 0; c <= this.pb; c++)270 === this.aa ? this.If[c] = b.y + this.If[c] : 90 === this.aa ? (this.If[c] = b.y + d - this.If[c], this.Nb[c] = d - this.Nb[c]) : 180 === this.aa ? this.If[c] = b.x + this.If[c] : (this.If[c] = b.x + d - this.If[c], this.Nb[c] = d - this.Nb[c]);
        a.reset();
        for (d = e = Infinity; a.next();) {
            var c = a.value, f = c.layer, h = c.column | 0, k = 0, l = 0;
            270 === this.aa || 90 === this.aa ? (k = b.x + this.Ud * h, l = this.If[f]) : (k = this.If[f], l = b.y + this.Ud * h);
            c.ja = k;
            c.ra = l;
            e = Math.min(c.x, e);
            d = Math.min(c.y, d)
        }
        e = b.x - e;
        b = b.y - d;
        this.OB = new z(e, b);
        for (a.reset(); a.next();)c = a.value, c.x += e, c.y += b, c.commit()
    };
    iu.prototype.Sz = function () {
        for (var a = 0, b = this.Hm, c = 0; c <= this.pb; c++)a += this.tg[c], a += this.Jf[c];
        for (var a = a + this.pb * b, b = [], c = this.Ud * this.Jb, d = this.II; 0 <= d; d--)270 === this.aa ? 0 === d ? b.push(new A(0, 0, c, Math.abs(this.Nb[0]))) : b.push(new A(0, this.Nb[d - 1], c, Math.abs(this.Nb[d - 1] - this.Nb[d]))) : 90 === this.aa ? 0 === d ? b.push(new A(0, this.Nb[0], c, Math.abs(this.Nb[0] - a))) : b.push(new A(0, this.Nb[d], c, Math.abs(this.Nb[d - 1] - this.Nb[d]))) : 180 === this.aa ? 0 === d ? b.push(new A(0, 0, Math.abs(this.Nb[0]), c)) : b.push(new A(this.Nb[d -
        1], 0, Math.abs(this.Nb[d - 1] - this.Nb[d]), c)) : 0 === d ? b.push(new A(this.Nb[0], 0, Math.abs(this.Nb[0] - a), c)) : b.push(new A(this.Nb[d], 0, Math.abs(this.Nb[d - 1] - this.Nb[d]), c));
        this.commitLayers(b, this.OB)
    };
    iu.prototype.commitLayers = function () {
    };
    iu.prototype.commitLinks = function () {
        for (var a = this.network.edges.i, b; a.next();)b = a.value.link, null !== b && (b.fm(), b.Jp(), b.ij());
        for (a.reset(); a.next();)b = a.value.link, null !== b && b.ao();
        for (a.reset(); a.next();) {
            var c = a.value;
            b = c.link;
            if (null !== b) {
                b.fm();
                var d = b, e = d.W, f = d.$, h = d.ed, k = d.Sd, l = c.fromVertex, m = c.toVertex;
                if (c.valid) {
                    if (b.Ye === sj && 4 === b.qa) {
                        if (c.rev)var n = e, e = f, f = n, p = h, h = k, k = p;
                        if (l.column === m.column) {
                            var q = b.getLinkPoint(e, h, b.computeSpot(!0), !0, !1, f, k), r = b.getLinkPoint(f, k, b.computeSpot(!1),
                                !1, !1, e, h);
                            q.H() || q.set(e.Y.Gl);
                            r.H() || r.set(f.Y.Gl);
                            b.Jp();
                            b.Bl(q.x, q.y);
                            b.Bl((2 * q.x + r.x) / 3, (2 * q.y + r.y) / 3);
                            b.Bl((q.x + 2 * r.x) / 3, (q.y + 2 * r.y) / 3);
                            b.Bl(r.x, r.y)
                        } else {
                            var s = !1, u = !1;
                            null !== h && b.computeSpot(!0) === sb && (s = !0);
                            null !== k && b.computeSpot(!1) === sb && (u = !0);
                            if (s || u) {
                                var t = b.m(0).x, x = b.m(0).y, v = b.m(1).x, B = b.m(1).y, y = b.m(2).x, H = b.m(2).y, E = b.m(3).x, V = b.m(3).y;
                                if (s) {
                                    90 === this.aa || 270 === this.aa ? (v = t, B = (x + V) / 2) : (v = (t + E) / 2, B = x);
                                    b.ea(1, v, B);
                                    var ba = b.getLinkPoint(e, h, b.computeSpot(!0), !0, !1, f, k);
                                    ba.H() || ba.set(e.Y.Gl);
                                    b.ea(0, ba.x, ba.y)
                                }
                                u && (90 === this.aa || 270 === this.aa ? (y = E, H = (x + V) / 2) : (y = (t + E) / 2, H = V), b.ea(2, y, H), ba = b.getLinkPoint(f, k, b.computeSpot(!1), !1, !1, e, h), ba.H() || ba.set(f.Y.Gl), b.ea(3, ba.x, ba.y))
                            }
                        }
                    }
                    b.ij()
                } else if (l.layer === m.layer)b.ij(); else {
                    var Q = !1, $ = !1, ca = 0, R = b.Ot + 1;
                    if (b.ic)$ = !0, ca = b.qa, 4 < ca && b.points.removeRange(2, ca - 3); else if (b.Ye === sj)Q = !0, ca = b.qa, 4 < ca && b.points.removeRange(2, ca - 3), R = 2; else {
                        var ca = b.qa, Ra = b.computeSpot(!0) === sb, hb = b.computeSpot(!1) === sb;
                        2 < ca && Ra && hb ? b.points.removeRange(1, ca - 2) : 3 <
                        ca && Ra && !hb ? b.points.removeRange(1, ca - 3) : 3 < ca && !Ra && hb ? b.points.removeRange(2, ca - 2) : 4 < ca && !Ra && !hb && b.points.removeRange(2, ca - 3)
                    }
                    var qa, Ja;
                    if (c.rev) {
                        for (var za = 0; null !== m && l !== m;) {
                            Ja = qa = null;
                            for (var Pb = m.kc.i; Pb.next();) {
                                var Lb = Pb.value;
                                if (Lb.link === c.link && (qa = Lb.fromVertex, Ja = Lb.toVertex, null === qa.pd))break
                            }
                            if (qa !== l)if (Wa = b.m(R - 1).x, lb = b.m(R - 1).y, na = qa.ja, la = qa.ra, $)180 === this.aa || 0 === this.aa ? 2 === R ? (b.w(R++, Wa, lb), b.w(R++, Wa, la)) : (se = null !== Ja ? Ja.ra : lb, se !== la && (ib = this.Nb[qa.layer - 1], b.w(R++,
                                ib, lb), b.w(R++, ib, la))) : 2 === R ? (b.w(R++, Wa, lb), b.w(R++, na, lb)) : (Ed = null !== Ja ? Ja.ja : Wa, Ed !== na && (ib = this.Nb[qa.layer - 1], b.w(R++, Wa, ib), b.w(R++, na, ib))); else if (2 === R)if (jb = Math.max(10, this.tg[m.layer]), fb = Math.max(10, this.Jf[m.layer]), Q)180 === this.aa ? na <= m.M.x ? (za = m.M.x, b.w(R++, za - jb, la), b.w(R++, za, la), b.w(R++, za + fb, la)) : (b.w(R++, na - jb, la), b.w(R++, na, la), b.w(R++, na + fb, la)) : 90 === this.aa ? la >= m.M.bottom ? (za = m.M.y + m.M.height, b.w(R++, na, za + fb), b.w(R++, na, za), b.w(R++, na, za - jb)) : (b.w(R++, na, la + fb), b.w(R++,
                                na, la), b.w(R++, na, la - jb)) : 270 === this.aa ? la <= m.M.y ? (za = m.M.y, b.w(R++, na, za - jb), b.w(R++, na, za), b.w(R++, na, za + fb)) : (b.w(R++, na, la - jb), b.w(R++, na, la), b.w(R++, na, la + fb)) : 0 === this.aa && (na >= m.M.right ? (za = m.M.x + m.M.width, b.w(R++, za + fb, la), b.w(R++, za, la), b.w(R++, za - jb, la)) : (b.w(R++, na + fb, la), b.w(R++, na, la), b.w(R++, na - jb, la))); else {
                                b.w(R++, Wa, lb);
                                var ae = 0;
                                if (180 === this.aa || 0 === this.aa) {
                                    if (180 === this.aa ? na >= m.M.right : na <= m.M.x)ae = (0 === this.aa ? -jb : fb) / 2;
                                    b.w(R++, Wa + ae, la)
                                } else {
                                    if (270 === this.aa ? la >= m.M.bottom :
                                        la <= m.M.y)ae = (90 === this.aa ? -jb : fb) / 2;
                                    b.w(R++, na, lb + ae)
                                }
                                b.w(R++, na, la)
                            } else jb = Math.max(10, this.tg[qa.layer]), fb = Math.max(10, this.Jf[qa.layer]), 180 === this.aa ? (Q && b.w(R++, na - jb, la), b.w(R++, na, la), Q && b.w(R++, na + fb, la)) : 90 === this.aa ? (Q && b.w(R++, na, la + fb), b.w(R++, na, la), Q && b.w(R++, na, la - jb)) : 270 === this.aa ? (Q && b.w(R++, na, la - jb), b.w(R++, na, la), Q && b.w(R++, na, la + fb)) : (Q && b.w(R++, na + fb, la), b.w(R++, na, la), Q && b.w(R++, na - jb, la));
                            m = qa
                        }
                        if (null === k || b.computeSpot(!1) !== sb || $)if (Wa = b.m(R - 1).x, lb = b.m(R - 1).y, na = b.m(R).x,
                                la = b.m(R).y, $) {
                            var pd = this.Jf[l.layer], rc = 0;
                            180 === this.aa || 0 === this.aa ? (rc = lb, rc >= l.M.y && rc <= l.M.bottom && (180 === this.aa ? na >= l.M.x : na <= l.M.right) && (za = l.ja + (180 === this.aa ? -pd : pd), rc = rc < l.M.y + l.M.height / 2 ? l.M.y - this.Ud / 2 : l.M.bottom + this.Ud / 2, b.w(R++, za, lb), b.w(R++, za, rc)), b.w(R++, na, rc)) : (rc = Wa, rc >= l.M.x && rc <= l.M.right && (270 === this.aa ? la >= l.M.y : la <= l.M.bottom) && (za = l.ra + (270 === this.aa ? -pd : pd), rc = rc < l.M.x + l.M.width / 2 ? l.M.x - this.Ud / 2 : l.M.right + this.Ud / 2, b.w(R++, Wa, za), b.w(R++, rc, za)), b.w(R++, rc, la));
                            b.w(R++, na, la)
                        } else if (Q)jb = Math.max(10, this.tg[l.layer]), fb = Math.max(10, this.Jf[l.layer]), 180 === this.aa && na >= l.M.x ? (za = l.M.x + l.M.width, b.ea(R - 2, za, lb), b.ea(R - 1, za + fb, lb)) : 90 === this.aa && la <= l.M.bottom ? (za = l.M.y, b.ea(R - 2, Wa, za), b.ea(R - 1, Wa, za - jb)) : 270 === this.aa && la >= l.M.y ? (za = l.M.y + l.M.height, b.ea(R - 2, Wa, za), b.ea(R - 1, Wa, za + fb)) : 0 === this.aa && na <= l.M.right && (za = l.M.x, b.ea(R - 2, za, lb), b.ea(R - 1, za - jb, lb)); else {
                            jb = Math.max(10, this.tg[l.layer]);
                            fb = Math.max(10, this.Jf[l.layer]);
                            ae = 0;
                            if (180 === this.aa || 0 ===
                                this.aa) {
                                if (180 === this.aa ? na <= l.M.x : na >= l.M.right)ae = (0 === this.aa ? fb : -jb) / 2;
                                b.w(R++, na + ae, lb)
                            } else {
                                if (270 === this.aa ? la <= l.M.y : la >= l.M.bottom)ae = (90 === this.aa ? fb : -jb) / 2;
                                b.w(R++, Wa, la + ae)
                            }
                            b.w(R++, na, la)
                        }
                    } else {
                        for (; null !== l && l !== m;) {
                            Ja = qa = null;
                            for (var xg = l.hc.i; xg.next();) {
                                var Df = xg.value;
                                if (Df.link === c.link && (qa = Df.toVertex, Ja = Df.fromVertex, null !== Ja.pd && (Ja = null), null === qa.pd))break
                            }
                            var Wa = 0, lb = 0, na = 0, la = 0, ib = 0, jb = 0, fb = 0;
                            if (qa !== m)if (Wa = b.m(R - 1).x, lb = b.m(R - 1).y, na = qa.ja, la = qa.ra, $)if (180 === this.aa ||
                                0 === this.aa) {
                                var se = null !== Ja ? Ja.ra : lb;
                                se !== la && (ib = this.Nb[qa.layer], 2 === R && (ib = 0 === this.aa ? Math.max(ib, Wa) : Math.min(ib, Wa)), b.w(R++, ib, lb), b.w(R++, ib, la))
                            } else {
                                var Ed = null !== Ja ? Ja.ja : Wa;
                                Ed !== na && (ib = this.Nb[qa.layer], 2 === R && (ib = 90 === this.aa ? Math.max(ib, lb) : Math.min(ib, lb)), b.w(R++, Wa, ib), b.w(R++, na, ib))
                            } else jb = Math.max(10, this.tg[qa.layer]), fb = Math.max(10, this.Jf[qa.layer]), 180 === this.aa ? (b.w(R++, na + fb, la), Q && b.w(R++, na, la), b.w(R++, na - jb, la)) : 90 === this.aa ? (b.w(R++, na, la - jb), Q && b.w(R++, na, la), b.w(R++,
                                na, la + fb)) : 270 === this.aa ? (b.w(R++, na, la + fb), Q && b.w(R++, na, la), b.w(R++, na, la - jb)) : (b.w(R++, na - jb, la), Q && b.w(R++, na, la), b.w(R++, na + fb, la));
                            l = qa
                        }
                        $ && (Wa = b.m(R - 1).x, lb = b.m(R - 1).y, na = b.m(R).x, la = b.m(R).y, 180 === this.aa || 0 === this.aa ? lb !== la && (ib = 0 === this.aa ? Math.min(Math.max((na + Wa) / 2, this.Nb[m.layer]), na) : Math.max(Math.min((na + Wa) / 2, this.Nb[m.layer]), na), b.w(R++, ib, lb), b.w(R++, ib, la)) : Wa !== na && (ib = 90 === this.aa ? Math.min(Math.max((la + lb) / 2, this.Nb[m.layer]), la) : Math.max(Math.min((la + lb) / 2, this.Nb[m.layer]),
                            la), b.w(R++, Wa, ib), b.w(R++, na, ib)))
                    }
                    if (null !== d && Q) {
                        if (null !== h) {
                            if (b.computeSpot(!0) === sb) {
                                var tb = b.m(0), Le = b.m(2);
                                tb.L(Le) || b.ea(1, (tb.x + Le.x) / 2, (tb.y + Le.y) / 2)
                            }
                            ba = b.getLinkPoint(e, h, sb, !0, !1, f, k);
                            ba.H() || ba.set(e.Y.Gl);
                            b.ea(0, ba.x, ba.y)
                        }
                        null !== k && (b.computeSpot(!1) === sb && (tb = b.m(b.qa - 1), Le = b.m(b.qa - 3), tb.L(Le) || b.ea(b.qa - 2, (tb.x + Le.x) / 2, (tb.y + Le.y) / 2)), ba = b.getLinkPoint(f, k, sb, !1, !1, e, h), ba.H() || ba.set(f.Y.Gl), b.ea(b.qa - 1, ba.x, ba.y))
                    }
                    b.ij();
                    c.commit()
                }
            }
        }
        for (var ed = new I(W), ag = this.network.edges.i; ag.next();) {
            var Ef =
                ag.value.link;
            null !== Ef && Ef.ic && !ed.contains(Ef) && ed.add(Ef)
        }
        if (0 < ed.count)if (90 === this.aa || 270 === this.aa) {
            for (var yg = 0, kb = new I(ev), wc, qd, bg = ed.i; bg.next();) {
                var Bb = bg.value;
                if (null !== Bb && Bb.ic)for (var Mb = 2; Mb < Bb.qa - 3; Mb++)if (wc = Bb.m(Mb), qd = Bb.m(Mb + 1), fv(wc.y, qd.y) && !fv(wc.x, qd.x)) {
                    var te = new ev;
                    te.layer = Math.floor(wc.y / 2);
                    var zg = Bb.m(0), Fd = Bb.m(Bb.qa - 1);
                    te.first = zg.x * zg.x + zg.y;
                    te.ee = Fd.x * Fd.x + Fd.y;
                    te.We = Math.min(wc.x, qd.x);
                    te.pe = Math.max(wc.x, qd.x);
                    te.index = Mb;
                    te.link = Bb;
                    if (Mb + 2 < Bb.qa) {
                        var mb = Bb.m(Mb -
                            1), Jc = Bb.m(Mb + 2), Ff = 0;
                        mb.y < wc.y ? Ff = Jc.y < wc.y ? 3 : wc.x < qd.x ? 2 : 1 : mb.y > wc.y && (Ff = Jc.y > wc.y ? 0 : qd.x < wc.x ? 2 : 1);
                        te.qi = Ff
                    }
                    kb.add(te)
                }
            }
            if (1 < kb.count) {
                kb.sort(this.ZF);
                for (var Me = 0; Me < kb.count;) {
                    for (var Wh = kb.n[Me].layer, Sa = Me + 1; Sa < kb.count && kb.n[Sa].layer === Wh;)Sa++;
                    if (1 < Sa - Me)for (var cb = Me; cb < Sa;) {
                        for (var xc = kb.n[cb].pe, sc = Me + 1; sc < Sa && kb.n[sc].We < xc;)xc = Math.max(xc, kb.n[sc].pe), sc++;
                        var Vc = sc - cb;
                        if (1 < Vc) {
                            kb.xq(this.$x, cb, cb + Vc);
                            for (var jh = 1, Ya = kb.n[cb].ee, Mb = cb; Mb < sc; Mb++) {
                                var xb = kb.n[Mb];
                                xb.ee !== Ya && (jh++,
                                    Ya = xb.ee)
                            }
                            kb.xq(this.YF, cb, cb + Vc);
                            for (var ub = 1, Ya = kb.n[cb].first, Mb = cb; Mb < sc; Mb++)xb = kb.n[Mb], xb.first !== Ya && (ub++, Ya = xb.first);
                            var yc = !0, yb = ub;
                            jh < ub ? (yc = !1, yb = jh, Ya = kb.n[cb].ee, kb.xq(this.$x, cb, cb + Vc)) : Ya = kb.n[cb].first;
                            for (var ob = 0, Mb = cb; Mb < sc; Mb++) {
                                xb = kb.n[Mb];
                                (yc ? xb.first : xb.ee) !== Ya && (ob++, Ya = yc ? xb.first : xb.ee);
                                Bb = xb.link;
                                wc = Bb.m(xb.index);
                                qd = Bb.m(xb.index + 1);
                                var Gb = this.sF * (ob - (yb - 1) / 2);
                                yg++;
                                Bb.fm();
                                Bb.ea(xb.index, wc.x, wc.y + Gb);
                                Bb.ea(xb.index + 1, qd.x, qd.y + Gb);
                                Bb.ij()
                            }
                        }
                        cb = sc
                    }
                    Me = Sa
                }
            }
        } else {
            for (var be =
                0, Cb = new I(ev), Qb, fd, Xh = ed.i; Xh.next();) {
                var Nb = Xh.value;
                if (null !== Nb && Nb.ic)for (var Ob = 2; Ob < Nb.qa - 3; Ob++)if (Qb = Nb.m(Ob), fd = Nb.m(Ob + 1), fv(Qb.x, fd.x) && !fv(Qb.y, fd.y)) {
                    var zc = new ev;
                    zc.layer = Math.floor(Qb.x / 2);
                    var Wc = Nb.m(0), rd = Nb.m(Nb.qa - 1);
                    zc.first = Wc.x + Wc.y * Wc.y;
                    zc.ee = rd.x + rd.y * rd.y;
                    zc.We = Math.min(Qb.y, fd.y);
                    zc.pe = Math.max(Qb.y, fd.y);
                    zc.index = Ob;
                    zc.link = Nb;
                    if (Ob + 2 < Nb.qa) {
                        var Ag = Nb.m(Ob - 1), Yh = Nb.m(Ob + 2), pb = 0;
                        Ag.x < Qb.x ? pb = Yh.x < Qb.x ? 3 : Qb.y < fd.y ? 2 : 1 : Ag.x > Qb.x && (pb = Yh.x > Qb.x ? 0 : fd.y < Qb.y ? 2 : 1);
                        zc.qi = pb
                    }
                    Cb.add(zc)
                }
            }
            if (1 <
                Cb.count) {
                Cb.sort(this.ZF);
                for (var Xc = 0; Xc < Cb.count;) {
                    for (var Zh = Cb.n[Xc].layer, Ne = Xc + 1; Ne < Cb.count && Cb.n[Ne].layer === Zh;)Ne++;
                    if (1 < Ne - Xc)for (var ec = Xc; ec < Ne;) {
                        for (var ue = Cb.n[ec].pe, Wb = Xc + 1; Wb < Ne && Cb.n[Wb].We < ue;)ue = Math.max(ue, Cb.n[Wb].pe), Wb++;
                        var Ac = Wb - ec;
                        if (1 < Ac) {
                            Cb.xq(this.$x, ec, ec + Ac);
                            for (var sd = 1, fc = Cb.n[ec].ee, Ob = ec; Ob < Wb; Ob++) {
                                var Ta = Cb.n[Ob];
                                Ta.ee !== fc && (sd++, fc = Ta.ee)
                            }
                            Cb.xq(this.YF, ec, ec + Ac);
                            for (var gc = 1, fc = Cb.n[ec].first, Ob = ec; Ob < Wb; Ob++)Ta = Cb.n[Ob], Ta.first !== fc && (gc++, fc = Ta.first);
                            var $h = !0, bf = gc;
                            sd < gc ? ($h = !1, bf = sd, fc = Cb.n[ec].ee, Cb.xq(this.$x, ec, ec + Ac)) : fc = Cb.n[ec].first;
                            for (var Gd = 0, Ob = ec; Ob < Wb; Ob++) {
                                Ta = Cb.n[Ob];
                                ($h ? Ta.first : Ta.ee) !== fc && (Gd++, fc = $h ? Ta.first : Ta.ee);
                                Nb = Ta.link;
                                Qb = Nb.m(Ta.index);
                                fd = Nb.m(Ta.index + 1);
                                var Oe = this.sF * (Gd - (bf - 1) / 2);
                                be++;
                                Nb.fm();
                                Nb.ea(Ta.index, Qb.x + Oe, Qb.y);
                                Nb.ea(Ta.index + 1, fd.x + Oe, fd.y);
                                Nb.ij()
                            }
                        }
                        ec = Wb
                    }
                    Xc = Ne
                }
            }
        }
    };
    iu.prototype.ZF = function (a, b) {
        return a instanceof ev && b instanceof ev && a !== b ? a.layer < b.layer ? -1 : a.layer > b.layer ? 1 : a.We < b.We ? -1 : a.We > b.We ? 1 : a.pe < b.pe ? -1 : a.pe > b.pe ? 1 : 0 : 0
    };
    iu.prototype.YF = function (a, b) {
        return a instanceof ev && b instanceof ev && a !== b ? a.first < b.first ? -1 : a.first > b.first || a.qi < b.qi ? 1 : a.qi > b.qi || a.We < b.We ? -1 : a.We > b.We ? 1 : a.pe < b.pe ? -1 : a.pe > b.pe ? 1 : 0 : 0
    };
    iu.prototype.$x = function (a, b) {
        return a instanceof ev && b instanceof ev && a !== b ? a.ee < b.ee ? -1 : a.ee > b.ee || a.qi < b.qi ? 1 : a.qi > b.qi || a.We < b.We ? -1 : a.We > b.We ? 1 : a.pe < b.pe ? -1 : a.pe > b.pe ? 1 : 0 : 0
    };
    function fv(a, b) {
        var c = a - b;
        return -1 < c && 1 > c
    }

    function wu(a, b) {
        var c, d = a.he[b];
        if (d >= a.hh.length) {
            c = [];
            for (var e = 0; e < a.hh.length; e++)c[e] = a.hh[e];
            a.hh = c
        }
        void 0 === a.hh[d] || null === a.hh[d] ? c = [] : (c = a.hh[d], a.hh[d] = null);
        d = a.ps[b];
        for (e = 0; e < d.length; e++) {
            var f = d[e];
            c[f.index] = f
        }
        return c
    }

    function xu(a, b, c) {
        a.hh[a.he[b]] = c
    }

    w.defineProperty(iu, {layerSpacing: "layerSpacing"}, function () {
        return this.Hm
    }, function (a) {
        this.Hm !== a && (w.j(a, "number", iu, "layerSpacing"), 0 <= a && (this.Hm = a, this.J()))
    });
    w.defineProperty(iu, {vK: "columnSpacing"}, function () {
        return this.Ud
    }, function (a) {
        this.Ud !== a && (w.j(a, "number", iu, "columnSpacing"), 0 < a && (this.Ud = a, this.J()))
    });
    w.defineProperty(iu, {direction: "direction"}, function () {
        return this.aa
    }, function (a) {
        this.aa !== a && (w.j(a, "number", iu, "direction"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.aa = a, this.J()) : w.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))
    });
    w.defineProperty(iu, {angle: "angle"}, function () {
        return this.direction
    }, function (a) {
        this.direction = a
    });
    w.defineProperty(iu, {AH: "cycleRemoveOption"}, function () {
        return this.vo
    }, function (a) {
        this.vo !== a && (w.mb(a, iu, iu, "cycleRemoveOption"), a === pu || a === ju) && (this.vo = a, this.J())
    });
    w.defineProperty(iu, {zI: "layeringOption"}, function () {
        return this.Xo
    }, function (a) {
        this.Xo !== a && (w.mb(a, iu, iu, "layeringOption"), a === ku || a === Hu || a === Ju) && (this.Xo = a, this.J())
    });
    w.defineProperty(iu, {mI: "initializeOption"}, function () {
        return this.Mo
    }, function (a) {
        this.Mo !== a && (w.mb(a, iu, iu, "initializeOption"), a === lu || a === Pu || a === Nu) && (this.Mo = a, this.J())
    });
    w.defineProperty(iu, {$K: "iterations"}, function () {
        return this.Fm
    }, function (a) {
        this.Fm !== a && (w.Ed(a, ou, "iterations"), 0 <= a && (this.Fm = a, this.J()))
    });
    w.defineProperty(iu, {cH: "aggressiveOption"}, function () {
        return this.io
    }, function (a) {
        this.io !== a && (w.mb(a, iu, iu, "aggressiveOption"), a === Tu || a === mu || a === Uu) && (this.io = a, this.J())
    });
    w.defineProperty(iu, {uL: "packOption"}, function () {
        return this.Yi
    }, function (a) {
        this.Yi !== a && (w.j(a, "number", iu, "packOption"), 0 <= a && 8 > a && (this.Yi = a, this.J()))
    });
    w.defineProperty(iu, {uq: "setsPortSpots"}, function () {
        return this.Zh
    }, function (a) {
        this.Zh !== a && (w.j(a, "boolean", iu, "setsPortSpots"), this.Zh = a, this.J())
    });
    w.defineProperty(iu, {sF: "linkSpacing"}, function () {
        return this.Xr
    }, function (a) {
        this.Xr !== a && (w.j(a, "number", iu, "linkSpacing"), 0 <= a && (this.Xr = a, this.J()))
    });
    w.u(iu, {II: "maxLayer"}, function () {
        return this.pb
    });
    w.u(iu, {fL: "maxIndex"}, function () {
        return this.Vv
    });
    w.u(iu, {eL: "maxColumn"}, function () {
        return this.Jb
    });
    w.u(iu, {kL: "minIndexLayer"}, function () {
        return this.fs
    });
    w.u(iu, {gL: "maxIndexLayer"}, function () {
        return this.Kf
    });
    var ju;
    iu.CycleDepthFirst = ju = w.p(iu, "CycleDepthFirst", 0);
    var pu;
    iu.CycleGreedy = pu = w.p(iu, "CycleGreedy", 1);
    var ku;
    iu.LayerOptimalLinkLength = ku = w.p(iu, "LayerOptimalLinkLength", 0);
    var Hu;
    iu.LayerLongestPathSink = Hu = w.p(iu, "LayerLongestPathSink", 1);
    var Ju;
    iu.LayerLongestPathSource = Ju = w.p(iu, "LayerLongestPathSource", 2);
    var lu;
    iu.InitDepthFirstOut = lu = w.p(iu, "InitDepthFirstOut", 0);
    var Pu;
    iu.InitDepthFirstIn = Pu = w.p(iu, "InitDepthFirstIn", 1);
    var Nu;
    iu.InitNaive = Nu = w.p(iu, "InitNaive", 2);
    var Tu;
    iu.AggressiveNone = Tu = w.p(iu, "AggressiveNone", 0);
    var mu;
    iu.AggressiveLess = mu = w.p(iu, "AggressiveLess", 1);
    var Uu;
    iu.AggressiveMore = Uu = w.p(iu, "AggressiveMore", 2);
    iu.PackNone = 0;
    var Vu;
    iu.PackExpand = Vu = 1;
    var Wu;
    iu.PackStraighten = Wu = 2;
    var Yu;
    iu.PackMedian = Yu = 4;
    var nu;
    iu.PackAll = nu = 7;
    function ev() {
        this.index = this.pe = this.We = this.ee = this.first = this.layer = 0;
        this.link = null;
        this.qi = 0
    }

    w.$d(ev, {layer: !0, first: !0, ee: !0, We: !0, pe: !0, index: !0, link: !0, qi: !0});
    function ou() {
        qg.call(this)
    }

    w.La(ou, qg);
    w.fa("LayeredDigraphNetwork", ou);
    ou.prototype.createVertex = function () {
        return new gv
    };
    ou.prototype.createEdge = function () {
        return new hv
    };
    function gv() {
        ks.call(this);
        this.index = this.column = this.layer = -1;
        this.component = NaN;
        this.near = null;
        this.valid = !1;
        this.finish = this.Rp = NaN;
        this.kn = 0;
        this.KA = this.LA = null
    }

    w.La(gv, ks);
    w.fa("LayeredDigraphVertex", gv);
    function hv() {
        ls.call(this);
        this.forest = this.rev = this.valid = !1;
        this.portToPos = this.portFromPos = NaN;
        this.portToColOffset = this.portFromColOffset = 0
    }

    w.La(hv, ls);
    w.fa("LayeredDigraphEdge", hv);
    function Y() {
        0 < arguments.length && w.hd(Y);
        pg.call(this);
        this.qd = new J(Object);
        this.ys = iv;
        this.Hf = jv;
        this.pt = kv;
        this.Sv = lv;
        this.JB = null;
        this.Ih = !0;
        this.kd = mv;
        this.hg = (new ha(10, 10)).freeze();
        this.ta = new nv;
        this.ua = new nv;
        this.Az = []
    }

    w.La(Y, pg);
    w.fa("TreeLayout", Y);
    Y.prototype.cloneProtected = function (a) {
        pg.prototype.cloneProtected.call(this, a);
        a.ys = this.ys;
        a.pt = this.pt;
        a.Sv = this.Sv;
        a.Ih = this.Ih;
        a.kd = this.kd;
        a.hg.assign(this.hg);
        a.ta.copyInheritedPropertiesFrom(this.ta);
        a.ua.copyInheritedPropertiesFrom(this.ua)
    };
    Y.prototype.fc = function (a) {
        a.De === Y ? 0 === a.name.indexOf("Alignment") ? this.alignment = a : 0 === a.name.indexOf("Arrangement") ? this.Of = a : 0 === a.name.indexOf("Compaction") ? this.compaction = a : 0 === a.name.indexOf("Path") ? this.path = a : 0 === a.name.indexOf("Sorting") ? this.sorting = a : 0 === a.name.indexOf("Style") ? this.NJ = a : w.k("Unknown enum value: " + a) : pg.prototype.fc.call(this, a)
    };
    Y.prototype.createNetwork = function () {
        return new ov
    };
    Y.prototype.makeNetwork = function (a) {
        function b(a) {
            if (a instanceof T)return !a.lf && "Comment" !== a.rd;
            if (a instanceof W) {
                var b = a.W;
                if (null === b || b.lf || "Comment" === b.rd)return !1;
                a = a.$;
                return null === a || a.lf || "Comment" === a.rd ? !1 : !0
            }
            return !1
        }

        var c = this.createNetwork();
        c.Rb = this;
        a instanceof D ? (c.rk(a.dg, !0, b), c.rk(a.links, !0, b)) : a instanceof U ? c.rk(a.Mc, !1, b) : c.rk(a.i, !1, b);
        return c
    };
    Y.prototype.doLayout = function (a) {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.Of !== pv && (this.oe = this.initialOrigin(this.oe));
        var b = this.g;
        null === b && a instanceof D && (b = a);
        this.Hf = this.path === iv && null !== b ? b.Od ? jv : qv : this.path === iv ? jv : this.path;
        if (0 < this.network.vertexes.count) {
            this.network.Zw();
            for (a = this.network.vertexes.i; a.next();)b = a.value, b.initialized = !1, b.level =
                0, b.parent = null, b.children = [];
            if (0 < this.qd.count) {
                a = new J(nv);
                for (b = this.qd.i; b.next();) {
                    var c = b.value;
                    c instanceof T ? (c = this.network.wn(c), null !== c && a.add(c)) : c instanceof nv && a.add(c)
                }
                this.qd = a
            }
            0 === this.qd.count && this.findRoots();
            for (a = this.qd.copy().i; a.next();)b = a.value, b.initialized || (b.initialized = !0, rv(this, b));
            b = this.network.vertexes;
            for (a = null; a = sv(b), 0 < a.count;)b = tv(this, a), null !== b && this.qd.add(b), b.initialized = !0, rv(this, b), b = a;
            for (a = this.qd.i; a.next();)b = a.value, b instanceof nv && uv(this,
                b);
            for (a = this.qd.i; a.next();)b = a.value, b instanceof nv && vv(this, b);
            for (a = this.qd.i; a.next();)b = a.value, b instanceof nv && wv(this, b);
            this.Nz();
            if (this.yA === xv) {
                c = [];
                for (a = this.network.vertexes.i; a.next();) {
                    var d = a.value, b = d.parent;
                    null === b && (b = d);
                    var b = 0 === b.angle || 180 === b.angle, e = c[d.level];
                    void 0 === e && (e = 0);
                    c[d.level] = Math.max(e, b ? d.width : d.height)
                }
                for (d = 0; d < c.length; d++)void 0 === c[d] && (c[d] = 0);
                this.JB = c;
                for (a = this.network.vertexes.i; a.next();)d = a.value, b = d.parent, null === b && (b = d), 0 === b.angle || 180 ===
                b.angle ? (180 === b.angle && (d.Qt += c[d.level] - d.width), d.width = c[d.level]) : (270 === b.angle && (d.Rt += c[d.level] - d.height), d.height = c[d.level])
            } else if (this.yA === yv)for (a = this.network.vertexes.i; a.next();) {
                c = a.value;
                b = 0 === c.angle || 180 === c.angle;
                e = -1;
                for (d = 0; d < c.children.length; d++)var f = c.children[d], e = Math.max(e, b ? f.width : f.height);
                if (0 <= e)for (d = 0; d < c.children.length; d++)f = c.children[d], b ? (180 === c.angle && (f.Qt += e - f.width), f.width = e) : (270 === c.angle && (f.Rt += e - f.height), f.height = e)
            }
            for (a = this.qd.i; a.next();)b =
                a.value, b instanceof nv && this.layoutTree(b);
            this.arrangeTrees();
            this.updateParts()
        }
        this.network = null;
        this.qd = new J(Object);
        this.yf = !0
    };
    function sv(a) {
        var b = new J(nv);
        for (a = a.i; a.next();) {
            var c = a.value;
            c.initialized || b.add(c)
        }
        return b
    }

    Y.prototype.findRoots = function () {
        for (var a = this.network.vertexes, b = a.i; b.next();) {
            var c = b.value;
            switch (this.Hf) {
                case jv:
                    0 === c.kc.count && this.qd.add(c);
                    break;
                case qv:
                    0 === c.hc.count && this.qd.add(c);
                    break;
                default:
                    w.k("Unhandled path value " + this.Hf.toString())
            }
        }
        0 === this.qd.count && (a = tv(this, a), null !== a && this.qd.add(a))
    };
    function tv(a, b) {
        for (var c = 999999, d = null, e = b.i; e.next();) {
            var f = e.value;
            switch (a.Hf) {
                case jv:
                    f.kc.count < c && (c = f.kc.count, d = f);
                    break;
                case qv:
                    f.hc.count < c && (c = f.hc.count, d = f);
                    break;
                default:
                    w.k("Unhandled path value " + a.Hf.toString())
            }
        }
        return d
    }

    function rv(a, b) {
        if (null !== b) {
            switch (a.Hf) {
                case jv:
                    if (0 < b.hc.count) {
                        for (var c = new I(nv), d = b.GH; d.next();) {
                            var e = d.value;
                            zv(a, b, e) && c.add(e)
                        }
                        0 < c.count && (b.children = c.dc())
                    }
                    break;
                case qv:
                    if (0 < b.kc.count) {
                        c = new I(nv);
                        for (d = b.BJ; d.next();)e = d.value, zv(a, b, e) && c.add(e);
                        0 < c.count && (b.children = c.dc())
                    }
                    break;
                default:
                    w.k("Unhandled path value" + a.Hf.toString())
            }
            c = b.children;
            d = c.length;
            for (e = 0; e < d; e++) {
                var f = c[e];
                f.initialized = !0;
                f.level = b.level + 1;
                f.parent = b;
                a.qd.remove(f)
            }
            for (e = 0; e < d; e++)f = c[e], rv(a, f)
        }
    }

    function zv(a, b, c) {
        if (c.initialized) {
            var d;
            if (null === b)d = !1; else {
                for (d = b.parent; null !== d && d !== c;)d = d.parent;
                d = d === c
            }
            if (d || c.level > b.level)return !1;
            a.removeChild(c.parent, c)
        }
        return !0
    }

    Y.prototype.removeChild = function (a, b) {
        if (null !== a && null !== b) {
            for (var c = a.children, d = 0, e = 0; e < c.length; e++)c[e] === b && d++;
            if (0 < d) {
                for (var d = Array(c.length - d), f = 0, e = 0; e < c.length; e++)c[e] !== b && (d[f++] = c[e]);
                a.children = d
            }
        }
    };
    function uv(a, b) {
        if (null !== b) {
            a.initializeTreeVertexValues(b);
            b.alignment === Av && a.sortTreeVertexChildren(b);
            for (var c = 0, d = b.mn, e = 0, f = b.children, h = f.length, k = 0; k < h; k++) {
                var l = f[k];
                uv(a, l);
                c += l.descendantCount + 1;
                d = Math.max(d, l.maxChildrenCount);
                e = Math.max(e, l.maxGenerationCount)
            }
            b.descendantCount = c;
            b.maxChildrenCount = d;
            b.maxGenerationCount = 0 < d ? e + 1 : 0
        }
    }

    function Bv(a, b) {
        switch (a.pt) {
            default:
            case kv:
                return null !== b.parent ? b.parent : a.ta;
            case Cv:
                return null === b.parent ? a.ta : null === b.parent.parent ? a.ua : b.parent;
            case Dv:
                return null !== b.parent ? null !== b.parent.parent ? b.parent.parent : a.ua : a.ta;
            case Ev:
                var c = !0;
                if (0 === b.mn)c = !1; else for (var d = b.children, e = d.length, f = 0; f < e; f++)if (0 < d[f].mn) {
                    c = !1;
                    break
                }
                return c && null !== b.parent ? a.ua : null !== b.parent ? b.parent : a.ta
        }
    }

    Y.prototype.initializeTreeVertexValues = function (a) {
        var b = Bv(this, a);
        a.copyInheritedPropertiesFrom(b);
        if (null !== a.parent && a.parent.alignment === Av) {
            for (var b = a.angle, c = a.parent.children, d = 0; d < c.length && a !== c[d];)d++;
            0 === d % 2 ? d !== c.length - 1 && (b = 90 === b ? 180 : 180 === b ? 270 : 270 === b ? 180 : 270) : b = 90 === b ? 0 : 180 === b ? 90 : 270 === b ? 0 : 90;
            a.angle = b
        }
        a.initialized = !0
    };
    function vv(a, b) {
        if (null !== b) {
            a.assignTreeVertexValues(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++)vv(a, c[e])
        }
    }

    Y.prototype.assignTreeVertexValues = function () {
    };
    function wv(a, b) {
        if (null !== b) {
            b.alignment !== Av && a.sortTreeVertexChildren(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++)wv(a, c[e])
        }
    }

    Y.prototype.sortTreeVertexChildren = function (a) {
        switch (a.sorting) {
            case Fv:
                break;
            case Gv:
                a.children.reverse();
                break;
            case Hv:
                a.children.sort(a.comparer);
                break;
            case Iv:
                a.children.sort(a.comparer);
                a.children.reverse();
                break;
            default:
                w.k("Unhandled sorting value " + a.sorting.toString())
        }
    };
    Y.prototype.Nz = function () {
        if (this.comments)for (var a = this.network.vertexes.i; a.next();)this.addComments(a.value)
    };
    Y.prototype.addComments = function (a) {
        var b = a.angle, c = a.parent, d = 0, e = Jv, e = !1;
        null !== c && (d = c.angle, e = c.alignment, e = Kv(e));
        var b = 90 === b || 270 === b, d = 90 === d || 270 === d, c = 0 === a.mn, f = 0, h = 0, k = 0, l = a.commentSpacing;
        if (null !== a.Nc)for (var m = a.Nc.GE(); m.next();) {
            var n = m.value;
            "Comment" === n.rd && n.canLayout() && (null === a.comments && (a.comments = []), a.comments.push(n), n.Ze(), n = n.za, b && !c || !e && !d && c || e && d && c ? (f = Math.max(f, n.width), h += n.height + Math.abs(k)) : (f += n.width + Math.abs(k), h = Math.max(h, n.height)), k = l)
        }
        null !== a.comments &&
        (b && !c || !e && !d && c || e && d && c ? (f += Math.abs(a.commentMargin), h = Math.max(0, h - a.height)) : (h += Math.abs(a.commentMargin), f = Math.max(0, f - a.width)), e = w.Vg(0, 0, a.M.width + f, a.M.height + h), a.jb = e, w.Gb(e))
    };
    function Kv(a) {
        return a === Lv || a === Av || a === Mv || a === Nv
    }

    function Ov(a) {
        return a === Lv || a === Av
    }

    function Pv(a) {
        var b = a.parent;
        if (null !== b) {
            var c = b.alignment;
            if (Kv(c)) {
                if (Ov(c)) {
                    b = b.children;
                    for (c = 0; c < b.length && a !== b[c];)c++;
                    return 0 === c % 2
                }
                if (c === Mv)return !0
            }
        }
        return !1
    }

    Y.prototype.layoutComments = function (a) {
        if (null !== a.comments) {
            var b = a.Nc.za, c = a.parent, d = a.angle, e = 0, f = Jv, f = !1;
            null !== c && (e = c.angle, f = c.alignment, f = Kv(f));
            for (var c = 90 === d || 270 === d, d = 90 === e || 270 === e, h = 0 === a.mn, k = Pv(a), l = 0, m = a.comments, n = m.length, p = w.K(), q = 0; q < n; q++) {
                var r = m[q], s = r.za;
                if (c && !h || !f && !d && h || f && d && h) {
                    if (135 < e && !f || d && k)if (0 <= a.commentMargin)for (p.l(a.M.x - a.commentMargin - s.width, a.M.y + l), r.move(p), r = r.Ig(); r.next();) {
                        var u = r.value;
                        u.Ab = Ec;
                        u.Bb = Fc
                    } else for (p.l(a.M.x + 2 * a.T.x - a.commentMargin,
                        a.M.y + l), r.move(p), r = r.Ig(); r.next();)u = r.value, u.Ab = Fc, u.Bb = Ec; else if (0 <= a.commentMargin)for (p.l(a.M.x + 2 * a.T.x + a.commentMargin, a.M.y + l), r.move(p), r = r.Ig(); r.next();)u = r.value, u.Ab = Fc, u.Bb = Ec; else for (p.l(a.M.x + a.commentMargin - s.width, a.M.y + l), r.move(p), r = r.Ig(); r.next();)u = r.value, u.Ab = Ec, u.Bb = Fc;
                    l = 0 <= a.commentSpacing ? l + (s.height + a.commentSpacing) : l + (a.commentSpacing - s.height)
                } else {
                    if (135 < e && !f || !d && k)if (0 <= a.commentMargin)for (p.l(a.M.x + l, a.M.y - a.commentMargin - s.height), r.move(p), r = r.Ig(); r.next();)u =
                        r.value, u.Ab = Dc, u.Bb = Gc; else for (p.l(a.M.x + l, a.M.y + 2 * a.T.y - a.commentMargin), r.move(p), r = r.Ig(); r.next();)u = r.value, u.Ab = Gc, u.Bb = Dc; else if (0 <= a.commentMargin)for (p.l(a.M.x + l, a.M.y + 2 * a.T.y + a.commentMargin), r.move(p), r = r.Ig(); r.next();)u = r.value, u.Ab = Gc, u.Bb = Dc; else for (p.l(a.M.x + l, a.M.y + a.commentMargin - s.height), r.move(p), r = r.Ig(); r.next();)u = r.value, u.Ab = Dc, u.Bb = Gc;
                    l = 0 <= a.commentSpacing ? l + (s.width + a.commentSpacing) : l + (a.commentSpacing - s.width)
                }
            }
            w.v(p);
            b = l - a.commentSpacing - (c ? b.height : b.width);
            if (this.Hf ===
                jv)for (e = a.hc; e.next();)a = e.value.link, null === a || a.Dk || (a.Rl = 0 < b ? b : NaN); else for (e = a.kc; e.next();)a = e.value.link, null === a || a.Dk || (a.jm = 0 < b ? b : NaN)
        }
    };
    Y.prototype.layoutTree = function (a) {
        if (null !== a) {
            for (var b = a.children, c = b.length, d = 0; d < c; d++)this.layoutTree(b[d]);
            switch (a.compaction) {
                case Qv:
                    Rv(this, a);
                    break;
                case Sv:
                    if (a.alignment === Av)Rv(this, a); else if (0 === a.mn) {
                        var d = a.parent, b = !1, c = 0, e = Jv;
                        null !== d && (c = d.angle, e = d.alignment, b = Kv(e));
                        d = Pv(a);
                        a.pa.l(0, 0);
                        a.ib.l(a.width, a.height);
                        null === a.parent || null === a.comments || (180 !== c && 270 !== c || b) && !d ? a.Oa.l(0, 0) : 180 === c && !b || (90 === c || 270 === c) && d ? a.Oa.l(a.width - 2 * a.T.x, 0) : a.Oa.l(0, a.height - 2 * a.T.y);
                        a.gu =
                            null;
                        a.Bu = null
                    } else {
                        for (var f = Tv(a), b = 90 === f || 270 === f, h = 0, k = a.children, l = k.length, m = 0; m < l; m++)var n = k[m], h = Math.max(h, b ? n.ib.width : n.ib.height);
                        var p = a.alignment, d = p === Uv, q = p === Vv, r = Kv(p), s = Math.max(0, a.breadthLimit), c = Wv(a), u = a.nodeSpacing, t = Xv(a), x = a.rowSpacing, v = 0;
                        if (d || q || a.oq || a.pq && 1 === a.maxGenerationCount)v = Math.max(0, a.rowIndent);
                        var d = a.width, e = a.height, B = 0, y = 0, H = 0, E = null, V = null, ba = 0, Q = 0, $ = 0, ca = 0, R = 0, Ra = 0, hb = 0, qa = 0, n = 0;
                        r && !Ov(p) && 135 < f && k.reverse();
                        if (Ov(p))if (1 < l)for (m = 0; m < l; m++)0 === m % 2 &&
                        m !== l - 1 ? qa = Math.max(qa, b ? k[m].ib.width : k[m].ib.height) : 0 !== m % 2 && (n = Math.max(n, b ? k[m].ib.width : k[m].ib.height)); else 1 === l && (qa = b ? k[0].ib.width : k[0].ib.height);
                        if (r) {
                            switch (p) {
                                case Lv:
                                    y = 135 > f ? Yv(a, k, qa, B, y) : Zv(a, k, qa, B, y);
                                    qa = y.x;
                                    B = y.width;
                                    y = y.height;
                                    break;
                                case Mv:
                                    for (m = 0; m < l; m++) {
                                        var n = k[m], Ja = n.ib, E = 0 === Ra ? 0 : x;
                                        b ? (n.pa.l(h - Ja.width, ca + E), B = Math.max(B, Ja.width), y = Math.max(y, ca + E + Ja.height), ca += E + Ja.height) : (n.pa.l($ + E, h - Ja.height), B = Math.max(B, $ + E + Ja.width), y = Math.max(y, Ja.height), $ += E + Ja.width);
                                        Ra++
                                    }
                                    break;
                                case Nv:
                                    for (m = 0; m < l; m++)n = k[m], Ja = n.ib, E = 0 === Ra ? 0 : x, b ? (n.pa.l(u / 2 + a.T.x, ca + E), B = Math.max(B, Ja.width), y = Math.max(y, ca + E + Ja.height), ca += E + Ja.height) : (n.pa.l($ + E, u / 2 + a.T.y), B = Math.max(B, $ + E + Ja.width), y = Math.max(y, Ja.height), $ += E + Ja.width), Ra++
                            }
                            E = $v(this, 2);
                            V = $v(this, 2);
                            b ? (E[0].l(0, 0), E[1].l(0, y), V[0].l(B, 0)) : (E[0].l(0, 0), E[1].l(B, 0), V[0].l(0, y));
                            V[1].l(B, y)
                        } else for (m = 0; m < l; m++) {
                            n = k[m];
                            Ja = n.ib;
                            if (b) {
                                0 < s && 0 < Ra && $ + u + Ja.width > s && ($ < h && Fw(a, p, h - $, 0, hb, m - 1), R++, Ra = 0, hb = m, H = y, $ = 0, ca = 135 < f ? -y - x : y + x);
                                Gw(this,
                                    n, 0, ca);
                                var za = 0;
                                if (0 === Ra) {
                                    if (E = n.gu, V = n.Bu, ba = Ja.width, Q = Ja.height, null === E || null === V || f !== Tv(n))E = $v(this, 2), V = $v(this, 2), E[0].l(0, 0), E[1].l(0, Q), V[0].l(ba, 0), V[1].l(ba, Q)
                                } else {
                                    var Pb = w.lb(), Q = Hw(this, a, n, E, V, ba, Q, Pb), za = Q.x, E = Pb[0], V = Pb[1], ba = Q.width, Q = Q.height;
                                    w.va(Pb);
                                    $ < Ja.width && 0 > za && (Iw(a, -za, 0, hb, m - 1), Jw(E, -za, 0), Jw(V, -za, 0), za = 0)
                                }
                                n.pa.l(za, ca);
                                B = Math.max(B, ba);
                                y = Math.max(y, H + (0 === R ? 0 : x) + Ja.height);
                                $ = ba
                            } else {
                                0 < s && 0 < Ra && ca + u + Ja.height > s && (ca < h && Fw(a, p, 0, h - ca, hb, m - 1), R++, Ra = 0, hb = m, H = B, ca =
                                    0, $ = 135 < f ? -B - x : B + x);
                                Gw(this, n, $, 0);
                                za = 0;
                                if (0 === Ra) {
                                    if (E = n.gu, V = n.Bu, ba = Ja.width, Q = Ja.height, null === E || null === V || f !== Tv(n))E = $v(this, 2), V = $v(this, 2), E[0].l(0, 0), E[1].l(ba, 0), V[0].l(0, Q), V[1].l(ba, Q)
                                } else Pb = w.lb(), Q = Hw(this, a, n, E, V, ba, Q, Pb), za = Q.x, E = Pb[0], V = Pb[1], ba = Q.width, Q = Q.height, w.va(Pb), ca < Ja.height && 0 > za && (Iw(a, 0, -za, hb, m - 1), Jw(E, 0, -za), Jw(V, 0, -za), za = 0);
                                n.pa.l($, za);
                                y = Math.max(y, Q);
                                B = Math.max(B, H + (0 === R ? 0 : x) + Ja.width);
                                ca = Q
                            }
                            Ra++
                        }
                        0 < R && (b ? (y += Math.max(0, c), $ < B && Fw(a, p, B - $, 0, hb, l - 1), 0 < v && (q ||
                        Iw(a, v, 0, 0, l - 1), B += v)) : (B += Math.max(0, c), ca < y && Fw(a, p, 0, y - ca, hb, l - 1), 0 < v && (q || Iw(a, 0, v, 0, l - 1), y += v)));
                        v = q = 0;
                        switch (p) {
                            case Kw:
                                b ? q += B / 2 - a.T.x - t / 2 : v += y / 2 - a.T.y - t / 2;
                                break;
                            case Jv:
                                0 < R ? b ? q += B / 2 - a.T.x - t / 2 : v += y / 2 - a.T.y - t / 2 : b ? (qa = k[0].pa.x + k[0].Oa.x, m = k[l - 1].pa.x + k[l - 1].Oa.x + 2 * k[l - 1].T.x, q += qa + (m - qa) / 2 - a.T.x - t / 2) : (qa = k[0].pa.y + k[0].Oa.y, m = k[l - 1].pa.y + k[l - 1].Oa.y + 2 * k[l - 1].T.y, v += qa + (m - qa) / 2 - a.T.y - t / 2);
                                break;
                            case Uv:
                                b ? (q -= t, B += t) : (v -= t, y += t);
                                break;
                            case Vv:
                                b ? (q += B - a.width + t, B += t) : (v += y - a.height + t, y += t);
                                break;
                            case Lv:
                                b ? q = 1 < l ? q + (qa + u / 2 - a.T.x) : q + (k[0].T.x - a.T.x + k[0].Oa.x) : v = 1 < l ? v + (qa + u / 2 - a.T.y) : v + (k[0].T.y - a.T.y + k[0].Oa.y);
                                break;
                            case Mv:
                                b ? q += B + u / 2 - a.T.x : v += y + u / 2 - a.T.y;
                                break;
                            case Nv:
                                break;
                            default:
                                w.k("Unhandled alignment value " + p.toString())
                        }
                        for (m = 0; m < l; m++)n = k[m], b ? n.pa.l(n.pa.x + n.Oa.x - q, n.pa.y + (135 < f ? (r ? -y : -n.ib.height) + n.Oa.y - c : e + c + n.Oa.y)) : n.pa.l(n.pa.x + (135 < f ? (r ? -B : -n.ib.width) + n.Oa.x - c : d + c + n.Oa.x), n.pa.y + n.Oa.y - v);
                        l = k = 0;
                        r ? b ? (B = Lw(a, B, q), 0 > q && (q = 0), 135 < f && (v += y + c), y += e + c, p === Nv && (k += u / 2 + a.T.x), l += e +
                            c) : (135 < f && (q += B + c), B += d + c, y = Mw(a, y, v), 0 > v && (v = 0), p === Nv && (l += u / 2 + a.T.y), k += d + c) : b ? (null === a.comments ? d > B && (p = Nw(p, d - B, 0), k = p.x, l = p.y, B = d, q = 0) : B = Lw(a, B, q), 0 > q && (k -= q, q = 0), 135 < f && (v += y + c), y = Math.max(Math.max(y, e), y + e + c), l += e + c) : (135 < f && (q += B + c), B = Math.max(Math.max(B, d), B + d + c), null === a.comments ? e > y && (p = Nw(p, 0, e - y), k = p.x, l = p.y, y = e, v = 0) : y = Mw(a, y, v), 0 > v && (l -= v, v = 0), k += d + c);
                        if (0 < R)f = $v(this, 4), p = $v(this, 4), b ? (f[2].l(0, e + c), f[3].l(f[2].x, y), p[2].l(B, f[2].y), p[3].l(p[2].x, f[3].y)) : (f[2].l(d + c, 0), f[3].l(B,
                            f[2].y), p[2].l(f[2].x, y), p[3].l(f[3].x, p[2].y)); else {
                            f = $v(this, E.length + 2);
                            p = $v(this, V.length + 2);
                            for (m = 0; m < E.length; m++)r = E[m], f[m + 2].l(r.x + k, r.y + l);
                            for (m = 0; m < V.length; m++)r = V[m], p[m + 2].l(r.x + k, r.y + l)
                        }
                        b ? (f[0].l(q, 0), f[1].l(f[0].x, e), f[2].y < f[1].y && (f[2].x > f[0].x ? f[2].assign(f[1]) : f[1].assign(f[2])), f[3].y < f[2].y && (f[3].x > f[0].x ? f[3].assign(f[2]) : f[2].assign(f[3])), p[0].l(q + d, 0), p[1].l(p[0].x, e), p[2].y < p[1].y && (p[2].x < p[0].x ? p[2].assign(p[1]) : p[1].assign(p[2])), p[3].y < p[2].y && (p[3].x < p[0].x ? p[3].assign(p[2]) :
                            p[2].assign(p[3])), f[2].y -= c / 2, p[2].y -= c / 2) : (f[0].l(0, v), f[1].l(d, f[0].y), f[2].x < f[1].x && (f[2].y > f[0].y ? f[2].assign(f[1]) : f[1].assign(f[2])), f[3].x < f[2].x && (f[3].y > f[0].y ? f[3].assign(f[2]) : f[2].assign(f[3])), p[0].l(0, v + e), p[1].l(d, p[0].y), p[2].x < p[1].x && (p[2].y < p[0].y ? p[2].assign(p[1]) : p[1].assign(p[2])), p[3].x < p[2].x && (p[3].y < p[0].y ? p[3].assign(p[2]) : p[2].assign(p[3])), f[2].x -= c / 2, p[2].x -= c / 2);
                        Ow(this, E);
                        Ow(this, V);
                        a.gu = f;
                        a.Bu = p;
                        a.Oa.l(q, v);
                        a.ib.l(B, y)
                    }
                    break;
                default:
                    w.k("Unhandled compaction value " +
                        a.compaction.toString())
            }
        }
    };
    function Rv(a, b) {
        if (0 === b.mn) {
            var c = !1, d = 0, e = Jv;
            null !== b.parent && (d = b.parent.angle, e = b.parent.alignment, c = Kv(e));
            e = Pv(b);
            b.pa.l(0, 0);
            b.ib.l(b.width, b.height);
            null === b.parent || null === b.comments || (180 !== d && 270 !== d || c) && !e ? b.Oa.l(0, 0) : 180 === d && !c || (90 === d || 270 === d) && e ? b.Oa.l(b.width - 2 * b.T.x, 0) : b.Oa.l(0, b.height - 2 * b.T.y)
        } else {
            for (var c = Tv(b), d = 90 === c || 270 === c, f = 0, e = b.children, h = e.length, k = 0; k < h; k++)var l = e[k], f = Math.max(f, d ? l.ib.width : l.ib.height);
            var m = b.alignment, n = m === Uv, p = m === Vv, q = Kv(m), r = Math.max(0,
                b.breadthLimit), s = Wv(b), u = b.nodeSpacing, t = Xv(b), x = n || p ? 0 : t / 2, v = b.rowSpacing, B = 0;
            if (n || p || b.oq || b.pq && 1 === b.maxGenerationCount)B = Math.max(0, b.rowIndent);
            var n = b.width, y = b.height, H = 0, E = 0, V = 0, ba = 0, Q = 0, $ = 0, ca = 0, R = 0, Ra = 0, hb = 0;
            q && !Ov(m) && 135 < c && e.reverse();
            if (Ov(m))if (1 < h)for (k = 0; k < h; k++) {
                var l = e[k], qa = l.ib;
                0 === k % 2 && k !== h - 1 ? Ra = Math.max(Ra, (d ? qa.width : qa.height) + Pw(l) - u) : 0 !== k % 2 && (hb = Math.max(hb, (d ? qa.width : qa.height) + Pw(l) - u))
            } else 1 === h && (Ra = d ? e[0].ib.width : e[0].ib.height);
            if (q)switch (m) {
                case Lv:
                case Av:
                    E =
                        135 > c ? Yv(b, e, Ra, H, E) : Zv(b, e, Ra, H, E);
                    Ra = E.x;
                    H = E.width;
                    E = E.height;
                    break;
                case Mv:
                    for (k = 0; k < h; k++)l = e[k], qa = l.ib, r = 0 === ca ? 0 : v, d ? (l.pa.l(f - qa.width, Q + r), H = Math.max(H, qa.width), E = Math.max(E, Q + r + qa.height), Q += r + qa.height) : (l.pa.l(ba + r, f - qa.height), H = Math.max(H, ba + r + qa.width), E = Math.max(E, qa.height), ba += r + qa.width), ca++;
                    break;
                case Nv:
                    for (f = 0; f < h; f++)l = e[f], qa = l.ib, r = 0 === ca ? 0 : v, d ? (l.pa.l(u / 2 + b.T.x, Q + r), H = Math.max(H, qa.width), E = Math.max(E, Q + r + qa.height), Q += r + qa.height) : (l.pa.l(ba + r, u / 2 + b.T.y), H = Math.max(H,
                        ba + r + qa.width), E = Math.max(E, qa.height), ba += r + qa.width), ca++
            } else for (k = 0; k < h; k++)l = e[k], qa = l.ib, d ? (0 < r && 0 < ca && ba + u + qa.width > r && (ba < f && Fw(b, m, f - ba, 0, R, k - 1), $++, ca = 0, R = k, V = E, ba = 0, Q = 135 < c ? -E - v : E + v), hb = 0 === ca ? x : u, Gw(a, l, 0, Q), l.pa.l(ba + hb, Q), H = Math.max(H, ba + hb + qa.width), E = Math.max(E, V + (0 === $ ? 0 : v) + qa.height), ba += hb + qa.width) : (0 < r && 0 < ca && Q + u + qa.height > r && (Q < f && Fw(b, m, 0, f - Q, R, k - 1), $++, ca = 0, R = k, V = H, Q = 0, ba = 135 < c ? -H - v : H + v), hb = 0 === ca ? x : u, Gw(a, l, ba, 0), l.pa.l(ba, Q + hb), E = Math.max(E, Q + hb + qa.height), H = Math.max(H,
                V + (0 === $ ? 0 : v) + qa.width), Q += hb + qa.height), ca++;
            0 < $ && (d ? (E += Math.max(0, s), ba < H && Fw(b, m, H - ba, 0, R, h - 1), 0 < B && (p || Iw(b, B, 0, 0, h - 1), H += B)) : (H += Math.max(0, s), Q < E && Fw(b, m, 0, E - Q, R, h - 1), 0 < B && (p || Iw(b, 0, B, 0, h - 1), E += B)));
            B = p = 0;
            switch (m) {
                case Kw:
                    d ? p += H / 2 - b.T.x - t / 2 : B += E / 2 - b.T.y - t / 2;
                    break;
                case Jv:
                    0 < $ ? d ? p += H / 2 - b.T.x - t / 2 : B += E / 2 - b.T.y - t / 2 : d ? (m = e[0].pa.x + e[0].Oa.x, u = e[h - 1].pa.x + e[h - 1].Oa.x + 2 * e[h - 1].T.x, p += m + (u - m) / 2 - b.T.x - t / 2) : (m = e[0].pa.y + e[0].Oa.y, u = e[h - 1].pa.y + e[h - 1].Oa.y + 2 * e[h - 1].T.y, B += m + (u - m) / 2 - b.T.y - t / 2);
                    break;
                case Uv:
                    d ? (p -= t, H += t) : (B -= t, E += t);
                    break;
                case Vv:
                    d ? (p += H - b.width + t, H += t) : (B += E - b.height + t, E += t);
                    break;
                case Lv:
                case Av:
                    d ? p = 1 < h ? p + (Ra + u / 2 - b.T.x) : p + (e[0].T.x - b.T.x + e[0].Oa.x) : B = 1 < h ? B + (Ra + u / 2 - b.T.y) : B + (e[0].T.y - b.T.y + e[0].Oa.y);
                    break;
                case Mv:
                    d ? p += H + u / 2 - b.T.x : B += E + u / 2 - b.T.y;
                    break;
                case Nv:
                    break;
                default:
                    w.k("Unhandled alignment value " + m.toString())
            }
            for (k = 0; k < h; k++)l = e[k], d ? l.pa.l(l.pa.x + l.Oa.x - p, l.pa.y + (135 < c ? (q ? -E : -l.ib.height) + l.Oa.y - s : y + s + l.Oa.y)) : l.pa.l(l.pa.x + (135 < c ? (q ? -H : -l.ib.width) + l.Oa.x - s : n + s +
                l.Oa.x), l.pa.y + l.Oa.y - B);
            d ? (H = Lw(b, H, p), 0 > p && (p = 0), 135 < c && (B += E + s), E += y + s) : (135 < c && (p += H + s), H += n + s, E = Mw(b, E, B), 0 > B && (B = 0));
            b.Oa.l(p, B);
            b.ib.l(H, E)
        }
    }

    function Yv(a, b, c, d, e) {
        var f = b.length;
        if (0 === f)return new A(c, 0, d, e);
        if (1 === f) {
            var h = b[0];
            d = h.ib.width;
            e = h.ib.height;
            return new A(c, 0, d, e)
        }
        for (var k = a.nodeSpacing, l = a.rowSpacing, m = 90 === Tv(a), n = 0, p = 0, q = 0, r = 0; r < f; r++)if (!(0 !== r % 2 || 1 < f && r === f - 1)) {
            var h = b[r], s = h.ib, u = 0 === n ? 0 : l;
            if (m) {
                var t = Pw(h) - k;
                h.pa.l(c - (s.width + t), q + u);
                d = Math.max(d, s.width + t);
                e = Math.max(e, q + u + s.height);
                q += u + s.height
            } else t = Pw(h) - k, h.pa.l(p + u, c - (s.height + t)), e = Math.max(e, s.height + t), d = Math.max(d, p + u + s.width), p += u + s.width;
            n++
        }
        var n =
            0, x = p, v = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < f; r++)0 !== r % 2 && (h = b[r], s = h.ib, u = 0 === n ? 0 : l, m ? (t = Pw(h) - k, h.pa.l(p + t, q + u), d = Math.max(d, p + s.width + t), e = Math.max(e, q + u + s.height), q += u + s.height) : (t = Pw(h) - k, h.pa.l(p + u, q + t), d = Math.max(d, p + u + s.width), e = Math.max(e, q + s.height + t), p += u + s.width), n++);
        1 < f && 1 === f % 2 && (h = b[f - 1], s = h.ib, b = Qw(h, m ? Math.max(Math.abs(v), Math.abs(q)) : Math.max(Math.abs(x), Math.abs(p))), m ? (h.pa.l(c + k / 2 - h.T.x - h.Oa.x, e + b), m = c + k / 2 - h.T.x - h.Oa.x, d = Math.max(d, m + s.width), 0 > m && (d -= m), e = Math.max(e, Math.max(v,
                q) + b + s.height), 0 > h.pa.x && (c = Rw(a, h.pa.x, !1, c, k))) : (h.pa.l(d + b, c + k / 2 - h.T.y - h.Oa.y), d = Math.max(d, Math.max(x, p) + b + s.width), m = c + k / 2 - h.T.y - h.Oa.y, e = Math.max(e, m + s.height), 0 > m && (e -= m), 0 > h.pa.y && (c = Rw(a, h.pa.y, !0, c, k))));
        return new A(c, 0, d, e)
    }

    function Zv(a, b, c, d, e) {
        var f = b.length;
        if (0 === f)return new A(c, 0, d, e);
        if (1 === f) {
            var h = b[0];
            d = h.ib.width;
            e = h.ib.height;
            return new A(c, 0, d, e)
        }
        for (var k = a.nodeSpacing, l = a.rowSpacing, m = 270 === Tv(a), n = 0, p = 0, q = 0, r = 0; r < f; r++)if (!(0 !== r % 2 || 1 < f && r === f - 1)) {
            var h = b[r], s = h.ib, u = 0 === n ? 0 : l;
            if (m) {
                var t = Pw(h) - k, q = q - (u + s.height);
                h.pa.l(c - (s.width + t), q);
                d = Math.max(d, s.width + t);
                e = Math.max(e, Math.abs(q))
            } else t = Pw(h) - k, p -= u + s.width, h.pa.l(p, c - (s.height + t)), e = Math.max(e, s.height + t), d = Math.max(d, Math.abs(p));
            n++
        }
        var n = 0,
            x = p, v = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < f; r++)0 !== r % 2 && (h = b[r], s = h.ib, u = 0 === n ? 0 : l, m ? (t = Pw(h) - k, q -= u + s.height, h.pa.l(p + t, q), d = Math.max(d, p + s.width + t), e = Math.max(e, Math.abs(q))) : (t = Pw(h) - k, p -= u + s.width, h.pa.l(p, q + t), e = Math.max(e, q + s.height + t), d = Math.max(d, Math.abs(p))), n++);
        1 < f && 1 === f % 2 && (h = b[f - 1], s = h.ib, l = Qw(h, m ? Math.max(Math.abs(v), Math.abs(q)) : Math.max(Math.abs(x), Math.abs(p))), m ? (h.pa.l(c + k / 2 - h.T.x - h.Oa.x, -e - s.height - l), p = c + k / 2 - h.T.x - h.Oa.x, d = Math.max(d, p + s.width), 0 > p && (d -= p), e = Math.max(e, Math.abs(Math.min(v,
                q)) + l + s.height), 0 > h.pa.x && (c = Rw(a, h.pa.x, !1, c, k))) : (h.pa.l(-d - s.width - l, c + k / 2 - h.T.y - h.Oa.y), d = Math.max(d, Math.abs(Math.min(x, p)) + l + s.width), p = c + k / 2 - h.T.y - h.Oa.y, e = Math.max(e, p + s.height), 0 > p && (e -= p), 0 > h.pa.y && (c = Rw(a, h.pa.y, !0, c, k))));
        for (r = 0; r < f; r++)h = b[r], m ? h.pa.l(h.pa.x, h.pa.y + e) : h.pa.l(h.pa.x + d, h.pa.y);
        return new A(c, 0, d, e)
    }

    function Pw(a) {
        return null === a.parent ? 0 : a.parent.nodeSpacing
    }

    function Qw(a) {
        return null === a.parent ? 0 : a.parent.rowSpacing
    }

    function Rw(a, b, c, d, e) {
        a = a.children;
        for (var f = a.length, h = 0; h < f; h++)c ? a[h].pa.l(a[h].pa.x, a[h].pa.y - b) : a[h].pa.l(a[h].pa.x - b, a[h].pa.y);
        b = a[f - 1];
        return Math.max(d, c ? b.Oa.y + b.T.y - e / 2 : b.Oa.x + b.T.x - e / 2)
    }

    function Lw(a, b, c) {
        switch (a.alignment) {
            case Jv:
            case Kw:
                var d = b;
                c + a.width > d && (d = c + a.width);
                0 > c && (d -= c);
                return d;
            case Uv:
                return a.width > b ? a.width : b;
            case Vv:
                return 2 * a.T.x > b ? a.width : b + a.width - 2 * a.T.x;
            case Lv:
            case Av:
                return d = Math.min(0, c), c = Math.max(b, c + a.width), Math.max(a.width, c - d);
            case Mv:
                return a.width - a.T.x + a.nodeSpacing / 2 + b;
            case Nv:
                return Math.max(a.width, a.T.x + a.nodeSpacing / 2 + b);
            default:
                return b
        }
    }

    function Mw(a, b, c) {
        switch (a.alignment) {
            case Jv:
            case Kw:
                var d = b;
                c + a.height > d && (d = c + a.height);
                0 > c && (d -= c);
                return d;
            case Uv:
                return a.height > b ? a.height : b;
            case Vv:
                return 2 * a.T.y > b ? a.height : b + a.height - 2 * a.T.y;
            case Lv:
            case Av:
                return d = Math.min(0, c), c = Math.max(b, c + a.height), Math.max(a.height, c - d);
            case Mv:
                return a.height - a.T.y + a.nodeSpacing / 2 + b;
            case Nv:
                return Math.max(a.height, a.T.y + a.nodeSpacing / 2 + b);
            default:
                return b
        }
    }

    function Nw(a, b, c) {
        switch (a) {
            case Kw:
                b /= 2;
                c /= 2;
                break;
            case Jv:
                b /= 2;
                c /= 2;
                break;
            case Uv:
                c = b = 0;
                break;
            case Vv:
                break;
            default:
                w.k("Unhandled alignment value " + a.toString())
        }
        return new z(b, c)
    }

    function Fw(a, b, c, d, e, f) {
        b = Nw(b, c, d);
        Iw(a, b.x, b.y, e, f)
    }

    function Iw(a, b, c, d, e) {
        if (0 !== b || 0 !== c)for (a = a.children; d <= e; d++) {
            var f = a[d].pa;
            f.x += b;
            f.y += c
        }
    }

    function Gw(a, b, c, d) {
        var e = b.parent;
        switch (a.Hf) {
            case jv:
                for (a = b.kc; a.next();)b = a.value, b.fromVertex === e && b.Fs.l(c, d);
                break;
            case qv:
                for (a = b.hc; a.next();)b = a.value, b.toVertex === e && b.Fs.l(c, d);
                break;
            default:
                w.k("Unhandled path value " + a.Hf.toString())
        }
    }

    function Jw(a, b, c) {
        for (var d = 0; d < a.length; d++) {
            var e = a[d];
            e.x += b;
            e.y += c
        }
    }

    function Hw(a, b, c, d, e, f, h, k) {
        var l = Tv(b), m = 90 === l || 270 === l, n = b.nodeSpacing;
        b = d;
        var p = e;
        d = f;
        e = h;
        var q = c.gu, r = c.Bu;
        h = c.ib;
        var s = m ? Math.max(e, h.height) : Math.max(d, h.width);
        if (null === q || l !== Tv(c))q = $v(a, 2), r = $v(a, 2), m ? (q[0].l(0, 0), q[1].l(0, h.height), r[0].l(h.width, 0), r[1].l(r[0].x, q[1].y)) : (q[0].l(0, 0), q[1].l(h.width, 0), r[0].l(0, h.height), r[1].l(q[1].x, r[0].y));
        if (m) {
            c = d;
            d = 9999999;
            if (!(null === p || 2 > p.length || null === q || 2 > q.length))for (m = l = 0; l < p.length && m < q.length;) {
                e = p[l];
                var u = q[m];
                f = u.x;
                var t = u.y;
                f +=
                    c;
                var x = e;
                l + 1 < p.length && (x = p[l + 1]);
                var v = u, u = v.x, v = v.y;
                m + 1 < q.length && (v = q[m + 1], u = v.x, v = v.y, u += c);
                var B = d;
                e.y === t ? B = f - e.x : e.y > t && e.y < v ? B = f + (e.y - t) / (v - t) * (u - f) - e.x : t > e.y && t < x.y && (B = f - (e.x + (t - e.y) / (x.y - e.y) * (x.x - e.x)));
                B < d && (d = B);
                x.y <= e.y ? l++ : v <= t ? m++ : (x.y <= v && l++, v <= x.y && m++)
            }
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length)d = null; else {
                n = $v(a, b.length + l.length);
                for (d = f = e = 0; f < l.length && l[f].y < b[0].y;)t = l[f++], n[d++].l(t.x + m, t.y);
                for (; e < b.length;)t = b[e++], n[d++].l(t.x, t.y);
                for (e = b[b.length -
                1].y; f < l.length && l[f].y <= e;)f++;
                for (; f < l.length && l[f].y > e;)t = l[f++], n[d++].l(t.x + m, t.y);
                l = $v(a, d);
                for (e = 0; e < d; e++)l[e].assign(n[e]);
                Ow(a, n);
                d = l
            }
            f = r;
            t = c;
            if (null === p || 2 > p.length || null === f || 2 > f.length)e = null; else {
                n = $v(a, p.length + f.length);
                for (m = x = l = 0; l < p.length && p[l].y < f[0].y;)e = p[l++], n[m++].l(e.x, e.y);
                for (; x < f.length;)e = f[x++], n[m++].l(e.x + t, e.y);
                for (f = f[f.length - 1].y; l < p.length && p[l].y <= f;)l++;
                for (; l < p.length && p[l].y > f;)e = p[l++], n[m++].l(e.x, e.y);
                e = $v(a, m);
                for (l = 0; l < m; l++)e[l].assign(n[l]);
                Ow(a, n)
            }
            f =
                Math.max(0, c) + h.width;
            h = s
        } else {
            c = e;
            d = 9999999;
            if (!(null === p || 2 > p.length || null === q || 2 > q.length))for (m = l = 0; l < p.length && m < q.length;)e = p[l], u = q[m], f = u.x, t = u.y, t += c, x = e, l + 1 < p.length && (x = p[l + 1]), v = u, u = v.x, v = v.y, m + 1 < q.length && (v = q[m + 1], u = v.x, v = v.y, v += c), B = d, e.x === f ? B = t - e.y : e.x > f && e.x < u ? B = t + (e.x - f) / (u - f) * (v - t) - e.y : f > e.x && f < x.x && (B = t - (e.y + (f - e.x) / (x.x - e.x) * (x.y - e.y))), B < d && (d = B), x.x <= e.x ? l++ : u <= f ? m++ : (x.x <= u && l++, u <= x.x && m++);
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length)d = null; else {
                n = $v(a,
                    b.length + l.length);
                for (d = f = e = 0; f < l.length && l[f].x < b[0].x;)t = l[f++], n[d++].l(t.x, t.y + m);
                for (; e < b.length;)t = b[e++], n[d++].l(t.x, t.y);
                for (e = b[b.length - 1].x; f < l.length && l[f].x <= e;)f++;
                for (; f < l.length && l[f].x > e;)t = l[f++], n[d++].l(t.x, t.y + m);
                l = $v(a, d);
                for (e = 0; e < d; e++)l[e].assign(n[e]);
                Ow(a, n);
                d = l
            }
            f = r;
            t = c;
            if (null === p || 2 > p.length || null === f || 2 > f.length)e = null; else {
                n = $v(a, p.length + f.length);
                for (m = x = l = 0; l < p.length && p[l].x < f[0].x;)e = p[l++], n[m++].l(e.x, e.y);
                for (; x < f.length;)e = f[x++], n[m++].l(e.x, e.y + t);
                for (f =
                         f[f.length - 1].x; l < p.length && p[l].x <= f;)l++;
                for (; l < p.length && p[l].x > f;)e = p[l++], n[m++].l(e.x, e.y);
                e = $v(a, m);
                for (l = 0; l < m; l++)e[l].assign(n[l]);
                Ow(a, n)
            }
            f = s;
            h = Math.max(0, c) + h.height
        }
        Ow(a, b);
        Ow(a, q);
        Ow(a, p);
        Ow(a, r);
        k[0] = d;
        k[1] = e;
        return new A(c, 0, f, h)
    }

    function $v(a, b) {
        var c = a.Az[b];
        if (void 0 !== c && (c = c.pop(), void 0 !== c))return c;
        for (var c = [], d = 0; d < b; d++)c[d] = new z;
        return c
    }

    function Ow(a, b) {
        var c = b.length, d = a.Az[c];
        void 0 === d && (d = [], a.Az[c] = d);
        d.push(b)
    }

    Y.prototype.arrangeTrees = function () {
        if (this.kd === pv)for (var a = this.qd.i; a.next();) {
            var b = a.value;
            if (b instanceof nv) {
                var c = b.Nc;
                if (null !== c) {
                    var d = c.position, c = d.x, d = d.y;
                    isFinite(c) || (c = 0);
                    isFinite(d) || (d = 0);
                    Sw(this, b, c, d)
                }
            }
        } else {
            c = [];
            for (a = this.qd.i; a.next();)b = a.value, b instanceof nv && c.push(b);
            switch (this.sorting) {
                case Fv:
                    break;
                case Gv:
                    c.reverse();
                    break;
                case Hv:
                    c.sort(this.comparer);
                    break;
                case Iv:
                    c.sort(this.comparer);
                    c.reverse();
                    break;
                default:
                    w.k("Unhandled sorting value " + this.sorting.toString())
            }
            b =
                this.oe;
            a = b.x;
            b = b.y;
            for (d = 0; d < c.length; d++) {
                var e = c[d];
                Sw(this, e, a + e.Oa.x, b + e.Oa.y);
                switch (this.kd) {
                    case mv:
                        b += e.ib.height + this.hg.height;
                        break;
                    case Tw:
                        a += e.ib.width + this.hg.width;
                        break;
                    default:
                        w.k("Unhandled arrangement value " + this.kd.toString())
                }
            }
        }
    };
    function Sw(a, b, c, d) {
        if (null !== b) {
            b.x = c;
            b.y = d;
            b = b.children;
            for (var e = b.length, f = 0; f < e; f++) {
                var h = b[f];
                Sw(a, h, c + h.pa.x, d + h.pa.y)
            }
        }
    }

    Y.prototype.commitLayout = function () {
        this.cB();
        this.commitNodes();
        this.Sz();
        this.eu && this.commitLinks()
    };
    Y.prototype.commitNodes = function () {
        for (var a = this.network.vertexes.i; a.next();)a.value.commit();
        for (a.reset(); a.next();)this.layoutComments(a.value)
    };
    Y.prototype.Sz = function () {
        if (this.yA === xv) {
            for (var a = this.JB, b = [], c = null, d = this.network.vertexes.i; d.next();) {
                var e = d.value;
                null === c ? c = e.jb.copy() : c.Gh(e.jb);
                var f = b[e.level], f = void 0 === f ? Wv(e) : Math.max(f, Wv(e));
                b[e.level] = f
            }
            for (d = 0; d < b.length; d++)void 0 === b[d] && (b[d] = 0);
            90 === this.angle || 270 === this.angle ? (c.Sf(this.nodeSpacing / 2, this.layerSpacing), e = new z(-this.nodeSpacing / 2, -this.layerSpacing / 2)) : (c.Sf(this.layerSpacing, this.nodeSpacing / 2), e = new z(-this.layerSpacing / 2, -this.nodeSpacing / 2));
            var f =
                [], c = 90 === this.angle || 270 === this.angle ? c.width : c.height, h = 0;
            if (180 === this.angle || 270 === this.angle)for (d = 0; d < a.length; d++)h += a[d] + b[d];
            for (d = 0; d < a.length; d++) {
                var k = a[d] + b[d];
                270 === this.angle ? (h -= k, f.push(new A(0, h, c, k))) : 90 === this.angle ? (f.push(new A(0, h, c, k)), h += k) : 180 === this.angle ? (h -= k, f.push(new A(h, 0, k, c))) : (f.push(new A(h, 0, k, c)), h += k)
            }
            this.commitLayers(f, e)
        }
    };
    Y.prototype.commitLayers = function () {
    };
    Y.prototype.commitLinks = function () {
        for (var a = this.network.edges.i; a.next();)a.value.commit()
    };
    Y.prototype.cB = function () {
        for (var a = this.qd.i; a.next();) {
            var b = a.value;
            b instanceof nv && Uw(this, b)
        }
    };
    function Uw(a, b) {
        if (null !== b) {
            a.setPortSpots(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++)Uw(a, c[e])
        }
    }

    Y.prototype.setPortSpots = function (a) {
        var b = a.alignment;
        if (Kv(b)) {
            var c = this.Hf === jv, d = Tv(a), e;
            switch (d) {
                case 0:
                    e = Fc;
                    break;
                case 90:
                    e = Gc;
                    break;
                case 180:
                    e = Ec;
                    break;
                default:
                    e = Dc
            }
            var f = a.children, h = f.length;
            switch (b) {
                case Lv:
                case Av:
                    for (b = 0; b < h; b++) {
                        var k = f[b], k = (c ? k.kc : k.hc).first();
                        if (null !== k && (k = k.link, null !== k)) {
                            var l = 90 === d || 270 === d ? Ec : Dc;
                            if (1 === h || b === h - 1 && 1 === h % 2)switch (d) {
                                case 0:
                                    l = Ec;
                                    break;
                                case 90:
                                    l = Dc;
                                    break;
                                case 180:
                                    l = Fc;
                                    break;
                                default:
                                    l = Gc
                            } else 0 === b % 2 && (l = 90 === d || 270 === d ? Fc : Gc);
                            c ? (a.setsPortSpot &&
                            (k.Ab = e), a.setsChildPortSpot && (k.Bb = l)) : (a.setsPortSpot && (k.Ab = l), a.setsChildPortSpot && (k.Bb = e))
                        }
                    }
                    break;
                case Mv:
                    l = 90 === d || 270 === d ? Fc : Gc;
                    for (d = c ? a.hc : a.kc; d.next();)k = d.value.link, null !== k && (c ? (a.setsPortSpot && (k.Ab = e), a.setsChildPortSpot && (k.Bb = l)) : (a.setsPortSpot && (k.Ab = l), a.setsChildPortSpot && (k.Bb = e)));
                    break;
                case Nv:
                    for (l = 90 === d || 270 === d ? Ec : Dc, d = c ? a.hc : a.kc; d.next();)k = d.value.link, null !== k && (c ? (a.setsPortSpot && (k.Ab = e), a.setsChildPortSpot && (k.Bb = l)) : (a.setsPortSpot && (k.Ab = l), a.setsChildPortSpot &&
                    (k.Bb = e)))
            }
        } else if (c = Tv(a), this.Hf === jv)for (e = a.hc; e.next();) {
            if (d = e.value.link, null !== d) {
                if (a.setsPortSpot)if (a.portSpot.Uc())switch (c) {
                    case 0:
                        d.Ab = Fc;
                        break;
                    case 90:
                        d.Ab = Gc;
                        break;
                    case 180:
                        d.Ab = Ec;
                        break;
                    default:
                        d.Ab = Dc
                } else d.Ab = a.portSpot;
                if (a.setsChildPortSpot)if (a.childPortSpot.Uc())switch (c) {
                    case 0:
                        d.Bb = Ec;
                        break;
                    case 90:
                        d.Bb = Dc;
                        break;
                    case 180:
                        d.Bb = Fc;
                        break;
                    default:
                        d.Bb = Gc
                } else d.Bb = a.childPortSpot
            }
        } else for (e = a.kc; e.next();)if (d = e.value.link, null !== d) {
            if (a.setsPortSpot)if (a.portSpot.Uc())switch (c) {
                case 0:
                    d.Bb =
                        Fc;
                    break;
                case 90:
                    d.Bb = Gc;
                    break;
                case 180:
                    d.Bb = Ec;
                    break;
                default:
                    d.Bb = Dc
            } else d.Bb = a.portSpot;
            if (a.setsChildPortSpot)if (a.childPortSpot.Uc())switch (c) {
                case 0:
                    d.Ab = Ec;
                    break;
                case 90:
                    d.Ab = Dc;
                    break;
                case 180:
                    d.Ab = Fc;
                    break;
                default:
                    d.Ab = Gc
            } else d.Ab = a.childPortSpot
        }
    };
    function Tv(a) {
        a = a.angle;
        return 45 >= a ? 0 : 135 >= a ? 90 : 225 >= a ? 180 : 315 >= a ? 270 : 0
    }

    function Wv(a) {
        var b = Tv(a), b = 90 === b || 270 === b, c = a.layerSpacing;
        if (0 < a.layerSpacingParentOverlap)var d = Math.min(1, a.layerSpacingParentOverlap), c = c - (b ? a.height * d : a.width * d);
        c < (b ? -a.height : -a.width) && (c = b ? -a.height : -a.width);
        return c
    }

    function Xv(a) {
        var b = Tv(a), b = 90 === b || 270 === b, c = a.nodeIndent;
        if (0 < a.nodeIndentPastParent)var d = Math.min(1, a.nodeIndentPastParent), c = c + (b ? a.width * d : a.height * d);
        return c = Math.max(0, c)
    }

    w.defineProperty(Y, {BL: "roots"}, function () {
        return this.qd
    }, function (a) {
        this.qd !== a && (w.G(a, J, Y, "roots"), this.qd = a, this.J())
    });
    w.defineProperty(Y, {path: "path"}, function () {
        return this.ys
    }, function (a) {
        this.ys !== a && (w.mb(a, Y, Y, "path"), this.ys = a, this.J())
    });
    w.defineProperty(Y, {NJ: "treeStyle"}, function () {
        return this.pt
    }, function (a) {
        this.kd !== a && (w.mb(a, Y, Y, "treeStyle"), a === kv || a === Dv || a === Ev || a === Cv) && (this.pt = a, this.J())
    });
    w.defineProperty(Y, {yA: "layerStyle"}, function () {
        return this.Sv
    }, function (a) {
        this.kd !== a && (w.mb(a, Y, Y, "layerStyle"), a === lv || a === yv || a === xv) && (this.Sv = a, this.J())
    });
    w.defineProperty(Y, {comments: "comments"}, function () {
        return this.Ih
    }, function (a) {
        this.Ih !== a && (w.j(a, "boolean", Y, "comments"), this.Ih = a, this.J())
    });
    w.defineProperty(Y, {Of: "arrangement"}, function () {
        return this.kd
    }, function (a) {
        this.kd !== a && (w.mb(a, Y, Y, "arrangement"), a === mv || a === Tw || a === pv) && (this.kd = a, this.J())
    });
    w.defineProperty(Y, {iE: "arrangementSpacing"}, function () {
        return this.hg
    }, function (a) {
        w.G(a, ha, Y, "arrangementSpacing");
        this.hg.L(a) || (this.hg.assign(a), this.J())
    });
    w.defineProperty(Y, {AL: "rootDefaults"}, function () {
        return this.ta
    }, function (a) {
        this.ta !== a && (w.G(a, nv, Y, "rootDefaults"), this.ta = a, this.J())
    });
    w.defineProperty(Y, {dK: "alternateDefaults"}, function () {
        return this.ua
    }, function (a) {
        this.ua !== a && (w.G(a, nv, Y, "alternateDefaults"), this.ua = a, this.J())
    });
    w.defineProperty(Y, {sorting: "sorting"}, function () {
        return this.ta.sorting
    }, function (a) {
        this.ta.sorting !== a && (w.mb(a, Y, Y, "sorting"), a === Fv || a === Gv || a === Hv || Iv) && (this.ta.sorting = a, this.J())
    });
    w.defineProperty(Y, {comparer: "comparer"}, function () {
        return this.ta.comparer
    }, function (a) {
        this.ta.comparer !== a && (w.j(a, "function", Y, "comparer"), this.ta.comparer = a, this.J())
    });
    w.defineProperty(Y, {angle: "angle"}, function () {
        return this.ta.angle
    }, function (a) {
        this.ta.angle !== a && (w.j(a, "number", Y, "angle"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.ta.angle = a, this.J()) : w.k("TreeLayout.angle must be 0, 90, 180, or 270"))
    });
    w.defineProperty(Y, {alignment: "alignment"}, function () {
        return this.ta.alignment
    }, function (a) {
        this.ta.alignment !== a && (w.mb(a, Y, Y, "alignment"), this.ta.alignment = a, this.J())
    });
    w.defineProperty(Y, {nodeIndent: "nodeIndent"}, function () {
        return this.ta.nodeIndent
    }, function (a) {
        this.ta.nodeIndent !== a && (w.j(a, "number", Y, "nodeIndent"), 0 <= a && (this.ta.nodeIndent = a, this.J()))
    });
    w.defineProperty(Y, {nodeIndentPastParent: "nodeIndentPastParent"}, function () {
        return this.ta.nodeIndentPastParent
    }, function (a) {
        this.ta.nodeIndentPastParent !== a && (w.j(a, "number", Y, "nodeIndentPastParent"), 0 <= a && 1 >= a && (this.ta.nodeIndentPastParent = a, this.J()))
    });
    w.defineProperty(Y, {nodeSpacing: "nodeSpacing"}, function () {
        return this.ta.nodeSpacing
    }, function (a) {
        this.ta.nodeSpacing !== a && (w.j(a, "number", Y, "nodeSpacing"), this.ta.nodeSpacing = a, this.J())
    });
    w.defineProperty(Y, {layerSpacing: "layerSpacing"}, function () {
        return this.ta.layerSpacing
    }, function (a) {
        this.ta.layerSpacing !== a && (w.j(a, "number", Y, "layerSpacing"), this.ta.layerSpacing = a, this.J())
    });
    w.defineProperty(Y, {layerSpacingParentOverlap: "layerSpacingParentOverlap"}, function () {
        return this.ta.layerSpacingParentOverlap
    }, function (a) {
        this.ta.layerSpacingParentOverlap !== a && (w.j(a, "number", Y, "layerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.ta.layerSpacingParentOverlap = a, this.J()))
    });
    w.defineProperty(Y, {compaction: "compaction"}, function () {
        return this.ta.compaction
    }, function (a) {
        this.ta.compaction !== a && (w.mb(a, Y, Y, "compaction"), a === Qv || a === Sv) && (this.ta.compaction = a, this.J())
    });
    w.defineProperty(Y, {breadthLimit: "breadthLimit"}, function () {
        return this.ta.breadthLimit
    }, function (a) {
        this.ta.breadthLimit !== a && (w.j(a, "number", Y, "breadthLimit"), 0 <= a && (this.ta.breadthLimit = a, this.J()))
    });
    w.defineProperty(Y, {rowSpacing: "rowSpacing"}, function () {
        return this.ta.rowSpacing
    }, function (a) {
        this.ta.rowSpacing !== a && (w.j(a, "number", Y, "rowSpacing"), this.ta.rowSpacing = a, this.J())
    });
    w.defineProperty(Y, {rowIndent: "rowIndent"}, function () {
        return this.ta.rowIndent
    }, function (a) {
        this.ta.rowIndent !== a && (w.j(a, "number", Y, "rowIndent"), 0 <= a && (this.ta.rowIndent = a, this.J()))
    });
    w.defineProperty(Y, {commentSpacing: "commentSpacing"}, function () {
        return this.ta.commentSpacing
    }, function (a) {
        this.ta.commentSpacing !== a && (w.j(a, "number", Y, "commentSpacing"), this.ta.commentSpacing = a, this.J())
    });
    w.defineProperty(Y, {commentMargin: "commentMargin"}, function () {
        return this.ta.commentMargin
    }, function (a) {
        this.ta.commentMargin !== a && (w.j(a, "number", Y, "commentMargin"), this.ta.commentMargin = a, this.J())
    });
    w.defineProperty(Y, {setsPortSpot: "setsPortSpot"}, function () {
        return this.ta.setsPortSpot
    }, function (a) {
        this.ta.setsPortSpot !== a && (w.j(a, "boolean", Y, "setsPortSpot"), this.ta.setsPortSpot = a, this.J())
    });
    w.defineProperty(Y, {portSpot: "portSpot"}, function () {
        return this.ta.portSpot
    }, function (a) {
        w.G(a, L, Y, "portSpot");
        this.ta.portSpot.L(a) || (this.ta.portSpot = a, this.J())
    });
    w.defineProperty(Y, {setsChildPortSpot: "setsChildPortSpot"}, function () {
        return this.ta.setsChildPortSpot
    }, function (a) {
        this.ta.setsChildPortSpot !== a && (w.j(a, "boolean", Y, "setsChildPortSpot"), this.ta.setsChildPortSpot = a, this.J())
    });
    w.defineProperty(Y, {childPortSpot: "childPortSpot"}, function () {
        return this.ta.childPortSpot
    }, function (a) {
        w.G(a, L, Y, "childPortSpot");
        this.ta.childPortSpot.L(a) || (this.ta.childPortSpot = a, this.J())
    });
    w.defineProperty(Y, {oK: "alternateSorting"}, function () {
        return this.ua.sorting
    }, function (a) {
        this.ua.sorting !== a && (w.mb(a, Y, Y, "alternateSorting"), a === Fv || a === Gv || a === Hv || Iv) && (this.ua.sorting = a, this.J())
    });
    w.defineProperty(Y, {cK: "alternateComparer"}, function () {
        return this.ua.comparer
    }, function (a) {
        this.ua.comparer !== a && (w.j(a, "function", Y, "alternateComparer"), this.ua.comparer = a, this.J())
    });
    w.defineProperty(Y, {XJ: "alternateAngle"}, function () {
        return this.ua.angle
    }, function (a) {
        this.ua.angle !== a && (w.j(a, "number", Y, "alternateAngle"), 0 === a || 90 === a || 180 === a || 270 === a) && (this.ua.angle = a, this.J())
    });
    w.defineProperty(Y, {WJ: "alternateAlignment"}, function () {
        return this.ua.alignment
    }, function (a) {
        this.ua.alignment !== a && (w.mb(a, Y, Y, "alternateAlignment"), this.ua.alignment = a, this.J())
    });
    w.defineProperty(Y, {gK: "alternateNodeIndent"}, function () {
        return this.ua.nodeIndent
    }, function (a) {
        this.ua.nodeIndent !== a && (w.j(a, "number", Y, "alternateNodeIndent"), 0 <= a && (this.ua.nodeIndent = a, this.J()))
    });
    w.defineProperty(Y, {hK: "alternateNodeIndentPastParent"}, function () {
        return this.ua.nodeIndentPastParent
    }, function (a) {
        this.ua.nodeIndentPastParent !== a && (w.j(a, "number", Y, "alternateNodeIndentPastParent"), 0 <= a && 1 >= a && (this.ua.nodeIndentPastParent = a, this.J()))
    });
    w.defineProperty(Y, {iK: "alternateNodeSpacing"}, function () {
        return this.ua.nodeSpacing
    }, function (a) {
        this.ua.nodeSpacing !== a && (w.j(a, "number", Y, "alternateNodeSpacing"), this.ua.nodeSpacing = a, this.J())
    });
    w.defineProperty(Y, {eK: "alternateLayerSpacing"}, function () {
        return this.ua.layerSpacing
    }, function (a) {
        this.ua.layerSpacing !== a && (w.j(a, "number", Y, "alternateLayerSpacing"), this.ua.layerSpacing = a, this.J())
    });
    w.defineProperty(Y, {fK: "alternateLayerSpacingParentOverlap"}, function () {
        return this.ua.layerSpacingParentOverlap
    }, function (a) {
        this.ua.layerSpacingParentOverlap !== a && (w.j(a, "number", Y, "alternateLayerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.ua.layerSpacingParentOverlap = a, this.J()))
    });
    w.defineProperty(Y, {bK: "alternateCompaction"}, function () {
        return this.ua.compaction
    }, function (a) {
        this.ua.compaction !== a && (w.mb(a, Y, Y, "alternateCompaction"), a === Qv || a === Sv) && (this.ua.compaction = a, this.J())
    });
    w.defineProperty(Y, {YJ: "alternateBreadthLimit"}, function () {
        return this.ua.breadthLimit
    }, function (a) {
        this.ua.breadthLimit !== a && (w.j(a, "number", Y, "alternateBreadthLimit"), 0 <= a && (this.ua.breadthLimit = a, this.J()))
    });
    w.defineProperty(Y, {lK: "alternateRowSpacing"}, function () {
        return this.ua.rowSpacing
    }, function (a) {
        this.ua.rowSpacing !== a && (w.j(a, "number", Y, "alternateRowSpacing"), this.ua.rowSpacing = a, this.J())
    });
    w.defineProperty(Y, {kK: "alternateRowIndent"}, function () {
        return this.ua.rowIndent
    }, function (a) {
        this.ua.rowIndent !== a && (w.j(a, "number", Y, "alternateRowIndent"), 0 <= a && (this.ua.rowIndent = a, this.J()))
    });
    w.defineProperty(Y, {aK: "alternateCommentSpacing"}, function () {
        return this.ua.commentSpacing
    }, function (a) {
        this.ua.commentSpacing !== a && (w.j(a, "number", Y, "alternateCommentSpacing"), this.ua.commentSpacing = a, this.J())
    });
    w.defineProperty(Y, {$J: "alternateCommentMargin"}, function () {
        return this.ua.commentMargin
    }, function (a) {
        this.ua.commentMargin !== a && (w.j(a, "number", Y, "alternateCommentMargin"), this.ua.commentMargin = a, this.J())
    });
    w.defineProperty(Y, {nK: "alternateSetsPortSpot"}, function () {
        return this.ua.setsPortSpot
    }, function (a) {
        this.ua.setsPortSpot !== a && (w.j(a, "boolean", Y, "alternateSetsPortSpot"), this.ua.setsPortSpot = a, this.J())
    });
    w.defineProperty(Y, {jK: "alternatePortSpot"}, function () {
        return this.ua.portSpot
    }, function (a) {
        w.G(a, L, Y, "alternatePortSpot");
        this.ua.portSpot.L(a) || (this.ua.portSpot = a, this.J())
    });
    w.defineProperty(Y, {mK: "alternateSetsChildPortSpot"}, function () {
        return this.ua.setsChildPortSpot
    }, function (a) {
        this.ua.setsChildPortSpot !== a && (w.j(a, "boolean", Y, "alternateSetsChildPortSpot"), this.ua.setsChildPortSpot = a, this.J())
    });
    w.defineProperty(Y, {ZJ: "alternateChildPortSpot"}, function () {
        return this.ua.childPortSpot
    }, function (a) {
        w.G(a, L, Y, "alternateChildPortSpot");
        this.ua.childPortSpot.L(a) || (this.ua.childPortSpot = a, this.J())
    });
    var iv;
    Y.PathDefault = iv = w.p(Y, "PathDefault", -1);
    var jv;
    Y.PathDestination = jv = w.p(Y, "PathDestination", 0);
    var qv;
    Y.PathSource = qv = w.p(Y, "PathSource", 1);
    var Fv;
    Y.SortingForwards = Fv = w.p(Y, "SortingForwards", 10);
    var Gv;
    Y.SortingReverse = Gv = w.p(Y, "SortingReverse", 11);
    var Hv;
    Y.SortingAscending = Hv = w.p(Y, "SortingAscending", 12);
    var Iv;
    Y.SortingDescending = Iv = w.p(Y, "SortingDescending", 13);
    var Kw;
    Y.AlignmentCenterSubtrees = Kw = w.p(Y, "AlignmentCenterSubtrees", 20);
    var Jv;
    Y.AlignmentCenterChildren = Jv = w.p(Y, "AlignmentCenterChildren", 21);
    var Uv;
    Y.AlignmentStart = Uv = w.p(Y, "AlignmentStart", 22);
    var Vv;
    Y.AlignmentEnd = Vv = w.p(Y, "AlignmentEnd", 23);
    var Lv;
    Y.AlignmentBus = Lv = w.p(Y, "AlignmentBus", 24);
    var Av;
    Y.AlignmentBusBranching = Av = w.p(Y, "AlignmentBusBranching", 25);
    var Mv;
    Y.AlignmentTopLeftBus = Mv = w.p(Y, "AlignmentTopLeftBus", 26);
    var Nv;
    Y.AlignmentBottomRightBus = Nv = w.p(Y, "AlignmentBottomRightBus", 27);
    var Qv;
    Y.CompactionNone = Qv = w.p(Y, "CompactionNone", 30);
    var Sv;
    Y.CompactionBlock = Sv = w.p(Y, "CompactionBlock", 31);
    var kv;
    Y.StyleLayered = kv = w.p(Y, "StyleLayered", 40);
    var Ev;
    Y.StyleLastParents = Ev = w.p(Y, "StyleLastParents", 41);
    var Dv;
    Y.StyleAlternating = Dv = w.p(Y, "StyleAlternating", 42);
    var Cv;
    Y.StyleRootOnly = Cv = w.p(Y, "StyleRootOnly", 43);
    var mv;
    Y.ArrangementVertical = mv = w.p(Y, "ArrangementVertical", 50);
    var Tw;
    Y.ArrangementHorizontal = Tw = w.p(Y, "ArrangementHorizontal", 51);
    var pv;
    Y.ArrangementFixedRoots = pv = w.p(Y, "ArrangementFixedRoots", 52);
    var lv;
    Y.LayerIndividual = lv = w.p(Y, "LayerIndividual", 60);
    var yv;
    Y.LayerSiblings = yv = w.p(Y, "LayerSiblings", 61);
    var xv;
    Y.LayerUniform = xv = w.p(Y, "LayerUniform", 62);
    function ov() {
        qg.call(this)
    }

    w.La(ov, qg);
    w.fa("TreeNetwork", ov);
    ov.prototype.createVertex = function () {
        return new nv
    };
    ov.prototype.createEdge = function () {
        return new Vw
    };
    function nv() {
        ks.call(this);
        this.initialized = !1;
        this.parent = null;
        this.children = [];
        this.maxGenerationCount = this.maxChildrenCount = this.descendantCount = this.level = 0;
        this.comments = null;
        this.pa = new z(0, 0);
        this.ib = new ha(0, 0);
        this.Oa = new z(0, 0);
        this.pq = this.oq = this.qJ = !1;
        this.Bu = this.gu = null;
        this.sorting = Fv;
        this.comparer = qs;
        this.angle = 0;
        this.alignment = Jv;
        this.nodeIndentPastParent = this.nodeIndent = 0;
        this.nodeSpacing = 20;
        this.layerSpacing = 50;
        this.layerSpacingParentOverlap = 0;
        this.compaction = Sv;
        this.breadthLimit =
            0;
        this.rowSpacing = 25;
        this.commentSpacing = this.rowIndent = 10;
        this.commentMargin = 20;
        this.setsPortSpot = !0;
        this.portSpot = oc;
        this.setsChildPortSpot = !0;
        this.childPortSpot = oc
    }

    w.La(nv, ks);
    w.fa("TreeVertex", nv);
    nv.prototype.copyInheritedPropertiesFrom = function (a) {
        null !== a && (this.sorting = a.sorting, this.comparer = a.comparer, this.angle = a.angle, this.alignment = a.alignment, this.nodeIndent = a.nodeIndent, this.nodeIndentPastParent = a.nodeIndentPastParent, this.nodeSpacing = a.nodeSpacing, this.layerSpacing = a.layerSpacing, this.layerSpacingParentOverlap = a.layerSpacingParentOverlap, this.compaction = a.compaction, this.breadthLimit = a.breadthLimit, this.rowSpacing = a.rowSpacing, this.rowIndent = a.rowIndent, this.commentSpacing = a.commentSpacing,
            this.commentMargin = a.commentMargin, this.setsPortSpot = a.setsPortSpot, this.portSpot = a.portSpot, this.setsChildPortSpot = a.setsChildPortSpot, this.childPortSpot = a.childPortSpot)
    };
    w.u(nv, {mn: "childrenCount"}, function () {
        return this.children.length
    });
    w.defineProperty(nv, {zL: "relativePosition"}, function () {
        return this.pa
    }, function (a) {
        this.pa.set(a)
    });
    w.defineProperty(nv, {ML: "subtreeSize"}, function () {
        return this.ib
    }, function (a) {
        this.ib.set(a)
    });
    w.defineProperty(nv, {LL: "subtreeOffset"}, function () {
        return this.Oa
    }, function (a) {
        this.Oa.set(a)
    });
    function Vw() {
        ls.call(this);
        this.Fs = new z(0, 0)
    }

    w.La(Vw, ls);
    w.fa("TreeEdge", Vw);
    Vw.prototype.commit = function () {
        var a = this.link;
        if (null !== a && !a.Dk) {
            var b = this.network.Rb, c = null, d = null;
            switch (b.Hf) {
                case jv:
                    c = this.fromVertex;
                    d = this.toVertex;
                    break;
                case qv:
                    c = this.toVertex;
                    d = this.fromVertex;
                    break;
                default:
                    w.k("Unhandled path value " + b.Hf.toString())
            }
            if (null !== c && null !== d)if (b = this.Fs, 0 !== b.x || 0 !== b.y || c.qJ) {
                var d = c.jb, e = Tv(c), f = Wv(c), h = c.rowSpacing;
                a.ao();
                var k = a.Ye === sj, l = a.ic, m = 0, n, p;
                a.fm();
                if (l || k) {
                    for (m = 2; 4 < a.qa;)a.NF(2);
                    n = a.m(1);
                    p = a.m(2)
                } else {
                    for (m = 1; 3 < a.qa;)a.NF(1);
                    n = a.m(0);
                    p =
                        a.m(a.qa - 1)
                }
                var q = a.m(a.qa - 1), r = 0;
                0 === e ? (c.alignment === Vv ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - Xv(c))))) : c.alignment === Uv ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + Xv(c))))) : r = c.oq || c.pq && 1 === c.maxGenerationCount ? d.top - c.Oa.y + b.y : d.y + d.height / 2 + b.y, k ? (a.w(m, n.x, r), m++, a.w(m, d.right + f, r), m++, a.w(m, d.right + f + (b.x - h) / 3, r), m++, a.w(m, d.right + f + 2 * (b.x - h) / 3, r), m++, a.w(m, d.right + f + (b.x - h), r), m++, a.w(m, p.x, r)) : (l && (a.w(m, d.right + f / 2, n.y),
                    m++), a.w(m, d.right + f / 2, r), m++, a.w(m, d.right + f + b.x - (l ? h / 2 : h), r), m++, l && a.w(m, a.m(m - 1).x, p.y))) : 90 === e ? (c.alignment === Vv ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - Xv(c))))) : c.alignment === Uv ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + Xv(c))))) : r = c.oq || c.pq && 1 === c.maxGenerationCount ? d.left - c.Oa.x + b.x : d.x + d.width / 2 + b.x, k ? (a.w(m, r, n.y), m++, a.w(m, r, d.bottom + f), m++, a.w(m, r, d.bottom + f + (b.y - h) / 3), m++, a.w(m, r, d.bottom + f + 2 * (b.y - h) / 3), m++, a.w(m, r, d.bottom +
                    f + (b.y - h)), m++, a.w(m, r, p.y)) : (l && (a.w(m, n.x, d.bottom + f / 2), m++), a.w(m, r, d.bottom + f / 2), m++, a.w(m, r, d.bottom + f + b.y - (l ? h / 2 : h)), m++, l && a.w(m, p.x, a.m(m - 1).y))) : 180 === e ? (c.alignment === Vv ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - Xv(c))))) : c.alignment === Uv ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + Xv(c))))) : r = c.oq || c.pq && 1 === c.maxGenerationCount ? d.top - c.Oa.y + b.y : d.y + d.height / 2 + b.y, k ? (a.w(m, n.x, r), m++, a.w(m, d.left - f, r), m++, a.w(m, d.left - f + (b.x +
                    h) / 3, r), m++, a.w(m, d.left - f + 2 * (b.x + h) / 3, r), m++, a.w(m, d.left - f + (b.x + h), r), m++, a.w(m, p.x, r)) : (l && (a.w(m, d.left - f / 2, n.y), m++), a.w(m, d.left - f / 2, r), m++, a.w(m, d.left - f + b.x + (l ? h / 2 : h), r), m++, l && a.w(m, a.m(m - 1).x, p.y))) : 270 === e ? (c.alignment === Vv ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - Xv(c))))) : c.alignment === Uv ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + Xv(c))))) : r = c.oq || c.pq && 1 === c.maxGenerationCount ? d.left - c.Oa.x + b.x : d.x + d.width / 2 + b.x, k ? (a.w(m,
                    r, n.y), m++, a.w(m, r, d.top - f), m++, a.w(m, r, d.top - f + (b.y + h) / 3), m++, a.w(m, r, d.top - f + 2 * (b.y + h) / 3), m++, a.w(m, r, d.top - f + (b.y + h)), m++, a.w(m, r, p.y)) : (l && (a.w(m, n.x, d.top - f / 2), m++), a.w(m, r, d.top - f / 2), m++, a.w(m, r, d.top - f + b.y + (l ? h / 2 : h)), m++, l && a.w(m, p.x, a.m(m - 1).y))) : w.k("Invalid angle " + e);
                a.ij()
            } else e = c, f = d, a = this.link, c = Tv(e), c !== Tv(f) && (b = Wv(e), d = e.jb, e = f.jb, 0 === c && e.left - d.right < b + 1 || 90 === c && e.top - d.bottom < b + 1 || 180 === c && d.left - e.right < b + 1 || 270 === c && d.top - e.bottom < b + 1 || (a.ao(), e = a.Ye === sj, f = a.ic, h = Kv(this.fromVertex.alignment),
                a.fm(), 0 === c ? (c = d.right + b / 2, e ? 4 === a.qa && (b = a.m(3).y, a.ea(1, c - 20, a.m(1).y), a.w(2, c - 20, b), a.w(3, c, b), a.w(4, c + 20, b), a.ea(5, a.m(5).x, b)) : f ? h ? a.ea(3, a.m(2).x, a.m(4).y) : 6 === a.qa && (a.ea(2, c, a.m(2).y), a.ea(3, c, a.m(3).y)) : 4 === a.qa ? a.w(2, c, a.m(2).y) : 3 === a.qa ? a.ea(1, c, a.m(2).y) : 2 === a.qa && a.w(1, c, a.m(1).y)) : 90 === c ? (b = d.bottom + b / 2, e ? 4 === a.qa && (c = a.m(3).x, a.ea(1, a.m(1).x, b - 20), a.w(2, c, b - 20), a.w(3, c, b), a.w(4, c, b + 20), a.ea(5, c, a.m(5).y)) : f ? h ? a.ea(3, a.m(2).x, a.m(4).y) : 6 === a.qa && (a.ea(2, a.m(2).x, b), a.ea(3, a.m(3).x,
                b)) : 4 === a.qa ? a.w(2, a.m(2).x, b) : 3 === a.qa ? a.ea(1, a.m(2).x, b) : 2 === a.qa && a.w(1, a.m(1).x, b)) : 180 === c ? (c = d.left - b / 2, e ? 4 === a.qa && (b = a.m(3).y, a.ea(1, c + 20, a.m(1).y), a.w(2, c + 20, b), a.w(3, c, b), a.w(4, c - 20, b), a.ea(5, a.m(5).x, b)) : f ? h ? a.ea(3, a.m(2).x, a.m(4).y) : 6 === a.qa && (a.ea(2, c, a.m(2).y), a.ea(3, c, a.m(3).y)) : 4 === a.qa ? a.w(2, c, a.m(2).y) : 3 === a.qa ? a.ea(1, c, a.m(2).y) : 2 === a.qa && a.w(1, c, a.m(1).y)) : 270 === c && (b = d.top - b / 2, e ? 4 === a.qa && (c = a.m(3).x, a.ea(1, a.m(1).x, b + 20), a.w(2, c, b + 20), a.w(3, c, b), a.w(4, c, b - 20), a.ea(5, c, a.m(5).y)) :
                f ? h ? a.ea(3, a.m(2).x, a.m(4).y) : 6 === a.qa && (a.ea(2, a.m(2).x, b), a.ea(3, a.m(3).x, b)) : 4 === a.qa ? a.w(2, a.m(2).x, b) : 3 === a.qa ? a.ea(1, a.m(2).x, b) : 2 === a.qa && a.w(1, a.m(1).x, b)), a.ij()))
        }
    };
    w.defineProperty(Vw, {yL: "relativePoint"}, function () {
        return this.Fs
    }, function (a) {
        this.Fs.set(a)
    });
    function Ww() {
        G.call(this);
        this.Se = null
    }

    w.La(Ww, G);
    Ww.prototype.cloneProtected = function (a) {
        G.prototype.cloneProtected.call(this, a);
        a.element = this.Se.cloneNode(!0)
    };
    Ww.prototype.toString = function () {
        return "HTMLHost(" + this.Se.toString() + ")#" + w.Jd(this)
    };
    Ww.prototype.xk = function (a, b) {
        var c = this.Se;
        if (null !== c) {
            var d = this.Wa(Fb);
            d.x -= this.Y.width / 2;
            d.y -= this.Y.height / 2;
            d.x -= this.Y.x;
            d.y -= this.Y.y;
            var d = b.rG(d), e = b.lj;
            null === e || e.contains(c) || e.appendChild(c);
            e = this.transform;
            c.style.transform = "matrix(" + e.m11 + "," + e.m12 + "," + e.m21 + "," + e.m22 + "," + e.dx + "," + e.dy + ")";
            c.style.transformOrigin = "0 0";
            e = d.y;
            c.style.left = d.x + "px";
            c.style.top = e + "px"
        }
    };
    Ww.prototype.Ln = function (a, b, c, d) {
        var e = this.Aa;
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        var e = this.Af, f = this.zh;
        c = Math.max(c, f.width);
        d = Math.max(d, f.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        c = this.Se;
        null !== c && (b = c.getBoundingClientRect(), a = b.width, b = b.height);
        Pa(this.Sc, a, b);
        yo(this, 0, 0, a, b)
    };
    Ww.prototype.hj = function (a, b, c, d) {
        Do(this, a, b, c, d)
    };
    w.u(Ww, {Ia: "naturalBounds"}, function () {
        return this.Sc
    });
    w.defineProperty(Ww, {element: "element"}, function () {
        return this.Se
    }, function (a) {
        var b = this.Se;
        b !== a && (a instanceof HTMLElement || w.k("HTMLHost.element must be an instance of Element."), this.Se = a, a.className = "HTMLHost", this.h("element", b, a), this.na())
    });
    da.version = "1.7.7";
    window && (window.module && "object" === typeof window.module && "object" === typeof window.module.exports ? window.module.exports = da : window.define && "function" === typeof window.define && window.define.amd ? (window.go = da, window.define(da)) : window.go = da);
    "undefined" !== typeof module && "object" === typeof module.exports && (module.exports = da);
})(window);
